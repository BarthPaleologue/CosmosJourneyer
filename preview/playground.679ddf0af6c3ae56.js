/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

(()=>{"use strict";var e,t,r,n,a,o,i={43056(e,t,r){e.exports=r.p+"ceb0939a515e507b.webp"},66913(e,t,r){e.exports=r.p+"a818b763cab42c30.webp"},74520(e,t,r){e.exports=r.p+"2470ffe0b50b2171.webp"},28248(e,t,r){r.d(t,{nc:()=>u,pX:()=>v});var n,a,o=r(76075),i=r(60251),s=r(90584),l=r(58934),c=r(8330),u={STELLAR_OBJECT:0,PLANETARY_MASS_OBJECT:1,ANOMALY:2,ORBITAL_FACILITY:3},f=o.Ikc({objectType:o.k5n(u),objectIndex:o.aig()}),d=o.Ikc((n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},f.shape),a=a={starSystemCoordinates:s.Y},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))}),n)),p={WANDERER:0},h=o.Ikc({currentFuel:o.aig(),maxFuel:o.aig()}),m=o.Ikc({fuelPerSecond:o.aig().default(1)}),b=o.Ikc({id:o.uRe().default(function(){return crypto.randomUUID()}),name:o.YjP().default("Wanderer"),type:o.k5n(p).default(p.WANDERER),fuelTanks:o.YOg(h).default([{currentFuel:100,maxFuel:100}]),fuelScoop:o.mee(m).nullable().default({fuelPerSecond:2.5})}),y=o.Ikc({objectId:d,discoveryTimestamp:o.aig().default(0),explorerName:o.YjP().default("Unknown")}),g=o.Ikc({version:o.YjP().default(c.rE),timestamp:o.aig().default(function(){return Date.now()}),player:o.Ikc({uuid:o.YjP().default(function(){return crypto.randomUUID()}),name:o.YjP().default("Python"),balance:o.aig().default(1e4),creationDate:o.YjP().default(new Date().toISOString()),timePlayedSeconds:o.aig().default(0),visitedSystemHistory:o.YOg(s.Y).default([]),discoveries:o.Ikc({local:o.YOg(y).default([]),uploaded:o.YOg(y).default([])}).default({local:[],uploaded:[]}),currentItinerary:o.YOg(s.Y).default([]),systemBookmarks:o.YOg(s.Y).default([]),currentMissions:o.YOg(o.L5J()).default([]),completedMissions:o.YOg(o.L5J()).default([]),spaceShips:o.YOg(b).default([b.parse({})]),tutorials:i.wk.default({flightCompleted:!1,stationLandingCompleted:!1,starMapCompleted:!1,fuelScoopingCompleted:!1})}),universeCoordinates:o.Ikc({universeObjectId:o.Ikc({objectType:o.k5n(u),objectIndex:o.aig(),starSystemCoordinates:s.Y}),positionX:o.aig().default(0),positionY:o.aig().default(0),positionZ:o.aig().default(0),rotationQuaternionX:o.aig().default(0),rotationQuaternionY:o.aig().default(0),rotationQuaternionZ:o.aig().default(0),rotationQuaternionW:o.aig().default(1)}),padNumber:o.aig().optional()});function v(e){var t=g.safeParse(e);return t.success?(0,l.ok)(t.data):(0,l._q)({type:"INVALID_SAVE",content:t.error})}},67556(e,t,r){r.d(t,{QU:()=>d});var n=r(67902),a=r(29743),o=r(52628),i=(0,a.p)(o.w.POWER_PLAY_SEED),s=0,l=(0,n.makeNoise3D)(function(){return i(s++)}),c=(0,a.p)(o.w.POWER_PLAY_SEED+598),u=0,f=(0,n.makeNoise3D)(function(){return c(u++)});function d(e){var t,r;return{materialistSpiritualist:(t=e.x,.5*l(.2*t,.2*e.y,.2*e.z)+.5),capitalistCommunist:(r=e.x,.5*f(.2*r,.2*e.y,.2*e.z)+.5)}}},66403(e,t,r){r.d(t,{Eq:()=>u,oC:()=>c});var n=r(76075),a=r(17686),o=r(25650),i=r(7126),s=r(4258),l=n.Ikc({id:n.uRe(),name:n.YjP(),components:n.Ikc({primary:n.Ikc({warpDrive:s.i,thrusters:i.Y,fuelTank:a.a}),optional:n.YOg(o.B)})}).extend({type:n.euz("WANDERER"),components:n.Ikc({primary:n.Ikc({warpDrive:s.i.nullable(),thrusters:i.Y.nullable(),fuelTank:a.a.nullable()}),optional:n.PVZ([o.B.nullable(),o.B.nullable(),o.B.nullable()])})});n.gMt("type",[l]);var c=n.gMt("type",[l]);function u(){return l.parse({type:"WANDERER",name:"Wanderer",id:crypto.randomUUID(),components:{primary:{warpDrive:{type:"warpDrive",size:3,quality:1},thrusters:{type:"thrusters",size:3,quality:1},fuelTank:{type:"fuelTank",size:2,quality:1,currentFuel01:1}},optional:[null,{type:"fuelScoop",size:2,quality:1},{type:"discoveryScanner",size:2,quality:1}]}})}},44175(e,t,r){function n(e,t){var r=[];if(e.children.forEach(function(e,n){if("x"!==n&&"y"!==n){var a,o,i=e.name;i=i.replace("key:",""),i=null!=(o=null==t||null==(a=t.get(i))?void 0:a.toUpperCase())?o:i,r.push([n,i])}}),void 0===r[0]||void 0===r[1]||void 0===r[2]||void 0===r[3])throw Error("DPadComposite keys are undefined");return[r[2],r[0],r[3],r[1]]}function a(e,t){var r=[];return e.children.forEach(function(e,n){var a,o,i=e.name;i=i.replace("key:",""),i=null!=(o=null==t||null==(a=t.get(i))?void 0:a.toUpperCase())?o:i,r.push([n,i])}),r}function o(e,t){return e.action.bindings.map(function(e){var r,n,a,o;return r=e.control,o=(o=r.name).replace("key:",""),o=null!=(a=null==t||null==(n=t.get(o))?void 0:n.toUpperCase())?a:o})}r.d(t,{Fd:()=>n,Lc:()=>a,hg:()=>o})},61800(e,t,r){r.d(t,{Ez:()=>o}),r(39058);var n=r(70134),a=r(39044);function o(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=function(e,t){var r=-1,n=t[0];if(void 0===n)throw Error("no bodieees !");var a=!0,o=!1,i=void 0;try{for(var s,l=t[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value,u=e.subtract(c.getTransform().getAbsolutePosition()).length();(-1===r||u<r)&&(n=c,r=u)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return n}(t.getTransform().getAbsolutePosition(),r.getStellarObjects());if(i===t)e.getTransform().setAbsolutePosition(t.getTransform().getAbsolutePosition().add(new n.Pq(0,.2,1).scaleInPlace(t.getBoundingRadius()*o)));else{var s=t.getTransform().getAbsolutePosition().subtract(i.getTransform().getAbsolutePosition()),l=s.length();s.scaleInPlace(1/l);var c=i.getTransform().getAbsolutePosition().add(s.scale(l-o*t.getBoundingRadius()));e.getTransform().setAbsolutePosition(c)}(0,a.t5)(e.getTransform(),t.getTransform().getAbsolutePosition(),e.getTransform().getScene().useRightHandedSystem)}},39044(e,t,r){r.d(t,{CL:()=>f,H7:()=>d,Pf:()=>u,Tl:()=>i,e$:()=>s,hQ:()=>l,oh:()=>p,rD:()=>c,t5:()=>o});var n=r(59624),a=r(70134);function o(e,t,r){e.lookAt(t),r&&e.rotate(n._0.Y,Math.PI)}function i(e,t){e.setAbsolutePosition(e.getAbsolutePosition().add(t)),e.computeWorldMatrix(!0)}function s(e,t,r){e.rotate(t,r,n.$x.WORLD)}function l(e){if(null===e.rotationQuaternion)throw Error("Null quaternion for ".concat(e.name));return e.rotationQuaternion}function c(e,t){e.rotationQuaternion=t,e.computeWorldMatrix(!0)}function u(e,t){if(!t.equalsWithEpsilon(e.up,1e-7)){var r=e.up;s(e,a.Pq.Cross(t,r),-Math.acos(a.Pq.Dot(t,r)))}}function f(e,t){s(e,e.forward,t)}function d(e,t){s(e,e.right,t)}function p(e,t){s(e,e.up,t)}},55338(e,t,r){r.d(t,{Q:()=>a});var n=r(42917);function a(e,t){var r=document.createElement("dialog");return r.innerHTML='\n        <form method="dialog">\n            <p>'.concat(e,'</p>\n            <menu>\n                <button value="cancel">').concat(n.A.t("common:cancel"),'</button>\n                <button value="ok">').concat(n.A.t("common:confirm"),"</button>\n            </menu>\n        </form>\n    "),document.body.appendChild(r),r.showModal(),new Promise(function(e){r.addEventListener("close",function(){t.playNow("click"),e("ok"===r.returnValue),r.remove()})})}},80821(e,t,r){r.d(t,{T:()=>a});var n=r(42917);function a(e,t,r){var a=document.createElement("dialog");return a.innerHTML='\n        <form method="dialog">\n            <p>'.concat(e,'</p>\n            <input type="text" value="').concat(t,'">\n            <menu>\n                <button type="reset" value="cancel">').concat(n.A.t("common:cancel"),'</button>\n                <button type="submit" value="ok">').concat(n.A.t("common:ok"),"</button>\n            </menu>\n        </form>\n    "),document.body.appendChild(a),a.showModal(),new Promise(function(e){var t=a.querySelector("input");t.focus(),t.select(),t.addEventListener("keydown",function(e){e.stopPropagation()}),a.addEventListener("reset",function(){r.playNow("click"),e(null),a.remove()}),a.addEventListener("close",function(){r.playNow("click"),"ok"===a.returnValue?e(t.value):e(null),a.remove()})})}},32634(e,t,r){r.d(t,{e:()=>o});var n=r(52628);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r,o){var i=e[0];if(void 0===i)return Promise.resolve(null);var s=new Promise(function(e){H=e}),l=document.createElement("div");l.style.position="fixed",l.style.inset="0",l.style.display="flex",l.style.alignItems="center",l.style.justifyContent="center",l.style.background="rgba(0, 0, 0, 0.2)",l.style.zIndex="1000",l.style.pointerEvents="auto",l.tabIndex=-1;var c=null!=(F=null==o?void 0:o.useVirtualCursor)?F:null!==document.pointerLockElement;l.style.cursor=c?"none":"default";var u=function(e,t,r){return Math.min(Math.max(e,t),r)},f="http://www.w3.org/2000/svg",d=getComputedStyle(document.documentElement).getPropertyValue("--accent-color-dark").trim(),p=2*Math.PI/e.length,h=-Math.PI/2,m="radial-choice-".concat(Math.random().toString(36).slice(2)),b=getComputedStyle(document.documentElement).getPropertyValue("--accent-color").trim(),y=getComputedStyle(document.documentElement).getPropertyValue("--accent-color-light").trim(),g=document.createElement("div");g.style.position="relative",g.style.width="".concat(500,"px"),g.style.height="".concat(500,"px"),g.style.borderRadius="50%",g.style.boxShadow="0 0 25px rgba(0, 0, 0, 0.6)",g.style.display="flex",g.style.alignItems="center",g.style.justifyContent="center",l.appendChild(g);var v=document.createElementNS(f,"svg");v.setAttribute("viewBox","0 0 ".concat(500," ").concat(500)),v.style.width="100%",v.style.height="100%",v.style.position="absolute",v.style.inset="0",g.appendChild(v);var w=document.createElementNS(f,"defs");v.appendChild(w);var P=document.createElement("div");P.style.color="white",P.style.fontFamily=n.w.MAIN_FONT,P.style.fontSize="2em",P.style.textAlign="center",P.style.pointerEvents="none",P.style.maxWidth="60%",P.style.zIndex="2",g.appendChild(P);var S=[],C=0,T=function(t){var r;return null!=(r=e[t])?r:i},R=function(e,t){var r=g.getBoundingClientRect();return{x:e-(r.left+r.width/2),y:t-(r.top+r.height/2)}},x=function(r){C=(r+e.length)%e.length,S.forEach(function(e,t){var r=e.path,n=e.label,a=t===C;r.style.fill=a?y:b,n.style.color="white",n.style.textShadow=a?"0 0 8px rgba(255, 255, 255, 0.6)":"none"}),P.textContent=t(T(C))},A=function(e,t){var r=R(e,t),n=r.x,a=r.y,o=C,i=1/0;S.forEach(function(e,t){var r=e.center,s=n-r.x,l=a-r.y,c=s*s+l*l;c<i&&(i=c,o=t)}),o!==C&&x(o)},O=function(){l.removeEventListener("keydown",I),l.removeEventListener("click",M),l.removeEventListener("mousemove",L),c&&J(),l.isConnected&&l.remove()},E=!1,k=function(e){E||(E=!0,O(),r.playNow("click"),H(e))},M=function(){k(T(C))},I=function(e){e.stopPropagation(),"Escape"===e.key&&(e.preventDefault(),k(null))},L=function(e){A(e.clientX,e.clientY)},D=function(e,t){return{x:250+Math.cos(e)*t,y:250+Math.sin(e)*t}},j=function(e,t){var r=D(e,247),n=D(t,247),a=D(t,137),o=D(e,137),i=t-e<=Math.PI?"0":"1";return["M ".concat(r.x," ").concat(r.y),"A ".concat(247," ").concat(247," 0 ").concat(i," 1 ").concat(n.x," ").concat(n.y),"L ".concat(a.x," ").concat(a.y),"A ".concat(137," ").concat(137," 0 ").concat(i," 0 ").concat(o.x," ").concat(o.y),"Z"].join(" ")},_=!0,B=!1,N=void 0;try{for(var H,F,V,U=e.entries()[Symbol.iterator]();!(_=(V=U.next()).done);_=!0)!function(){var e,r=(e=V.value,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,s=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),2!==o.length);i=!0);}catch(e){s=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1],s=h+p*o,l=s+0,c=s+p-0,u=(l+c)/2,d=document.createElementNS(f,"g");d.style.cursor="pointer";var y=document.createElementNS(f,"clipPath"),g=document.createElementNS(f,"path"),P="".concat(m,"-").concat(o);y.id=P,y.setAttribute("clipPathUnits","userSpaceOnUse"),g.setAttribute("d",j(l,c)),y.appendChild(g),w.appendChild(y);var C=document.createElementNS(f,"path");C.setAttribute("d",j(l,c)),C.setAttribute("clip-path","url(#".concat(P,")")),C.style.fill=b,C.style.transition="fill 0.12s ease, filter 0.12s ease";var T=D(u,192),R=192*(c-l),A=Math.max(Math.min(.75*R,160),70),O=document.createElementNS(f,"foreignObject");O.setAttribute("x",(T.x-A/2).toString()),O.setAttribute("y",(T.y-35).toString()),O.setAttribute("width",A.toString()),O.setAttribute("height","70"),O.style.pointerEvents="none";var E=document.createElement("div");E.textContent=t(i),E.style.fontFamily=n.w.MAIN_FONT,E.style.fontSize="20px",E.style.lineHeight="1.25",E.style.color="rgba(35, 35, 35, 0.85)",E.style.fontWeight="400",E.style.display="flex",E.style.alignItems="center",E.style.justifyContent="center",E.style.textAlign="center",E.style.width="100%",E.style.height="100%",E.style.boxSizing="border-box",E.style.padding="6px 10px",E.style.wordBreak="break-word",E.style.overflowWrap="anywhere",E.style.pointerEvents="none",O.appendChild(E),d.appendChild(C),d.appendChild(O),d.addEventListener("mouseenter",function(){x(o)}),d.addEventListener("click",function(e){e.stopPropagation(),k(i)}),S.push({path:C,label:E,center:{x:192*Math.cos(u),y:192*Math.sin(u)}}),v.appendChild(d)}()}catch(e){B=!0,N=e}finally{try{_||null==U.return||U.return()}finally{if(B)throw N}}var Z=document.createElementNS(f,"g");Z.style.pointerEvents="none";var q=document.createElementNS(f,"circle");q.setAttribute("cx","250"),q.setAttribute("cy","250"),q.setAttribute("r","247"),q.style.fill="none",q.style.stroke=d,q.style.strokeWidth="6",q.style.strokeLinejoin="round",Z.appendChild(q);var z=document.createElementNS(f,"circle");z.setAttribute("cx","250"),z.setAttribute("cy","250"),z.setAttribute("r","137"),z.style.fill="none",z.style.stroke=d,z.style.strokeWidth="6",z.style.strokeLinejoin="round",Z.appendChild(z);for(var G=0;G<e.length;G+=1){var Y=h+p*G+0,W=D(Y,247),Q=D(Y,137),X=document.createElementNS(f,"line");X.setAttribute("x1",W.x.toString()),X.setAttribute("y1",W.y.toString()),X.setAttribute("x2",Q.x.toString()),X.setAttribute("y2",Q.y.toString()),X.style.stroke=d,X.style.strokeWidth="6",X.style.strokeLinecap="round",Z.appendChild(X)}v.appendChild(Z);var J=function(){};if(c){var K={x:window.innerWidth/2,y:window.innerHeight/2},$=document.createElement("div");$.classList.add("virtualCursor"),$.style.position="fixed",$.style.left="0",$.style.top="0",$.style.zIndex="1001",l.appendChild($);var ee=function(e,t){K.x=u(e,0,window.innerWidth),K.y=u(t,0,window.innerHeight),$.style.transform="translate(calc(".concat(K.x,"px - 50%), calc(").concat(K.y,"px - 50%))"),A(K.x,K.y)},et=function(e){ee(K.x+e.movementX,K.y+e.movementY)},er=function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),k(T(C)))},en=function(){ee(K.x,K.y)};ee(K.x,K.y),window.addEventListener("mousemove",et,!0),window.addEventListener("mousedown",er,!0),window.addEventListener("resize",en),J=function(){window.removeEventListener("mousemove",et,!0),window.removeEventListener("mousedown",er,!0),window.removeEventListener("resize",en),$.remove()}}return document.body.appendChild(l),l.focus({preventScroll:!0}),l.addEventListener("click",M),l.addEventListener("keydown",I),l.addEventListener("mousemove",L),x(0),s}},94754(e,t,r){r.d(t,{A:()=>c,h:()=>u});var n=r(53510),a=r(19002),o=r(79900),i=r(38252);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=function(e,t,r,i){return(0,o.qc)(e,{points:l(t),updatable:!1},{color:new a.v9(r.r,r.g,r.b),width:5,colorMode:n.ZB.COLOR_MODE_SET,sizeAttenuation:!0},i)},u=function(e,t,r,n){var o=new a.ov(r.r,r.g,r.b,1),s=t.map(function(){return o});return(0,i.sh)(e,{points:l(t),colors:s,updatable:!1},n)}},72334(e,t,r){r.d(t,{_I:()=>a,ck:()=>i,nH:()=>o});var n=r(70134);function a(e,t){for(var r=Math.floor(e.length/16),n=Math.floor(r/t),a=new Float32Array(16*n),o=0;o<n;o++){var i=16*Math.floor(Math.random()*r);a.set(e.subarray(i,i+16),16*o)}return a}function o(e,t,r,a){for(var o=new Float32Array(r*r*16),i=t/r,s=0,l=0;l<r;l++)for(var c=0;c<r;c++){var u=a()*i,f=a()*i,d=e.x+l*i-t/2+u,p=e.z+c*i-t/2+f,h=.7+.6*a();n.uq.Compose(new n.Pq(h,h,h),n.PT.RotationAxis(n.Pq.Up(),2*a()*Math.PI),new n.Pq(d,0,p)).copyToArray(o,16*s),s+=1}return o}function i(e,t,r,a){if(void 0===e[0]||void 0===e[1]||void 0===e[2]||void 0===e[3]||void 0===e[4]||void 0===e[5]||void 0===e[6]||void 0===e[7]||void 0===e[8]||void 0===e[9]||void 0===e[10]||void 0===e[11]||void 0===e[12]||void 0===e[13]||void 0===e[14]||void 0===e[15])throw Error("Matrix is not defined");t.set(e[12],e[13],e[14]);var o=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);a.set(o,o,o);var i=n.uq.Identity();i.setRowFromFloats(0,e[0]/o,e[1]/o,e[2]/o,0),i.setRowFromFloats(1,e[4]/o,e[5]/o,e[6]/o,0),i.setRowFromFloats(2,e[8]/o,e[9]/o,e[10]/o,0),i.setRowFromFloats(3,0,0,0,1),r.copyFrom(n.PT.FromRotationMatrix(i))}},7492(e,t,r){r.a(e,async function(e,t){try{r(56167),r(98120);var n,a=r(64028),o=r(88768),i=r(66379),s=r(46018),l=r(51881);function c(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}var u=document.createElement("canvas");document.body.appendChild(u),u.width=window.innerWidth,u.height=window.innerHeight;var f=new o.x(u),d=new a.Engine(u,!0,{useHighPrecisionMatrix:!0});d.useReverseDepthBuffer=!0,d.loadingScreen=f,d.displayLoadingUI();var p=function(){};d.runRenderLoop(p);var h=new URLSearchParams(window.location.search),m=null!=(n=h.get("scene"))?n:"",b=new s.D().get(m),y=new i.C;y.addProgressCallback(function(e,t){f.setProgress(e,t),f.loadingUIText="Loading ".concat(m," (").concat(t,"/").concat(e,")")}),y.startTask();var g=await b(d,y);if(window.scene=g,y.completeTask(),null!==h.get("debug")){var v=document.createElement("div");v.id="inspectorLayer",document.body.appendChild(v),await g.debugLayer.show({globalRoot:v}),document.addEventListener("keypress",function(e){var t;return(t=function(){return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if("i"!==e.key)return[3,3];if(!g.debugLayer.isVisible())return[3,1];return g.debugLayer.hide(),[3,3];case 1:return[4,g.debugLayer.show({globalRoot:v})];case 2:t.sent(),t.label=3;case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(e){c(o,n,a,i,s,"next",e)}function s(e){c(o,n,a,i,s,"throw",e)}i(void 0)})})()})}if(null!==h.get("physicsViewer")){var w=new a.PhysicsViewer(g);g.onBeforeRenderObservable.add(function(){var e=!0,t=!1,r=void 0;try{for(var n,a=g.meshes[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=n.value.physicsBody;o&&w.showBody(o)}}catch(e){t=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}})}if(null!==h.get("qr")){var P=new URL(window.location.href);P.searchParams.delete("qr");var S=void 0;void 0!==S&&("localhost"===P.hostname||"127.0.0.1"===P.hostname||"[::1]"===P.hostname)&&(P.hostname=S);var C=P.toString();await (0,l.zH)(C)}var T=h.get("freeze"),R=Number(T);if(null!==T&&!isNaN(R)){d.getDeltaTime=function(){return 0};var x=0;g.onAfterRenderObservable.add(function(){if(++x>=R){d.stopRenderLoop(),u.dataset.frozen="1";return}})}g.onAfterRenderObservable.addOnce(function(){u.dataset.ready="1"}),g.executeWhenReady(function(){d.loadingScreen.hideLoadingUI(),d.stopRenderLoop(p),d.runRenderLoop(function(){g.render()})}),window.addEventListener("resize",function(){u.width=window.innerWidth,u.height=window.innerHeight,d.resize(!0)}),document.addEventListener("keypress",function(e){"p"===e.key&&null!==g.activeCamera&&a.Tools.CreateScreenshot(d,g.activeCamera,{precision:1})}),window.scene=g,t()}catch(e){t(e)}},1)},46018(e,t,r){r.d(t,{D:()=>r3});var n=r(64028),a=r(97681),o=r(70101),i=r(55895);function s(e,t){var r,s=new n.Scene(e,{useFloatingOrigin:!0});s.useRightHandedSystem=!0;var l=new URLSearchParams(window.location.search),c=new n.ArcRotateCamera("ArcRotateCamera",0,3.14/3,3e6,n.Vector3.Zero(),s);c.attachControl(),c.wheelPrecision/=3e4,c.maxZ=1e8;var u=s.enableDepthRenderer(null,!1,!0),f=(0,a.y)("juliaSet",Number(null!=(r=l.get("seed"))?r:1e5*Math.random()),"Julia Set",[]),d=new i.i(f,s),p=new o.t(d.getTransform(),d.getBoundingRadius(),f.accentColor,s,[]);return s.cameras.forEach(function(e){return e.attachPostProcess(p)}),s.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(p)}),s.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p.update(t)}),s.onBeforeCameraRenderObservable.add(function(e){u.getDepthMap().activeCamera=e}),Promise.resolve(s)}var l=r(33630),c=r(11398);function u(e,t){var r,a=new n.Scene(e,{useFloatingOrigin:!0});a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),s=new n.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5e5,n.Vector3.Zero(),a);s.attachControl(),s.wheelPrecision/=1e3,s.maxZ=1e8;var u=a.enableDepthRenderer(null,!1,!0),f=(0,l.f)("mandelbox",Number(null!=(r=o.get("seed"))?r:1e5*Math.random()),"Mandelbox",[]),d=new i.i(f,a),p=new c.M(d.getTransform(),d.getBoundingRadius(),f,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(p)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(p)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){u.getDepthMap().activeCamera=e}),Promise.resolve(a)}var f=r(61092),d=r(66485);function p(e,t){var r,a=new n.Scene(e,{useFloatingOrigin:!0});a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),s=new n.ArcRotateCamera("ArcRotateCamera",0,3.14/3,3e6,n.Vector3.Zero(),a);s.attachControl(),s.wheelPrecision/=3e4,s.maxZ=1e8;var l=a.enableDepthRenderer(null,!1,!0),c=(0,f.T)("mandelbulb",Number(null!=(r=o.get("seed"))?r:1e5*Math.random()),"Mandelbulb",[]),u=new i.i(c,a),p=new d.W(u.getTransform(),u.getBoundingRadius(),c,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(p)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(p)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){l.getDepthMap().activeCamera=e}),Promise.resolve(a)}var h=r(28234),m=r(43302);function b(e,t){var r,a=new n.Scene(e,{useFloatingOrigin:!0});a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),s=new n.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5e5,n.Vector3.Zero(),a);s.attachControl(),s.wheelPrecision/=1e3,s.maxZ=1e8;var l=a.enableDepthRenderer(null,!1,!0),c=(0,h.J)("mengerSponge",Number(null!=(r=o.get("seed"))?r:1e5*Math.random()),"Menger Sponge",[]),u=new i.i(c,a),f=new m.Q(u.getTransform(),u.getBoundingRadius(),c,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(f)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(f)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;f.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){l.getDepthMap().activeCamera=e}),Promise.resolve(a)}var y=r(40373),g=r(66267);function v(e,t){var r,a=new n.Scene(e,{useFloatingOrigin:!0});a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),s=new n.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5e5,n.Vector3.Zero(),a);s.attachControl(),s.wheelPrecision/=1e3,s.maxZ=1e8;var l=a.enableDepthRenderer(null,!1,!0),c=(0,y.e)("sierpinski",Number(null!=(r=o.get("seed"))?r:1e5*Math.random()),"Sierpinski Pyramid",[]),u=new i.i(c,a),f=new g.$(u.getTransform(),u.getBoundingRadius(),c,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(f)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(f)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;f.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){l.getDepthMap().activeCamera=e}),Promise.resolve(a)}var w=r(84773),P=r(6098),S=r(39044),C=r(84006),T=r(91320),R=r(51881);function x(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function A(e,t){var r;return(r=function(){var r,a,o,i,s,l,c;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(u){switch(u.label){case 0:return(r=new n.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,[4,(0,R.z6)(r)];case 1:return u.sent(),(o=(a=new P.w(r)).getActiveCamera()).attachControl(),r.enableDepthRenderer(o,!1,!0),[4,(0,w.jP)(r,t)];case 2:return i=u.sent(),new n.DirectionalLight("sun",new n.Vector3(1,-1,0),r).intensity=.7,new n.HemisphericLight("hemi",n.Vector3.Up(),r).intensity=.4,a.getTransform().position.z=-75e3,a.getTransform().position.y=1500,a.speed*=500,o.maxZ*=500,s=n.MeshBuilder.CreateSphere("sphere",{diameter:1e4},r),new n.PhysicsAggregate(s,n.PhysicsShapeType.SPHERE,{mass:0},r),T.q.BATCH_SIZE=1e4,l=new C.U(42,s,6e4,127500,r),(c=n.MeshBuilder.CreateTorus("torus",{diameter:17e4,thickness:1e5,tessellation:32},r)).visibility=.1,c.parent=s,c.scaling.y=2e-4,(0,S.t5)(a.getTransform(),s.position,r.useRightHandedSystem),r.onBeforeRenderObservable.add(function(){a.update(e.getDeltaTime()/1e3),l.update(a.getTransform().getAbsolutePosition(),i,e.getDeltaTime()/1e3)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){x(o,n,a,i,s,"next",e)}function s(e){x(o,n,a,i,s,"throw",e)}i(void 0)})})()}var O=r(9633),E=r(2218),k=r(73331);function M(e,t){var r=new O.Z(e,{useFloatingOrigin:!0});r.useRightHandedSystem=!0;var a=new P.w(r),o=a.getActiveCamera();a.speed=6e6,o.maxZ*=6e6,a.getTransform().setAbsolutePosition(new n.Vector3(0,1,-2).scaleInPlace(6e6)),(0,S.t5)(a.getTransform(),n.Vector3.Zero(),r.useRightHandedSystem),o.attachControl(),r.enableDepthRenderer(null,!1,!0);var i=new n.PointLight("light1",new n.Vector3(6e7,0,0),r),s=n.MeshBuilder.CreateSphere("sphere",{diameter:12e6,segments:64},r),l=new E.Q(6e6,1e5),c=new k.D(s,6e6,l,[i],r);return o.attachPostProcess(c),r.onBeforeRenderObservable.add(function(){var e=r.getEngine().getDeltaTime()/1e3;a.update(e)}),Promise.resolve(r)}var I=r(51776),L=r(70134),D=r(43589),j=r(79370),_=r(5026),B=r(76945),N=r(51177),H=r(28464),F=r(52628);function V(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function U(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h,m;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(b){switch(b.label){case 0:return(r=new O.Z(e)).useRightHandedSystem=!0,[4,(0,R.z6)(r)];case 1:return b.sent(),(0,R.s9)(e),[4,(0,_.Q)(r,t)];case 2:return a=b.sent(),o=new B.b,[4,N.Z.CreateDefault(r,a,o)];case 3:return i=b.sent(),(s=function(){i.getTransform().position.copyFromFloats((0,D.randRange)(-50,50,Math.random,0),(0,D.randRange)(30,50,Math.random,0),(0,D.randRange)(-50,50,Math.random,0)),i.getTransform().rotationQuaternion=n.Quaternion.FromEulerAngles(2*Math.random()*Math.PI,2*Math.random()*Math.PI,2*Math.random()*Math.PI)})(),(l=new P.w(r)).getTransform().position.copyFromFloats(0,10,75),l.speed*=10,(c=l.getActiveCamera()).minZ=.1,c.attachControl(),u=new j.r("Landing Pad",H.a.SMALL,a.materials.landingPad,r),(f=n.MeshBuilder.CreateBox("ground",{width:100,height:1,depth:100},r)).position.y=-2,f.position.x=75,(d=new n.PBRMaterial("groundMaterial",r)).albedoColor.set(.5,.5,.2),d.metallic=0,d.roughness=.9,f.material=d,(p=new n.PhysicsAggregate(f,n.PhysicsShapeType.BOX,{mass:0},r)).shape.filterMembershipMask=F.H.ENVIRONMENT,p.shape.filterCollideMask=F.H.DYNAMIC_OBJECTS,h=new n.DirectionalLight("sun",new L.Pq(1,-2,-1),r),(0,R.ez)(h.direction.negate(),r),new I.g("hemi",L.Pq.Up(),r).intensity=.1,(0,R.tZ)(h),(m=function(){i.engageLandingOnPad(u)})(),r.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;i.update(t),l.update(t)}),document.addEventListener("keydown",function(e){"r"===e.key&&(i.takeOff(),s(),m())}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){V(o,n,a,i,s,"next",e)}function s(e){V(o,n,a,i,s,"throw",e)}i(void 0)})})()}var Z=r(2733),q=r(64735),z=r(59378),G=r(71590),Y=r(72334),W=r(34495);function Q(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function X(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(r=new O.Z(e)).useRightHandedSystem=!0,(a=new n.ArcRotateCamera("camera1",0,.9*Math.PI/2,10,new n.Vector3(0,2,0),r)).lowerRadiusLimit=.5,a.upperRadiusLimit=100,a.minZ=.1,a.attachControl(),(o=new n.DirectionalLight("dir01",new n.Vector3(1,-2,-1),r)).position=new n.Vector3(5,5,5).scaleInPlace(10),(0,R.ez)(o.direction.scale(-1),r),new n.HemisphericLight("hemi",new n.Vector3(0,1,0),r).intensity=.5,(i=(0,q.Q)(r)).isVisible=!1,[4,(0,G.z)(r,t)];case 1:return s=d.sent(),l=new z.P(s.butterfly,r),i.material=l.get(),c=(0,Z.seededSquirrelNoise)(0),u=0,f=function(){return c(u++)},new W.l((0,Y.nH)(n.Vector3.Zero(),32,128,f)).createInstances([{mesh:i,distance:0}]),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){Q(o,n,a,i,s,"next",e)}function s(e){Q(o,n,a,i,s,"throw",e)}i(void 0)})})()}var J=r(36759),K=r(54330),$=r(22687),ee=r(85005),et=r(21007);function er(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function en(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h,m,b,y,g,v,w,P;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(C){switch(C.label){case 0:return(r=new O.Z(e)).useRightHandedSystem=!0,[4,(0,R.z6)(r,new L.Pq(0,0,0))];case 1:return a=C.sent(),(0,R.s9)(e),[4,(0,J.H)(r,t)];case 2:if(o=C.sent(),(i=new n.DirectionalLight("dir01",new L.Pq(1,-2,-1),r)).position=new L.Pq(5,5,5).scaleInPlace(10),(0,R.ez)(i.direction.scale(-1),r),new n.HemisphericLight("hemi",new L.Pq(0,1,0),r).intensity=.5,s=n.MeshBuilder.CreateIcoSphere("ground",{radius:40},r),new n.PhysicsAggregate(s,n.PhysicsShapeType.MESH,{mass:0,restitution:.2},r),(l=new n.PBRMetallicRoughnessMaterial("groundMaterial",r)).baseColor=new n.Color3(.5,.5,.5),s.material=l,!(c=o.placeholder.spawn()).success)throw Error("Failed to instantiate character: ".concat(c.error));if(u=new ee.T(c.value,a,r),(f=new K.Y(u,r)).getTransform().position.y=40,!(d=o.placeholder.spawn()).success)throw Error("Failed to instantiate character: ".concat(d.error));if((p=new ee.T(d.value,a,r)).getTransform().position=new L.Pq(10,40,7.5),h=p.getTransform().position.negate().normalize(),(m=a.raycast(p.getTransform().position,p.getTransform().position.add(h.scale(30)))).hasHit&&(p.getTransform().position=m.hitPointWorld),!(b=o.placeholder.spawn()).success)throw Error("Failed to instantiate character: ".concat(b.error));return(y=new ee.T(b.value,a,r)).getTransform().position=new L.Pq(10,40,6),y.getTransform().rotate(n.Axis.Y,Math.PI,n.Space.WORLD),(g=a.raycast(y.getTransform().position,y.getTransform().position.add(h.scale(30)))).hasHit&&(y.getTransform().position=g.hitPointWorld),(0,R.tZ)(i),null!==new URLSearchParams(window.location.search).get("thirdPerson")&&f.setThirdPersonCameraActive(),f.getActiveCamera().attachControl(),f.getActiveCamera().minZ=.1,$.b.setEnabled(!0),v=new et.q(r),y.dance(),w=L.Pq.Zero(),P=[u,p,y],r.onBeforeRenderObservable.add(function(){if(v.update([{name:"Planet",mass:1e5,position:s.position,radius:40}]),f.getActiveCamera()!==r.activeCamera){null==(t=r.activeCamera)||t.detachControl();var t,n=f.getActiveCamera();n.attachControl(),r.activeCamera=n}var a=e.getDeltaTime()/1e3;f.update(a),p.update(a),y.update(a);var o=!0,i=!1,l=void 0;try{for(var c,d=P[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h,m=c.value,b=(null!=(h=v.getLastComputedForce(m.aggregate.body))?h:L.Pq.Up()).normalize().negateInPlace();(0,S.Pf)(m.getTransform(),b)}}catch(e){i=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(i)throw l}}u.getHeadPositionToRef(w),p.lookAt(w),y.lookAt(w)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){er(o,n,a,i,s,"next",e)}function s(e){er(o,n,a,i,s,"throw",e)}i(void 0)})})()}var ea=r(66371),eo=r(77911),ei=r(94403),es=r(48211);function el(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function ec(e,t){var r;return(r=function(){var r,a,o,i,s;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(l){switch(l.label){case 0:return(r=new n.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,[4,(0,eo.s)(r,t)];case 1:return a=l.sent(),new es.y(a.milkyWay,1e6,r),(i=(o=new P.w(r)).getActiveCamera()).attachControl(),r.enableDepthRenderer(),o.speed=s=new ei.i((0,ea.S)([]),r).getBoundingRadius(),i.maxZ*=s,o.getTransform().setAbsolutePosition(new n.Vector3(0,1,-2).scaleInPlace(s)),(0,S.t5)(o.getTransform(),n.Vector3.Zero(),r.useRightHandedSystem),r.onBeforeRenderObservable.add(function(){var e=r.getEngine().getDeltaTime()/1e3;o.update(e)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){el(o,n,a,i,s,"next",e)}function s(e){el(o,n,a,i,s,"throw",e)}i(void 0)})})()}function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ef(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function ed(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h,m,b,y,g,v,w,P,S,C,T,x,A,E;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(k){switch(k.label){case 0:return(r=new O.Z(e)).useRightHandedSystem=!0,[4,(0,R.z6)(r)];case 1:return k.sent(),[4,(0,_.Q)(r,t)];case 2:k.sent(),(a=new n.FreeCamera("camera",new L.Pq(0,1,-1).scale(15),r)).setTarget(L.Pq.Zero()),a.attachControl(),new n.PointLight("light",new L.Pq(0,100,-10),r),new I.g("hemisphericLight",new L.Pq(0,1,0),r).intensity=.5,o=0,i=!0,s=!1,l=void 0;try{for(c=r.meshes[Symbol.iterator]();!(i=(u=c.next()).done);i=!0)(f=u.value).isVisible=!0,null===f.parent&&(o++,d=f.getHierarchyBoundingVectors(),p=Math.max(d.max.x-d.min.x,d.max.y-d.min.y,d.max.z-d.min.z),f.scaling.scaleInPlace(1/p),f.position=new L.Pq(10+o%10-5,0,Math.floor(o/10)-5))}catch(e){s=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(s)throw l}}h=r.transformNodes.slice(),m=!0,b=!1,y=void 0;try{for(g=h[Symbol.iterator]();!(m=(v=g.next()).done);m=!0)v.value.instantiateHierarchy()}catch(e){b=!0,y=e}finally{try{m||null==g.return||g.return()}finally{if(b)throw y}}w=!0,P=!1,S=void 0;try{for(C=r.textures.entries()[Symbol.iterator]();!(w=(T=C.next()).done);w=!0){var M;M=T.value,A=(x=function(e){if(Array.isArray(e))return e}(M)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,s=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),2!==o.length);i=!0);}catch(e){s=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(s)throw n}}return o}}(M,2)||function(e,t){if(e){if("string"==typeof e)return eu(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eu(e,2)}}(M,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],E=x[1],function(e,t){var a=n.MeshBuilder.CreateGround("plane",{width:.9,height:.9},r),o=new n.StandardMaterial("material",r);o.emissiveTexture=e,o.disableLighting=!0,o.specularColor.scaleInPlace(0),a.position=t,a.material=o}(E,new L.Pq(A%10-5,0,Math.floor(A/10)-5))}}catch(e){P=!0,S=e}finally{try{w||null==C.return||C.return()}finally{if(P)throw S}}return[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){ef(o,n,a,i,s,"next",e)}function s(e){ef(o,n,a,i,s,"throw",e)}i(void 0)})})()}function ep(e,t){var r=new O.Z(e),a=new n.FreeCamera("camera1",new n.Vector3(0,5,-10),r);return a.setTarget(n.Vector3.Zero()),a.attachControl(),new n.HemisphericLight("light1",new n.Vector3(0,1,0),r).intensity=.7,n.MeshBuilder.CreateSphere("sphere",{diameter:2,segments:32},r).position.y=1,n.MeshBuilder.CreateGround("ground",{width:6,height:6},r),Promise.resolve(r)}var eh=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"sayNow",value:function(){}},{key:"enqueueSay",value:function(){}},{key:"update",value:function(){}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}(),em=r(62257),eb=r(31694);r.p,r(43056),r(66913),r(74520);var ey=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"update",value:function(){}},{key:"create",value:function(){}},{key:"setVisible",value:function(){}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}();function eg(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function ev(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h,m;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(b){switch(b.label){case 0:return(r=new O.Z(e)).useRightHandedSystem=!0,r.defaultCursor="crosshair",[4,(0,R.z6)(r)];case 1:return b.sent(),[4,(0,_.Q)(r,t)];case 2:return a=b.sent(),o=new B.b,i=new eh,s=new ey,[4,em.l.CreateDefault(r,a,i,o,s)];case 3:return(c=(l=b.sent()).getActiveCamera()).minZ=.1,c.attachControl(),r.activeCamera=c,eb._.setEnabled(!0),u=new n.DirectionalLight("sun",new L.Pq(1,-1,0),r),new I.g("hemi",L.Pq.Up(),r).intensity=.1,f=n.MeshBuilder.CreateBox("box",{size:50},r),d=new n.SolidParticleSystem("boxes",r,{updatable:!1}),p=function(e,t){return Math.random()*(t-e)+e},d.addShape(f,1e4,{positionFunction:function(e){e.position=new L.Pq(p(-1,1),p(-1,1),p(-1,1)).scaleInPlace(5e3)}}),h=d.buildMesh(),(m=new n.PBRMaterial("material",r)).albedoColor=new n.Color3(.5,.5,.5),m.metallic=1,m.roughness=.5,m.useGLTFLightFalloff=!0,h.material=m,f.setEnabled(!1),(0,R.tZ)(u,{maxZ:3e3}),r.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;l.update(t)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){eg(o,n,a,i,s,"next",e)}function s(e){eg(o,n,a,i,s,"throw",e)}i(void 0)})})()}var ew=r(72635),eP=r(45072),eS=r(18728),eC=r(82132),eT=r(26653),eR=r(73979),ex=r(23091),eA=r(51303),eO=r(45178);function eE(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function ek(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h,m,b;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(y){switch(y.label){case 0:return(r=new n.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,r.clearColor.setAll(0),[4,(0,eP.P)(r,t)];case 1:return a=y.sent(),[4,(0,R.z6)(r)];case 2:if(y.sent(),o=10*F.w.EARTH_RADIUS,s=(i=new P.w(r)).getActiveCamera(),i.speed=o,s.maxZ*=o,i.getTransform().setAbsolutePosition(new n.Vector3(0,1,-2).scaleInPlace(o)),(0,S.t5)(i.getTransform(),n.Vector3.Zero(),r.useRightHandedSystem),s.attachControl(),r.enableDepthRenderer(null,!1,!0),l=new n.PointLight("light1",new n.Vector3(7,5,-10).scaleInPlace(o),r),c=(0,eA.C)(ex.uW),l.diffuse.set(c.r,c.g,c.b),u=new URLSearchParams(window.location.search).get("seed"),f=(0,ew.O)("gasPlanet",null!==u?Number(u):1e3*Math.random(),"Gas Planet",[]),d=new eO.K(function(){return new eC.q(r)}),p=new eR.s(f,a,d,r),h=new eT.U(p.getTransform(),p.getBoundingRadius(),p.ringsUniforms,null,!1,[{getBoundingRadius:function(){return 0},getLight:function(){return l}}],r),s.attachPostProcess(h),m=new k.D(p.getTransform(),p.getBoundingRadius(),p.atmosphereUniforms,[l],r),s.attachPostProcess(m),!p.ringsUniforms)return[3,4];return b=new eS.b(p.getTransform(),p.ringsUniforms,f,[l],r),s.attachPostProcess(b),[4,new Promise(function(e){var t;(null==(t=p.ringsUniforms)?void 0:t.patternLut.type)==="procedural"&&p.ringsUniforms.patternLut.lut.getTexture().executeWhenReady(function(){e()})})];case 3:y.sent(),y.label=4;case 4:return r.onBeforeRenderObservable.add(function(){var e=r.getEngine().getDeltaTime()/1e3;i.update(e),p.updateMaterial([l],e)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){eE(o,n,a,i,s,"next",e)}function s(e){eE(o,n,a,i,s,"throw",e)}i(void 0)})})()}var eM=r(57693),eI=r(56110),eL=r(3957);function eD(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function ej(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(m){switch(m.label){case 0:return(r=new O.Z(e)).useRightHandedSystem=!0,(a=new n.ArcRotateCamera("camera1",0,.9*Math.PI/2,10,new n.Vector3(0,.5,0),r)).upperBetaLimit=Math.PI/2,a.lowerRadiusLimit=5,a.upperRadiusLimit=100,a.attachControl(),(o=new n.DirectionalLight("dir01",new n.Vector3(1,-2,-1),r)).position=new n.Vector3(5,5,5).scaleInPlace(10),(0,R.ez)(o.direction.scale(-1),r),new n.HemisphericLight("hemi",new n.Vector3(0,1,0),r).intensity=.5,i=n.MeshBuilder.CreateGround("ground",{width:32,height:32,subdivisions:4},r),(s=new n.PBRMaterial("groundMaterial",r)).albedoColor=n.Color3.FromHexString("#0C4909").scale(.5),s.metallic=0,s.roughness=.8,i.material=s,(l=(0,eM.R)(r,5)).isVisible=!1,[4,(0,eL.Z)(r,t)];case 1:return c=m.sent(),u=new eI.y(c.seamlessPerlin,r),l.material=u.get(),f=(0,Z.seededSquirrelNoise)(0),d=0,p=function(){return f(d++)},(h=new W.l((0,Y.nH)(n.Vector3.Zero(),32,256,p))).createInstances([{mesh:l,distance:0}]),h.getCurrentMesh().parent=i,[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){eD(o,n,a,i,s,"next",e)}function s(e){eD(o,n,a,i,s,"throw",e)}i(void 0)})})()}function e_(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function eB(e,t){var r;return(r=function(){var t,r,a,o,i,s,l,c,u,f,d,p;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(h){switch(h.label){case 0:return(t=new n.Scene(e)).useRightHandedSystem=!0,[4,(0,R.z6)(t)];case 1:for(h.sent(),r=new n.DirectionalLight("sun",new n.Vector3(.5,-1,-.5),t),new n.HemisphericLight("hemi",n.Vector3.Up(),t).intensity=.1,a=n.MeshBuilder.CreateSphere("ground",{diameter:20},t),o=10/3,(i=n.MeshBuilder.CreateSphere("sphere2",{diameter:2*o},t)).position.x=40,(s=new n.PBRMaterial("groundMaterial",t)).albedoColor.set(.8,.4,.2),s.metallic=0,s.roughness=.7,a.material=s,i.material=s,new n.PhysicsAggregate(a,n.PhysicsShapeType.SPHERE,{mass:0,restitution:0,friction:2},t),new n.PhysicsAggregate(i,n.PhysicsShapeType.SPHERE,{mass:0,restitution:0,friction:2},t).body.disablePreStep=!1,l=function(){var e=2*Math.random()*Math.PI,t=Math.acos(2*Math.random()-1),r=Math.sin(t)*Math.cos(e),a=Math.sin(t)*Math.sin(e),o=Math.cos(t);return new n.Vector3(r,a,o)},c=0;c<200;c++)(u=n.MeshBuilder.CreateBox("box".concat(c),{size:.2+Math.random()},t)).position=l().scaleInPlace(10+40*Math.random()),u.rotation=new n.Vector3(Math.random(),Math.random(),Math.random()),(f=new n.PBRMaterial("boxMaterial",t)).albedoColor=n.Color3.Random(),f.metallic=0,f.roughness=.7,u.material=f,new n.PhysicsAggregate(u,n.PhysicsShapeType.BOX,{mass:50,restitution:.3,friction:1},t).body.applyImpulse(l().scale(1e3*Math.random()),u.position);return new n.ArcRotateCamera("Camera",Math.PI/3,Math.PI/3,80,n.Vector3.Zero(),t).attachControl(),(0,R.tZ)(r),d=new et.q(t),p=0,t.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p+=t,i.position.copyFromFloats(50*Math.cos(2*Math.PI*p/10),50*Math.sin(2*Math.PI*p/10),0),d.update([{name:"sphere1",mass:1,radius:10,position:a.position},{name:"sphere2",mass:1,radius:o,position:i.position}])}),[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){e_(o,n,a,i,s,"next",e)}function s(e){e_(o,n,a,i,s,"throw",e)}i(void 0)})})()}var eN=r(96451),eH=r(59624),eF=r(44671);function eV(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function eU(e,t){var r;return(r=function(){var r,n,a,o,i;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return(r=new O.Z(e)).useRightHandedSystem=!0,(a=(n=new P.w(r)).getActiveCamera()).attachControl(),r.enableDepthRenderer(a,!1,!0),[4,(0,eP.P)(r,t)];case 1:return o=s.sent(),new eN.Z("sun",new L.Pq(1,-1,0),r).intensity=.7,i=new eF.R(eH._0.Z,r,o.noises),r.onBeforeRenderObservable.add(function(){n.update(e.getDeltaTime()/1e3),i.update(e.getDeltaTime()/1e3)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){eV(o,n,a,i,s,"next",e)}function s(e){eV(o,n,a,i,s,"throw",e)}i(void 0)})})()}var eZ=r(1933),eq=r(9064),ez=r(25835),eG=r(85822),eY=r(19002),eW=r(74919),eQ=r(60167),eX=r(93234);function eJ(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function eK(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var e$=function(){var e;function t(e,r){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");eK(this,"mesh",void 0),eK(this,"aggregate",void 0),eK(this,"isBeingPressed",!1),eK(this,"interaction",void 0),this.interaction=e,this.mesh=eW.P.CreateCylinder("button",{diameter:.25,height:.1},r);var n=new eG.PBRMaterial("buttonMaterial",r);n.albedoColor=new eY.v9(1,0,0),n.roughness=.5,n.metallic=0,this.mesh.material=n,this.aggregate=new eX.L(this.mesh,eQ.DK.CYLINDER,{mass:0},r),this.aggregate.body.setMotionType(eQ.AH.ANIMATED),this.aggregate.body.disablePreStep=!1}return e=[{key:"getTransform",value:function(){return this.mesh}},{key:"getPhysicsAggregate",value:function(){return this.aggregate}},{key:"getInteractions",value:function(){var e=this;return this.isBeingPressed?[]:[{label:this.interaction.label,perform:function(){var t;return(t=function(){return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return this.startPressAnimation(),[4,this.interaction.perform()];case 1:return e.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(e){eJ(o,n,a,i,s,"next",e)}function s(e){eJ(o,n,a,i,s,"throw",e)}i(void 0)})}).call(e)}}]}},{key:"startPressAnimation",value:function(){var e=this;if(!this.isBeingPressed){this.isBeingPressed=!0;var t=this.getTransform().position.y,r=Math.round(6),n=t-.05;ez.X5.CreateAndStartAnimation("buttonPressDown",this.getTransform(),"position.y",60,r,t,n,ez.X5.ANIMATIONLOOPMODE_CONSTANT,void 0,function(){ez.X5.CreateAndStartAnimation("buttonPressUp",e.getTransform(),"position.y",60,r,n,t,ez.X5.ANIMATIONLOOPMODE_CONSTANT,void 0,function(){e.isBeingPressed=!1})})}}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}(),e0=r(32907),e1=r(25508),e2=r(42792),e3=r(42917);function e5(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function e6(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){e5(o,n,a,i,s,"next",e)}function s(e){e5(o,n,a,i,s,"throw",e)}i(void 0)})}}function e4(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function e7(e,t){return e6(function(){var r,a,o,i,s,l,c,u,f,d,p,h,m,b,y,g,v,w,P,S,C,T,x;return e4(this,function(A){switch(A.label){case 0:return(r=new n.Scene(e)).useRightHandedSystem=!0,[4,(0,e3.L)()];case 1:return A.sent(),[4,(0,R.z6)(r,new n.Vector3(0,-9.81,0))];case 2:return a=A.sent(),[4,(0,n.CreateAudioEngineAsync)()];case 3:return o=A.sent(),(0,R.s9)(e),[4,(0,J.H)(r,t)];case 4:return i=A.sent(),[4,(0,eZ.d)(o,t)];case 5:if(s=A.sent(),l=new n.DirectionalLight("dir01",new n.Vector3(0,-1,-1),r),(0,R.ez)(l.direction.scale(-1),r),new n.HemisphericLight("hemi",new n.Vector3(0,1,0),r).intensity=.1,c=100,u=n.MeshBuilder.CreateGround("ground",{width:c,height:c},r),(f=new n.PBRMaterial("groundMaterial",r)).albedoColor=new n.Color3(.7,.7,.7),f.roughness=.7,f.metallic=0,u.material=f,(d=new n.PhysicsAggregate(u,n.PhysicsShapeType.MESH,{mass:0},r)).shape.filterMembershipMask=F.H.ENVIRONMENT,d.shape.material.friction=2,!(p=i.placeholder.spawn()).success)throw Error("Failed to instantiate character: ".concat(p.error));return h=new ee.T(p.value,a,r),(m=new K.Y(h,r)).getActiveCamera().attachControl(),m.getActiveCamera().minZ=.1,$.b.setEnabled(!0),(0,R.tZ)(l),b=new B.b,y=new eq.A(F.H.INTERACTIVE,r,[m.firstPersonCamera],function(t){return e6(function(){var n,a,o;return e4(this,function(i){switch(i.label){case 0:if(0===t.length)return[2,null];return null==(n=r.activeCamera)||n.detachControl(),[4,(0,e0.e9)(t,function(e){return e.label},b,{useVirtualCursor:e.isPointerLock})];case 1:return o=i.sent(),null==(a=r.activeCamera)||a.attachControl(!0),[2,o]}})})()}),v=e1.e.bind,w=[void 0,y],[4,(0,e2.t)()];case 6:for(g=new(v.apply(e1.e,w.concat([A.sent()]))),document.body.appendChild(g.root),P=0;P<200;P++)S=.2+Math.random(),e8({position:new n.Vector3((Math.random()-.5)*c,S/2,(Math.random()-.5)*c),size:S},r,y);return(C=n.MeshBuilder.CreateBox("pillar",{width:.3,depth:.3,height:1},r)).position.z=2,C.position.y=.5,(T=new n.PBRMaterial("pillarMaterial",r)).albedoColor=new n.Color3(.4,.4,.4),T.roughness=.9,T.metallic=0,C.material=T,(x=new e$({label:"Spawn Box",perform:function(){s.menuSelect.setVolume(5),s.menuSelect.play();var e=.3+.3*Math.random(),t=r.activeCamera;if(null===t)return Promise.resolve();var n=t.getForwardRay(5,t.getWorldMatrix(),t.getWorldMatrix().getTranslation()),a=n.origin.add(n.direction.scale(7));return a.y=3+Math.max(a.y,e/2),e8({position:a,size:e},r,y),Promise.resolve()}},r)).getTransform().position=C.position.add(new n.Vector3(0,.55,0)),y.register(x),r.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;if(y.update(t),g.update(t),m.getActiveCamera()!==r.activeCamera){null==(n=r.activeCamera)||n.detachControl();var n,a=m.getActiveCamera();a.attachControl(),r.activeCamera=a}m.update(t)}),[2,r]}})})()}function e8(e,t,r){var a=e.position,o=e.size,i=n.MeshBuilder.CreateBox("box",{size:o},t);i.position=a,i.rotation.y=Math.random();var s=new n.PBRMaterial("boxMaterial",t);s.albedoColor=n.Color3.Random(),s.metallic=0,s.roughness=.7,i.material=s;var l=new n.PhysicsAggregate(i,n.PhysicsShapeType.BOX,{mass:50,restitution:.3,friction:1},t);return l.shape.filterMembershipMask=F.H.DYNAMIC_OBJECTS,r.register({getPhysicsAggregate:function(){return l},getInteractions:function(){return[{label:"push",perform:function(){var e,r=null==(e=t.activeCamera)?void 0:e.getForwardRay(1,t.activeCamera.getWorldMatrix(),t.activeCamera.getWorldMatrix().getTranslation());return void 0===r||(l.body.applyImpulse(r.direction.scale(200).add(n.Vector3.Up().scale(200)),l.body.getObjectCenterWorld()),l.body.applyAngularImpulse(new n.Vector3((Math.random()-.5)*10,(Math.random()-.5)*10,(Math.random()-.5)*10))),Promise.resolve()}},{label:"spin",perform:function(){return l.body.applyAngularImpulse(new n.Vector3(0,50,0)),Promise.resolve()}},{label:"change color",perform:function(){return i.material=new n.PBRMaterial("boxMaterial",t),i.material.albedoColor=n.Color3.Random(),i.material.metallic=0,i.material.roughness=.7,Promise.resolve()}},{label:"delete",perform:function(){return i.dispose(),Promise.resolve()}},{label:"make bouncy",perform:function(){return l.shape.material.restitution=1.5,Promise.resolve()}}]}}),l}var e9=r(25715),te=r(9176),tt=r(28006),tr=r(23975);function tn(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function ta(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h,m,b;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(y){switch(y.label){case 0:return(r=new n.Scene(e)).clearColor.set(.1,.1,.1,1),r.useRightHandedSystem=!0,[4,(0,R.z6)(r)];case 1:return y.sent(),(a=new P.w(r)).speed=10,a.getActiveCamera().attachControl(),a.getTransform().position.copyFromFloats(0,30,-100),(0,S.t5)(a.getTransform(),n.Vector3.Zero(),r.useRightHandedSystem),[4,(0,tt.k)(r,t)];case 2:o=y.sent(),i=new e9.A(o,r),s=(0,tr.L)("LandingPadCenterDecal","A1",r),l=new j.r("LandingPad",H.a.MEDIUM,i,r,{centerDecalTexture:s}),c=new te.c(Math.PI/2,r),u=[],f=!0,d=!1,p=void 0;try{for(h=l.getCorners()[Symbol.iterator]();!(f=(m=h.next()).done);f=!0)b=m.value,u.push({rootPosition:b,lookAtTarget:l.getTransform().position,color:n.Color3.White(),upDirection:l.getTransform().up,range:50*l.getPadSize(),postHeight:10*l.getPadSize(),lampSize:2})}catch(e){d=!0,p=e}finally{try{f||null==h.return||h.return()}finally{if(d)throw p}}return c.setInstances(u),new n.ClusteredLightContainer("lightContainer",c.lights,r),new n.HemisphericLight("ambientLight",n.Vector3.Up(),r).intensity=.3,new n.GlowLayer("glow",r),r.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;a.update(t)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){tn(o,n,a,i,s,"next",e)}function s(e){tn(o,n,a,i,s,"throw",e)}i(void 0)})})()}var to=r(32634),ti=r(468),ts=r(8546),tl=r(20530);function tc(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function tu(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){tc(o,n,a,i,s,"next",e)}function s(e){tc(o,n,a,i,s,"throw",e)}i(void 0)})}}function tf(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function td(e,t){return tu(function(){var r,a,o,i,s,l,c,u,f,d,p,h,m,b,y,g,v,w,P,S,C,T,x,A,E,k,M,I,L,D,j,H,V,U,G;return tf(this,function(Q){switch(Q.label){case 0:return(a=new O.Z(e)).useRightHandedSystem=!0,[4,(0,R.z6)(a,new n.Vector3(0,-9.81,0))];case 1:return o=Q.sent(),[4,(0,_.Q)(a,t)];case 2:return i=Q.sent(),s=new n.DirectionalLight("sun",new n.Vector3(1,-1,-1),a),(0,R.ez)(s.direction.negate(),a),new n.HemisphericLight("ambient",new n.Vector3(0,1,0),a).intensity=.5,l=n.MeshBuilder.CreateGround("ground",{width:4096,height:4096,subdivisions:4},a),(c=new n.PBRMaterial("groundMaterial",a)).albedoColor=n.Color3.FromHexString("#0C4909").scale(.5),c.metallic=0,c.roughness=.8,c.backFaceCulling=!1,l.material=c,(u=(0,eM.R)(a,5)).isVisible=!1,u.material=new eI.y(i.textures.noises.seamlessPerlin,a).get(),f=(0,Z.seededSquirrelNoise)(0),d=0,p=function(){return f(d++)},(h=new W.l((0,Y.nH)(n.Vector3.Zero(),128,768,p))).createInstances([{mesh:u,distance:0}]),h.getCurrentMesh().parent=l,(m=(0,q.Q)(a)).isVisible=!1,m.material=new z.P(i.textures.particles.butterfly,a).get(),new W.l((0,Y.nH)(n.Vector3.Zero(),128,128,p)).createInstances([{mesh:m,distance:0}]),new n.PhysicsAggregate(l,n.PhysicsShapeType.BOX,{mass:0,restitution:.2,friction:2},a).shape.filterMembershipMask=F.H.ENVIRONMENT,[4,(0,J.H)(a,t)];case 3:if(!(b=Q.sent().placeholder.spawn()).success)throw Error("Failed to instantiate character: ".concat(b.error));return y=new ee.T(b.value,o,a),(g=new K.Y(y,a)).firstPersonCamera.minZ=.1,g.firstPersonCamera.attachControl(),$.b.setEnabled(!0),v=new B.b,[4,N.Z.CreateDefault(a,i,v)];case 4:if((w=Q.sent()).getTransform().position.copyFromFloats(16,5,16),P=new eh,S=new ey,C=new em.l(w,a,v,P,S),!(T=(0,tl.d)(i,a,new n.Vector3(-16,3,16),n.Quaternion.RotationAxis(n.Vector3.UpReadOnly,.5))).success)throw Error("Failed to create rover: ".concat(T.error));return x=T.value,(A=new ti.j(a)).firstPersonCamera.minZ=.1,A.setVehicle(x),E=g,k=function(t){return tu(function(){var r,n;return tf(this,function(o){switch(o.label){case 0:if(null==(r=a.activeCamera)||r.detachControl(),(E=t).getActiveCamera().attachControl(),a.activeCamera=E.getActiveCamera(),!(e.isPointerLock&&!E.shouldLockPointer()))return[3,1];return document.exitPointerLock(),[3,3];case 1:if(!(!e.isPointerLock&&E.shouldLockPointer()))return[3,3];return[4,null==(n=e.getRenderingCanvas())?void 0:n.requestPointerLock()];case 2:o.sent(),o.label=3;case 3:return[2]}})})()},null==(r=e.getRenderingCanvas())||r.addEventListener("click",function(){return tu(function(){var t;return tf(this,function(r){switch(r.label){case 0:if(!E.shouldLockPointer())return[3,2];return[4,null==(t=e.getRenderingCanvas())?void 0:t.requestPointerLock()];case 1:r.sent(),r.label=2;case 2:return[2]}})})()}),M=new eq.A(F.H.INTERACTIVE,a,[g.firstPersonCamera],function(t){return tu(function(){var r,n,o;return tf(this,function(i){switch(i.label){case 0:if(0===t.length)return[2,null];return null==(r=a.activeCamera)||r.detachControl(),[4,(0,to.e)(t,function(e){return e.label},v,{useVirtualCursor:e.isPointerLock})];case 1:return o=i.sent(),null==(n=a.activeCamera)||n.attachControl(!0),[2,o]}})})()}),[4,(0,e2.t)()];case 5:I=Q.sent(),L=new e1.e(M,I),document.body.appendChild(L.root),M.register({getPhysicsAggregate:function(){return w.aggregate},getInteractions:function(){return[{label:"Pilot",perform:function(){return tu(function(){return tf(this,function(e){switch(e.label){case 0:return[4,k(C)];case 1:return e.sent(),$.b.setEnabled(!1),eb._.setEnabled(!0),[2]}})})()}}]}}),M.register({getPhysicsAggregate:function(){return T.value.frame},getInteractions:function(){return[{label:"Drive",perform:function(){return tu(function(){return tf(this,function(e){switch(e.label){case 0:return[4,k(A)];case 1:return e.sent(),$.b.setEnabled(!1),ts.Y.setEnabled(!0),[2]}})})()}}]}}),D=!0,j=!1,H=void 0;try{for(V=x.doors[Symbol.iterator]();!(D=(U=V.next()).done);D=!0)G=U.value,M.register(G)}catch(e){j=!0,H=e}finally{try{D||null==V.return||V.return()}finally{if(j)throw H}}return document.addEventListener("keydown",function(e){return tu(function(){return tf(this,function(t){switch(t.label){case 0:if("e"!==e.key)return[3,2];return[4,k(g)];case 1:t.sent(),$.b.setEnabled(!0),ts.Y.setEnabled(!1),eb._.setEnabled(!1),t.label=2;case 2:return[2]}})})()}),a.onBeforeRenderObservable.add(function(){if(E.getActiveCamera()!==a.activeCamera){null==(e=a.activeCamera)||e.detachControl();var e,t=E.getActiveCamera();t.attachControl(),a.activeCamera=t}var r=a.getEngine().getDeltaTime()/1e3;g.update(r),A.update(r),C.update(r),M.update(r),L.update(r)}),[2,a]}})})()}var tp=r(32997),th=r(37631),tm=r(44064);function tb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ty=function(){var e;function t(e,r){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");tb(this,"_transform",void 0),tb(this,"model",void 0),tb(this,"type",void 0),tb(this,"boundingRadius",void 0),this._transform=e,this._transform.rotationQuaternion=L.PT.Identity(),this.model=r,this.type=r.type;var n=this.getTransform().getHierarchyBoundingVectors();this.boundingRadius=n.max.subtract(n.min).length()/2}return e=[{key:"getTransform",value:function(){return this._transform}},{key:"getBoundingRadius",value:function(){return this.boundingRadius}},{key:"getTypeName",value:function(){return"Wrapped Orbital Object"}},{key:"dispose",value:function(){this.getTransform().dispose()}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}(),tg=r(94754),tv=r(6475);function tw(e,t){var r=new O.Z(e,{useFloatingOrigin:!0});r.useRightHandedSystem=!0;var n=new P.w(r),a=n.getActiveCamera();a.minZ=.1,a.attachControl(),new I.g("hemi",L.Pq.Up(),r).intensity=1;var o=new ty(eW.P.CreateSphere("sun",{diameter:1},r),{id:"sun",name:"Sun",orbit:{parentIds:[],argumentOfPeriapsis:0,semiMajorAxis:0,initialMeanAnomaly:0,longitudeOfAscendingNode:0,inclination:0,eccentricity:0,p:2},type:"custom",axialTilt:0,mass:1e12,siderealDaySeconds:0}),i=new ty(eW.P.CreateSphere("earth",{diameter:.5},r),{id:"earth",name:"Earth",orbit:{parentIds:[o.model.id],argumentOfPeriapsis:0,semiMajorAxis:10,initialMeanAnomaly:0,longitudeOfAscendingNode:1.7,inclination:tp.S0.ToRadians(23.5),eccentricity:.5,p:2},type:"custom",axialTilt:tp.S0.ToRadians(23.5),mass:1e11,siderealDaySeconds:0}),s=new ty(eW.P.CreateSphere("moon",{diameter:.2},r),{id:"moon",name:"Moon",orbit:{parentIds:[i.model.id],argumentOfPeriapsis:0,semiMajorAxis:3,initialMeanAnomaly:0,longitudeOfAscendingNode:0,inclination:i.model.orbit.inclination+i.model.axialTilt,eccentricity:.7,p:2},type:"custom",mass:1e10,axialTilt:0,siderealDaySeconds:0}),l=[o,i,s],c=new Map;c.set(i,[o]),c.set(s,[i]);var u=new tv.G(tg.A);u.setOrbitalObjects(l,r),u.setVisibility(!0);var f=new tm.F(tg.A);f.setVisibility(!0),f.setOrbitalObjects(l,r);var d=L.uq.Identity(),p=0;return n.getTransform().setAbsolutePosition(new L.Pq(0,0,-10)),(0,S.t5)(n.getTransform(),o.getTransform().position,r.useRightHandedSystem),r.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p+=t,n.update(t),l.forEach(function(e){var t;(0,th.je)(e,null!=(t=c.get(e))?t:[],d,p),(0,th.d_)(e,d,p)}),u.update(d)}),Promise.resolve(r)}var tP=r(63685);function tS(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function tC(e,t){var r;return(r=function(){var t,r,a,o,i,s,l,c,u,f,d;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(p){switch(p.label){case 0:return(t=new O.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,t.clearColor.set(0,0,0,1),r=1e7,o=(a=new P.w(t)).getActiveCamera(),a.speed=r,o.maxZ*=r,a.getTransform().setAbsolutePosition(new n.Vector3(0,5,-10).scaleInPlace(r)),(0,S.t5)(a.getTransform(),n.Vector3.Zero(),t.useRightHandedSystem),o.attachControl(),t.enableDepthRenderer(),(i=new n.PointLight("light1",new n.Vector3(-1,.5,-2).scaleInPlace(10*r),t)).intensity=.7,s=n.MeshBuilder.CreateSphere("sphere",{diameter:2*r,segments:32},t),l=new eO.K(function(){return new eC.q(t)}),c=new URLSearchParams(window.location.search).get("seed"),u={innerRadius:1.7*r,outerRadius:3.5*r,type:"procedural",seed:null!==c?Number(c):1e3*Math.random(),frequency:10,iceAlbedo:{r:.93,g:.92,b:.9},dustAlbedo:{r:156/255,g:132/255,b:108/255}},f=tP.zl.NewProcedural(u,l,0,t),[4,new Promise(function(e){"procedural"===f.patternLut.type&&f.patternLut.lut.getTexture().executeWhenReady(function(){e()})})];case 1:return p.sent(),d=new eS.b(s,f,{name:"Sphere",radius:+r},[i],t),o.attachPostProcess(d),t.onBeforeRenderObservable.add(function(){var e=t.getEngine().getDeltaTime()/1e3;a.update(e)}),[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){tS(o,n,a,i,s,"next",e)}function s(e){tS(o,n,a,i,s,"throw",e)}i(void 0)})})()}function tT(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function tR(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){tT(o,n,a,i,s,"next",e)}function s(e){tT(o,n,a,i,s,"throw",e)}i(void 0)})}}function tx(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function tA(e,t){return tR(function(){var r,a,o,i,s,l,c,u,f,d,p,h,m,b,y,g,v,w,P,S,C,T,x,A,O,E,k,M,I,L;return tx(this,function(D){switch(D.label){case 0:return r=function(e){var t=n.MeshBuilder.CreateBox("box".concat(e),{size:.2+Math.random()},o);t.position=new n.Vector3((Math.random()-.5)*200,0,(Math.random()-.5)*200),t.rotation=new n.Vector3(Math.random(),Math.random(),Math.random());var r=new n.PBRMaterial("boxMaterial",o);r.albedoColor=n.Color3.Random(),r.metallic=0,r.roughness=.7,t.material=r;var a=new n.PhysicsAggregate(t,n.PhysicsShapeType.BOX,{mass:50,restitution:.3,friction:1},o);h.register({getPhysicsAggregate:function(){return a},getInteractions:function(){return[{label:"spin",perform:function(){return a.body.applyAngularImpulse(new n.Vector3(0,50,0)),Promise.resolve()}}]}})},(o=new n.Scene(e)).useRightHandedSystem=!0,[4,(0,e3.L)()];case 1:return D.sent(),[4,(0,R.z6)(o,new n.Vector3(0,-9.81,0))];case 2:return i=D.sent(),[4,(0,n.CreateAudioEngineAsync)()];case 3:return s=D.sent(),[4,(0,_.Q)(o,t)];case 4:return l=D.sent(),[4,(0,eZ.d)(s,t)];case 5:if(c=D.sent(),null==(a=e.getRenderingCanvas())||a.addEventListener("click",function(){return tR(function(){var t;return tx(this,function(r){switch(r.label){case 0:return[4,null==(t=e.getRenderingCanvas())?void 0:t.requestPointerLock()];case 1:return r.sent(),[2]}})})()}),!(u=l.objects.humanoids.placeholder.spawn()).success)throw Error("Failed to instantiate character: ".concat(u.error));return f=new ee.T(u.value,i,o),(d=new K.Y(f,o)).getTransform().position=new n.Vector3(10,0,-10),d.firstPersonCamera.minZ=.1,p=new B.L(c),h=new eq.A(F.H.INTERACTIVE,o,[d.firstPersonCamera],function(t){return tR(function(){var r,n,a;return tx(this,function(o){switch(o.label){case 0:if(0===t.length)return[2,null];return(r=e.isPointerLock)&&document.exitPointerLock(),[4,(0,e0.e9)(t,function(e){return e.label},p)];case 1:if(n=o.sent(),!r)return[3,3];return[4,null==(a=e.getRenderingCanvas())?void 0:a.requestPointerLock()];case 2:o.sent(),o.label=3;case 3:return[2,n]}})})()}),[4,(0,e2.t)()];case 6:if(m=D.sent(),b=new e1.e(h,m),document.body.appendChild(b.root),y=new n.DirectionalLight("sun",new n.Vector3(1,-1,-.5),o),new n.HemisphericLight("hemi",n.Vector3.Up(),o).intensity=.02,(0,R.ez)(y.direction.scale(-1),o),(g=n.MeshBuilder.CreateGround("ground",{width:3e3,height:3e3},o)).receiveShadows=!0,g.position.y=-2,(v=new n.PBRMaterial("groundMaterial",o)).albedoColor.set(.8,.4,.2),v.metallic=0,v.roughness=.7,g.material=v,new n.PhysicsAggregate(g,n.PhysicsShapeType.BOX,{mass:0,restitution:0,friction:2},o).shape.filterMembershipMask=F.H.ENVIRONMENT,(0,R.tZ)(y),!(w=(0,tl.d)(l,o,new n.Vector3(0,5,0),n.Quaternion.RotationAxis(n.Vector3.UpReadOnly,Math.PI/4))).success)throw Error(w.error);P=w.value,(S=new ti.j(o)).setVehicle(P),S.switchToThirdPersonCamera(),C=S,T=function(){C=S,ts.Y.setEnabled(!0),$.b.setEnabled(!1),d.setThirdPersonCameraActive()},x=function(){C=d,d.setFirstPersonCameraActive(),ts.Y.setEnabled(!1),$.b.setEnabled(!0)},T(),h.register({getPhysicsAggregate:function(){return P.frame},getInteractions:function(){return[{label:"Drive",perform:function(){return T(),Promise.resolve()}}]}}),A=!0,O=!1,E=void 0;try{for(k=P.doors[Symbol.iterator]();!(A=(M=k.next()).done);A=!0)I=M.value,h.register(I)}catch(e){O=!0,E=e}finally{try{A||null==k.return||k.return()}finally{if(O)throw E}}for(document.addEventListener("keydown",function(e){"e"===e.key&&C===S&&x()}),L=0;L<200;L++)r(L);return o.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;d.update(t),S.update(t),h.update(t),b.update(t),o.activeCamera!==C.getActiveCamera()&&(null!==o.activeCamera&&o.activeCamera.detachControl(),o.activeCamera=C.getActiveCamera(),o.activeCamera.attachControl())}),[2,o]}})})()}var tO=r(31411),tE=r(4529),tk=r(81666),tM=r(97996),tI=r(25656);function tL(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function tD(e,t){var r;return(r=function(){var t,r,a,o,i,s;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(l){switch(l.label){case 0:return t=new O.Z(e),new n.FreeCamera("camera",n.Vector3.Zero(),t).attachControl(),[4,(0,e3.L)()];case 1:return l.sent(),r=new tM.Y((0,tk.u)()),a=new B.b,o=new ey,(i=new tI.X(r,a,o)).htmlRoot.style.position="absolute",document.body.appendChild(i.htmlRoot),[4,tO.E.CreateAsync(new tE.m(tE.m.SAVES_KEY),new tE.m(tE.m.BACKUP_SAVE_KEY),r)];case 2:if((s=l.sent()).success)return[3,4];return[4,(0,e0.sQ)("Could not load saves",a)];case 3:case 5:return l.sent(),[2,t];case 4:return[4,i.populateCmdrList(r,s.value)]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){tL(o,n,a,i,s,"next",e)}function s(e){tL(o,n,a,i,s,"throw",e)}i(void 0)})})()}var tj=r(97678);function t_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tB(e){return{id:"jupiter",name:"Jupiter",type:"gasPlanet",radius:69911e3,mass:1898e24,axialTilt:(0,tj.tR)(3.13),siderealDaySeconds:35730,orbit:{parentIds:function(e){if(Array.isArray(e))return t_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return t_(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t_(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),semiMajorAxis:7785472e5,eccentricity:.0934,inclination:(0,tj.tR)(1.85),longitudeOfAscendingNode:(0,tj.tR)(49.558),argumentOfPeriapsis:(0,tj.tR)(286.502),initialMeanAnomaly:0,p:2},atmosphere:{pressure:ex.th,greenHouseEffectFactor:.7},colorPalette:{type:"textured",textureId:"jupiter"},rings:null,seed:0}}function tN(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function tH(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(r=new n.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,r.clearColor.set(0,0,0,1),[4,(0,eP.P)(r,t)];case 1:return a=d.sent(),[4,(0,R.z6)(r)];case 2:return d.sent(),i=(o=new P.w(r)).getActiveCamera(),o.speed=66e6,i.maxZ*=66e6,o.getTransform().setAbsolutePosition(new n.Vector3(0,1,-2).scaleInPlace(66e6)),(0,S.t5)(o.getTransform(),n.Vector3.Zero(),r.useRightHandedSystem),i.attachControl(),r.enableDepthRenderer(null,!1,!0),(s=new n.PointLight("light1",new n.Vector3(7,5,-10).scaleInPlace(66e6),r)).falloffType=n.Light.FALLOFF_STANDARD,F.w.EARTH_RADIUS=6371e3,l=tB([]),c=new eO.K(function(){return new eC.q(r)}),u=new eR.s(l,a,c,r),f=new k.D(u.getTransform(),u.getBoundingRadius(),u.atmosphereUniforms,[s],r),i.attachPostProcess(f),r.onBeforeRenderObservable.add(function(){var e=r.getEngine().getDeltaTime()/1e3;o.update(e),u.getTransform().rotate(n.Axis.Y,.1*e),u.updateMaterial([s],e)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){tN(o,n,a,i,s,"next",e)}function s(e){tN(o,n,a,i,s,"throw",e)}i(void 0)})})()}function tF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tV(e){return{id:"saturn",name:"Saturn",type:"gasPlanet",radius:58232e3,mass:5683e23,axialTilt:(0,tj.tR)(26.73),siderealDaySeconds:38361.6,orbit:{parentIds:function(e){if(Array.isArray(e))return tF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return tF(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tF(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),semiMajorAxis:143344937e4,eccentricity:.0565,inclination:(0,tj.tR)(2.49),longitudeOfAscendingNode:(0,tj.tR)(113.715),argumentOfPeriapsis:(0,tj.tR)(336.092),initialMeanAnomaly:0,p:2},atmosphere:{pressure:ex.th,greenHouseEffectFactor:.5},colorPalette:{type:"textured",textureId:"saturn"},rings:{innerRadius:74658e3,outerRadius:136775e3,type:"textured",textureId:"saturn"},seed:0}}function tU(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function tZ(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h,m;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(b){switch(b.label){case 0:return(r=new n.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,r.clearColor.set(0,0,0,1),[4,(0,R.z6)(r)];case 1:return b.sent(),[4,(0,_.Q)(r,t)];case 2:return a=b.sent(),i=(o=new P.w(r)).getActiveCamera(),o.speed=96e6,i.maxZ*=96e6,o.getTransform().setAbsolutePosition(new n.Vector3(0,2,-2).scaleInPlace(96e6)),(0,S.t5)(o.getTransform(),n.Vector3.Zero(),r.useRightHandedSystem),i.attachControl(),r.enableDepthRenderer(null,!1,!0),(s=new n.TransformNode("sun",r)).position=new n.Vector3(7,5.5,-10).scaleInPlace(96e6),(l=new n.PointLight("light1",n.Vector3.Zero(),r)).falloffType=n.Light.FALLOFF_STANDARD,l.parent=s,F.w.EARTH_RADIUS=6371e3,c=tV([]),u=new eO.K(function(){return new eC.q(r)}),f=new eR.s(c,a.textures,u,r),d=null,null!==c.rings&&(d=new C.U(0,f.getTransform(),c.rings.innerRadius,c.rings.outerRadius,r)),p=new eT.U(f.getTransform(),f.getBoundingRadius(),f.ringsUniforms,null,!1,[{getBoundingRadius:function(){return 0},getLight:function(){return l}}],r),i.attachPostProcess(p),h=new k.D(f.getTransform(),f.getBoundingRadius(),f.atmosphereUniforms,[l],r),i.attachPostProcess(h),null!==f.ringsUniforms&&(m=new eS.b(f.getTransform(),f.ringsUniforms,f.model,[l],r),i.attachPostProcess(m)),r.onBeforeRenderObservable.add(function(){var e=r.getEngine().getDeltaTime()/1e3;o.update(e),f.updateMaterial([l],e),null==d||d.update(i.globalPosition,a.objects.asteroids,e)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){tU(o,n,a,i,s,"next",e)}function s(e){tU(o,n,a,i,s,"throw",e)}i(void 0)})})()}function tq(){return{id:"sun",name:"Sun",type:"star",radius:695508e3,mass:1989e27,blackBodyTemperature:5778,axialTilt:(0,tj.tR)(7.25),siderealDaySeconds:2217888,orbit:{parentIds:[],semiMajorAxis:0,eccentricity:0,p:2,inclination:0,longitudeOfAscendingNode:0,argumentOfPeriapsis:0,initialMeanAnomaly:0},rings:null,seed:0}}var tz=r(16580),tG=r(27668),tY=r(24111),tW=r(35572),tQ=r(6110),tX=r(74079);function tJ(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function tK(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h,m,b,y,g;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(v){switch(v.label){case 0:return(r=new tz.B(e)).useRightHandedSystem=!0,r.clearColor.set(0,0,0,1),[4,(0,R.z6)(r)];case 1:return v.sent(),[4,(0,e3.L)()];case 2:return v.sent(),[4,(0,_.Q)(r,t)];case 3:return a=v.sent(),i=(o=new P.w(r)).getActiveCamera(),o.speed=66e6,i.maxZ*=66e6,[4,r.setActiveControls(o)];case 4:var w,C,T,x,A,O,E,k,M,I;return v.sent(),r.enableDepthRenderer(null,!1,!0),s=new tW.u(F.w.VERTEX_RESOLUTION),l=new tX.$,[4,tQ.k.CreateAsync((w=tq(),C={id:"mercury",name:"Mercury",type:"telluricPlanet",radius:2439700,mass:3301e20,axialTilt:(0,tj.tR)(.034),siderealDaySeconds:5067014.4,waterAmount:0,temperature:{min:437,max:437},orbit:{parentIds:[w.id],semiMajorAxis:(0,tj.kK)(.38),eccentricity:.2056,p:2,inclination:(0,tj.tR)(7),longitudeOfAscendingNode:(0,tj.tR)(48.331),argumentOfPeriapsis:(0,tj.tR)(29.124),initialMeanAnomaly:0},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:0,continent_base_height:0,mountains_frequency:0},atmosphere:null,rings:null,clouds:null,ocean:null,seed:0},T={id:"venus",name:"Venus",type:"telluricPlanet",radius:6051800,mass:48e19,axialTilt:(0,tj.tR)(177.36),siderealDaySeconds:0x14064f0,waterAmount:0,temperature:{min:719,max:763},orbit:{parentIds:[w.id],semiMajorAxis:1082095e5,eccentricity:.0067,inclination:(0,tj.tR)(3.39),longitudeOfAscendingNode:(0,tj.tR)(76.68),argumentOfPeriapsis:(0,tj.tR)(54.88),initialMeanAnomaly:0,p:2},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:2e4,continent_base_height:0,mountains_frequency:5},rings:null,atmosphere:{pressure:(0,tj.J3)(93),greenHouseEffectFactor:.99},clouds:{layerRadius:6061800,smoothness:.7,specularPower:2,frequency:4,detailFrequency:12,coverage:0,sharpness:2.5,color:{r:.8,g:.8,b:.1},worleySpeed:5e-4,detailSpeed:.003},ocean:null,seed:0},x={id:"earth",name:"Earth",type:"telluricPlanet",radius:6371e3,mass:5972e21,axialTilt:(0,tj.tR)(23.44),siderealDaySeconds:86400,waterAmount:1,temperature:{min:(0,tj.F1)(-50),max:(0,tj.F1)(50)},orbit:{parentIds:[w.id],semiMajorAxis:14959787e4,eccentricity:.0167,inclination:(0,tj.tR)(0),longitudeOfAscendingNode:(0,tj.tR)(0),argumentOfPeriapsis:(0,tj.tR)(114.20783),initialMeanAnomaly:0,p:2},terrainSettings:{continents_frequency:1,continents_fragmentation:.65,bumps_frequency:30,max_bump_height:1500,max_mountain_height:1e4,continent_base_height:19e3,mountains_frequency:360},rings:null,atmosphere:{pressure:(0,tj.J3)(1),greenHouseEffectFactor:.5},clouds:{layerRadius:6401e3,smoothness:.7,specularPower:2,frequency:4,detailFrequency:12,coverage:.5,sharpness:2.5,color:{r:.8,g:.8,b:.8},worleySpeed:5e-4,detailSpeed:.003},ocean:{depth:1e4},seed:0},A={id:"moon",name:"Moon",type:"telluricSatellite",radius:1737100,mass:7342e19,axialTilt:(0,tj.tR)(6.68),siderealDaySeconds:2360620.8,waterAmount:0,temperature:{min:100,max:100},orbit:{parentIds:[x.id],semiMajorAxis:3844e5,eccentricity:.0549,inclination:(0,tj.tR)(5.145),longitudeOfAscendingNode:(0,tj.tR)(125.08),argumentOfPeriapsis:(0,tj.tR)(318.15),initialMeanAnomaly:0,p:2},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:0,continent_base_height:0,mountains_frequency:0},atmosphere:null,clouds:null,ocean:null,seed:0},O={id:"mars",name:"Mars",type:"telluricPlanet",radius:3389500,mass:64171e19,axialTilt:(0,tj.tR)(25.19),siderealDaySeconds:88732.79999999999,waterAmount:0,temperature:{min:(0,tj.F1)(-140),max:(0,tj.F1)(20)},orbit:{parentIds:[w.id],semiMajorAxis:2279392e5,eccentricity:.0934,inclination:(0,tj.tR)(1.85),longitudeOfAscendingNode:(0,tj.tR)(49.558),argumentOfPeriapsis:(0,tj.tR)(286.502),initialMeanAnomaly:0,p:2},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:0,continent_base_height:0,mountains_frequency:0},atmosphere:{pressure:(0,tj.J3)(.006),greenHouseEffectFactor:.1},rings:null,clouds:null,ocean:null,seed:0},E=tB([w.id]),k=tV([w.id]),M={id:"uranus",name:"Uranus",type:"gasPlanet",radius:25362e3,mass:8681e22,axialTilt:(0,tj.tR)(97.77),siderealDaySeconds:3600*17.24,orbit:{parentIds:[w.id],semiMajorAxis:287246327e4,eccentricity:.0565,inclination:(0,tj.tR)(.77),longitudeOfAscendingNode:(0,tj.tR)(74.229),argumentOfPeriapsis:(0,tj.tR)(96.541),initialMeanAnomaly:0,p:2},colorPalette:{type:"textured",textureId:"uranus"},atmosphere:{pressure:(0,tj.J3)(.1),greenHouseEffectFactor:.5},rings:{innerRadius:50724e3,outerRadius:62e6,type:"textured",textureId:"uranus"},seed:0},I={id:"neptune",name:"Neptune",type:"gasPlanet",radius:24622e3,mass:1024e23,axialTilt:(0,tj.tR)(28.32),siderealDaySeconds:57996,orbit:{parentIds:[w.id],semiMajorAxis:449506e7,eccentricity:.0086,inclination:(0,tj.tR)(1.77),longitudeOfAscendingNode:(0,tj.tR)(131.72169),argumentOfPeriapsis:(0,tj.tR)(265.646853),initialMeanAnomaly:0,p:2},colorPalette:{type:"textured",textureId:"neptune"},atmosphere:{pressure:(0,tj.J3)(.1),greenHouseEffectFactor:.7},rings:null,seed:0},{name:"Sol",coordinates:{starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},stellarObjects:[w],planets:[C,T,x,O,E,k,M,I],satellites:[A],anomalies:[],orbitalFacilities:[]}),l,a,r)];case 5:(c=v.sent()).initPositions(2,s,Date.now()/1e3),u=c.getStellarObjects()[0],o.getTransform().position=u.getTransform().position.add(new n.Vector3(0,1,-2).scaleInPlace(7*u.getBoundingRadius())),(0,S.t5)(o.getTransform(),u.getTransform().position,r.useRightHandedSystem),(f=new tG.X(a.textures,r)).addCelestialBodies(c.getCelestialBodies(),c.getStellarObjects(),[c.starFieldBox.mesh]),d=new tY.p,p=!0,h=!1,m=void 0;try{for(b=c.getCelestialBodies()[Symbol.iterator]();!(p=(y=b.next()).done);p=!0)g=y.value,d.addObject(g)}catch(e){h=!0,m=e}finally{try{p||null==b.return||b.return()}finally{if(h)throw m}}return r.onBeforeRenderObservable.add(function(){var e=r.getEngine().getDeltaTime()/1e3;o.update(e),s.update(a),f.update(e),c.update(e,s),d.update(i)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){tJ(o,n,a,i,s,"next",e)}function s(e){tJ(o,n,a,i,s,"throw",e)}i(void 0)})})()}var t$=r(1916),t0=r(36589),t1=r(71191);function t2(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function t3(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(r=new n.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,r.clearColor.set(0,0,0,1),[4,(0,R.z6)(r)];case 1:return d.sent(),[4,(0,eP.P)(r,t)];case 2:var p;return a=d.sent(),i=(o=new P.w(r)).getActiveCamera(),o.speed=9e8,i.maxZ*=9e8,r.enableDepthRenderer(i,!1,!0),o.getTransform().setAbsolutePosition(new n.Vector3(0,2,-2).scaleInPlace(9e8)),(0,S.t5)(o.getTransform(),n.Vector3.Zero(),r.useRightHandedSystem),(null!=(p=n.FreeCamera)&&"undefined"!=typeof Symbol&&p[Symbol.hasInstance]?!!p[Symbol.hasInstance](i):i instanceof p)&&i.setTarget(new n.Vector3(-.001,0,-.1)),i.attachControl(),s=new es.y(a.environment.milkyWay,1e6,r),l=tq(),c=new t1.F(l,a,r),u=new t0.N(c.mesh,c.volumetricLightUniforms,[s.mesh],r),i.attachPostProcess(u),f=new t$.O(c.getTransform(),c.getBoundingRadius(),c.getLight().diffuse,r),i.attachPostProcess(f),r.onBeforeRenderObservable.add(function(){var e=r.getEngine().getDeltaTime()/1e3;o.update(e),c.updateMaterial(e)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){t2(o,n,a,i,s,"next",e)}function s(e){t2(o,n,a,i,s,"throw",e)}i(void 0)})})()}var t5=r(47605),t6=r(83394),t4=r(64939);function t7(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function t8(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h,m,b,y,g,v;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(w){switch(w.label){case 0:return(r=new O.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,r.clearColor.set(0,0,0,1),[4,(0,R.z6)(r)];case 1:return w.sent(),[4,(0,_.Q)(r,t)];case 2:var C,T;if(a=w.sent(),(o=new P.w(r)).speed=2e3,(i=o.getActiveCamera()).maxZ=1e5*F.w.EARTH_RADIUS,i.attachControl(),s={starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},l=tq(),c=(0,t6.z)("dummy",0,"Dummy",[l],{orbit:{semiMajorAxis:(0,tj.kK)(1)}}),u={name:"Space Elevator PG",coordinates:s,stellarObjects:[l],planets:[c],satellites:[],anomalies:[],orbitalFacilities:[]},f=new URLSearchParams(window.location.search).get("seed"),d=(0,t5.b)("station",null!==f?Number(f):Math.random()*F.w.SEED_HALF_RANGE,c,u),void 0===(h=(p=new t4.b(d,a,r)).landingBays[0]))throw Error("Space elevator has no landing bay");return b=new ty(m=(0,n.CreateSphere)("planetMesh",{diameter:2*c.radius,segments:64},r),(C=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},c),T=T={type:"custom"},Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(T)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(T)).forEach(function(e){Object.defineProperty(C,e,Object.getOwnPropertyDescriptor(T,e))}),C)),(y=new n.PBRMaterial("planetMaterial",r)).roughness=.7,y.metallic=0,m.material=y,new n.DirectionalLight("sun",new L.Pq(-1,-1,1).normalize(),r),new n.GlowLayer("glow",r),g=n.Matrix.Identity(),v=0,(0,th.je)(p,[b],g,v),(0,th.d_)(p,g,v),p.update([b],L.Pq.Zero(),v),h.getTransform().computeWorldMatrix(!0),o.getTransform().position=h.getTransform().getAbsolutePosition().add(p.getTransform().up.scale(3e3)),(0,S.t5)(o.getTransform(),p.getTransform().position,r.useRightHandedSystem),o.getTransform().setParent(p.getTransform()),r.onBeforePhysicsObservable.add(function(){var t=e.getDeltaTime()/1e3;v+=t,o.update(t);var r=i.globalPosition;(0,th.d_)(b,g,v),(0,th.je)(p,[b],g,v),p.update([b],r,t)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){t7(o,n,a,i,s,"next",e)}function s(e){t7(o,n,a,i,s,"throw",e)}i(void 0)})})()}var t9=r(74200),re=r(40726);function rt(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function rr(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(h){switch(h.label){case 0:return(r=new O.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,r.clearColor.set(0,0,0,1),[4,(0,R.z6)(r)];case 1:return h.sent(),[4,(0,_.Q)(r,t)];case 2:if(a=h.sent(),(o=new P.w(r)).speed=2e3,(i=o.getActiveCamera()).maxZ=1e5*F.w.EARTH_RADIUS,i.attachControl(),s=(0,tj.kK)(1),c=(l={name:"Space Station PG",coordinates:{starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},stellarObjects:[tq()],planets:[],satellites:[],anomalies:[],orbitalFacilities:[]}).stellarObjects[0],u=new URLSearchParams(window.location.search).get("seed"),f=(0,t9.F)("station",null!==u?Number(u):Math.random()*F.w.SEED_HALF_RANGE,c,l,{orbit:{semiMajorAxis:s}}),void 0===(p=(d=new re.x(f,a,r)).landingBays[0]))throw Error("Space station has no landing bay");return p.getTransform().position.addToRef(new L.Pq(0,3e3,0),o.getTransform().position),(0,S.t5)(o.getTransform(),d.getTransform().position,r.useRightHandedSystem),new n.DirectionalLight("sun",new L.Pq(-1,-1,1).normalize(),r),new n.GlowLayer("glow",r),r.onBeforePhysicsObservable.add(function(){var t=e.getDeltaTime()/1e3;o.update(t);var r=i.globalPosition;d.update([],r,t)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){rt(o,n,a,i,s,"next",e)}function s(e){rt(o,n,a,i,s,"throw",e)}i(void 0)})})()}var rn=r(95631),ra=r(61125),ro=r(53940);function ri(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function rs(e,t){var r;return(r=function(){var r,n,a,o,i,s,l,c,u,f,d,p,h,m;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(b){switch(b.label){case 0:return(r=new O.Z(e)).useRightHandedSystem=!0,[4,(0,R.z6)(r)];case 1:return b.sent(),[4,(0,e3.L)()];case 2:return b.sent(),[4,(0,_.Q)(r,t)];case 3:if(n=b.sent(),a=new B.b,o=new eh,i=new ey,s=new tM.Y((0,tk.u)()),void 0===(c=(l=ra.a.Default(s)).serializedSpaceships.shift()))throw Error("No spaceship found in player data");return[4,N.Z.Deserialize(c,l.spareSpaceshipComponents,r,n,a)];case 4:if(u=b.sent(),l.instancedSpaceships.push(u),(f=new em.l(u,r,a,o,i).thirdPersonCamera).attachControl(),r.activeCamera=f,d=s.fallbackSystem,p=new rn.k,h=new ro.M(l,p,s,a,i),void 0===(m=d.orbitalFacilities[0]))throw Error("No station found in system model");return h.setStation(m,[],l),h.setVisibility(!0),window.player=l,[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){ri(o,n,a,i,s,"next",e)}function s(e){ri(o,n,a,i,s,"throw",e)}i(void 0)})})()}function rl(e,t){var r=new O.Z(e);r.useRightHandedSystem=!0;var a=new n.FreeCamera("camera1",new n.Vector3(0,5,-10),r);a.setTarget(n.Vector3.Zero()),a.attachControl(),n.MeshBuilder.CreateGround("ground",{width:200,height:200},r);for(var o=new te.c(Math.PI/2,r),i=[],s=0;s<1e3;s++){var l=Math.random()*Math.PI*2,c=100*Math.sqrt(Math.random()),u=new n.Vector3(Math.cos(l)*c,0,Math.sin(l)*c),f=new n.Vector3((Math.random()-.5)*200,-(50*Math.random()),(Math.random()-.5)*200),d=n.Color3.FromHSV(360*Math.random(),.7,1),p=1.5+2*Math.random();i.push({rootPosition:u,lookAtTarget:f,color:d,upDirection:n.Vector3.UpReadOnly,postHeight:p,postDiameter:.2})}return o.setInstances(i),new n.ClusteredLightContainer("lightContainer",o.lights,r),new n.GlowLayer("glow",r),Promise.resolve(r)}var rc=r(7657),ru=r(93060);function rf(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function rd(e,t){var r;return(r=function(){var r,n,a,o,i;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return(r=new O.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,r.clearColor.set(0,0,0,1),n=new tM.Y((0,tk.u)()),[4,(0,rc.H)(r,t)];case 1:return a=s.sent(),o=new ru.b(n,a,r),i=new P.w(r),r.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;i.update(t),o.update(i.getActiveCamera())}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){rf(o,n,a,i,s,"next",e)}function s(e){rf(o,n,a,i,s,"throw",e)}i(void 0)})})()}var rp=r(14407),rh=r(90584),rm=r(94260),rb=r(64753);function ry(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function rg(e,t){var r;return(r=function(){var r,n,a,o,i,s,l,c,u,f;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return[4,(0,e3.L)()];case 1:return d.sent(),r=new tM.Y((0,tk.u)()),n=ra.a.Default(r),a=new rp.A(r),o=new B.b,i=new ey,(s=new O.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,s.clearColor.set(0,0,0,1),[4,(0,rc.H)(s,t)];case 2:if(l=d.sent(),(c=new rm.E(n,s,l,a,r,o,i)).setCurrentStarSystem(r.fallbackSystem.coordinates,!0),null!==(u=new URLSearchParams(window.location.search).get("systemCoordinates"))){if(null===(f=(0,rb.z)(decodeURIComponent(u))))throw Error("Invalid system coordinates json provided in URL parameters.");c.focusOnSystem(rh.Y.parse(f),!0)}return c.attachControl(),[2,s]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){ry(o,n,a,i,s,"next",e)}function s(e){ry(o,n,a,i,s,"throw",e)}i(void 0)})})()}var rv=r(11577),rw=r(85294),rP=r(92647),rS=r(61800),rC=r(7647);function rT(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function rR(e,t){var r;return(r=function(){var r,n,a,o,i,s,l,c,u,f,d,p,h;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(m){switch(m.label){case 0:return[4,(0,e3.L)()];case 1:var b,y,g,v,w,P,S;return m.sent(),r=new tM.Y(((b=(0,rw.jk)("star0",420,"Weierstrass",[])).blackBodyTemperature=5778,(y=(0,t6.z)("hecate",253,"H\xe9cate",[b])).temperature.min=(0,tj.F1)(-40),y.temperature.max=(0,tj.F1)(30),y.orbit.semiMajorAxis=21e3*y.radius,(g=(0,rP.E)("hecate->manaleth",23,"Manaleth",[y])).orbit.inclination=(0,tj.tR)(45),g.orbit.semiMajorAxis=(0,rv.oe)(g.siderealDaySeconds,y.mass),(v=(0,t6.z)("ares",.3725,"Ares",[b])).ocean=null,null!==v.clouds&&(v.clouds.coverage=1),null!==v.atmosphere&&(v.atmosphere.pressure=.5*ex.th),v.orbit.semiMajorAxis=25100*y.radius,(w=(0,ew.O)("andromaque",.28711440474126226,"Andromaque",[b])).orbit.semiMajorAxis=25300*y.radius,w.orbit.eccentricity=.8,P={name:"Alpha Testis",coordinates:{starSectorX:0,starSectorY:1,starSectorZ:0,localX:0,localY:0,localZ:0},stellarObjects:[b],planets:[y,v,w],satellites:[g],anomalies:[],orbitalFacilities:[]},(S=(0,t9.F)("hecate->station",0,y,P)).orbit.initialMeanAnomaly=Math.PI/2,P.orbitalFacilities.push(S),P)),n=ra.a.Default(r),a=new rn.k,o=new B.b,i=new eh,s=new ey,(l=new tz.B(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,[4,(0,R.z6)(l)];case 2:return c=m.sent(),[4,(0,_.Q)(l,t)];case 3:return u=m.sent(),[4,(f=new rC.l(l,n,e,c,a,r,o,i,s,u)).resetPlayer()];case 4:return m.sent(),[4,f.switchToSpaceshipControls()];case 5:return m.sent(),[4,f.loadStarSystem(r.fallbackSystem)];case 6:return m.sent(),f.initStarSystem(0),d=f.getSpaceshipControls(),"atStation"===new URLSearchParams(window.location.search).get("spawnLocation")?void 0!==(h=null==(p=f.getStarSystem().getOrbitalFacilities()[0])?void 0:p.getLandingPadManager().getLandingPads()[0])&&(d.getSpaceship().spawnOnPad(h),d.syncCameraTransform()):(0,rS.Ez)(f.getSpaceshipControls(),f.getStarSystem().getStellarObjects()[0],f.getStarSystem()),l.onBeforeRenderObservable.add(function(){var e=l.getEngine().getDeltaTime()/1e3;s.update(e)}),[2,f.scene]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){rT(o,n,a,i,s,"next",e)}function s(e){rT(o,n,a,i,s,"throw",e)}i(void 0)})})()}function rx(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function rA(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h,m,b,y;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(g){switch(g.label){case 0:return(r=new O.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,r.clearColor.set(0,0,0,1),[4,(0,R.z6)(r)];case 1:return g.sent(),[4,(0,_.Q)(r,t)];case 2:return a=g.sent(),o=new eh,i=new B.b,s=new ey,[4,em.l.CreateDefault(r,a,o,i,s)];case 3:if(l=g.sent(),eb._.setEnabled(!0),(c=l.thirdPersonCamera).maxZ=1e5*F.w.EARTH_RADIUS,r.activeCamera=c,c.attachControl(),u=(0,tj.kK)(1),f={name:"Station Landing PG",coordinates:{starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},stellarObjects:[tq()],planets:[],satellites:[],anomalies:[],orbitalFacilities:[]},p=(d=new URLSearchParams(window.location.search)).get("seed"),h=(0,t9.F)("station",null!==p?Number(p):Math.random()*F.w.SEED_HALF_RANGE,f.stellarObjects[0],f,{orbit:{semiMajorAxis:u}}),void 0===(b=(m=new re.x(h,a,r)).landingBays[0]))throw Error("Space station has no landing bay");if(null!==d.get("spawnOnPad")){if(void 0===(y=b.landingPads[0]))throw Error("Landing bay has no landing pad");l.getSpaceship().spawnOnPad(y)}else b.getTransform().position.addToRef(new L.Pq(0,3e3,0),l.getTransform().position),(0,S.t5)(l.getTransform(),m.getTransform().position,r.useRightHandedSystem);return l.getTransform().computeWorldMatrix(!0),l.syncCameraTransform(),l.setClosestLandableFacility(m),new n.DirectionalLight("sun",new L.Pq(-1,-1,1).normalize(),r),new n.GlowLayer("glow",r),r.onBeforePhysicsObservable.add(function(){var t=e.getDeltaTime()/1e3;l.update(t),m.update([],c.globalPosition,t)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){rx(o,n,a,i,s,"next",e)}function s(e){rx(o,n,a,i,s,"throw",e)}i(void 0)})})()}var rO=r(73109),rE=r(46245),rk=r(59431);function rM(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function rI(e,t){var r;return(r=function(){var r,n,a,o,i,s,l;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(c){switch(c.label){case 0:return(r=new O.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,[4,(0,eo.s)(r,t)];case 1:return n=c.sent(),(a=new P.w(r)).speed=2e6,(o=a.getActiveCamera()).attachControl(),r.activeCamera=o,r.enableDepthRenderer(o,!1,!0),new es.y(n.milkyWay,1e6,r),i=(0,rO.A)("blackHole",42,"Black Hole Demo",[]),(s=new rE.a(i,n.milkyWay,r)).getTransform().position=new L.Pq(0,-.2,1).scaleInPlace(20*s.getRadius()),l=new rk.$(s.getTransform(),s.blackHoleUniforms,r),o.attachPostProcess(l),o.maxZ=1e12,(0,S.t5)(a.getTransform(),s.getTransform().position,r.useRightHandedSystem),r.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;a.update(t),l.update(t)}),(0,R.s9)(e),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){rM(o,n,a,i,s,"next",e)}function s(e){rM(o,n,a,i,s,"throw",e)}i(void 0)})})()}var rL=r(69263),rD=r(87861),rj=r(44261);function r_(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function rB(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(r=new O.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,[4,(0,R.z6)(r)];case 1:return d.sent(),[4,(0,eP.P)(r,t)];case 2:return a=d.sent(),(o=new P.w(r)).speed=2e9,(i=o.getActiveCamera()).attachControl(),r.activeCamera=i,r.enableDepthRenderer(i,!1,!0),s=(0,rL.M)("neutronStar",456,"Neutron Star Demo",[]),(l=new rj.G(s,a,r)).getTransform().position=new L.Pq(0,0,1).scaleInPlace(2e6*l.getRadius()),c=new t0.N(l.mesh,l.volumetricLightUniforms,[],r),i.attachPostProcess(c),u=new rD.A(l.getTransform(),l.getRadius(),l.model.dipoleTilt,r),i.attachPostProcess(u),f=new t$.O(l.getTransform(),l.getRadius(),(0,eA.C)(s.blackBodyTemperature),r),i.attachPostProcess(f),i.maxZ=1e12,(0,S.t5)(o.getTransform(),l.getTransform().position,r.useRightHandedSystem),r.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;o.update(t),l.getTransform().rotate(n.Axis.Y,2*Math.PI*t/s.siderealDaySeconds),u.update(t)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){r_(o,n,a,i,s,"next",e)}function s(e){r_(o,n,a,i,s,"throw",e)}i(void 0)})})()}function rN(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function rH(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h,m,b,y;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(g){switch(g.label){case 0:return(r=new O.Z(e)).useRightHandedSystem=!0,[4,(0,R.z6)(r,new L.Pq(0,-9.81,0))];case 1:return a=g.sent(),(0,R.s9)(e),[4,(0,J.H)(r,t)];case 2:if(o=g.sent(),(i=new n.DirectionalLight("dir01",new L.Pq(1,-2,-1),r)).position=new L.Pq(5,5,5).scaleInPlace(10),(0,R.ez)(i.direction.scale(-1),r),new n.HemisphericLight("hemi",new L.Pq(0,1,0),r).intensity=.5,!(s=o.placeholder.spawn()).success)throw Error("Failed to instantiate character: ".concat(s.error));return l=new ee.T(s.value,a,r),(c=new K.Y(l,r)).setThirdPersonCameraActive(),(0,R.tZ)(i),null!==new URLSearchParams(window.location.search).get("firstPerson")&&c.setFirstPersonCameraActive(),c.getActiveCamera().attachControl(),c.getActiveCamera().minZ=.1,$.b.setEnabled(!0),u=n.MeshBuilder.CreateGround("ground",{width:40,height:40},r),(f=new n.PhysicsAggregate(u,n.PhysicsShapeType.BOX,{mass:0,restitution:.2},r)).shape.filterMembershipMask=F.H.ENVIRONMENT,f.shape.filterCollideMask=F.H.EVERYTHING&~F.H.ENVIRONMENT,(d=n.MeshBuilder.CreateGround("waterPlane",{width:40,height:40,subdivisions:1},r)).position.y=3,d.visibility=.5,(p=new n.PhysicsAggregate(d,n.PhysicsShapeType.BOX,{mass:0},r)).shape.filterMembershipMask=F.H.ENVIRONMENT|F.H.WATER,p.shape.filterCollideMask=F.H.SURFACE_QUERY,(h=new n.PBRMetallicRoughnessMaterial("groundMaterial",r)).baseColor=new n.Color3(.5,.5,.5),u.material=h,(m=n.MeshBuilder.CreateGround("beach",{width:40,height:40},r)).rotate(n.Axis.Z,Math.PI/16),(b=new n.PhysicsAggregate(m,n.PhysicsShapeType.BOX,{mass:0,restitution:.2},r)).shape.filterMembershipMask=F.H.ENVIRONMENT,b.shape.filterCollideMask=F.H.EVERYTHING&~F.H.ENVIRONMENT,(y=new n.PBRMetallicRoughnessMaterial("beachMaterial",r)).baseColor=new n.Color3(.8,.7,.5),m.material=y,c.getTransform().position.y=5,r.onBeforeRenderObservable.add(function(){if(c.getActiveCamera()!==r.activeCamera){null==(t=r.activeCamera)||t.detachControl();var t,n=c.getActiveCamera();n.attachControl(),r.activeCamera=n}var a=e.getDeltaTime()/1e3;c.update(a)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){rN(o,n,a,i,s,"next",e)}function s(e){rN(o,n,a,i,s,"throw",e)}i(void 0)})})()}var rF=r(8248),rV=r(48995),rU=r(32599);function rZ(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function rq(e,t){var r;return(r=function(){var r,a,o,i,s,l,c,u,f,d,p,h,m,b,y;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(g){switch(g.label){case 0:return(r=new n.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,r.clearColor.setAll(0),[4,(0,R.z6)(r)];case 1:return g.sent(),a=new tW.u(F.w.VERTEX_RESOLUTION),[4,(0,_.Q)(r,t)];case 2:if(o=g.sent(),i=2*F.w.EARTH_RADIUS,l=(s=new P.w(r)).getActiveCamera(),s.speed=i,l.maxZ*=i,s.getTransform().setAbsolutePosition(new n.Vector3(0,1,-2).scaleInPlace(i)),(0,S.t5)(s.getTransform(),n.Vector3.Zero(),r.useRightHandedSystem),l.attachControl(),r.enableDepthRenderer(null,!1,!0),(c=new n.PointLight("light1",new n.Vector3(7,5,-10).scaleInPlace(i),r)).falloffType=n.PointLight.FALLOFF_STANDARD,u=new URLSearchParams(window.location.search).get("seed"),f=(0,t6.z)("telluricPlanet",null!==u?Number(u):1e3*Math.random(),"Telluric Planet",[]),d=new rU.R(f,o,r),p=new eT.U(d.getTransform(),d.getBoundingRadius(),d.ringsUniforms,null,!1,[{getBoundingRadius:function(){return 0},getLight:function(){return c}}],r),l.attachPostProcess(p),null!==d.oceanUniforms&&(h=new rV.a(d.getTransform(),d.getBoundingRadius(),d.oceanUniforms,[c],o.textures.water,r),l.attachPostProcess(h)),null===d.cloudsUniforms)return[3,4];return m=new rF.D(d.getTransform(),d.getBoundingRadius(),d.cloudsUniforms,[c],r),l.attachPostProcess(m),[4,new Promise(function(e){var t;null==(t=d.cloudsUniforms)||t.lut.getTexture().executeWhenReady(function(){e()})})];case 3:g.sent(),g.label=4;case 4:if(null!==d.atmosphereUniforms&&(b=new k.D(d.getTransform(),d.getBoundingRadius(),d.atmosphereUniforms,[c],r),l.attachPostProcess(b)),!d.ringsUniforms)return[3,6];return y=new eS.b(d.getTransform(),d.ringsUniforms,f,[c],r),l.attachPostProcess(y),[4,new Promise(function(e){var t;(null==(t=d.ringsUniforms)?void 0:t.patternLut.type)==="procedural"&&d.ringsUniforms.patternLut.lut.getTexture().executeWhenReady(function(){e()})})];case 5:g.sent(),g.label=6;case 6:return r.onBeforeRenderObservable.add(function(){var e=r.getEngine().getDeltaTime()/1e3;s.update(e),d.updateLOD(l.globalPosition,a),a.update(o),d.computeCulling(l),d.updateMaterial([c])}),[4,new Promise(function(t){var r=e.onBeginFrameObservable.add(function(){d.updateLOD(l.getWorldMatrix().getTranslation(),a),a.update(o),0===a.applyTaskQueue.length&&0===a.workerPool.busyWorkers.length&&(e.onBeginFrameObservable.remove(r),t())})})];case 7:return g.sent(),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){rZ(o,n,a,i,s,"next",e)}function s(e){rZ(o,n,a,i,s,"throw",e)}i(void 0)})})()}var rz=r(23043),rG=r(48104),rY=r(71518),rW=r(52107),rQ=r(35514);function rX(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function rJ(e,t){var r;return(r=function(){var t,r,a,o;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:return t=new O.Z(e),(r=new n.FreeCamera("camera1",new n.Vector3(0,5,-10),t)).setTarget(n.Vector3.Zero()),r.attachControl(),[4,(0,e3.L)()];case 1:switch(i.sent(),a=new rz.O(new B.b),document.body.appendChild(a.root),null!=(o=new URLSearchParams(window.location.search).get("tutorial"))?o:"flight"){case"flight":return[3,2];case"fuelScoop":return[3,4];case"stationLanding":return[3,6];case"starMap":return[3,8]}return[3,10];case 2:return[4,a.setTutorial(new rG.$)];case 3:case 5:case 7:case 9:return i.sent(),[3,10];case 4:return[4,a.setTutorial(new rY.F)];case 6:return[4,a.setTutorial(new rQ.M)];case 8:return[4,a.setTutorial(new rW.r)];case 10:return[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){rX(o,n,a,i,s,"next",e)}function s(e){rX(o,n,a,i,s,"throw",e)}i(void 0)})})()}var rK=r(98334);function r$(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function r0(e,t){var r;return(r=function(){var t,r,a,o,i;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return(t=new O.Z(e)).useRightHandedSystem=!0,a=(r=new P.w(t)).getActiveCamera(),[4,(0,R.z6)(t)];case 1:return s.sent(),(o=n.MeshBuilder.CreateBox("Anchor",{size:10},t)).position.z=200,(i=new rK.D(t)).setThrottle(1),i.getTransform().parent=o,t.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;i.update(t),r.update(t),o.position.z-=2e3*t,r.getTransform().position.z-=2e3*t;var n=a.globalPosition;o.position.subtractInPlace(n),r.getTransform().position.subtractInPlace(n)}),[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){r$(o,n,a,i,s,"next",e)}function s(e){r$(o,n,a,i,s,"throw",e)}i(void 0)})})()}function r1(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function r2(e,t){var r;return(r=function(){var t,r,s,u,p;function b(r){t.cameras.forEach(function(e){return e.attachPostProcess(r)}),t.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(r)}),t.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;r.update(t)})}return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(v){switch(v.label){case 0:var w,P,S,C,T,R,x,A,E,k;return((t=new O.Z(e)).useRightHandedSystem=!0,r=new URLSearchParams(window.location.search),(s=new n.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5,L.Pq.Zero(),t)).attachControl(),s.lowerRadiusLimit=.5,s.wheelPrecision*=100,s.minZ=.01,u=t.enableDepthRenderer(null,!1,!0),"mandelbulb"===(p=r.get("fractal")))?(w=(0,f.T)("mandelbulb",1e5*Math.random(),"XR Anomaly",[]),(P=new i.i(w,t)).getTransform().scalingDeterminant=1/4e5,b(new d.W(P.getTransform(),P.getBoundingRadius(),w,t,[])),P.getTransform()):"julia"===p?(S=(0,a.y)("julia",1e5*Math.random(),"XR Anomaly",[]),(C=new i.i(S,t)).getTransform().scalingDeterminant=1/4e5,b(new o.t(C.getTransform(),C.getBoundingRadius(),S.accentColor,t,[])),C.getTransform()):"mandelbox"===p?(T=(0,l.f)("mandelbox",1e5*Math.random(),"XR Anomaly",[]),(R=new i.i(T,t)).getTransform().scalingDeterminant=1e-5,b(new c.M(R.getTransform(),R.getBoundingRadius(),T,t,[])),R.getTransform()):"pyramid"===p?(x=(0,y.e)("sierpinski",1e5*Math.random(),"XR Anomaly",[]),(A=new i.i(x,t)).getTransform().scalingDeterminant=1e-5,b(new g.$(A.getTransform(),A.getBoundingRadius(),x,t,[])),A.getTransform()):(E=(0,h.J)("menger",1e5*Math.random(),"XR Anomaly",[]),(k=new i.i(E,t)).getTransform().scalingDeterminant=1e-5,b(new m.Q(k.getTransform(),k.getBoundingRadius(),E,t,[])),k.getTransform()),[4,t.createDefaultXRExperienceAsync()];case 1:return v.sent().baseExperience.camera.setTransformationFromNonVRCamera(s,!0),t.onBeforeCameraRenderObservable.add(function(e){u.getDepthMap().activeCamera=e}),[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){r1(o,n,a,i,s,"next",e)}function s(e){r1(o,n,a,i,s,"throw",e)}i(void 0)})})()}var r3=function(){var e;function t(){var e;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");e=new Map([["orbitalDemo",tw],["tunnel",eU],["automaticLanding",U],["debugAssets",ed],["spaceStation",rr],["spaceStationUI",rs],["xr",r2],["flightDemo",ev],["neutronStar",rB],["character",en],["starMapView",rg],["starMap",rd],["tutorial",rJ],["asteroidField",A],["starSystemView",rR],["rings",tC],["sierpinski",v],["mandelbox",u],["mandelbulb",p],["juliaSet",s],["mengerSponge",b],["atmosphericScattering",M],["darkKnight",ec],["blackHole",rI],["gasPlanet",ek],["jupiter",tH],["saturn",tZ],["sol",tK],["grass",ej],["warpTunnel",r0],["saveLoadingPanelContent",tD],["sun",t3],["gravitySystem",eB],["interaction",e7],["swimming",rH],["onFoot",td],["butterfly",X],["telluricPlanet",rq],["landingPad",ta],["spotLights",rl],["stationLanding",rA],["spaceElevator",t8],["rover",tA]]),"map"in this?Object.defineProperty(this,"map",{value:e,enumerable:!0,configurable:!0,writable:!0}):this.map=e}return e=[{key:"register",value:function(e,t){this.map.set(e,t)}},{key:"get",value:function(e){var t;return null!=(t=this.map.get(e))?t:ep}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}()},51881(e,t,r){r.d(t,{ez:()=>d,s9:()=>f,tZ:()=>p,z6:()=>u,zH:()=>h}),r(94321);var n=r(64028),a=r(39178),o=r(10266),i=r(53946);function s(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,a)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,l,"next",e)}function l(e){s(o,n,a,i,l,"throw",e)}i(void 0)})}}function c(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function u(e,t){return l(function(e){var t,r,o,i,s,l,u=arguments;return c(this,function(c){switch(c.label){case 0:if(t=u.length>1&&void 0!==u[1]?u[1]:n.Vector3.Zero(),r=u.length>2?u[2]:void 0,i=n.HavokPlugin.bind,s=[void 0,!0],null==r)return[3,1];return l=r,[3,3];case 1:return[4,(0,a.A)()];case 2:l=c.sent(),c.label=3;case 3:return(o=new(i.apply(n.HavokPlugin,s.concat([l])))).setVelocityLimits(1e4,1e4),e.enablePhysics(t,o),[2,e.getPhysicsEngine()]}})}).apply(this,arguments)}function f(e){var t;null==(t=e.getRenderingCanvas())||t.addEventListener("click",function(){return l(function(){var t;return c(this,function(r){switch(r.label){case 0:return[4,null==(t=e.getRenderingCanvas())?void 0:t.requestPointerLock()];case 1:return r.sent(),[2]}})})()})}function d(e,t,r){var a,i,s=new o.SkyMaterial("skyMaterial",t);s.backFaceCulling=!1,s.sunPosition=e,s.useSunPosition=!0;var l=n.MeshBuilder.CreateBox("skyBox",{size:null!=(i=null==r?void 0:r.size)?i:1e3},t);l.material=s,l.infiniteDistance=!0,l.isPickable=!1,l.ignoreCameraMaxZ=!0;var c=new n.ReflectionProbe("ref",512,t);null==(a=c.renderList)||a.push(l),t.customRenderTargets.push(c.cubeTexture),t.environmentTexture=c.cubeTexture}function p(e,t){var r=new n.CascadedShadowGenerator(null!=(l=null==t?void 0:t.resolution)?l:2048,e);r.transparencyShadow=!0,r.stabilizeCascades=!1,r.autoCalcDepthBounds=!0,r.lambda=1,r.usePercentageCloserFiltering=!0,r.filteringQuality=n.CascadedShadowGenerator.QUALITY_HIGH,r.depthClamp=!0,r.numCascades=null!=(c=null==t?void 0:t.cascadeCount)?c:4,r.shadowMaxZ=null!=(u=null==t?void 0:t.maxZ)?u:200,r.bias*=50,r.normalBias*=50,r.debug=null!=(f=null==t?void 0:t.debug)&&f;var a=function(e){e.infiniteDistance||(r.addShadowCaster(e),e.receiveShadows=!0)},o=!0,i=!1,s=void 0;try{for(var l,c,u,f,d,p=e.getScene().meshes[Symbol.iterator]();!(o=(d=p.next()).done);o=!0){var h=d.value;a(h)}}catch(e){i=!0,s=e}finally{try{o||null==p.return||p.return()}finally{if(i)throw s}}e.getScene().onNewMeshAddedObservable.add(function(e){a(e)});var m=new Map,b=null;return e.getScene().onBeforeCameraRenderObservable.add(function(t){if(t!==b){var n=!0,a=!1,o=void 0;try{for(var i,s=m.values()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)i.value.enabled=!1}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}b=t;var l=m.get(t);void 0===l&&(l=e.getScene().enableDepthRenderer(t),m.set(t,l)),l.enabled=!0,r.setDepthRenderer(l),r.autoCalcDepthBounds=!0}}),r}function h(e){return l(function(){var t,r,n;return c(this,function(a){switch(a.label){case 0:(t=document.createElement("div")).style.position="fixed",t.style.right="1.5rem",t.style.bottom="1.5rem",t.style.zIndex="1000",t.style.padding="0.75rem",t.style.borderRadius="0.75rem",t.style.backgroundColor="rgba(0, 0, 0, 0.75)",t.style.backdropFilter="blur(4px)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="center",t.style.gap="0.5rem",t.style.maxWidth="15rem",t.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.35)",(r=document.createElement("canvas")).style.width="12rem",r.style.height="12rem",t.appendChild(r),(n=document.createElement("div")).style.color="white",n.style.fontFamily="monospace",n.style.fontSize="0.75rem",n.style.wordBreak="break-all",n.style.textAlign="center",n.textContent=e,t.appendChild(n),document.body.appendChild(t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.toCanvas(r,e,{width:192,margin:1,color:{dark:"#000000ff",light:"#ffffffff"}})];case 2:return a.sent(),[3,4];case 3:return console.error("Failed to render QR code",a.sent()),t.remove(),[3,4];case 4:return[2]}})})()}},52628(e,t,r){r.d(t,{H:()=>a,w:()=>n});var n={UNIVERSE_SEED:Math.PI,POWER_PLAY_SEED:77,EARTH_RADIUS:1e6,VERTEX_RESOLUTION:64,MIN_DISTANCE_BETWEEN_VERTICES:1.5,CLOUD_LAYER_HEIGHT:7e3,EARTH_ATMOSPHERE_THICKNESS:1e5,OCEAN_DEPTH:7e3,TIME_MULTIPLIER:1,CHUNK_RENDERING_DISTANCE_MULTIPLIER:2,ENABLE_VOLUMETRIC_CLOUDS:!1,SEED_HALF_RANGE:1e4,FLOATING_ORIGIN_THRESHOLD:1e5,HUMAN_BUBBLE_RADIUS_LY:100,VISIBLE_NEIGHBORHOOD_MAX_RADIUS_LY:20,CREDIT_SYMBOL:"₽",STAR_SECTOR_SIZE:20,INDIVIDUAL_AVERAGE_DAILY_INTAKE:2250,HYDROPONIC_TO_CONVENTIONAL_RATIO:3.5,FOV:r(32997).S0.ToRadians(60),LANDING_PAD_ASPECT_RATIO:1.618,RINGS_FADE_OUT_DISTANCE:15e3,MAIN_FONT:"Nasalization",MAX_AUTO_SAVES:5,SHARED_POSITION_SAVE_UUID:"sharedPositionSave",TUTORIAL_SAVE_UUID:"00000000-0000-0000-0000-000000000000",QUALITY_CHARS:"FEDCBA",FACILITY_LIGHT_COLOR:"#FFFFFF"},a={NONE:0,ENVIRONMENT:1,DYNAMIC_OBJECTS:2,INTERACTIVE:8,AVATARS:16,WATER:32,SURFACE_QUERY:64,SUN_OCCLUSION_QUERY:128,VEHICLE_PARTS:256,EVERYTHING:0xffffffff}},83472(e,t,r){r.d(t,{W:()=>n});function n(e){try{return window.btoa(encodeURIComponent(e))}catch(e){return null}}},30451(e,t,r){r.d(t,{E:()=>n});function n(e,t,r){return(0x466f45d*e^0x127409f*t^0x4f9ffb7*r)%1e9}},93706(e,t,r){r.d(t,{fM:()=>o,x5:()=>a});var n=r(48492),a=2*Math.pow(n.Pi,5)*Math.pow(n.o,4)/(15*Math.pow(n.M,3)*Math.pow(n.C,2)),o=60*n.C*525960},23091(e,t,r){r.d(t,{R1:()=>m,G:()=>n.G,AU:()=>i,G3:()=>u,Ow:()=>f,th:()=>h,W4:()=>l,fM:()=>a.fM,kG:()=>c,uW:()=>d,jm:()=>s,C:()=>n.C,SU:()=>p});var n=r(48492),a=r(93706),o=r(74900),i=15e10,s=5972e21,l=7348e19,c=1898e24,u=1989e27,f=69634e4,d=5778,p=9.81,h=101325,m=(0,o.j2)(d,f)},54600(e,t,r){r.d(t,{F4:()=>o,ep:()=>s,hz:()=>i});var n=r(23091),a=r(97678);function o(e){return Math.pow(e/n.G3,.78)*n.Ow}function i(e,t){return 2*Math.PI*Math.sqrt(e/t)}function s(e,t,r){var n,o=(n=(0,a.F1)(100),e<=0?0:1/(1/n+2044761436301033e-19*Math.log(101325/e))),i=(0,a.F1)(0);return!(e<.05)&&!(o<i)&&!(t>o)&&!(r<i)}},97678(e,t,r){r.d(t,{E1:()=>o,F1:()=>s,GI:()=>a,J3:()=>c,N9:()=>i,NH:()=>p,_$:()=>d,kK:()=>l,nX:()=>h,tR:()=>u,xV:()=>f});var n=r(23091);function a(e){return e/n.fM}function o(e){return e*n.fM}function i(e){return e/n.C}function s(e){return e+273.15}function l(e){return e*n.AU}function c(e){return 1e5*e}function u(e){return Math.PI/180*e}function f(e){return 1e6*e}function d(e){return e/1e4}function p(e){return e/3.6}function h(e){return 1e3*e/8760}}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return i[e].call(r.exports,r,r.exports,l),r.exports}l.m=i,u=(c="function"==typeof Symbol)?Symbol("rspack queues"):"__rspack_queues",f=l.aE=c?Symbol("rspack exports"):"__webpack_exports__",d=c?Symbol("rspack error"):"__rspack_error",p=c?Symbol("rspack done"):"__rspack_done",h=l.zS=c?Symbol("rspack defer"):"__rspack_defer",m=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},l.a=(e,t,r)=>{r&&((n=[]).d=-1);var n,a,o,i,c=new Set,b=e.exports,y=new Promise((e,t)=>{i=t,o=e});y[f]=b,y[u]=e=>{n&&e(n),c.forEach(e),y.catch(()=>{})},e.exports=y,t(e=>{a=e.map(e=>{if(null!==e&&"object"==typeof e){if(!e[u]&&e[h]){var t=e[h];if(!t.some(e=>{var t=s[e];return!t||!1===t[p]}))return e;var r=e;e={then(e){Promise.all(t.map(l)).then(()=>e(r))}}}if(e[u])return e;if(e.then){var n=[];n.d=0,e.then(e=>{a[f]=e,m(n)},e=>{a[d]=e,m(n)});var a={};return a[h]=!1,a[u]=e=>e(n),a}}var o={};return o[u]=()=>{},o[f]=e,o});var t,r=()=>a.map(e=>{if(e[h])return e;if(e[d])throw e[d];return e[f]}),o=new Promise(e=>{(t=()=>e(r)).r=0;var o=e=>e!==n&&!c.has(e)&&(c.add(e),e&&!e.d&&(t.r++,e.push(t)));a.map(e=>e[h]||e[u](o))});return t.r?o:r()},e=>(e?i(y[d]=e):o(b),m(n),y[p]=!0)),n&&n.d<0&&(n.d=0)},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce((t,r)=>(l.f[r](e,t),t),[])),l.k=e=>""+e+".css",l.u=e=>""+e+"."+({1018:"c9050bb79413428a",1048:"bc29f2c08a968f05",1172:"6a974a65fae7e9d0",1252:"9a04e63e42be6043",1272:"b9f9f8b1e27dd2f2",1357:"f84def668c06520c",1370:"47a544599ff25c8d",1385:"a688e757c4554e8b",1402:"9b99d55ff4ead96a",1407:"1d3f625a1dcab106",1459:"8771402766dd01c8",1470:"0512bb93a216fbc0",1625:"f1597d4089edb10d",1643:"ad851fb8bedc00bf",170:"68debbd9226ce407",1754:"189842b785b2e6ab",1780:"89d5f59fbfe66222",1809:"8ff598973f7defac",1909:"6d44f28409e0a8de",1922:"2c9d29629ec2a647",1965:"ba2b44ce2e5e888a",2007:"8f52b36601ab6ded",2022:"f74bffda7d4307af",207:"0319db1e4e21a86d",2114:"dcd0195603a004da",2161:"23b7ba15f95d98c6",2164:"5603897d8c80aeca",2189:"03e421faa15454ff",2217:"5d6986994be1f861",2308:"63caf0eb8bbb2568",2469:"80ff49361976cdfd",2493:"23a2a28a946bdcea",2532:"d634e4c432ecf491",257:"2abdca7be4b29008",2584:"37b848b5909a3827",2701:"fa8e8810a6adbb93",2821:"1faad00eeaae275f",2935:"210685622ef31e1f",2996:"7a69374fbc3acf24",300:"7b8176a88b3baaf2",3032:"687b9c35fd413ae1",3042:"ab2bc289cc9335e8",3181:"2dbabd329e3cd31e",3203:"af19a513cb7ec748",3220:"36067eb08716755a",324:"b7903753fa7c3799",3248:"d58cd65abe7c7126",332:"1555a568fe733bcd",360:"05e8fd01659e4278",3611:"85945e0e4ca82778",3629:"b96290c59cc31238",3843:"b3421ba399d5f425",3847:"35d459b2518b183c",3911:"f382f5c36034ae6a",3935:"44c530836ebcb994",4:"6135232546dc8593",4013:"abf42e512cf16519",4015:"65a11bed6a82dcf5",4078:"1f566a91f9715941",4125:"92c57fc798ce91a9",4243:"b35fe5f2f510e4bf",4299:"7858d97e75ff6987",4326:"5e6103a84dbd5e52",4363:"490493e0003e78f1",4387:"3a4f89cf454cf870",449:"ad2c09ff7e637bda",4499:"1d7845ef64c80bea",4562:"83b0ecb4b17197be",4574:"19f5d7371a063d94",4622:"840adff6c730bfac",4634:"69fdf46df9e161e7",4676:"aa1a0ea9994312a3",482:"6b350f268433aa7c",4908:"f18ce15dd8e072ed",4921:"e47be91dfdb68799",5026:"377f5db5d266ff8f",5045:"5d7feb9513cf7928",5085:"21e7948c42ab190a",5235:"3f32d258b387b411",5290:"064c1dbf5221f263",5358:"a2147ea3324979d2",5378:"d29d463556cebdb6",5445:"fdfb02ce21265fed",5468:"fb9c4c690f16c551",5494:"83d8dcc37a0c75a2",5526:"97a31b4767bab653",5675:"aa8f5a36ce125a47",568:"95e6e33f110df63c",571:"5a26841994843480",575:"d3bc83ec1ab32799",577:"790134dfcbb1b8d9",5780:"c4f533f7bd825260",5807:"161cbb3f064dc140",587:"7e07b3064fe9d8ff",6060:"17f1e1bcd0cefbcb",6087:"6aa5e6f1d02c22fa",6192:"ccfd4d413a0abde1",6222:"1850c52d17d46cc5",6228:"55498e706e2cf435",6257:"884d2aa06c38853f",6300:"ad9404fc8464e114",6330:"a2b34b5ed14f4883",6471:"0d983c33c4710be4",6473:"ce1807954546d234",6606:"d1606029d15f48cd",6625:"777e2f10adf85242",6633:"5eef970cf4eb493f",684:"185447bfd3732445",6886:"ced7462263128fa3",6895:"5bf4058eec6ac940",7016:"defb159f587ab19f",7035:"8a981dbe1181fde9",7055:"a8e08e4183a9b6a5",7093:"c8226f8a006cda69",7098:"ac6b7a9124d95363",7099:"50498271cb66efac",7215:"738c1f34262f7c78",7275:"d1eb9ceb276e20e9",7284:"740a923ed5378a76",7379:"01d004fcf95446e7",7486:"9e3ac2361d378c47",7503:"ba8617de85002a1c",7597:"ee1e4c0f3a5b0552",7602:"901ed84be033ce87",7623:"e53f5800f170b468",7653:"e04f1aa738291d6d",7667:"f8c68b9fe7a63815",7677:"2b005e540e273a6b",7751:"f2a06e8997ebecec",7762:"6261f60cec418d51",7789:"adbcce0ac28aa417",7858:"74cf62c17a321aab",7951:"cdddeba719c8cf0d",798:"a8812d4f17a16966",7997:"882c7394771c60f5",8080:"a996d6d4c5440e76",8106:"f11b33397fe9bfba",8107:"f54c30f706c614d2",8124:"a8ecd2d5ebed05f2",8310:"1518cc4094221dea",8369:"1648ff0616ba0c92",8372:"c7c7e88d806617f0",8406:"500005a7a9869230",8429:"f03e3977ec89d0d6",8499:"70bc3acfbc1ac4d5",8554:"ea32e44157ee9b14",8588:"16f114a6ad7e9313",8725:"4498e4bac45b41b9",8735:"f0599b204e01b93b",8758:"73628004fa9a3f59",8780:"5daa5495bab8abcf",8859:"e60be8b19dfe12da",8869:"4986560beb09c771",887:"d21a9e5a95467398",890:"bdcbf678212d1d67",8957:"2554241ca7007c8a",8965:"3f98e78c6e7728ba",8980:"caeeaab2e1a4dd5f",9049:"88c420ecc6ff82a7",9190:"225b3d4745c84235",9288:"6f94982e5cb161bb",9357:"4dd380208043ad63",9481:"cc4b3d8ad09c56b6",9558:"89afc9ad9a9d6156",9570:"6f8f634af6ca9da5",9623:"faf258b7b6c7b0d4",9638:"63219501605961e8",9641:"ac42e3ca863b7f57",9656:"3f9105ca5729dc4e",9728:"654f127572da0c41",98:"070a8afb26e6a879",9884:"f86efbdf7588da0e",9913:"97d71575f48bec9a"})[e]+".js",l.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),b={},l.l=function(e,t,r,n){if(b[e])return void b[e].push(t);if(void 0!==r)for(var a,o,i=document.getElementsByTagName("script"),s=0;s<i.length;s++){var c=i[s];if(c.getAttribute("src")==e||c.getAttribute("data-rspack")=="@cosmos-journeyer/game:"+r){a=c;break}}a||(o=!0,(a=document.createElement("script")).timeout=120,l.nc&&a.setAttribute("nonce",l.nc),a.setAttribute("data-rspack","@cosmos-journeyer/game:"+r),a.src=e),b[e]=[t];var u=function(t,r){a.onerror=a.onload=null,clearTimeout(f);var n=b[e];if(delete b[e],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach(function(e){return e(r)}),t)return t(r)},f=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),o&&document.head.appendChild(a)},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},y=[],l.O=(e,t,r,n)=>{if(t){n=n||0;for(var a=y.length;a>0&&y[a-1][2]>n;a--)y[a]=y[a-1];y[a]=[t,r,n];return}for(var o=1/0,a=0;a<y.length;a++){for(var[t,r,n]=y[a],i=!0,s=0;s<t.length;s++)(!1&n||o>=n)&&Object.keys(l.O).every(e=>l.O[e](t[s]))?t.splice(s--,1):(i=!1,n<o&&(o=n));if(i){y.splice(a--,1);var c=r();void 0!==c&&(e=c)}}return e},l.rv=()=>"1.6.8",l.g.importScripts&&(g=l.g.location+"");var c,u,f,d,p,h,m,b,y,g,v=l.g.document;if(!g&&v&&(v.currentScript&&"SCRIPT"===v.currentScript.tagName.toUpperCase()&&(g=v.currentScript.src),!g)){var w=v.getElementsByTagName("script");if(w.length)for(var P=w.length-1;P>-1&&(!g||!/^http(s?):/.test(g));)g=w[P--].src}if(!g)throw Error("Automatic publicPath is not supported in this browser");l.p=g=g.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e={6034:0},r="data-rspack-loading",(t=(t,r)=>{e[r]=0})(l.m,0,"6034"),l.f.css=(n,a,o)=>{var i=l.o(e,n)?e[n]:void 0;if(0!==i)if(i)a.push(i[2]);else if(6034==n){var s=new Promise(function(t,r){i=e[n]=[t,r]});a.push(i[2]=s);var c=l.p+l.k(n),u=Error(),f=function(r){if(l.o(e,n)&&(0!==(i=e[n])&&(e[n]=void 0),i))if("load"!==r.type){var a=r&&r.type,o=r&&r.target&&r.target.src;u.message="Loading css chunk "+n+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}else t(l.m,n),i[0]()};"undefined"!=typeof document?((e,t,n,a,o)=>{var i,s,c="chunk-"+e;if(!a){for(var u=document.getElementsByTagName("link"),f=0;f<u.length;f++){var d=u[f],p=d.getAttribute("href")||d.href;if(p&&!p.startsWith(l.p)&&(p=l.p+(p.startsWith("/")?p.slice(1):p)),"stylesheet"==d.rel&&(p&&p.startsWith(t)||d.getAttribute("data-rspack")=="@cosmos-journeyer/game:"+c)){i=d;break}}if(!n)return}i||(s=!0,i=document.createElement("link"),l.nc&&i.setAttribute("nonce",l.nc),i.setAttribute("data-rspack","@cosmos-journeyer/game:"+c),i.setAttribute(r,1),i.rel="stylesheet",i.href=t);var h=(e,t)=>{if(i.onerror=i.onload=null,i.removeAttribute(r),clearTimeout(m),t&&"load"!=t.type&&i.parentNode.removeChild(i),n(t),e)return e(t)};if(i.getAttribute(r)){var m=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload)}else h(void 0,{type:"load",target:i});return a&&a.getAttribute("fetchpriority")&&i.setAttribute("fetchpriority",a.getAttribute("fetchpriority")),a?document.head.insertBefore(i,a):s&&document.head.appendChild(i)})(n,c,f,void 0,0):f({type:"load"})}else e[n]=0},l.b=document.baseURI||self.location.href,n={6181:0},l.f.j=function(e,t){var r=l.o(n,e)?n[e]:void 0;if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((t,a)=>r=n[e]=[t,a]);t.push(r[2]=a);var o=l.p+l.u(e),i=Error();l.l(o,function(t){if(l.o(n,e)&&(0!==(r=n[e])&&(n[e]=void 0),r)){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",i.name="ChunkLoadError",i.type=a,i.request=o,r[1](i)}},"chunk-"+e,e)}},l.O.j=e=>0===n[e],a=(e,t)=>{var r,a,[o,i,s]=t,c=0;if(o.some(e=>0!==n[e])){for(r in i)l.o(i,r)&&(l.m[r]=i[r]);if(s)var u=s(l)}for(e&&e(t);c<o.length;c++)a=o[c],l.o(n,a)&&n[a]&&n[a][0](),n[a]=0;return l.O(u)},(o=globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o)),l.ruid="bundler=rspack@1.6.8";var S=l.O(void 0,["7186","2421","8997","9574","9372","1101","7402","2106","2825","6627","5875","3389","4091","2602","8637","8392","9745","1292","1309","4765","5571","8131","9738","9423","6034"],()=>l(7492));S=l.O(S)})();