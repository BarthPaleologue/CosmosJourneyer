/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

(()=>{"use strict";var e,a,t,r,c,d,o={59883:function(e,a,t){t.d(a,{G:()=>d,k:()=>o});var r,c=t(42917),d=((r={}).INVALID_JSON="INVALID_JSON",r.INVALID_SAVE="INVALID_SAVE",r.INVALID_STORAGE_FORMAT="INVALID_STORAGE_FORMAT",r);function o(e){switch(e.type){case"INVALID_JSON":return c.A.t("notifications:invalidSaveFileJson");case"INVALID_SAVE":return c.A.t("notifications:invalidSaveFile");case"INVALID_STORAGE_FORMAT":return c.A.t("notifications:invalidStorageFormat")}}},28248:function(e,a,t){t.d(a,{nc:()=>u,pX:()=>k});var r,c,d=t(60612),o=t(60251),n=t(90584),f=t(58934),i=t(8330),b=t(59883),u={STELLAR_OBJECT:0,PLANETARY_MASS_OBJECT:1,ANOMALY:2,ORBITAL_FACILITY:3},l=d.Ikc({objectType:d.k5n(u),objectIndex:d.aig()}),s=d.Ikc((r=function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(a){var r;r=t[a],a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r})}return e}({},l.shape),c=c={starSystemCoordinates:n.Y},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(c)):(function(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t})(Object(c)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(c,e))}),r)),p={WANDERER:0},m=d.Ikc({currentFuel:d.aig(),maxFuel:d.aig()}),y=d.Ikc({fuelPerSecond:d.aig().default(1)}),g=d.Ikc({id:d.uRe().default(function(){return crypto.randomUUID()}),name:d.YjP().default("Wanderer"),type:d.k5n(p).default(p.WANDERER),fuelTanks:d.YOg(m).default([{currentFuel:100,maxFuel:100}]),fuelScoop:d.mee(y).nullable().default({fuelPerSecond:2.5})}),v=d.Ikc({objectId:s,discoveryTimestamp:d.aig().default(0),explorerName:d.YjP().default("Unknown")}),h=d.Ikc({version:d.YjP().default(i.rE),timestamp:d.aig().default(function(){return Date.now()}),player:d.Ikc({uuid:d.YjP().default(function(){return crypto.randomUUID()}),name:d.YjP().default("Python"),balance:d.aig().default(1e4),creationDate:d.YjP().default(new Date().toISOString()),timePlayedSeconds:d.aig().default(0),visitedSystemHistory:d.YOg(n.Y).default([]),discoveries:d.Ikc({local:d.YOg(v).default([]),uploaded:d.YOg(v).default([])}).default({local:[],uploaded:[]}),currentItinerary:d.YOg(n.Y).default([]),systemBookmarks:d.YOg(n.Y).default([]),currentMissions:d.YOg(d.L5J()).default([]),completedMissions:d.YOg(d.L5J()).default([]),spaceShips:d.YOg(g).default([g.parse({})]),tutorials:o.wk.default({flightCompleted:!1,stationLandingCompleted:!1,starMapCompleted:!1,fuelScoopingCompleted:!1})}),universeCoordinates:d.Ikc({universeObjectId:d.Ikc({objectType:d.k5n(u),objectIndex:d.aig(),starSystemCoordinates:n.Y}),positionX:d.aig().default(0),positionY:d.aig().default(0),positionZ:d.aig().default(0),rotationQuaternionX:d.aig().default(0),rotationQuaternionY:d.aig().default(0),rotationQuaternionZ:d.aig().default(0),rotationQuaternionW:d.aig().default(1)}),padNumber:d.aig().optional()});function k(e){var a=h.safeParse(e);return a.success?(0,f.ok)(a.data):(0,f._q)({type:b.G.INVALID_SAVE,content:a.error})}},66403:function(e,a,t){t.d(a,{Eq:()=>b,oC:()=>i});var r=t(60612),c=t(17686),d=t(25650),o=t(7126),n=t(4258),f=r.Ikc({id:r.uRe(),name:r.YjP(),components:r.Ikc({primary:r.Ikc({warpDrive:n.i,thrusters:o.Y,fuelTank:c.a}),optional:r.YOg(d.B)})}).extend({type:r.euz("WANDERER"),components:r.Ikc({primary:r.Ikc({warpDrive:n.i.nullable(),thrusters:o.Y.nullable(),fuelTank:c.a.nullable()}),optional:r.PVZ([d.B.nullable(),d.B.nullable(),d.B.nullable()])})});r.gMt("type",[f]);var i=r.gMt("type",[f]);function b(){return f.parse({type:"WANDERER",name:"Wanderer",id:crypto.randomUUID(),components:{primary:{warpDrive:{type:"warpDrive",size:3,quality:1},thrusters:{type:"thrusters",size:3,quality:1},fuelTank:{type:"fuelTank",size:2,quality:1,currentFuel01:1}},optional:[null,{type:"fuelScoop",size:2,quality:1},{type:"discoveryScanner",size:2,quality:1}]}})}},58943:function(e,a,t){t.a(e,async function(e,a){try{t(28452);var r=t(73109),c=t(41330),d=t(61800),o=t(36942),n=await o.K.CreateAsync();n.setAutoSaveEnabled(!1);var f=n.starSystemView,i=f.scene,b=(0,r.p)("blackHole",42,"Gargantua",[]),u=(0,c.k)("miller",47,"Miller",[b]);u.orbit.semiMajorAxis=10*b.accretionDiskRadius,u.orbit.inclination=.2;var l={name:"Black Hole Demo",coordinates:{starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},stellarObjects:[b],planets:[u],satellites:[],anomalies:[],orbitalFacilities:[]};n.backend.universe.registerCustomSystem(l);var s=await f.loadStarSystem(l);await n.init(!0),await f.switchToDefaultControls(!0);var p=s.getStellarObjects()[0];f.getDefaultControls().speed=p.getBoundingRadius(),(0,d.Ez)(i.getActiveControls(),p,s,5),a()}catch(e){a(e)}},1)},83472:function(e,a,t){t.d(a,{W:()=>r});function r(e){try{return window.btoa(encodeURIComponent(e))}catch(e){return null}}},54600:function(e,a,t){t.d(a,{F4:()=>d,ep:()=>n,hz:()=>o});var r=t(82748),c=t(97678);function d(e){return Math.pow(e/r.G3,.78)*r.Ow}function o(e,a){return 2*Math.PI*Math.sqrt(e/a)}function n(e,a,t){var r,d=(r=(0,c.F1)(100),e<=0?0:1/(1/r+2044761436301033e-19*Math.log(101325/e))),o=(0,c.F1)(0);return!(e<.05)&&!(d<o)&&!(a>d)&&!(t<o)}}},n={};function f(e){var a=n[e];if(void 0!==a)return a.exports;var t=n[e]={exports:{}};return o[e](t,t.exports,f),t.exports}f.m=o,b=(i="function"==typeof Symbol)?Symbol("webpack queues"):"__webpack_queues__",u=f.aE=i?Symbol("webpack exports"):"__webpack_exports__",l=i?Symbol("webpack error"):"__webpack_error__",s=i?Symbol("webpack done"):"__webpack_done__",p=f.zS=i?Symbol("webpack defer"):"__webpack_defer__",m=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},f.a=(e,a,t)=>{t&&((r=[]).d=-1);var r,c,d,o,i=new Set,y=e.exports,g=new Promise((e,a)=>{o=a,d=e});g[u]=y,g[b]=e=>{r&&e(r),i.forEach(e),g.catch(function(){})},e.exports=g,a(e=>{c=e.map(e=>{if(null!==e&&"object"==typeof e){if(!e[b]&&e[p]){var a=e[p];if(!a.some(e=>{var a=n[e];return!a||!1===a[s]}))return e;var t=e;e={then(e){Promise.all(a.map(f)).then(()=>e(t))}}}if(e[b])return e;if(e.then){var r=[];r.d=0,e.then(e=>{c[u]=e,m(r)},e=>{c[l]=e,m(r)});var c={};return c[p]=!1,c[b]=e=>e(r),c}}var d={};return d[b]=function(){},d[u]=e,d});var a,t=()=>c.map(e=>{if(e[p])return e;if(e[l])throw e[l];return e[u]}),d=new Promise(e=>{(a=()=>e(t)).r=0;var d=e=>e!==r&&!i.has(e)&&(i.add(e),e&&!e.d&&(a.r++,e.push(a)));c.map(e=>e[p]||e[b](d))});return a.r?d:t()},e=>(e?o(g[l]=e):d(y),m(r),g[s]=!0)),r&&r.d<0&&(r.d=0)},f.d=(e,a)=>{for(var t in a)f.o(a,t)&&!f.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},f.f={},f.e=e=>Promise.all(Object.keys(f.f).reduce((a,t)=>(f.f[t](e,a),a),[])),f.k=e=>""+e+".css",f.u=e=>""+e+"."+({1095:"11cae11af07599b9",110:"1b2c66f973d927a5",1231:"186ddfe7107b169d",1236:"2932032f2700d4d8",1343:"6ea9433cc143de5d",1362:"cb85df2f6962c32f",1393:"4403b6910610193f",143:"c883f403211dc820",1464:"3d6178e5b7ea3f9e",1465:"93bdfc230bda73af",1510:"451da7d4698e9ca8",1525:"ad1998d5b1e3238f",1548:"cccdf81a0be15859",1601:"da3dd363cdc36c77",1617:"bc82c54858704a1c",1637:"a48d20db1f27448c",1677:"2aadc3b4bc58cc9b",1778:"1492bfa937832c00",178:"f247605b4ca26ee8",1831:"59dd44b6c8f3aa61",1895:"2207885a67fc70df",2003:"1d95166235b88217",2034:"120c6f7cd903c3d6",2045:"105ce293cf6eb9e4",2123:"2a79b35994c5363c",2126:"2ff0d2ba1518f06b",2144:"aed03b473d2ce778",2148:"ea8945476ef87829",2182:"3da4ab68373dd8e9",220:"d99fefc4fcd89b96",2211:"46cef8abc632d028",2297:"ea7ad0d099bf9404",2367:"c6e3fc89d6c72224",2370:"d4d6f369ca0d058b",2410:"c8834f04378a0588",2424:"23851d2a6445dbbc",2435:"35d2d7c7be998e12",252:"8742ddc832faa354",2524:"6cac2ad37ae81b2f",2533:"062ce8c6ea45d8d9",2604:"aeee420e1030ec62",2725:"3f31526d375cc26d",2760:"d311cee19e759a3e",2761:"8d42ed905305866b",2771:"f78fb5a8bba6c731",2805:"c4bbcebaa41d79d2",2846:"f0f8afc6738d5585",2879:"6e9cd806513f201c",2886:"0663ccd364b89fa5",296:"74123ca283122763",3093:"0b397575370e8009",3118:"04cc7bd70b8eda7e",3187:"88d0ec8fc458d778",3241:"abf1be55228f8bbe",3326:"8240a90e976e9433",3347:"d505b1f5108defb4",3363:"a165d4bea2ddeb8f",3370:"a2b78f1a536b1909",3478:"9b031cdbf21256a2",3518:"40cb327e0639bbf2",3533:"520ed7a966cca926",3555:"1c10dfc5eb9b1127",3583:"caba9b1fcd5e285c",3588:"7dd9d54994c64c78",3603:"efd3554d364790b9",3612:"02c6ca17e08b97b7",3673:"d474f22419d1ccfc",3676:"25ed370ce5bf2bf5",3714:"f8212914dfc735c1",3722:"b5ff092d763b506b",374:"8afa6337022a9c42",3763:"595795c436ea368b",3840:"355607104a9b62a3",3850:"a047315f82fea08b",3915:"ad468169d0016f0f",3925:"973fa0323b435dcb",3935:"9f1b4ae232906243",3962:"25fcd8800e6e6cd0",398:"b846c7d7e923de3e",4001:"cf49fd45572e122a",4027:"cfcf796a4e81acd0",4037:"bb018b1d15dcd8be",4096:"a80a4987e8152f64",4123:"b4e043de31a47980",414:"b9a9fceeaf0fae18",4168:"1a30f69e92607016",4281:"3968812022ac2b75",4303:"a5be63fc9f89b27a",4416:"6e3159ea85f2fd4b",4493:"d31ab2818ab4673c",4506:"e97d65e77f02ed19",4526:"b5224e906d43b069",4592:"0ff0574ae72fcb94",4609:"65eda0482da6cb6b",4629:"21f7b5a8b883e8b3",4666:"2f389b508b33a5ba",4776:"2635f1a64c420faa",4860:"6fb47c2509d51569",4981:"0fb7435beb6301db",510:"1056cc50250b56e4",5145:"54128cb214b4d498",5196:"aab9f4056d3d48a3",5278:"1cd8e2f169206056",5289:"a79fd72075058afa",5318:"679af0e588c64e35",54:"e26dfcbee9876f23",5423:"3496e2534bdf119a",5479:"56aeb8218fbda174",5522:"9667148f38ecf5d8",5545:"87f97be5f316b03b",5564:"f6ef9eaf1bf0c86d",56:"e915c77ed1d81124",5604:"6cc09e76e3f18645",562:"979dd060a033fadb",5845:"980d80d91d9a11eb",6054:"e0b5b6c0c3018d15",6079:"b8edf1b6e17a7141",6085:"49239a6897733335",6245:"154bfd09bb79097b",6274:"42f5b2cdda59c78f",6305:"279cb348d0e94b51",6374:"7a7dc65e0632ee4b",6465:"0bd06d4b9de2ba05",6548:"455807913abceacb",6561:"72b55ea5d07bc66a",6574:"d6e4ccf5b093a52d",6590:"6e7e31947c6f59b4",6623:"28b0af525fb03a2d",6666:"db7deabdf5d21c4a",6776:"ccf3ce966e7a010a",6782:"07596742f5022017",6867:"8f0ad179ba5c7094",6902:"f687a152d44ced0d",6949:"73b228dc9cdacf21",6967:"df4db2e08ebf453d",6977:"a451b38dcb13c40f",7146:"1278531a4cafe064",7191:"4ce8950fe34e35ae",7207:"4b5b76fde9ccea6e",7228:"d3167313554d35a2",7232:"b938bf171f9ad74d",7259:"723c23c7b70d12e4",7268:"950bd12c98ac4649",7295:"d42db038c9adb5b9",7343:"a0dda90ae8937a4a",7345:"2a7e0b786a765adb",7421:"1a3da5e12a39dd03",7427:"cfb4b91bd7a1df31",748:"b1fff6ce6717ece8",7564:"3fe02b7558f9d7fd",7613:"b3581c49f5dfaeeb",7683:"d4523dbd32e21b96",7822:"09349d5472fe1e79",787:"4effe6c8acb75164",7941:"f0f84e43ca6ae5b7",7950:"1577da211f731052",7984:"8f7f78df78b52eb2",8006:"d9107030e269c923",8012:"1c0569849911a59f",8165:"faaf6962f87892f7",8213:"7de75b194fc52a06",8247:"457b917c72976efd",8405:"5bd2e1dda71b50cb",8484:"ec34f3721b72c3a4",8496:"84dd74f8a6cfa32e",8508:"9df552ac99c83540",856:"8344663f59fecad9",8599:"6678aea596810b04",8652:"52c39775e16d5449",8684:"c087811457b682f4",8782:"32c21fecdfbb9b09",8864:"069e254273e54fd8",8916:"f386d60590eceff0",8931:"6129e85b1ed862c3",8969:"0d5fe9b2c6848862",8978:"0bd96efcdc064da0",90:"9b1cf8e0d9bad4e6",901:"3d779b36a166a438",9104:"28a0d8df2b111fe1",9290:"d8df893a2c5befbf",9417:"a6c2224801f0a5c9",9529:"f5494df4f6c43ef1",9553:"526a0349c0bcc2b5",9571:"683828bab944bb1f",9652:"f1e449c470d4d076",9673:"f584e3010ed5a697",9723:"f611dcc6be23c255",9724:"2c0cfad36abe9e60",9742:"63bd1758dc506026",9751:"b7290e5b43a22cc2",9794:"8c729d6ee35d34f3",9836:"8ca7d00f4d0ac5e2",9861:"81e77ded52ead484",9920:"08de401f924fcc35",9935:"8ddc42335b8ae77b",996:"e79db6b9f88eecde"})[e]+".js",f.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),f.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),y={},f.l=function(e,a,t,r){if(y[e])return void y[e].push(a);if(void 0!==t)for(var c,d,o=document.getElementsByTagName("script"),n=0;n<o.length;n++){var i=o[n];if(i.getAttribute("src")==e||i.getAttribute("data-webpack")=="@cosmos-journeyer/game:"+t){c=i;break}}c||(d=!0,(c=document.createElement("script")).timeout=120,f.nc&&c.setAttribute("nonce",f.nc),c.setAttribute("data-webpack","@cosmos-journeyer/game:"+t),c.src=e),y[e]=[a];var b=function(a,t){c.onerror=c.onload=null,clearTimeout(u);var r=y[e];if(delete y[e],c.parentNode&&c.parentNode.removeChild(c),r&&r.forEach(function(e){return e(t)}),a)return a(t)},u=setTimeout(b.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=b.bind(null,c.onerror),c.onload=b.bind(null,c.onload),d&&document.head.appendChild(c)},f.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g=[],f.O=(e,a,t,r)=>{if(a){r=r||0;for(var c=g.length;c>0&&g[c-1][2]>r;c--)g[c]=g[c-1];g[c]=[a,t,r];return}for(var d=1/0,c=0;c<g.length;c++){for(var[a,t,r]=g[c],o=!0,n=0;n<a.length;n++)(!1&r||d>=r)&&Object.keys(f.O).every(e=>f.O[e](a[n]))?a.splice(n--,1):(o=!1,r<d&&(d=r));if(o){g.splice(c--,1);var i=t();void 0!==i&&(e=i)}}return e},f.rv=()=>"1.6.3",f.g.importScripts&&(v=f.g.location+"");var i,b,u,l,s,p,m,y,g,v,h=f.g.document;if(!v&&h&&(h.currentScript&&"SCRIPT"===h.currentScript.tagName.toUpperCase()&&(v=h.currentScript.src),!v)){var k=h.getElementsByTagName("script");if(k.length)for(var O=k.length-1;O>-1&&(!v||!/^http(s?):/.test(v));)v=k[O--].src}if(!v)throw Error("Automatic publicPath is not supported in this browser");f.p=v=v.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e={1849:0},t="data-webpack-loading",(a=(a,t)=>{e[t]=0})(f.m,0,"1849"),f.f.css=(r,c,d)=>{var o=f.o(e,r)?e[r]:void 0;if(0!==o)if(o)c.push(o[2]);else if(1849==r){var n=new Promise(function(a,t){o=e[r]=[a,t]});c.push(o[2]=n);var i=f.p+f.k(r),b=Error(),u=function(t){if(f.o(e,r)&&(0!==(o=e[r])&&(e[r]=void 0),o))if("load"!==t.type){var c=t&&t.type,d=t&&t.target&&t.target.src;b.message="Loading css chunk "+r+" failed.\n("+c+": "+d+")",b.name="ChunkLoadError",b.type=c,b.request=d,o[1](b)}else a(f.m,r),o[0]()};"undefined"!=typeof document?((e,a,r,c,d)=>{var o,n,i="chunk-"+e;if(!c){for(var b=document.getElementsByTagName("link"),u=0;u<b.length;u++){var l=b[u],s=l.getAttribute("href")||l.href;if(s&&!s.startsWith(f.p)&&(s=f.p+(s.startsWith("/")?s.slice(1):s)),"stylesheet"==l.rel&&(s&&s.startsWith(a)||l.getAttribute("data-webpack")=="@cosmos-journeyer/game:"+i)){o=l;break}}if(!r)return}o||(n=!0,o=document.createElement("link"),f.nc&&o.setAttribute("nonce",f.nc),o.setAttribute("data-webpack","@cosmos-journeyer/game:"+i),d&&o.setAttribute("fetchpriority",d),o.setAttribute(t,1),o.rel="stylesheet",o.href=a);var p=(e,a)=>{if(o.onerror=o.onload=null,o.removeAttribute(t),clearTimeout(m),a&&"load"!=a.type&&o.parentNode.removeChild(o),r(a),e)return e(a)};if(o.getAttribute(t)){var m=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload)}else p(void 0,{type:"load",target:o});return c&&c.getAttribute("fetchpriority")&&o.setAttribute("fetchpriority",c.getAttribute("fetchpriority")),c?document.head.insertBefore(o,c):n&&document.head.appendChild(o)})(r,i,u,void 0,d):u({type:"load"})}else e[r]=0},f.b=document.baseURI||self.location.href,r={3087:0},f.f.j=function(e,a){var t=f.o(r,e)?r[e]:void 0;if(0!==t)if(t)a.push(t[2]);else{var c=new Promise((a,c)=>t=r[e]=[a,c]);a.push(t[2]=c);var d=f.p+f.u(e),o=Error();f.l(d,function(a){if(f.o(r,e)&&(0!==(t=r[e])&&(r[e]=void 0),t)){var c=a&&("load"===a.type?"missing":a.type),d=a&&a.target&&a.target.src;o.message="Loading chunk "+e+" failed.\n("+c+": "+d+")",o.name="ChunkLoadError",o.type=c,o.request=d,t[1](o)}},"chunk-"+e,e)}},f.O.j=e=>0===r[e],c=(e,a)=>{var t,c,[d,o,n]=a,i=0;if(d.some(e=>0!==r[e])){for(t in o)f.o(o,t)&&(f.m[t]=o[t]);if(n)var b=n(f)}for(e&&e(a);i<d.length;i++)c=d[i],f.o(r,c)&&r[c]&&r[c][0](),r[c]=0;return f.O(b)},(d=globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).forEach(c.bind(null,0)),d.push=c.bind(null,d.push.bind(d)),f.ruid="bundler=rspack@1.6.3";var S=f.O(void 0,["3581","7595","1932","3313","5153","2872","7468","5546","8999","1849","645"],function(){return f(58943)});S=f.O(S)})();