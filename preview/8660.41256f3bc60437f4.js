"use strict";(globalThis.webpackChunkcosmos_journeyer=globalThis.webpackChunkcosmos_journeyer||[]).push([["8660"],{76991:function(t,e,i){i.r(e),i.d(e,{FlowGraphStopAnimationBlock:()=>r});var n=i(87166),o=i(358),a=i(95023),s=i(81178);class r extends s.M{constructor(t){super(t),this.animationGroup=this.registerDataInput("animationGroup",n.Vv),this.stopAtFrame=this.registerDataInput("stopAtFrame",n.Es,-1)}_preparePendingTasks(t){let e=this.animationGroup.getValue(t),i=this.stopAtFrame.getValue(t)??-1,n=t._getGlobalContextVariable("pendingStopAnimations",[]);n.push({uniqueId:e.uniqueId,stopAtFrame:i}),t._setGlobalContextVariable("pendingStopAnimations",n)}_cancelPendingTasks(t){let e=this.animationGroup.getValue(t),i=t._getGlobalContextVariable("pendingStopAnimations",[]);for(let n=0;n<i.length;n++)if(i[n].uniqueId===e.uniqueId){i.splice(n,1),t._setGlobalContextVariable("pendingStopAnimations",i);break}}_execute(t){let e=this.animationGroup.getValue(t),i=this.stopAtFrame.getValue(t)??-1;return e?isNaN(i)?this._reportError(t,"Invalid stop time."):void(i>0?this._startPendingTasks(t):this._stopAnimation(e,t),this.out._activateSignal(t)):(a.V.Warn("No animation group provided to stop."),this._reportError(t,"No animation group provided to stop."))}_executeOnTick(t){let e=this.animationGroup.getValue(t),i=t._getGlobalContextVariable("pendingStopAnimations",[]);for(let n=0;n<i.length;n++)if(i[n].uniqueId===e.uniqueId&&e.getCurrentFrame()>=i[n].stopAtFrame){this._stopAnimation(e,t),i.splice(n,1),t._setGlobalContextVariable("pendingStopAnimations",i),this.done._activateSignal(t),t._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(t,e){let i=e._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),n=i.indexOf(t.uniqueId);-1!==n&&(t.stop(),i.splice(n,1),e._setGlobalContextVariable("currentlyRunningAnimationGroups",i))}}(0,o.Y5)("FlowGraphStopAnimationBlock",r)}}]);