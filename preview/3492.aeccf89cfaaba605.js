"use strict";(globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).push([["3492"],{10864:function(t,e,r){r.r(e),r.d(e,{_HDRTextureLoader:()=>a});var n=r(2237);class a{constructor(){this.supportCascades=!1}loadCubeData(){throw".hdr not supported in Cube."}loadData(t,e,r){let a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=(0,n.NK)(a),i=(0,n.LT)(a,o),u=o.width*o.height,h=new Float32Array(4*u);for(let t=0;t<u;t+=1)h[4*t]=i[3*t],h[4*t+1]=i[3*t+1],h[4*t+2]=i[3*t+2],h[4*t+3]=1;r(o.width,o.height,e.generateMipMaps,!1,()=>{let t=e.getEngine();e.type=1,e.format=5,e._gammaSpace=!1,t._uploadDataToTextureDirectly(e,h)})}}},60653:function(t,e,r){r.d(e,{EE:()=>w,ER:()=>o,Ky:()=>i,Tf:()=>u,fd:()=>f,fg:()=>h,jk:()=>n,rl:()=>c,v9:()=>s,xO:()=>l,yj:()=>d});class n{}function a(t,e,r,n,a,i,u,h,l,f,s,c,w,d,p,C,g){let P=t.asArray();P[0]=e,P[1]=r,P[2]=n,P[3]=a,P[4]=i,P[5]=u,P[6]=h,P[7]=l,P[8]=f,P[9]=s,P[10]=c,P[11]=w,P[12]=d,P[13]=p,P[14]=C,P[15]=g,o(t)}function o(t){t.updateFlag=n._UpdateFlagSeed++}function i(t){a(t,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}function u(t,e,r,n){a(n,1,0,0,0,0,1,0,0,0,0,1,0,t,e,r,1)}function h(t,e,r,n){a(n,t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1)}function l(t,e,r,n=0){let a=t.asArray(),o=e.asArray(),i=a[0],u=a[1],h=a[2],f=a[3],s=a[4],c=a[5],w=a[6],d=a[7],p=a[8],C=a[9],g=a[10],P=a[11],m=a[12],A=a[13],b=a[14],y=a[15],F=o[0],T=o[1],_=o[2],q=o[3],M=o[4],x=o[5],E=o[6],v=o[7],D=o[8],R=o[9],B=o[10],I=o[11],H=o[12],O=o[13],L=o[14],S=o[15];r[n]=i*F+u*M+h*D+f*H,r[n+1]=i*T+u*x+h*R+f*O,r[n+2]=i*_+u*E+h*B+f*L,r[n+3]=i*q+u*v+h*I+f*S,r[n+4]=s*F+c*M+w*D+d*H,r[n+5]=s*T+c*x+w*R+d*O,r[n+6]=s*_+c*E+w*B+d*L,r[n+7]=s*q+c*v+w*I+d*S,r[n+8]=p*F+C*M+g*D+P*H,r[n+9]=p*T+C*x+g*R+P*O,r[n+10]=p*_+C*E+g*B+P*L,r[n+11]=p*q+C*v+g*I+P*S,r[n+12]=m*F+A*M+b*D+y*H,r[n+13]=m*T+A*x+b*R+y*O,r[n+14]=m*_+A*E+b*B+y*L,r[n+15]=m*q+A*v+b*I+y*S}function f(t,e,r,n=0){l(t,e,r.asArray(),n),o(r)}function s(t,e){c(t,e.asArray()),o(e)}function c(t,e,r=0){let n=t.asArray();e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],e[r+4]=n[4],e[r+5]=n[5],e[r+6]=n[6],e[r+7]=n[7],e[r+8]=n[8],e[r+9]=n[9],e[r+10]=n[10],e[r+11]=n[11],e[r+12]=n[12],e[r+13]=n[13],e[r+14]=n[14],e[r+15]=n[15]}function w(t,e){let r=d(t,e.asArray());return r&&o(e),r}function d(t,e){let r=t.asArray(),n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],h=r[5],l=r[6],f=r[7],s=r[8],c=r[9],w=r[10],d=r[11],p=r[12],C=r[13],g=r[14],P=r[15],m=w*P-g*d,A=c*P-C*d,b=c*g-C*w,y=s*P-p*d,F=s*g-w*p,T=s*C-p*c,_=+(h*m-l*A+f*b),q=-(u*m-l*y+f*F),M=+(u*A-h*y+f*T),x=-(u*b-h*F+l*T),E=n*_+a*q+o*M+i*x;if(0===E)return!1;let v=1/E,D=l*P-g*f,R=h*P-C*f,B=h*g-C*l,I=u*P-p*f,H=u*g-p*l,O=u*C-p*h,L=l*d-w*f,S=h*d-c*f,U=h*w-c*l,j=u*d-s*f,k=u*w-s*l,z=u*c-s*h;return e[0]=_*v,e[1]=-(a*m-o*A+i*b)*v,e[2]=(a*D-o*R+i*B)*v,e[3]=-(a*L-o*S+i*U)*v,e[4]=q*v,e[5]=(n*m-o*y+i*F)*v,e[6]=-(n*D-o*I+i*H)*v,e[7]=(n*L-o*j+i*k)*v,e[8]=M*v,e[9]=-(n*A-a*y+i*T)*v,e[10]=(n*R-a*I+i*O)*v,e[11]=-(n*S-a*j+i*z)*v,e[12]=x*v,e[13]=(n*b-a*F+o*T)*v,e[14]=-(n*B-a*H+o*O)*v,e[15]=(n*U-a*k+o*z)*v,!0}n._UpdateFlagSeed=0},2237:function(t,e,r){r.d(e,{I9:()=>f,LT:()=>h,NK:()=>i,VH:()=>u});var n=r(50816);function a(t,e,r,n,a,o){if(a>0){var i;a=(i=a-136)>1023?898846567431158e293*Math.pow(2,i-1023):i<-1074?5e-324*1*Math.pow(2,i+1074):+Math.pow(2,i),t[o+0]=e*a,t[o+1]=r*a,t[o+2]=n*a}else t[o+0]=0,t[o+1]=0,t[o+2]=0}function o(t,e){let r="",n="";for(let a=e;a<t.length-e&&"\n"!=(n=String.fromCharCode(t[a]));a++)r+=n;return r}function i(t){let e=0,r=0,n=o(t,0);if("#"!=n[0]||"?"!=n[1])throw"Bad HDR Format.";let a=!1,i=!1,u=0;do u+=n.length+1,"FORMAT=32-bit_rle_rgbe"==(n=o(t,u))?i=!0:0==n.length&&(a=!0);while(!a);if(!i)throw"HDR Bad header format, unsupported FORMAT";u+=n.length+1,n=o(t,u);let h=/^-Y (.*) \+X (.*)$/g.exec(n);if(!h||h.length<3)throw"HDR Bad header format, no size";if(r=parseInt(h[2]),e=parseInt(h[1]),r<8||r>32767)throw"HDR Bad header format, unsupported size";return{height:e,width:r,dataPosition:u+=n.length+1}}function u(t,e,r=!1){let a=new Uint8Array(t),o=i(a),h=l(a,o);return n.D.ConvertPanoramaToCubemap(h,o.width,o.height,e,r)}function h(t,e){return l(t,e)}function l(t,e){let r,n,o,i,u,h=e.height,l=e.width,f=e.dataPosition,s=0,c=0,w=0,d=new Uint8Array(new ArrayBuffer(4*l)),p=new Float32Array(new ArrayBuffer(e.width*e.height*12));for(;h>0;){if(r=t[f++],n=t[f++],o=t[f++],i=t[f++],2!=r||2!=n||128&o||e.width<8||e.width>32767)return function(t,e){let r,n,o,i=e.height,u=e.width,h=e.dataPosition,l=new Float32Array(new ArrayBuffer(e.width*e.height*12));for(;i>0;){for(o=0;o<e.width;o++)r=t[h++],n=t[h++],a(l,r,n,t[h++],t[h++],(e.height-i)*u*3+3*o);i--}return l}(t,e);if((o<<8|i)!=l)throw"HDR Bad header format, wrong scan line width";for(w=0,s=0;w<4;w++)for(c=(w+1)*l;s<c;)if(r=t[f++],n=t[f++],r>128){if(0==(u=r-128)||u>c-s)throw"HDR Bad Format, bad scanline data (run)";for(;u-- >0;)d[s++]=n}else{if(0==(u=r)||u>c-s)throw"HDR Bad Format, bad scanline data (non-run)";if(d[s++]=n,--u>0)for(let e=0;e<u;e++)d[s++]=t[f++]}for(w=0;w<l;w++)r=d[w],n=d[w+l],a(p,r,n,o=d[w+2*l],i=d[w+3*l],(e.height-h)*l*3+3*w);h--}return p}let f={RGBE_ReadHeader:i,GetCubeMapTextureData:u,RGBE_ReadPixels:h}},50816:function(t,e,r){r.d(e,{D:()=>a});var n=r(66144);class a{static ConvertPanoramaToCubemap(t,e,r,n,a=!1,o=!0){if(!t)throw"ConvertPanoramaToCubemap: input cannot be null";let i=0;if(t.length!=e*r*3)if(t.length!=e*r*4)throw"ConvertPanoramaToCubemap: input size is wrong";else i=4;else i=3;return{front:this.CreateCubemapTexture(n,this.FACE_FRONT,t,e,r,a,o,i),back:this.CreateCubemapTexture(n,this.FACE_BACK,t,e,r,a,o,i),left:this.CreateCubemapTexture(n,this.FACE_LEFT,t,e,r,a,o,i),right:this.CreateCubemapTexture(n,this.FACE_RIGHT,t,e,r,a,o,i),up:this.CreateCubemapTexture(n,this.FACE_UP,t,e,r,a,o,i),down:this.CreateCubemapTexture(n,this.FACE_DOWN,t,e,r,a,o,i),size:n,type:1,format:4,gammaSpace:!1}}static CreateCubemapTexture(t,e,r,n,a,o,i,u){let h=new Float32Array(new ArrayBuffer(t*t*12)),l=o?Math.max(1,Math.round(n/4/t)):1,f=1/l,s=f*f,c=e[1].subtract(e[0]).scale(f/t),w=e[3].subtract(e[2]).scale(f/t),d=1/t,p=0;for(let o=0;o<t;o++)for(let C=0;C<l;C++){let C=e[0],g=e[2];for(let e=0;e<t;e++)for(let f=0;f<l;f++){let l=g.subtract(C).scale(p).add(C);l.normalize();let f=this.CalcProjectionSpherical(l,r,n,a,u,i);h[o*t*3+3*e+0]+=f.r*s,h[o*t*3+3*e+1]+=f.g*s,h[o*t*3+3*e+2]+=f.b*s,C=C.add(c),g=g.add(w)}p+=d*f}return h}static CalcProjectionSpherical(t,e,r,n,a,o){let i=Math.atan2(t.z,t.x),u=Math.acos(t.y);for(;i<-Math.PI;)i+=2*Math.PI;for(;i>Math.PI;)i-=2*Math.PI;let h=i/Math.PI,l=u/Math.PI,f=Math.round((h=.5*h+.5)*r);f<0?f=0:f>=r&&(f=r-1);let s=Math.round(l*n);s<0?s=0:s>=n&&(s=n-1);let c=o?n-s-1:s;return{r:e[c*r*a+f*a+0],g:e[c*r*a+f*a+1],b:e[c*r*a+f*a+2]}}}a.FACE_LEFT=[new n.Pq(-1,-1,-1),new n.Pq(1,-1,-1),new n.Pq(-1,1,-1),new n.Pq(1,1,-1)],a.FACE_RIGHT=[new n.Pq(1,-1,1),new n.Pq(-1,-1,1),new n.Pq(1,1,1),new n.Pq(-1,1,1)],a.FACE_FRONT=[new n.Pq(1,-1,-1),new n.Pq(1,-1,1),new n.Pq(1,1,-1),new n.Pq(1,1,1)],a.FACE_BACK=[new n.Pq(-1,-1,1),new n.Pq(-1,-1,-1),new n.Pq(-1,1,1),new n.Pq(-1,1,-1)],a.FACE_DOWN=[new n.Pq(1,1,-1),new n.Pq(1,1,1),new n.Pq(-1,1,-1),new n.Pq(-1,1,1)],a.FACE_UP=[new n.Pq(-1,-1,-1),new n.Pq(-1,-1,1),new n.Pq(1,-1,-1),new n.Pq(1,-1,1)]},16622:function(t,e,r){function n(t,e){let r=[];for(let n=0;n<t;++n)r.push(e());return r}function a(t,e){return n(t,e)}r.d(e,{lL:()=>i,ln:()=>a,mI:()=>n});let o=["push","splice","pop","shift","unshift"];function i(t,e){let r=o.map(r=>(function(t,e,r){let n=t[e];if("function"!=typeof n)return null;let a=function(){let n=t.length,o=a.previous.apply(t,arguments);return r(e,n),o};return n.next=a,a.previous=n,t[e]=a,()=>{let r=a.previous;if(!r)return;let n=a.next;n?(r.next=n,n.previous=r):(r.next=void 0,t[e]=r),a.next=void 0,a.previous=void 0}})(t,r,e));return()=>{for(let t of r)t?.()}}}}]);