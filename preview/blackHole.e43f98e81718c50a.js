/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

(()=>{"use strict";var e,a,t,r,c,o,n={26070:function(e,a,t){t.d(a,{G:()=>o,k:()=>n});var r,c=t(78706),o=((r={}).INVALID_JSON="INVALID_JSON",r.INVALID_SAVE="INVALID_SAVE",r.INVALID_STORAGE_FORMAT="INVALID_STORAGE_FORMAT",r);function n(e){switch(e.type){case"INVALID_JSON":return c.A.t("notifications:invalidSaveFileJson");case"INVALID_SAVE":return c.A.t("notifications:invalidSaveFile");case"INVALID_STORAGE_FORMAT":return c.A.t("notifications:invalidStorageFormat")}}},96887:function(e,a,t){t.d(a,{nc:()=>s,pX:()=>k});var r,c,o,n,f=t(1146),d=t(97348),i=t(42503),b=t(85303),u=t(88996),l=t(26070),s=((r={})[r.STELLAR_OBJECT=0]="STELLAR_OBJECT",r[r.PLANETARY_MASS_OBJECT=1]="PLANETARY_MASS_OBJECT",r[r.ANOMALY=2]="ANOMALY",r[r.ORBITAL_FACILITY=3]="ORBITAL_FACILITY",r),p=f.Ik({objectType:f.fc(s),objectIndex:f.ai()}),m=f.Ik((c=function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(a){var r;r=t[a],a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r})}return e}({},p.shape),o=o={starSystemCoordinates:i.Y},Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(o)):(function(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t})(Object(o)).forEach(function(e){Object.defineProperty(c,e,Object.getOwnPropertyDescriptor(o,e))}),c)),y=((n=y||{})[n.WANDERER=0]="WANDERER",n),v=f.Ik({currentFuel:f.ai(),maxFuel:f.ai()}),h=f.Ik({fuelPerSecond:f.ai().default(1)}),g=f.Ik({id:f.Yj().uuid().default(function(){return crypto.randomUUID()}),name:f.Yj().default("Wanderer"),type:f.fc(y).default(0),fuelTanks:f.YO(v).default([{currentFuel:100,maxFuel:100}]),fuelScoop:f.me(h).nullable().default({fuelPerSecond:2.5})}),O=f.Ik({objectId:m,discoveryTimestamp:f.ai().default(0),explorerName:f.Yj().default("Unknown")}),A=f.Ik({version:f.Yj().default(u.rE),timestamp:f.ai().default(function(){return Date.now()}),player:f.Ik({uuid:f.Yj().default(function(){return crypto.randomUUID()}),name:f.Yj().default("Python"),balance:f.ai().default(1e4),creationDate:f.Yj().default(new Date().toISOString()),timePlayedSeconds:f.ai().default(0),visitedSystemHistory:f.YO(i.Y).default([]),discoveries:f.Ik({local:f.YO(O).default([]),uploaded:f.YO(O).default([])}).default({local:[],uploaded:[]}),currentItinerary:f.YO(i.Y).default([]),systemBookmarks:f.YO(i.Y).default([]),currentMissions:f.YO(f.L5()).default([]),completedMissions:f.YO(f.L5()).default([]),spaceShips:f.YO(g).default([g.parse({})]),tutorials:d.wk.default({flightCompleted:!1,stationLandingCompleted:!1,starMapCompleted:!1,fuelScoopingCompleted:!1})}),universeCoordinates:f.Ik({universeObjectId:f.Ik({objectType:f.fc(s),objectIndex:f.ai(),starSystemCoordinates:i.Y}),positionX:f.ai().default(0),positionY:f.ai().default(0),positionZ:f.ai().default(0),rotationQuaternionX:f.ai().default(0),rotationQuaternionY:f.ai().default(0),rotationQuaternionZ:f.ai().default(0),rotationQuaternionW:f.ai().default(1)}),padNumber:f.ai().optional()});function k(e){var a=A.safeParse(e);return a.success?(0,b.ok)(a.data):(0,b._q)({type:l.G.INVALID_SAVE,content:a.error})}},59450:function(e,a,t){t.d(a,{D0:()=>i,Eq:()=>l,oC:()=>u});var r,c=t(1146),o=t(28831),n=t(74499),f=t(95293),d=t(54741),i=((r={}).WANDERER="WANDERER",r),b=c.Ik({type:c.fc(i).default("WANDERER"),id:c.Yj().uuid(),name:c.Yj(),components:c.Ik({primary:c.Ik({warpDrive:d.i,thrusters:f.Y,fuelTank:o.a}),optional:c.YO(n.B)})}).extend({type:c.eu("WANDERER"),components:c.Ik({primary:c.Ik({warpDrive:d.i.nullable(),thrusters:f.Y.nullable(),fuelTank:o.a.nullable()}),optional:c.PV([n.B.nullable(),n.B.nullable(),n.B.nullable()])})}),u=c.gM("type",[b]);function l(){return b.parse({type:"WANDERER",name:"Wanderer",id:crypto.randomUUID(),components:{primary:{warpDrive:{type:"warpDrive",size:3,quality:1},thrusters:{type:"thrusters",size:3,quality:1},fuelTank:{type:"fuelTank",size:2,quality:1,currentFuel01:1}},optional:[null,{type:"fuelScoop",size:2,quality:1},{type:"discoveryScanner",size:2,quality:1}]}})}},2166:function(e,a,t){t.a(e,async function(e,a){try{t(37857);var r=t(13542),c=t(91681),o=t(90141),n=t(50554),f=await n.K.CreateAsync();f.setAutoSaveEnabled(!1);var d=f.starSystemView,i=d.scene,b=(0,r.p)("blackHole",42,"Gargantua",[]),u=(0,c.k)("miller",47,"Miller",[b]);u.orbit.semiMajorAxis=10*b.accretionDiskRadius,u.orbit.inclination=.2;var l={name:"Black Hole Demo",coordinates:{starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},stellarObjects:[b],planets:[u],satellites:[],anomalies:[],orbitalFacilities:[]};f.backend.universe.registerCustomSystem(l);var s=await d.loadStarSystem(l);await f.init(!0),await d.switchToDefaultControls(!0);var p=s.getStellarObjects()[0];d.getDefaultControls().speed=p.getBoundingRadius(),(0,o.Ez)(i.getActiveControls(),p,s,5),a()}catch(e){a(e)}},1)},87447:function(e,a,t){t.d(a,{W:()=>r});function r(e){try{return window.btoa(encodeURIComponent(e))}catch(e){return null}}},56545:function(e,a,t){t.d(a,{F4:()=>o,ep:()=>f,hz:()=>n});var r=t(19461),c=t(56367);function o(e){return Math.pow(e/r.G3,.78)*r.Ow}function n(e,a){return 2*Math.PI*Math.sqrt(e/a)}function f(e,a,t){var r,o=(r=(0,c.F1)(100),e<=0?0:1/(1/r+2044761436301033e-19*Math.log(101325/e))),n=(0,c.F1)(0);return!(e<.05)&&!(o<n)&&!(a>o)&&!(t<n)}}},f={};function d(e){var a=f[e];if(void 0!==a)return a.exports;var t=f[e]={exports:{}};return n[e](t,t.exports,d),t.exports}d.m=n,i="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",b="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",u="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",l=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},d.a=(e,a,t)=>{t&&((r=[]).d=-1);var r,c,o,n,f=new Set,d=e.exports,s=new Promise((e,a)=>{n=a,o=e});s[b]=d,s[i]=e=>{r&&e(r),f.forEach(e),s.catch(function(){})},e.exports=s,a(e=>{c=e.map(e=>{if(null!==e&&"object"==typeof e){if(e[i])return e;if(e.then){var a=[];a.d=0,e.then(e=>{t[b]=e,l(a)},e=>{t[u]=e,l(a)});var t={};return t[i]=e=>e(a),t}}var r={};return r[i]=function(){},r[b]=e,r});var a,t=()=>c.map(e=>{if(e[u])throw e[u];return e[b]}),o=new Promise(e=>{(a=()=>e(t)).r=0;var o=e=>e!==r&&!f.has(e)&&(f.add(e),e&&!e.d&&(a.r++,e.push(a)));c.map(e=>e[i](o))});return a.r?o:t()},e=>(e?n(s[u]=e):o(d),l(r))),r&&r.d<0&&(r.d=0)},d.d=(e,a)=>{for(var t in a)d.o(a,t)&&!d.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},d.f={},d.e=e=>Promise.all(Object.keys(d.f).reduce((a,t)=>(d.f[t](e,a),a),[])),d.k=e=>""+e+".css",d.u=e=>""+e+"."+({1162:"67c0d53d62f0645a",1200:"75847437f025df18",1226:"dd221854e6eee5c8",1276:"bde395117acd492c",142:"2702452e671d5c00",1504:"0f41d5cb61b8ee20",1545:"9861e2397baf6c9f",1571:"d9619e0e515ca8cb",1635:"50df9f89889108f1",1656:"f3d823adef0c0bee",186:"d928049d2a52c59e",1890:"dff60c74c37c0c1d",1991:"553d44d820c9bc1e",2022:"50a1fe1be342f10c",2073:"b74bc7c8994d0ce5",2119:"8a87dbbe7424d361",2303:"88e562c4006ca481",2416:"1973ff3e12daab47",2480:"fe25ff6c5c18c981",2487:"88d5b167ee175ca1",2684:"e0443c1f1c50c9d6",2689:"bcecaaae173a6aa6",2788:"84f3a839c9d01cbf",280:"d8e1c13136dde583",2857:"548a02beffa0d274",2875:"8734dab89acd91e8",2953:"7816a7c56dc65eb9",2960:"a91b2b41828bc57a",3004:"4d0dbfa5464d1e75",3039:"0fb665679109e3e3",3067:"720d5a671f21a876",3096:"bf16b5e1d1def8d7",3153:"a1b1f18296c35b26",3157:"85a387226ecf90d9",3169:"774fe0984d9f8d37",3180:"9069e7161714c3a9",3224:"ca2d81746545ade4",3229:"354a6fa9c21c3b49",323:"f3182258cd54e07e",3234:"745408e20e2cb65b",3269:"6e331fa138ebc55f",3280:"b841df4f49f964ff",3289:"62c8b9ae91e3f521",3366:"b8867a0d31955f6a",3441:"24224c481d0beb89",3456:"657ddbd24225d4ed",3469:"c4ee429e3adf440e",3492:"aeccf89cfaaba605",3501:"a05365b9ca12649c",3554:"611c72f90a42e39a",3568:"4a3fd283d4d14ab0",3573:"f7f75a7b55ff94a4",3584:"b107415f92c30093",3651:"62a58335cb7afa78",3705:"6ddcc370c75ed92c",3707:"46efb1977652db1a",3710:"0a26f45cdff06568",3711:"b84bc7566b09eb8c",3822:"62030ccb84f7d871",3871:"cef67e41328a5398",3916:"f88cb095bbe7a7ba",4016:"cf2ba77489b99ac1",4046:"15584f1611c0bad5",409:"3b4841fe35dd2882",4260:"c095865dc81a86dc",4315:"20e5ed811046d395",4341:"86310b03405f992e",4345:"96eca42a00a64b2c",4401:"ebc63e1b6097c813",4465:"90fdd515c24e0ba2",4597:"2f9dc0e5ba457e64",4692:"0055cfc16b91c959",4778:"81dd215ce54557c9",4879:"74b2d39155c77ccf",4881:"a89dfa63a5d11031",4958:"544842b66ea8150f",5049:"3c5575894da1737b",5060:"b6d7699a5953f320",5067:"6df6af3094369151",5083:"95bada393731e115",5202:"666ae490122be995",523:"16d6b70080724969",5245:"0c7110763bd1f2cc",5246:"f48cfda92b98c1b3",5281:"ba0b3dbe4481564b",5357:"8a65f91134ed2cc1",5434:"ac58111995077f0e",5550:"ee9f2fc3dbab38a2",5555:"f2cdf7fe31e0aad3",5565:"4b6bd0b19ec5a8bd",5618:"0b467e9d23ea3c7a",563:"0fed15c450711168",5638:"b75ad1047b1a8b6a",565:"e44af0bd9e4b4664",5698:"c4ff1c7b2573a5e1",5763:"2099d42212a6903a",5821:"a906a0ee091935bc",583:"f5105717fb8795a6",5835:"446c4d3e893057be",5865:"1429efcae2b34b98",5869:"fd3e45d85b113ef2",5892:"224e324203d10995",5895:"601273b8259ebe65",5991:"033235a738fde4f2",6010:"5db62f9b8b2be233",6061:"a6c659878123d19e",6084:"eacbeb0c5e76ac83",6209:"bab0f63e2a2d0280",6321:"7d97dbdbde9f8de3",6335:"906f86cddf87cc26",6358:"563d6197c6e80fbc",6373:"41a9978a88b13dcf",6408:"f9c042869044b1b3",6410:"37d7cc04eb82f170",644:"0fc0b7ae75869e92",6461:"9e8788b870e470e3",6516:"37ecd0c644b2f679",6597:"083616d8de8760b1",6606:"beb8aa8fe28d0513",6621:"55308e1e142ea4e7",6624:"cebe35ebc7dbe354",6690:"ae33b68eb2d3d9a7",6715:"cf074db3c81fe23a",6778:"75a826c882527c8e",6812:"f93163ba5b3f0ce1",6834:"33d3f66080bbbc1d",6873:"789ecd36a61da53e",6878:"06336da929f76cf5",7088:"0e29bc6d3c0a489c",7218:"e87c0f31c43c933a",7278:"5b6828179b25ca68",7358:"d322b9dab7cd9207",7430:"ef3041654c941618",745:"8aa7f264255c9116",7466:"fb2e943f57726d35",7474:"5808aadb25672c62",7490:"4238dd74b460f31d",754:"7be9ece5a752d1af",7565:"b985d548c5b3bf9c",7575:"f5f4869c4625985d",7691:"c6de35a3a8006e02",7694:"3318c5ba61a3215c",7724:"ea3638f9cce78ac0",781:"db37461cfb928cff",7945:"d8283bd412d777c4",800:"30b5b96df04a8765",8019:"bc9fa055b981ebcb",8053:"2d1fbdd233120e8f",8055:"920cd28671652d69",8060:"574b07993bcbb7fe",8165:"ac1be493458417c3",817:"b68308147b3ade33",8179:"4cb25045110530e4",8237:"892fbb6c057f54e1",8262:"967b47a2aa3251ea",8298:"60799535f0e0e708",8316:"ab67ca0dc02070b5",8397:"7d81767e7880afa6",8457:"7bfd4a8a50b883e2",8459:"d169b9e6086b9f08",8478:"07f30f9658a4a704",8698:"9206f1e6709eeded",8804:"7a6a763dd271bec9",8943:"bbf1552d000ee6d8",8990:"50a8d98a95f9efbb",903:"ff1fa450247235aa",9090:"fef86f728927c609",9129:"fea1572c59faa24d",9137:"468dfe86460a5bc0",921:"b4f97737fe1c0596",9210:"b9460b81d75da032",9211:"88cd7bfe46adda64",9404:"eed4c73193c7395b",947:"b0e609d62a9e181c",9476:"81c7240ea4bfd9d7",9593:"af16c38b972f801d",962:"1eae44421eb974b1",9642:"864b21ca28988fea",9648:"f9a4d02fb81ccb50",9669:"7c606d5a416fc6ab",9701:"b63a1742eeda3d01",9742:"e425517d734f0a1e",9805:"f2a284ed0f869253",9911:"2a1310756f9a167a",9987:"e4032f2f84df2f60"})[e]+".js",d.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),d.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),s={},d.l=function(e,a,t,r){if(s[e])return void s[e].push(a);if(void 0!==t)for(var c,o,n=document.getElementsByTagName("script"),f=0;f<n.length;f++){var i=n[f];if(i.getAttribute("src")==e||i.getAttribute("data-webpack")=="@cosmos-journeyer/game:"+t){c=i;break}}c||(o=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,d.nc&&c.setAttribute("nonce",d.nc),c.setAttribute("data-webpack","@cosmos-journeyer/game:"+t),c.src=e),s[e]=[a];var b=function(a,t){c.onerror=c.onload=null,clearTimeout(u);var r=s[e];if(delete s[e],c.parentNode&&c.parentNode.removeChild(c),r&&r.forEach(function(e){return e(t)}),a)return a(t)},u=setTimeout(b.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=b.bind(null,c.onerror),c.onload=b.bind(null,c.onload),o&&document.head.appendChild(c)},d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p=[],d.O=(e,a,t,r)=>{if(a){r=r||0;for(var c=p.length;c>0&&p[c-1][2]>r;c--)p[c]=p[c-1];p[c]=[a,t,r];return}for(var o=1/0,c=0;c<p.length;c++){for(var[a,t,r]=p[c],n=!0,f=0;f<a.length;f++)(!1&r||o>=r)&&Object.keys(d.O).every(e=>d.O[e](a[f]))?a.splice(f--,1):(n=!1,r<o&&(o=r));if(n){p.splice(c--,1);var i=t();void 0!==i&&(e=i)}}return e},d.rv=()=>"1.5.3",d.g.importScripts&&(m=d.g.location+"");var i,b,u,l,s,p,m,y=d.g.document;if(!m&&y&&(y.currentScript&&"SCRIPT"===y.currentScript.tagName.toUpperCase()&&(m=y.currentScript.src),!m)){var v=y.getElementsByTagName("script");if(v.length)for(var h=v.length-1;h>-1&&(!m||!/^http(s?):/.test(m));)m=v[h--].src}if(!m)throw Error("Automatic publicPath is not supported in this browser");d.p=m=m.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e={2195:0},t="data-webpack-loading",(a=(a,t)=>{e[t]=0})(d.m,0,"2195"),d.f.css=(r,c,o)=>{var n=d.o(e,r)?e[r]:void 0;if(0!==n)if(n)c.push(n[2]);else if(2195==r){var f=new Promise(function(a,t){n=e[r]=[a,t]});c.push(n[2]=f);var i=d.p+d.k(r),b=Error();((e,a,r,c,o)=>{var n,f,i="chunk-"+e;if(!c){for(var b=document.getElementsByTagName("link"),u=0;u<b.length;u++){var l=b[u],s=l.getAttribute("href")||l.href;if(s&&!s.startsWith(d.p)&&(s=d.p+(s.startsWith("/")?s.slice(1):s)),"stylesheet"==l.rel&&(s&&s.startsWith(a)||l.getAttribute("data-webpack")=="@cosmos-journeyer/game:"+i)){n=l;break}}if(!r)return}n||(f=!0,n=document.createElement("link"),d.nc&&n.setAttribute("nonce",d.nc),n.setAttribute("data-webpack","@cosmos-journeyer/game:"+i),o&&n.setAttribute("fetchpriority",o),n.setAttribute(t,1),n.rel="stylesheet",n.href=a);var p=(e,a)=>{if(n.onerror=n.onload=null,n.removeAttribute(t),clearTimeout(m),a&&"load"!=a.type&&n.parentNode.removeChild(n),r(a),e)return e(a)};if(n.getAttribute(t)){var m=setTimeout(p.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=p.bind(null,n.onerror),n.onload=p.bind(null,n.onload)}else p(void 0,{type:"load",target:n});return c&&c.getAttribute("fetchpriority")&&n.setAttribute("fetchpriority",c.getAttribute("fetchpriority")),c?document.head.insertBefore(n,c):f&&document.head.appendChild(n)})(r,i,function(t){if(d.o(e,r)&&(0!==(n=e[r])&&(e[r]=void 0),n))if("load"!==t.type){var c=t&&t.type,o=t&&t.target&&t.target.src;b.message="Loading css chunk "+r+" failed.\n("+c+": "+o+")",b.name="ChunkLoadError",b.type=c,b.request=o,n[1](b)}else a(d.m,r),n[0]()},void 0,o)}else e[r]=0},d.b=document.baseURI||self.location.href,r={3087:0},d.f.j=function(e,a){var t=d.o(r,e)?r[e]:void 0;if(0!==t)if(t)a.push(t[2]);else{var c=new Promise((a,c)=>t=r[e]=[a,c]);a.push(t[2]=c);var o=d.p+d.u(e),n=Error();d.l(o,function(a){if(d.o(r,e)&&(0!==(t=r[e])&&(r[e]=void 0),t)){var c=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;n.message="Loading chunk "+e+" failed.\n("+c+": "+o+")",n.name="ChunkLoadError",n.type=c,n.request=o,t[1](n)}},"chunk-"+e,e)}},d.O.j=e=>0===r[e],c=(e,a)=>{var t,c,[o,n,f]=a,i=0;if(o.some(e=>0!==r[e])){for(t in n)d.o(n,t)&&(d.m[t]=n[t]);if(f)var b=f(d)}for(e&&e(a);i<o.length;i++)c=o[i],d.o(r,c)&&r[c]&&r[c][0](),r[c]=0;return d.O(b)},(o=globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).forEach(c.bind(null,0)),o.push=c.bind(null,o.push.bind(o)),d.ruid="bundler=rspack@1.5.3";var g=d.O(void 0,["8169","2811","6435","6643","3294","660","6752","9870","5063","2195","5070"],function(){return d(2166)});g=d.O(g)})();