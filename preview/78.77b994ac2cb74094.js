"use strict";(globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).push([["78"],{24781(t,e,r){r.r(e),r.d(e,{FlowGraphJsonPointerParserBlock:()=>u});var o=r(79967),i=r(15748),a=r(10716),s=r(93287),n=r(55117),l=r(10763);class u extends l.r{constructor(t){super(i.Vv,t),this.config=t,this.object=this.registerDataOutput("object",i.Vv),this.propertyName=this.registerDataOutput("propertyName",i.Vv),this.setterFunction=this.registerDataOutput("setFunction",i.Vv,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",i.Vv,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",i.Vv,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new o.H(t.jsonPointer,this)}_doOperation(t){let e=this.templateComponent.getAccessor(this.config.pathConverter,t),r=e.info.get(e.object),o=e.info.getTarget?.(e.object),i=e.info.getPropertyName?.[0](e.object);if(o)this.object.setValue(o,t),i&&this.propertyName.setValue(i,t);else throw Error("Object is undefined");return r}_setPropertyValue(t,e,r,o){let i=this.templateComponent.getAccessor(this.config.pathConverter,o),a=i.info.type;a.startsWith("Color")&&(r=h(r,a)),i.info.set?.(r,i.object)}_getPropertyValue(t,e,r){let o=this.templateComponent.getAccessor(this.config.pathConverter,r),i=o.info.type,a=o.info.get(o.object);return i.startsWith("Color")?function(t){if(t instanceof n.v9)return new s.Pq(t.r,t.g,t.b);if(t instanceof n.ov)return new s.IU(t.r,t.g,t.b,t.a);throw Error("Invalid color type")}(a):a}_getInterpolationAnimationPropertyInfo(t,e,r){let o=this.templateComponent.getAccessor(this.config.pathConverter,r);return(t,e,r,i)=>{let a=[],s=o.info.type;return s.startsWith("Color")&&(t=t.map(t=>({frame:t.frame,value:h(t.value,s)}))),o.info.interpolation?.forEach((e,s)=>{let n=o.info.getPropertyName?.[s](o.object)||"Animation-interpolation-"+s,l=t;for(let s of(r!==e.type&&(l=t.map(t=>({frame:t.frame,value:e.getValue(void 0,t.value.asArray?t.value.asArray():[t.value],0,1)}))),e.buildAnimations(o.object,n,60,l)))i&&s.babylonAnimation.setEasingFunction(i),a.push(s.babylonAnimation)}),a}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function h(t,e){return t.getClassName().startsWith("Color")?t:"Color3"===e?new n.v9(t.x,t.y,t.z):"Color4"===e?new n.ov(t.x,t.y,t.z,t.w):t}(0,a.Y5)("FlowGraphJsonPointerParserBlock",u)},10763(t,e,r){r.d(e,{r:()=>n});var o=r(17986),i=r(15748);let a="cachedOperationValue",s="cachedExecutionId";class n extends o.e{constructor(t,e){super(e),this.value=this.registerDataOutput("value",t),this.isValid=this.registerDataOutput("isValid",i.RI)}_updateOutputs(t){let e=t._getExecutionVariable(this,s,-1),r=t._getExecutionVariable(this,a,null);if(null!=r&&e===t.executionId)this.isValid.setValue(!0,t),this.value.setValue(r,t);else try{let e=this._doOperation(t);if(null==e)return void this.isValid.setValue(!1,t);t._setExecutionVariable(this,a,e),t._setExecutionVariable(this,s,t.executionId),this.value.setValue(e,t),this.isValid.setValue(!0,t)}catch(e){this.isValid.setValue(!1,t)}}}},79967(t,e,r){r.d(e,{H:()=>s});var o=r(8328),i=r(15748);let a=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class s{constructor(t,e){this.path=t,this.ownerBlock=e,this.templatedInputs=[];let r=a.exec(t);const s=new Set;for(;r;){const[,n]=r;if(s.has(n))throw Error("Duplicate template variable detected.");s.add(n),this.templatedInputs.push(e.registerDataInput(n,i.x2,new o.P(0))),r=a.exec(t)}}getAccessor(t,e){let r=this.path;for(let t of this.templatedInputs){let o=t.getValue(e).value;if("number"!=typeof o||o<0)throw Error("Invalid value for templated input.");r=r.replace(`{${t.name}}`,o.toString())}return t.convert(r)}}}}]);