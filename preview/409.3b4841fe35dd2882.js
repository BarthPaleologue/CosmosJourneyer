"use strict";(globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).push([["409"],{2353:function(e,a,s){s.r(a),s.d(a,{_KTXTextureLoader:()=>n});var r=s(79890),o=s(95906),t=s(35890);class n{constructor(){this.supportCascades=!1}loadCubeData(e,a,s,o){if(Array.isArray(e))return;a._invertVScale=!a.invertY;let t=a.getEngine(),n=new r.H(e,6),i=n.numberOfMipmapLevels>1&&a.generateMipMaps;t._unpackFlipY(!0),n.uploadLevels(a,a.generateMipMaps),a.width=n.pixelWidth,a.height=n.pixelHeight,t._setCubeMapTextureParams(a,i,n.numberOfMipmapLevels-1),a.isReady=!0,a.onLoadedObservable.notifyObservers(a),a.onLoadedObservable.clear(),o&&o()}loadData(e,a,s,n){if(r.H.IsValid(e)){a._invertVScale=!a.invertY;let o=new r.H(e,1),t=function(e){switch(e){case 35916:return 33776;case 35918:return 33778;case 35919:return 33779;case 37493:return 37492;case 37497:return 37496;case 37495:return 37494;case 37840:return 37808;case 36493:return 36492}return null}(o.glInternalFormat);t?(a.format=t,a._useSRGBBuffer=a.getEngine()._getUseSRGBBuffer(!0,a.generateMipMaps),a._gammaSpace=!0):a.format=o.glInternalFormat,s(o.pixelWidth,o.pixelHeight,a.generateMipMaps,!0,()=>{o.uploadLevels(a,a.generateMipMaps)},o.isInvalid)}else o.Z.IsValid(e)?new o.Z(a.getEngine())._uploadAsync(e,a,n).then(()=>{s(a.width,a.height,a.generateMipMaps,!0,()=>{},!1)},e=>{t.V.Warn(`Failed to load KTX2 texture data: ${e.message}`),s(0,0,!1,!1,()=>{},!0)}):(t.V.Error("texture missing KTX identifier"),s(0,0,!1,!1,()=>{},!0))}}},88208:function(e,a,s){function r(e,a){let s=a?.jsDecoderModule||KTX2DECODER;e&&(e.wasmUASTCToASTC&&(s.LiteTranscoder_UASTC_ASTC.WasmModuleURL=e.wasmUASTCToASTC),e.wasmUASTCToBC7&&(s.LiteTranscoder_UASTC_BC7.WasmModuleURL=e.wasmUASTCToBC7),e.wasmUASTCToRGBA_UNORM&&(s.LiteTranscoder_UASTC_RGBA_UNORM.WasmModuleURL=e.wasmUASTCToRGBA_UNORM),e.wasmUASTCToRGBA_SRGB&&(s.LiteTranscoder_UASTC_RGBA_SRGB.WasmModuleURL=e.wasmUASTCToRGBA_SRGB),e.wasmUASTCToR8_UNORM&&(s.LiteTranscoder_UASTC_R8_UNORM.WasmModuleURL=e.wasmUASTCToR8_UNORM),e.wasmUASTCToRG8_UNORM&&(s.LiteTranscoder_UASTC_RG8_UNORM.WasmModuleURL=e.wasmUASTCToRG8_UNORM),e.jsMSCTranscoder&&(s.MSCTranscoder.JSModuleURL=e.jsMSCTranscoder),e.wasmMSCTranscoder&&(s.MSCTranscoder.WasmModuleURL=e.wasmMSCTranscoder),e.wasmZSTDDecoder&&(s.ZSTDDecoder.WasmModuleURL=e.wasmZSTDDecoder)),a&&(a.wasmUASTCToASTC&&(s.LiteTranscoder_UASTC_ASTC.WasmBinary=a.wasmUASTCToASTC),a.wasmUASTCToBC7&&(s.LiteTranscoder_UASTC_BC7.WasmBinary=a.wasmUASTCToBC7),a.wasmUASTCToRGBA_UNORM&&(s.LiteTranscoder_UASTC_RGBA_UNORM.WasmBinary=a.wasmUASTCToRGBA_UNORM),a.wasmUASTCToRGBA_SRGB&&(s.LiteTranscoder_UASTC_RGBA_SRGB.WasmBinary=a.wasmUASTCToRGBA_SRGB),a.wasmUASTCToR8_UNORM&&(s.LiteTranscoder_UASTC_R8_UNORM.WasmBinary=a.wasmUASTCToR8_UNORM),a.wasmUASTCToRG8_UNORM&&(s.LiteTranscoder_UASTC_RG8_UNORM.WasmBinary=a.wasmUASTCToRG8_UNORM),a.jsMSCTranscoder&&(s.MSCTranscoder.JSModule=a.jsMSCTranscoder),a.wasmMSCTranscoder&&(s.MSCTranscoder.WasmBinary=a.wasmMSCTranscoder),a.wasmZSTDDecoder&&(s.ZSTDDecoder.WasmBinary=a.wasmZSTDDecoder))}function o(e){let a;void 0===e&&"undefined"!=typeof KTX2DECODER&&(e=KTX2DECODER),onmessage=s=>{if(s.data)switch(s.data.action){case"init":{let o=s.data.urls;o&&(o.jsDecoderModule&&void 0===e&&(importScripts(o.jsDecoderModule),e=KTX2DECODER),r(o)),s.data.wasmBinaries&&r(void 0,{...s.data.wasmBinaries,jsDecoderModule:e}),a=new e.KTX2Decoder,postMessage({action:"init"});break}case"setDefaultDecoderOptions":e.KTX2Decoder.DefaultDecoderOptions=s.data.options;break;case"decode":a.decode(s.data.data,s.data.caps,s.data.options).then(e=>{let a=[];for(let s=0;s<e.mipmaps.length;++s){let r=e.mipmaps[s];r&&r.data&&a.push(r.data.buffer)}postMessage({action:"decoded",success:!0,decodedData:e},a)}).catch(e=>{postMessage({action:"decoded",success:!1,msg:e})})}}}async function t(e,a,s){return await new Promise((r,o)=>{let t=a=>{e.removeEventListener("error",t),e.removeEventListener("message",n),o(a)},n=a=>{"init"===a.data.action&&(e.removeEventListener("error",t),e.removeEventListener("message",n),r(e))};e.addEventListener("error",t),e.addEventListener("message",n),e.postMessage({action:"init",urls:s,wasmBinaries:a})})}s.d(a,{TD:()=>t,XE:()=>o,x2:()=>r})}}]);