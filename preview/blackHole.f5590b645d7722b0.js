/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

(()=>{"use strict";var e,a,t,r,c,o,n={26070:function(e,a,t){t.d(a,{G:()=>o,k:()=>n});var r,c=t(78706),o=((r={}).INVALID_JSON="INVALID_JSON",r.INVALID_SAVE="INVALID_SAVE",r.INVALID_STORAGE_FORMAT="INVALID_STORAGE_FORMAT",r);function n(e){switch(e.type){case"INVALID_JSON":return c.A.t("notifications:invalidSaveFileJson");case"INVALID_SAVE":return c.A.t("notifications:invalidSaveFile");case"INVALID_STORAGE_FORMAT":return c.A.t("notifications:invalidStorageFormat")}}},96887:function(e,a,t){t.d(a,{nc:()=>s,pX:()=>k});var r,c,o,n,f=t(87829),d=t(97348),i=t(42503),b=t(85303),u=t(88996),l=t(26070),s=((r={})[r.STELLAR_OBJECT=0]="STELLAR_OBJECT",r[r.PLANETARY_MASS_OBJECT=1]="PLANETARY_MASS_OBJECT",r[r.ANOMALY=2]="ANOMALY",r[r.ORBITAL_FACILITY=3]="ORBITAL_FACILITY",r),p=f.Ik({objectType:f.fc(s),objectIndex:f.ai()}),m=f.Ik((c=function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(a){var r;r=t[a],a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r})}return e}({},p.shape),o=o={starSystemCoordinates:i.Y},Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(o)):(function(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t})(Object(o)).forEach(function(e){Object.defineProperty(c,e,Object.getOwnPropertyDescriptor(o,e))}),c)),y=((n=y||{})[n.WANDERER=0]="WANDERER",n),v=f.Ik({currentFuel:f.ai(),maxFuel:f.ai()}),h=f.Ik({fuelPerSecond:f.ai().default(1)}),g=f.Ik({id:f.Yj().uuid().default(function(){return crypto.randomUUID()}),name:f.Yj().default("Wanderer"),type:f.fc(y).default(0),fuelTanks:f.YO(v).default([{currentFuel:100,maxFuel:100}]),fuelScoop:f.me(h).nullable().default({fuelPerSecond:2.5})}),O=f.Ik({objectId:m,discoveryTimestamp:f.ai().default(0),explorerName:f.Yj().default("Unknown")}),A=f.Ik({version:f.Yj().default(u.rE),timestamp:f.ai().default(Date.now()),player:f.Ik({uuid:f.Yj().default(function(){return crypto.randomUUID()}),name:f.Yj().default("Python"),balance:f.ai().default(1e4),creationDate:f.Yj().default(new Date().toISOString()),timePlayedSeconds:f.ai().default(0),visitedSystemHistory:f.YO(i.Y).default([]),discoveries:f.Ik({local:f.YO(O).default([]),uploaded:f.YO(O).default([])}).default({local:[],uploaded:[]}),currentItinerary:f.YO(i.Y).default([]),systemBookmarks:f.YO(i.Y).default([]),currentMissions:f.YO(f.L5()).default([]),completedMissions:f.YO(f.L5()).default([]),spaceShips:f.YO(g).default([g.parse({})]),tutorials:d.wk.default({flightCompleted:!1,stationLandingCompleted:!1,starMapCompleted:!1,fuelScoopingCompleted:!1})}),universeCoordinates:f.Ik({universeObjectId:f.Ik({objectType:f.fc(s),objectIndex:f.ai(),starSystemCoordinates:i.Y}),positionX:f.ai().default(0),positionY:f.ai().default(0),positionZ:f.ai().default(0),rotationQuaternionX:f.ai().default(0),rotationQuaternionY:f.ai().default(0),rotationQuaternionZ:f.ai().default(0),rotationQuaternionW:f.ai().default(1)}),padNumber:f.ai().optional()});function k(e){var a=A.safeParse(e);return a.success?(0,b.ok)(a.data):(0,b._q)({type:l.G.INVALID_SAVE,content:a.error})}},59450:function(e,a,t){t.d(a,{D0:()=>i,Eq:()=>l,oC:()=>u});var r,c=t(87829),o=t(28831),n=t(74499),f=t(95293),d=t(54741),i=((r={}).WANDERER="WANDERER",r),b=c.Ik({type:c.fc(i).default("WANDERER"),id:c.Yj().uuid(),name:c.Yj(),components:c.Ik({primary:c.Ik({warpDrive:d.i,thrusters:f.Y,fuelTank:o.a}),optional:c.YO(n.B)})}).extend({type:c.eu("WANDERER"),components:c.Ik({primary:c.Ik({warpDrive:d.i.nullable(),thrusters:f.Y.nullable(),fuelTank:o.a.nullable()}),optional:c.PV([n.B.nullable(),n.B.nullable(),n.B.nullable()])})}),u=c.gM("type",[b]);function l(){return b.parse({type:"WANDERER",name:"Wanderer",id:crypto.randomUUID(),components:{primary:{warpDrive:{type:"warpDrive",size:3,quality:1},thrusters:{type:"thrusters",size:3,quality:1},fuelTank:{type:"fuelTank",size:2,quality:1,currentFuel01:1}},optional:[null,{type:"fuelScoop",size:2,quality:1},{type:"discoveryScanner",size:2,quality:1}]}})}},2166:function(e,a,t){t.a(e,async function(e,a){try{t(12594);var r=t(13542),c=t(91681),o=t(97966),n=t(39536),f=await n.K.CreateAsync();f.setAutoSaveEnabled(!1);var d=f.starSystemView,i=d.scene,b=(0,r.p)("blackHole",42,"Gargantua",[]),u=(0,c.k)("miller",47,"Miller",[b]);u.orbit.semiMajorAxis=10*b.accretionDiskRadius,u.orbit.inclination=.2;var l={name:"Black Hole Demo",coordinates:{starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},stellarObjects:[b],planets:[u],satellites:[],anomalies:[],orbitalFacilities:[]};f.backend.universe.registerCustomSystem(l);var s=await d.loadStarSystem(l);await f.init(!0),await d.switchToDefaultControls(!0);var p=s.getStellarObjects()[0];d.getDefaultControls().speed=p.getBoundingRadius(),(0,o.Ez)(i.getActiveControls(),p,s,5),a()}catch(e){a(e)}},1)},87447:function(e,a,t){t.d(a,{W:()=>r});function r(e){try{return window.btoa(encodeURIComponent(e))}catch(e){return null}}},56545:function(e,a,t){t.d(a,{F4:()=>o,ep:()=>f,hz:()=>n});var r=t(19461),c=t(56367);function o(e){return Math.pow(e/r.G3,.78)*r.Ow}function n(e,a){return 2*Math.PI*Math.sqrt(e/a)}function f(e,a,t){var r,o=(r=(0,c.F1)(100),e<=0?0:1/(1/r+2044761436301033e-19*Math.log(101325/e))),n=(0,c.F1)(0);return!(e<.05)&&!(o<n)&&!(a>o)&&!(t<n)}}},f={};function d(e){var a=f[e];if(void 0!==a)return a.exports;var t=f[e]={exports:{}};return n[e](t,t.exports,d),t.exports}d.m=n,i="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",b="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",u="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",l=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},d.a=(e,a,t)=>{t&&((r=[]).d=-1);var r,c,o,n,f=new Set,d=e.exports,s=new Promise((e,a)=>{n=a,o=e});s[b]=d,s[i]=e=>{r&&e(r),f.forEach(e),s.catch(function(){})},e.exports=s,a(e=>{c=e.map(e=>{if(null!==e&&"object"==typeof e){if(e[i])return e;if(e.then){var a=[];a.d=0,e.then(e=>{t[b]=e,l(a)},e=>{t[u]=e,l(a)});var t={};return t[i]=e=>e(a),t}}var r={};return r[i]=function(){},r[b]=e,r});var a,t=()=>c.map(e=>{if(e[u])throw e[u];return e[b]}),o=new Promise(e=>{(a=()=>e(t)).r=0;var o=e=>e!==r&&!f.has(e)&&(f.add(e),e&&!e.d&&(a.r++,e.push(a)));c.map(e=>e[i](o))});return a.r?o:t()},e=>(e?n(s[u]=e):o(d),l(r))),r&&r.d<0&&(r.d=0)},d.d=(e,a)=>{for(var t in a)d.o(a,t)&&!d.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},d.f={},d.e=e=>Promise.all(Object.keys(d.f).reduce((a,t)=>(d.f[t](e,a),a),[])),d.k=e=>""+e+".css",d.u=e=>""+e+"."+({1140:"3d80264d4c5f08c5",1187:"198b5dfa7af250af",1193:"7cadf7d089e83414",1209:"eb5c53a1f0660def",1230:"207a1fad92f7fa2a",1281:"8c694703bab35aba",1298:"e4239f29d46b26d0",1300:"a71c1111c6d5ddc4",1305:"da263df503f5c5af",1334:"4e7ba95c13608422",1347:"b9a8c39fa6f532b8",1406:"e6d08032ffe9d36a",1469:"844bcddc6beb9806",1500:"9b47026e4e78cbd8",156:"34c80fcf7dfa9c87",1569:"6aac808effd5a031",1581:"9d039a223cabff7d",1629:"d0304985079b0515",1710:"a7ec8504041b14c3",1753:"0a9e839e8aac4cdb",19:"380db1d243cf4604",1955:"68bc73189b0eac30",1985:"67ada08278c42188",2046:"8e88af818d74f0f7",2061:"15eb77eddd633543",2064:"90b5dd38fd955aba",2128:"972cc2edbaff32f3",2149:"5330946fee51de84",2150:"8a10641d7e41808d",2154:"96446298b79eeeea",22:"5429cc220de739a6",2307:"a95c44b8d5e19a47",2482:"0a6f7dadd7df0c6f",2498:"df469f8f94e1eb40",2570:"b6477c3abd6156e2",2612:"51f8be0a97485263",2624:"0338265c74318191",2643:"7d937c8939c4876b",2710:"77149794b5f26b87",2799:"48e8fb49b2c8d0e9",2850:"5d3647d81641792f",2871:"daa730c70859246e",2894:"a12f32658819be66",2925:"08dff207c365f84f",2941:"f2d035cc290291bf",2979:"e6f9172d2b7f116b",2996:"6ac6cfdb4f1de1f2",2998:"5705b7faa81e8d4b",3070:"72a39110fb212683",3092:"11f6ed7a306ee1c6",3096:"b0d47869388d82b1",3172:"6a8d6b9e652b1d34",3224:"c726b4974dab8a66",3252:"54b4911f10854a3c",3257:"83f15ef42b47ec6b",3430:"039480359413a1b8",3468:"133479d2629e9845",3532:"0cf6e6d2f1d161a0",3613:"e496fea82e8aa5b0",3701:"0288fd8fc67935a3",3756:"8eb3ea1d257d9f44",3801:"f87b44dad8e58181",3822:"0042e2fa0ef253cc",3865:"ebd674ab192de09e",3889:"143c7e7c70c14566",3980:"0487d26e1247700c",4079:"ad1df3a00c8c7415",410:"b4519f9fabd9bacb",413:"040d13d7f57a4592",4150:"96d1d30698cc82fb",421:"6c81572865b6623c",4266:"4c3c4234fcd30fba",4403:"0f0e5f166ee559a9",4410:"cfd4e73c733097cc",4442:"3a7b5693f35f28c6",4445:"e39aa2b13e9188ca",4489:"904379e0945e3d93",4525:"b6062d4a909c5fe9",4540:"095e294e395196cb",464:"dfec7a5069f475fe",4722:"f7edd585497871f2",4745:"7b44ca702b92dd17",4817:"b41dc0e96c885581",4950:"fd0e7a6167b09cdb",4990:"2e02ee6f263f69db",4996:"ddb45d7bef070a92",5036:"803468ef748dbde3",5079:"eac4b8ed310a78e1",5227:"c3bfb37b7f11758d",5240:"8a0b297424aef1b8",5281:"1f6fc8bfbfdb443f",5303:"d409c5caeed74506",5327:"3eaeef012be7e140",5334:"adfc201d1e9ec821",5384:"df23ce25c8f327a4",5523:"684ae941c9fee3d5",5555:"a7c1d9a08dfd36dc",557:"6cc967633320a6b6",5659:"7d995adec65d6fc7",5672:"47ef10ed362db6c2",5689:"6b6713e602c29d69",570:"1ca048b61990b2e6",5711:"06b15e55a78bcdd3",5813:"b1708dfecb88b1cf",583:"9752dd670cd9b9bb",5860:"5e7616d83a342d2e",5969:"8763097056810f49",5975:"68432a32ec44d1d4",5984:"bbd5975d39416a4c",6076:"e5313ed92caa6681",615:"1b4ac34cfc8559c4",622:"e85edc8cd849491b",6300:"e3a6c3ec51793cba",6317:"0c77d6ef0dd31bf9",6408:"fa472ad958d75386",6512:"a3501a0ee16a11c2",6526:"08a0fea4335767a8",6546:"d11c5e47d1748b1c",6601:"6f72e113a1f6d163",6620:"b197316151b2c452",6623:"6a6d46e12fc79477",6665:"c1d1924dc203b7ca",6676:"684627375b423047",6726:"b1d593cad8e9af49",6763:"d4309355867b19ea",6822:"514fd0ac7fb64819",6834:"696ca0a4912b3f9e",6842:"824633455d500239",6874:"73d92519816c2b38",692:"061af1ee77038a28",698:"ae9d60d3bc46cee0",7073:"1bcbdaa2d0559caf",7126:"934227b6d7e56050",7143:"df66b350a6354fdc",7319:"1ecf4381b5e739cb",7393:"fd23da34eed0b022",7398:"65dd84ded8903855",7439:"f416262ecc2a55b1",7460:"fd0dce892aac404f",7469:"3bb0d8882b2bea2f",7486:"64f6f72b5e1186c3",7515:"0ee591ac0d2c9594",7551:"a7fd346f3b9e48aa",770:"5f6db8742f2e7db7",7856:"1d06adbce5da662c",790:"8c0e3f80b92ebf0b",7936:"5736ba9c46a8593e",7945:"db49a6a4dffdad03",8002:"856a9116a04dd56f",806:"2f5bf38b9a9548ce",8088:"0a2c3c0910854f6b",8203:"f08d97dfd6743809",8241:"8443cea39ccac3d7",8338:"16751aed4e1d9123",8377:"8d0d84cc57c4ba6d",8399:"9f5e0d2c0f9fa94c",8448:"ffd642274eca813a",8474:"34c67310ade17529",8507:"54fd86cb0b339901",8562:"d32a686145055990",8660:"41256f3bc60437f4",8662:"bdca869c18c29260",8932:"b1104c2c54913f75",9060:"3df38f512d398ebb",9093:"da51326846947dbd",9114:"1ee4f2a6aa32f5f4",9118:"f388a906660ff871",9210:"765d0f173972939f",9217:"1a827a2f95ae75cb",9248:"756b3403139f9f2e",9310:"dd26eb33db818f43",9365:"62c6491eef0eb4dc",9405:"afec8a911927c4b1",9414:"63ebf9e2077065dd",9484:"50aee4cb3b424a7c",9496:"7245c1ca78a88db9",9521:"9c1c6686ad859129",955:"11a28632ed9e5bb2",9597:"358b9d49e64f017d",9620:"def712e7b65ee444",9713:"3faa17b08a6db0da",9772:"ee6a9b88afb7a953",9866:"ee8c949269a12ab4",9893:"83f91d261a09cd05",9966:"d55a4804dfbec28a"})[e]+".js",d.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),d.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),s={},d.l=function(e,a,t,r){if(s[e])return void s[e].push(a);if(void 0!==t)for(var c,o,n=document.getElementsByTagName("script"),f=0;f<n.length;f++){var i=n[f];if(i.getAttribute("src")==e||i.getAttribute("data-webpack")=="cosmos-journeyer:"+t){c=i;break}}c||(o=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,d.nc&&c.setAttribute("nonce",d.nc),c.setAttribute("data-webpack","cosmos-journeyer:"+t),c.src=e),s[e]=[a];var b=function(a,t){c.onerror=c.onload=null,clearTimeout(u);var r=s[e];if(delete s[e],c.parentNode&&c.parentNode.removeChild(c),r&&r.forEach(function(e){return e(t)}),a)return a(t)},u=setTimeout(b.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=b.bind(null,c.onerror),c.onload=b.bind(null,c.onload),o&&document.head.appendChild(c)},d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p=[],d.O=(e,a,t,r)=>{if(a){r=r||0;for(var c=p.length;c>0&&p[c-1][2]>r;c--)p[c]=p[c-1];p[c]=[a,t,r];return}for(var o=1/0,c=0;c<p.length;c++){for(var[a,t,r]=p[c],n=!0,f=0;f<a.length;f++)(!1&r||o>=r)&&Object.keys(d.O).every(e=>d.O[e](a[f]))?a.splice(f--,1):(n=!1,r<o&&(o=r));if(n){p.splice(c--,1);var i=t();void 0!==i&&(e=i)}}return e},d.rv=()=>"1.5.3",d.g.importScripts&&(m=d.g.location+"");var i,b,u,l,s,p,m,y=d.g.document;if(!m&&y&&(y.currentScript&&"SCRIPT"===y.currentScript.tagName.toUpperCase()&&(m=y.currentScript.src),!m)){var v=y.getElementsByTagName("script");if(v.length)for(var h=v.length-1;h>-1&&(!m||!/^http(s?):/.test(m));)m=v[h--].src}if(!m)throw Error("Automatic publicPath is not supported in this browser");d.p=m=m.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e={6279:0},t="data-webpack-loading",(a=(a,t)=>{e[t]=0})(d.m,0,"6279"),d.f.css=(r,c,o)=>{var n=d.o(e,r)?e[r]:void 0;if(0!==n)if(n)c.push(n[2]);else if(6279==r){var f=new Promise(function(a,t){n=e[r]=[a,t]});c.push(n[2]=f);var i=d.p+d.k(r),b=Error();((e,a,r,c,o)=>{var n,f,i="chunk-"+e;if(!c){for(var b=document.getElementsByTagName("link"),u=0;u<b.length;u++){var l=b[u],s=l.getAttribute("href")||l.href;if(s&&!s.startsWith(d.p)&&(s=d.p+(s.startsWith("/")?s.slice(1):s)),"stylesheet"==l.rel&&(s&&s.startsWith(a)||l.getAttribute("data-webpack")=="cosmos-journeyer:"+i)){n=l;break}}if(!r)return}n||(f=!0,n=document.createElement("link"),d.nc&&n.setAttribute("nonce",d.nc),n.setAttribute("data-webpack","cosmos-journeyer:"+i),o&&n.setAttribute("fetchpriority",o),n.setAttribute(t,1),n.rel="stylesheet",n.href=a);var p=(e,a)=>{if(n.onerror=n.onload=null,n.removeAttribute(t),clearTimeout(m),a&&"load"!=a.type&&n.parentNode.removeChild(n),r(a),e)return e(a)};if(n.getAttribute(t)){var m=setTimeout(p.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=p.bind(null,n.onerror),n.onload=p.bind(null,n.onload)}else p(void 0,{type:"load",target:n});return c&&c.getAttribute("fetchpriority")&&n.setAttribute("fetchpriority",c.getAttribute("fetchpriority")),c?document.head.insertBefore(n,c):f&&document.head.appendChild(n)})(r,i,function(t){if(d.o(e,r)&&(0!==(n=e[r])&&(e[r]=void 0),n))if("load"!==t.type){var c=t&&t.type,o=t&&t.target&&t.target.src;b.message="Loading css chunk "+r+" failed.\n("+c+": "+o+")",b.name="ChunkLoadError",b.type=c,b.request=o,n[1](b)}else a(d.m,r),n[0]()},void 0,o)}else e[r]=0},d.b=document.baseURI||self.location.href,r={3087:0},d.f.j=function(e,a){var t=d.o(r,e)?r[e]:void 0;if(0!==t)if(t)a.push(t[2]);else{var c=new Promise((a,c)=>t=r[e]=[a,c]);a.push(t[2]=c);var o=d.p+d.u(e),n=Error();d.l(o,function(a){if(d.o(r,e)&&(0!==(t=r[e])&&(r[e]=void 0),t)){var c=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;n.message="Loading chunk "+e+" failed.\n("+c+": "+o+")",n.name="ChunkLoadError",n.type=c,n.request=o,t[1](n)}},"chunk-"+e,e)}},d.O.j=e=>0===r[e],c=(e,a)=>{var t,c,[o,n,f]=a,i=0;if(o.some(e=>0!==r[e])){for(t in n)d.o(n,t)&&(d.m[t]=n[t]);if(f)var b=f(d)}for(e&&e(a);i<o.length;i++)c=o[i],d.o(r,c)&&r[c]&&r[c][0](),r[c]=0;return d.O(b)},(o=globalThis.webpackChunkcosmos_journeyer=globalThis.webpackChunkcosmos_journeyer||[]).forEach(c.bind(null,0)),o.push=c.bind(null,o.push.bind(o)),d.ruid="bundler=rspack@1.5.3";var g=d.O(void 0,["5466","2125","4978","9829","1562","9488","8202","3178","3283","6279","7304"],function(){return d(2166)});g=d.O(g)})();