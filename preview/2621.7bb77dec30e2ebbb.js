"use strict";(globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).push([["2621"],{16535(e,t,a){var o=a(15118),i=a(96861),n=a(65176),s=a(52940),l=a(36770),r=a(88242),u=a(56201);l.$.prototype._partialLoadFile=function(e,t,a,o,i=null){this._loadFile(e,e=>{a[t]=e,a._internalCount++,6===a._internalCount&&o(a)},void 0,void 0,!0,(e,t)=>{i&&e&&i(e.status+" "+e.statusText,t)})},l.$.prototype._cascadeLoadFiles=function(e,t,a,o=null){let i=[];i._internalCount=0;for(let e=0;e<6;e++)this._partialLoadFile(a[e],e,i,t,o)},l.$.prototype._cascadeLoadImgs=function(e,t,a,o,i=null,n){let s=[];s._internalCount=0;for(let l=0;l<6;l++)this._partialLoadImg(o[l],l,s,e,t,a,i,n)},l.$.prototype._partialLoadImg=function(e,t,a,o,i,l,r=null,u){let p=(0,s.z)();(0,n.W$)(e,e=>{a[t]=e,a._internalCount++,o&&o.removePendingData(p),6===a._internalCount&&l&&l(i,a)},(e,t)=>{o&&o.removePendingData(p),r&&r(e,t)},o?o.offlineProvider:null,u),o&&o.addPendingData(p)},l.$.prototype.createCubeTextureBase=function(e,t,a,n,s=null,l=null,p,d=null,h=!1,c=0,m=0,C=null,_=null,f=null,D=!1,g=null){let b=C||new o.h(this,7);b.isCube=!0,b.url=e,b.generateMipMaps=!n,b._lodGenerationScale=c,b._lodGenerationOffset=m,b._useSRGBBuffer=!!D&&this._caps.supportSRGBBuffers&&(this.version>1||this.isWebGPU||!!n),b!==C&&(b.label=e.substring(0,60)),this._doNotHandleContextLost||(b._extension=d,b._files=a,b._buffer=g);let T=e;this._transformTextureUrl&&!C&&(e=this._transformTextureUrl(e));let L=d??(0,u.r)(e),v=(0,r.gT)(L),w=(e,t)=>{b.dispose(),l?l(e,t):e&&i.V.Warn(e)},S=(o,l)=>{e===T?o&&w(o.status+" "+o.statusText,l):(i.V.Warn(`Failed to load ${e}, falling back to the ${T}`),this.createCubeTextureBase(T,t,a,!!n,s,w,p,d,h,c,m,b,_,f,D,g))};if(v)v.then(o=>{let i=e=>{_&&_(b,e),o.loadCubeData(e,b,h,s,(e,t)=>{w(e,t)})};g?i(g):a&&6===a.length?o.supportCascades?this._cascadeLoadFiles(t,e=>i(e.map(e=>new Uint8Array(e))),a,w):w("Textures type does not support cascades."):this._loadFile(e,e=>i(new Uint8Array(e)),void 0,t?t.offlineProvider||null:void 0,!0,S)});else{if(!a||0===a.length)throw Error("Cannot load cubemap because files were not defined, or the correct loader was not found.");this._cascadeLoadImgs(t,b,(e,t)=>{f&&f(e,t)},a,w)}return this._internalTexturesCache.push(b),b}},83118(e,t,a){a.d(t,{_DDSTextureLoader:()=>n});var o=a(72553),i=a(60716);class n{constructor(){this.supportCascades=!0}loadCubeData(e,t,a,n){let s,l=t.getEngine(),r=!1,u=1e3;if(Array.isArray(e))for(let a=0;a<e.length;a++){let o=e[a];t.width=(s=i.DDSTools.GetDDSInfo(o)).width,t.height=s.height,r=(s.isRGB||s.isLuminance||s.mipmapCount>1)&&t.generateMipMaps,l._unpackFlipY(s.isCompressed),i.DDSTools.UploadDDSLevels(l,t,o,s,r,6,-1,a),s.isFourCC||1!==s.mipmapCount?u=s.mipmapCount-1:l.generateMipMapsForCubemap(t)}else t.width=(s=i.DDSTools.GetDDSInfo(e)).width,t.height=s.height,a&&(s.sphericalPolynomial=new o.Q),r=(s.isRGB||s.isLuminance||s.mipmapCount>1)&&t.generateMipMaps,l._unpackFlipY(s.isCompressed),i.DDSTools.UploadDDSLevels(l,t,e,s,r,6),s.isFourCC||1!==s.mipmapCount?u=s.mipmapCount-1:l.generateMipMapsForCubemap(t,!1);l._setCubeMapTextureParams(t,r,u),t.isReady=!0,t.onLoadedObservable.notifyObservers(t),t.onLoadedObservable.clear(),n&&n({isDDS:!0,width:t.width,info:s,data:e,texture:t})}loadData(e,t,a){let o=i.DDSTools.GetDDSInfo(e),n=(o.isRGB||o.isLuminance||o.mipmapCount>1)&&t.generateMipMaps&&Math.max(o.width,o.height)>>o.mipmapCount-1==1;a(o.width,o.height,n,o.isFourCC,()=>{i.DDSTools.UploadDDSLevels(t.getEngine(),t,e,o,n,1)})}}}}]);