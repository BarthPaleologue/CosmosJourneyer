/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

(()=>{"use strict";var e,a,t,r,c,o,n={26070:function(e,a,t){t.d(a,{G:()=>o,k:()=>n});var r,c=t(78706),o=((r={}).INVALID_JSON="INVALID_JSON",r.INVALID_SAVE="INVALID_SAVE",r.INVALID_STORAGE_FORMAT="INVALID_STORAGE_FORMAT",r);function n(e){switch(e.type){case"INVALID_JSON":return c.A.t("notifications:invalidSaveFileJson");case"INVALID_SAVE":return c.A.t("notifications:invalidSaveFile");case"INVALID_STORAGE_FORMAT":return c.A.t("notifications:invalidStorageFormat")}}},96887:function(e,a,t){t.d(a,{nc:()=>u,pX:()=>k});var r,c,o=t(70164),n=t(97348),f=t(42503),d=t(85303),i=t(88996),b=t(26070),u={STELLAR_OBJECT:0,PLANETARY_MASS_OBJECT:1,ANOMALY:2,ORBITAL_FACILITY:3},l=o.Ikc({objectType:o.k5n(u),objectIndex:o.aig()}),s=o.Ikc((r=function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(a){var r;r=t[a],a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r})}return e}({},l.shape),c=c={starSystemCoordinates:f.Y},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(c)):(function(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t})(Object(c)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(c,e))}),r)),p={WANDERER:0},m=o.Ikc({currentFuel:o.aig(),maxFuel:o.aig()}),y=o.Ikc({fuelPerSecond:o.aig().default(1)}),g=o.Ikc({id:o.uRe().default(function(){return crypto.randomUUID()}),name:o.YjP().default("Wanderer"),type:o.k5n(p).default(p.WANDERER),fuelTanks:o.YOg(m).default([{currentFuel:100,maxFuel:100}]),fuelScoop:o.mee(y).nullable().default({fuelPerSecond:2.5})}),v=o.Ikc({objectId:s,discoveryTimestamp:o.aig().default(0),explorerName:o.YjP().default("Unknown")}),h=o.Ikc({version:o.YjP().default(i.rE),timestamp:o.aig().default(function(){return Date.now()}),player:o.Ikc({uuid:o.YjP().default(function(){return crypto.randomUUID()}),name:o.YjP().default("Python"),balance:o.aig().default(1e4),creationDate:o.YjP().default(new Date().toISOString()),timePlayedSeconds:o.aig().default(0),visitedSystemHistory:o.YOg(f.Y).default([]),discoveries:o.Ikc({local:o.YOg(v).default([]),uploaded:o.YOg(v).default([])}).default({local:[],uploaded:[]}),currentItinerary:o.YOg(f.Y).default([]),systemBookmarks:o.YOg(f.Y).default([]),currentMissions:o.YOg(o.L5J()).default([]),completedMissions:o.YOg(o.L5J()).default([]),spaceShips:o.YOg(g).default([g.parse({})]),tutorials:n.wk.default({flightCompleted:!1,stationLandingCompleted:!1,starMapCompleted:!1,fuelScoopingCompleted:!1})}),universeCoordinates:o.Ikc({universeObjectId:o.Ikc({objectType:o.k5n(u),objectIndex:o.aig(),starSystemCoordinates:f.Y}),positionX:o.aig().default(0),positionY:o.aig().default(0),positionZ:o.aig().default(0),rotationQuaternionX:o.aig().default(0),rotationQuaternionY:o.aig().default(0),rotationQuaternionZ:o.aig().default(0),rotationQuaternionW:o.aig().default(1)}),padNumber:o.aig().optional()});function k(e){var a=h.safeParse(e);return a.success?(0,d.ok)(a.data):(0,d._q)({type:b.G.INVALID_SAVE,content:a.error})}},59450:function(e,a,t){t.d(a,{Eq:()=>b,oC:()=>i});var r=t(70164),c=t(28831),o=t(74499),n=t(95293),f=t(54741),d=r.Ikc({id:r.uRe(),name:r.YjP(),components:r.Ikc({primary:r.Ikc({warpDrive:f.i,thrusters:n.Y,fuelTank:c.a}),optional:r.YOg(o.B)})}).extend({type:r.euz("WANDERER"),components:r.Ikc({primary:r.Ikc({warpDrive:f.i.nullable(),thrusters:n.Y.nullable(),fuelTank:c.a.nullable()}),optional:r.PVZ([o.B.nullable(),o.B.nullable(),o.B.nullable()])})});r.gMt("type",[d]);var i=r.gMt("type",[d]);function b(){return d.parse({type:"WANDERER",name:"Wanderer",id:crypto.randomUUID(),components:{primary:{warpDrive:{type:"warpDrive",size:3,quality:1},thrusters:{type:"thrusters",size:3,quality:1},fuelTank:{type:"fuelTank",size:2,quality:1,currentFuel01:1}},optional:[null,{type:"fuelScoop",size:2,quality:1},{type:"discoveryScanner",size:2,quality:1}]}})}},2166:function(e,a,t){t.a(e,async function(e,a){try{t(59238);var r=t(13542),c=t(91681),o=t(90141),n=t(24907),f=await n.K.CreateAsync();f.setAutoSaveEnabled(!1);var d=f.starSystemView,i=d.scene,b=(0,r.p)("blackHole",42,"Gargantua",[]),u=(0,c.k)("miller",47,"Miller",[b]);u.orbit.semiMajorAxis=10*b.accretionDiskRadius,u.orbit.inclination=.2;var l={name:"Black Hole Demo",coordinates:{starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},stellarObjects:[b],planets:[u],satellites:[],anomalies:[],orbitalFacilities:[]};f.backend.universe.registerCustomSystem(l);var s=await d.loadStarSystem(l);await f.init(!0),await d.switchToDefaultControls(!0);var p=s.getStellarObjects()[0];d.getDefaultControls().speed=p.getBoundingRadius(),(0,o.Ez)(i.getActiveControls(),p,s,5),a()}catch(e){a(e)}},1)},87447:function(e,a,t){t.d(a,{W:()=>r});function r(e){try{return window.btoa(encodeURIComponent(e))}catch(e){return null}}},56545:function(e,a,t){t.d(a,{F4:()=>o,ep:()=>f,hz:()=>n});var r=t(19461),c=t(56367);function o(e){return Math.pow(e/r.G3,.78)*r.Ow}function n(e,a){return 2*Math.PI*Math.sqrt(e/a)}function f(e,a,t){var r,o=(r=(0,c.F1)(100),e<=0?0:1/(1/r+2044761436301033e-19*Math.log(101325/e))),n=(0,c.F1)(0);return!(e<.05)&&!(o<n)&&!(a>o)&&!(t<n)}}},f={};function d(e){var a=f[e];if(void 0!==a)return a.exports;var t=f[e]={exports:{}};return n[e](t,t.exports,d),t.exports}d.m=n,i="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",b="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",u="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",l=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},d.a=(e,a,t)=>{t&&((r=[]).d=-1);var r,c,o,n,f=new Set,d=e.exports,s=new Promise((e,a)=>{n=a,o=e});s[b]=d,s[i]=e=>{r&&e(r),f.forEach(e),s.catch(function(){})},e.exports=s,a(e=>{c=e.map(e=>{if(null!==e&&"object"==typeof e){if(e[i])return e;if(e.then){var a=[];a.d=0,e.then(e=>{t[b]=e,l(a)},e=>{t[u]=e,l(a)});var t={};return t[i]=e=>e(a),t}}var r={};return r[i]=function(){},r[b]=e,r});var a,t=()=>c.map(e=>{if(e[u])throw e[u];return e[b]}),o=new Promise(e=>{(a=()=>e(t)).r=0;var o=e=>e!==r&&!f.has(e)&&(f.add(e),e&&!e.d&&(a.r++,e.push(a)));c.map(e=>e[i](o))});return a.r?o:t()},e=>(e?n(s[u]=e):o(d),l(r))),r&&r.d<0&&(r.d=0)},d.d=(e,a)=>{for(var t in a)d.o(a,t)&&!d.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},d.f={},d.e=e=>Promise.all(Object.keys(d.f).reduce((a,t)=>(d.f[t](e,a),a),[])),d.k=e=>""+e+".css",d.u=e=>""+e+"."+({1024:"d06c2cf7407308d6",1043:"5d8748a55171de89",107:"03bcaa4da7ad1217",108:"ad606c2c0505e91c",1124:"7d7f25f365c5abf5",1267:"01494ea8359ceb94",1272:"650a5eeb8e2fc672",13:"ae54abdb1d0abfbe",134:"2654f92490fb18bd",1364:"a4d722d17ea7d110",1403:"3461e12e8af9b567",1409:"46971bf684db24f9",1445:"1c0b50932addae07",1513:"6bde602ff2017274",1599:"c69885103c1b7247",1713:"7d2849be427a6a38",174:"797037ba56a501bf",1796:"250608f46a433dd5",1807:"93d08481e948c747",1816:"f85fe812f7080d04",1844:"d7804c3f437e446b",1880:"f7a30d1224095b03",1965:"0e87d418f414493d",1971:"078a472a8d2540e1",2105:"1dcbd8fbc78a086f",2116:"d1ea64be945c0f29",2120:"003384d5ddfc9323",2134:"972c4ff2b649aad1",2151:"c44c4e7ee77d016f",2157:"1e9ec4ae285e909f",2172:"887b04a07dc10be4",2185:"2fbd0a582ad3eba2",225:"3d5dcf9b69d32f34",2290:"9634e6f7b2abfcb0",2429:"d0cca90199f10b8e",2456:"0c812ead06e9c7db",2528:"4044d30a63e917ff",2538:"d1aad8084822b9aa",2604:"f6d5a0b83a48abfd",2653:"a431bf0417f398a1",2667:"ff155c2a3f2fdb9a",2823:"9e36f1400881f022",3078:"4a64b89927408784",3110:"972eb3e76092a746",3142:"418c6751fb02d620",3216:"11cc6ea9f86c8cfb",3227:"ad78e1a201dad210",3428:"aa23f923035d2b4e",3457:"c1a5ae4ea0842c89",3580:"592123ec96d28207",3645:"6286ba6895d1f3ec",3665:"2eb98bf02de0ecca",3745:"6e7e45ce446acd74",381:"0398e2f6dc5fe360",3823:"5faee005b6760f6d",3893:"ffc5a6bffcbe9d10",393:"6f1bef100f59c9ce",3954:"7d3849e8f98b4a54",3957:"5a2eab4f8d0b8142",4070:"75106d547f8c45e0",4106:"2323a49190b043e9",4116:"209f163f7186e476",4143:"69f84b975951f493",4313:"3f9d62faa1c30e6d",4370:"ce65b78fc103f6fc",4391:"2bc136dc08a361d8",4397:"6d0d77feb271a48c",4407:"ce2a8d60a712c400",4440:"72e9e7af9586b1d8",4545:"63c2f391d8fb5652",4599:"f7aea6d59a06c578",4605:"2fb748e31a7d015a",4651:"6d6a4691904d695e",4657:"0bf9ab3019adce89",4714:"bc9f8d44348423ce",4720:"7f60caae676c9b8d",4747:"59edc9fc38c8f51c",4762:"ea156b48c530eac2",4768:"d5ef53a3f1286dec",477:"9bb932433fff8c50",4833:"39c0f5c8453eb5ae",4973:"9b4eb6266801f7a9",5009:"60c102173b0b5106",5028:"0ed6bfec0dae2aa2",505:"e953fc311e5af15b",511:"b46f62be7e716b1b",5127:"b4a3987d4badf3c0",5179:"4a30d28f92869d3a",5226:"acd264675af5d6fe",5273:"1aab0f5b00b738e9",5277:"868f2ad649588815",5364:"6b2cc0c24a03178e",5482:"b9449720164785c8",5497:"078d8ba387ed0113",5513:"11a7d47b573eb3cc",5534:"3abd5fd382d0cfe5",5574:"c8aeb802955ba052",5589:"9f4717dd69884e28",565:"6a871f3f723ecbe9",5673:"829df19d9796c0f2",5740:"28207d6080f213b1",5787:"3f46640a5a2324bc",5886:"3077e67c0bcfa376",5914:"8e3fb722810cf58f",5952:"2f8a62664e9b6159",600:"aaa5557039bd9d8b",6031:"a30af33b8245efb2",6140:"cb2596476cc3b63a",6174:"8ee8dd65e2625120",6198:"03dd0555509e0d1a",662:"9bd76467b0a94654",6620:"3913487d967aa2a1",6646:"b1883364ccf03df1",6674:"929976f48db4ff6c",676:"e4e0f4e5b97de75c",6785:"e45d6c318dad15e3",685:"9ce4f2750672b0cf",6856:"23ee4909a7d1fe57",6904:"1b544f28f0787030",6947:"ba8a1e6ca98641d9",6975:"afb078c06b9bafea",7042:"6cdc62960bc05b02",7066:"f706b129c9be13d6",7085:"30273cc768a31822",7143:"af738e5ffe747507",7172:"977c491335aa792e",7222:"b20d774c418e7162",7223:"dd636239acd20923",7247:"93ccfd420aa602f9",7360:"9791ae23c781ba18",7363:"41e0ec179ff34565",7465:"ffeb2ff0cf44dbca",7469:"77c069fb6f8e313e",7490:"94a4b01520dadba9",7558:"205916000f9a12d0",7567:"21450cc6b484ea4d",7581:"083d89659e3454a5",7655:"4722228e46970002",7695:"786e075cf062ec35",770:"4ee80ac932c7edbe",7735:"22f68c149863c48e",7751:"c86cf800548a3d0d",7793:"51b9fe2b1c23bf84",7829:"6e2343d6390d0d91",7933:"66f14f8626fa80ed",8005:"90c083ff4190c758",8184:"885e775d94384d25",8205:"e203ba8b6005e33a",830:"8c2684d369793b2b",8347:"e3e0389a38a14410",8353:"d0d087b7385e84a4",838:"d7b445e6b98d95b2",8461:"26e560a0352c1273",8472:"e5ce1b1de1479bf8",8475:"5154c4743103911a",8478:"cf2e05fe1d7a1c2d",857:"d128d1a6bde6409e",8631:"bd0107630688f6d8",8684:"d1943c66b86dfb37",8691:"e9120b8ba2a832bc",8706:"3d65db554692df07",8718:"7f31af2809340820",8784:"978d57b45653698e",8788:"8ed6060c61da6108",8850:"2edefb0d6abac86f",8867:"af68a7200fb58572",8948:"23da5ce9be6e8169",9017:"577d8855fb65fa6d",902:"fe79caecbab5d689",9044:"f2a778d086445cfa",9060:"ff667d107a3bbd3f",9124:"3facf40299463ca6",9195:"ec8cf0a10aada38b",9210:"6d60d8657687a095",922:"46ad822dd821b640",9273:"a6840627b6d68adb",9309:"ead0b1126244fd6f",9413:"a026ab617c43cd11",9427:"d07ebf3a73737dea",9476:"93024a9d671dd3ab",9487:"d6717b6b9f3090c9",9506:"174b1699b9aec502",9535:"928688c93d53d334",9563:"6226139035621dac",9577:"54e2e483d80dc77b",9611:"e8b80309fe3fedfd",9687:"815a39eb7177f3a4",9696:"0d877bc258998a4f",9725:"53b584190944986b",9765:"0004409cf96e12d6",9801:"813c7a06df60dcf7",9822:"d6512870bed0555f",9824:"995924195519ca63",9846:"c48d153028f00e96",9950:"b1e1796b7708df1d",9972:"1113dd37a7372fce"})[e]+".js",d.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),d.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),s={},d.l=function(e,a,t,r){if(s[e])return void s[e].push(a);if(void 0!==t)for(var c,o,n=document.getElementsByTagName("script"),f=0;f<n.length;f++){var i=n[f];if(i.getAttribute("src")==e||i.getAttribute("data-webpack")=="@cosmos-journeyer/game:"+t){c=i;break}}c||(o=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,d.nc&&c.setAttribute("nonce",d.nc),c.setAttribute("data-webpack","@cosmos-journeyer/game:"+t),c.src=e),s[e]=[a];var b=function(a,t){c.onerror=c.onload=null,clearTimeout(u);var r=s[e];if(delete s[e],c.parentNode&&c.parentNode.removeChild(c),r&&r.forEach(function(e){return e(t)}),a)return a(t)},u=setTimeout(b.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=b.bind(null,c.onerror),c.onload=b.bind(null,c.onload),o&&document.head.appendChild(c)},d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p=[],d.O=(e,a,t,r)=>{if(a){r=r||0;for(var c=p.length;c>0&&p[c-1][2]>r;c--)p[c]=p[c-1];p[c]=[a,t,r];return}for(var o=1/0,c=0;c<p.length;c++){for(var[a,t,r]=p[c],n=!0,f=0;f<a.length;f++)(!1&r||o>=r)&&Object.keys(d.O).every(e=>d.O[e](a[f]))?a.splice(f--,1):(n=!1,r<o&&(o=r));if(n){p.splice(c--,1);var i=t();void 0!==i&&(e=i)}}return e},d.rv=()=>"1.5.8",d.g.importScripts&&(m=d.g.location+"");var i,b,u,l,s,p,m,y=d.g.document;if(!m&&y&&(y.currentScript&&"SCRIPT"===y.currentScript.tagName.toUpperCase()&&(m=y.currentScript.src),!m)){var g=y.getElementsByTagName("script");if(g.length)for(var v=g.length-1;v>-1&&(!m||!/^http(s?):/.test(m));)m=g[v--].src}if(!m)throw Error("Automatic publicPath is not supported in this browser");d.p=m=m.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e={1536:0},t="data-webpack-loading",(a=(a,t)=>{e[t]=0})(d.m,0,"1536"),d.f.css=(r,c,o)=>{var n=d.o(e,r)?e[r]:void 0;if(0!==n)if(n)c.push(n[2]);else if(1536==r){var f=new Promise(function(a,t){n=e[r]=[a,t]});c.push(n[2]=f);var i=d.p+d.k(r),b=Error();((e,a,r,c,o)=>{var n,f,i="chunk-"+e;if(!c){for(var b=document.getElementsByTagName("link"),u=0;u<b.length;u++){var l=b[u],s=l.getAttribute("href")||l.href;if(s&&!s.startsWith(d.p)&&(s=d.p+(s.startsWith("/")?s.slice(1):s)),"stylesheet"==l.rel&&(s&&s.startsWith(a)||l.getAttribute("data-webpack")=="@cosmos-journeyer/game:"+i)){n=l;break}}if(!r)return}n||(f=!0,n=document.createElement("link"),d.nc&&n.setAttribute("nonce",d.nc),n.setAttribute("data-webpack","@cosmos-journeyer/game:"+i),o&&n.setAttribute("fetchpriority",o),n.setAttribute(t,1),n.rel="stylesheet",n.href=a);var p=(e,a)=>{if(n.onerror=n.onload=null,n.removeAttribute(t),clearTimeout(m),a&&"load"!=a.type&&n.parentNode.removeChild(n),r(a),e)return e(a)};if(n.getAttribute(t)){var m=setTimeout(p.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=p.bind(null,n.onerror),n.onload=p.bind(null,n.onload)}else p(void 0,{type:"load",target:n});return c&&c.getAttribute("fetchpriority")&&n.setAttribute("fetchpriority",c.getAttribute("fetchpriority")),c?document.head.insertBefore(n,c):f&&document.head.appendChild(n)})(r,i,function(t){if(d.o(e,r)&&(0!==(n=e[r])&&(e[r]=void 0),n))if("load"!==t.type){var c=t&&t.type,o=t&&t.target&&t.target.src;b.message="Loading css chunk "+r+" failed.\n("+c+": "+o+")",b.name="ChunkLoadError",b.type=c,b.request=o,n[1](b)}else a(d.m,r),n[0]()},void 0,o)}else e[r]=0},d.b=document.baseURI||self.location.href,r={3087:0},d.f.j=function(e,a){var t=d.o(r,e)?r[e]:void 0;if(0!==t)if(t)a.push(t[2]);else{var c=new Promise((a,c)=>t=r[e]=[a,c]);a.push(t[2]=c);var o=d.p+d.u(e),n=Error();d.l(o,function(a){if(d.o(r,e)&&(0!==(t=r[e])&&(r[e]=void 0),t)){var c=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;n.message="Loading chunk "+e+" failed.\n("+c+": "+o+")",n.name="ChunkLoadError",n.type=c,n.request=o,t[1](n)}},"chunk-"+e,e)}},d.O.j=e=>0===r[e],c=(e,a)=>{var t,c,[o,n,f]=a,i=0;if(o.some(e=>0!==r[e])){for(t in n)d.o(n,t)&&(d.m[t]=n[t]);if(f)var b=f(d)}for(e&&e(a);i<o.length;i++)c=o[i],d.o(r,c)&&r[c]&&r[c][0](),r[c]=0;return d.O(b)},(o=globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).forEach(c.bind(null,0)),o.push=c.bind(null,o.push.bind(o)),d.ruid="bundler=rspack@1.5.8";var h=d.O(void 0,["4693","3311","950","4403","4735","1476","5946","818","1275","1536","9526"],function(){return d(2166)});h=d.O(h)})();