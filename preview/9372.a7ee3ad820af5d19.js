/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

"use strict";(globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).push([["9372"],{42707(t,e,r){r.d(e,{A5:()=>m,C5:()=>R,Cm:()=>l,EX:()=>_,GX:()=>c,N5:()=>n,YM:()=>f,bS:()=>p,kf:()=>h,tI:()=>u,tg:()=>y});var i=r(70905),o=r(91178);let s=new WeakMap,a={_webGLVersion:2,cachedPipelines:{}};function n(t){let e=s.get(t);if(!e){if(!t)return a;e={_webGLVersion:t.TEXTURE_BINDING_3D?2:1,_context:t,parallelShaderCompile:t.getExtension("KHR_parallel_shader_compile")||void 0,cachedPipelines:{}},s.set(t,e)}return e}function l(t){s.delete(t)}function h(t,e,r,i,o,s){let a=n(i);return s||(s=a._createShaderProgramInjection??u),s(t,x(e,"vertex",i,a._contextWasLost),x(r,"fragment",i,a._contextWasLost),i,o,a.validateShaderPrograms)}function _(t,e,r,i,o,s=null,a){let l=n(o);a||(a=l._createShaderProgramInjection??u);let h=l._webGLVersion>1?"#version 300 es\n#define WEBGL2 \n":"";return a(t,d(e,"vertex",i,h,o,l._contextWasLost),d(r,"fragment",i,h,o,l._contextWasLost),o,s,l.validateShaderPrograms)}function c(t,e){let r=new i.x,o=n(t);return o.parallelShaderCompile&&!o.disableParallelShaderCompile&&(r.isParallelCompiled=!0),r.context=o._context,r}function u(t,e,r,i,o=null,s){let a=i.createProgram();if(t.program=a,!a)throw Error("Unable to create program");return i.attachShader(a,e),i.attachShader(a,r),i.linkProgram(a),t.context=i,t.vertexShader=e,t.fragmentShader=r,t.isParallelCompiled||y(t,i,s),a}function m(t,e,r){if(t._isDisposed)return!1;let i=n(e);return!!(i&&i.parallelShaderCompile&&i.parallelShaderCompile.COMPLETION_STATUS_KHR&&t.program&&e.getProgramParameter(t.program,i.parallelShaderCompile.COMPLETION_STATUS_KHR))&&(y(t,e,r),!0)}function y(t,e,r){let i=t.context,o=t.vertexShader,s=t.fragmentShader,a=t.program;if(!i.getProgramParameter(a,i.LINK_STATUS)){if(!e.getShaderParameter(o,e.COMPILE_STATUS)){let r=e.getShaderInfoLog(o);if(r)throw t.vertexCompilationError=r,Error("VERTEX SHADER "+r)}if(!e.getShaderParameter(s,e.COMPILE_STATUS)){let r=e.getShaderInfoLog(s);if(r)throw t.fragmentCompilationError=r,Error("FRAGMENT SHADER "+r)}let r=i.getProgramInfoLog(a);if(r)throw t.programLinkError=r,Error(r)}if(r&&(i.validateProgram(a),!i.getProgramParameter(a,i.VALIDATE_STATUS))){let e=i.getProgramInfoLog(a);if(e)throw t.programValidationError=e,Error(e)}i.deleteShader(o),i.deleteShader(s),t.vertexShader=void 0,t.fragmentShader=void 0,t.onCompiled&&(t.onCompiled(),t.onCompiled=void 0)}function f(t,e,r,i,o,s,a,l,c,u="",m,y,d){let x=n(t.context);y||(y=x.createRawShaderProgramInjection??h),d||(d=x.createShaderProgramInjection??_),i?t.program=y(t,e,r,t.context,c):t.program=d(t,e,r,l,t.context,c),t.program.__SPECTOR_rebuildProgram=a,m()}function d(t,e,r,i,s,a){return x((0,o.iL)(t,r,i),e,s,a)}function x(t,e,r,i){let o=r.createShader("vertex"===e?r.VERTEX_SHADER:r.FRAGMENT_SHADER);if(!o){let t=r.NO_ERROR,o=r.NO_ERROR;for(;(o=r.getError())!==r.NO_ERROR;)t=o;throw Error(`Something went wrong while creating a gl ${e} shader object. gl error=${t}, gl isContextLost=${r.isContextLost()}, _contextWasLost=${i}`)}return r.shaderSource(o,t),r.compileShader(o),o}function R(t,e){e.useProgram(t)}function p(t,e){if(!t.isParallelCompiled)return void e(t);let r=t.onCompiled;t.onCompiled=()=>{r?.(),e(t)}}},47120(t,e,r){r.d(e,{JH:()=>c,b4:()=>h,mO:()=>_,uR:()=>m});var i=r(77629),o=r(42707),s=r(56863),a=r(31656),n=r(39543),l=r(91178);function h(t,e){return(0,o.N5)(e).cachedPipelines[t]}function _(t){let e=t._name,r=t.context;if(e&&r){let t=(0,o.N5)(r),i=t.cachedPipelines[e];i?.dispose(),delete t.cachedPipelines[e]}}function c(t,e,r,o,s,a,l){let h,_,c=(0,i.BA)()?a?.getHostDocument():null;h="string"==typeof e?e:e.vertexSource?"source:"+e.vertexSource:e.vertexElement?c?.getElementById(e.vertexElement)||e.vertexElement:e.vertex||e,_="string"==typeof e?e:e.fragmentSource?"source:"+e.fragmentSource:e.fragmentElement?c?.getElementById(e.fragmentElement)||e.fragmentElement:e.fragment||e;let m=[void 0,void 0],y=()=>{if(m[0]&&m[1]){t.isFragment=!0;let[i,h]=m;(0,n.M0)(h,t,(a,h)=>{var _,c,u,m;l&&(l._fragmentSourceCodeBeforeMigration=h),r&&(a=r("fragment",a));let y=(0,n.nO)(i,a,t);t=null;let f=(_=y.vertexCode,c=y.fragmentCode,u=e,m=s,u?{vertexSourceCode:(1===m?"//":"")+"#define SHADER_NAME vertex:"+(u.vertexElement||u.vertex||u.spectorName||u)+"\n"+_,fragmentSourceCode:(1===m?"//":"")+"#define SHADER_NAME fragment:"+(u.fragmentElement||u.fragment||u.spectorName||u)+"\n"+c}:{vertexSourceCode:_,fragmentSourceCode:c});o?.(f.vertexSourceCode,f.fragmentSourceCode)},a)}};u(h,"Vertex","",e=>{(0,n.pB)(t),(0,n.M0)(e,t,(t,i)=>{l&&(l._rawVertexSourceCode=e,l._vertexSourceCodeBeforeMigration=i),r&&(t=r("vertex",t)),m[0]=t,y()},a)},s),u(_,"Fragment","Pixel",t=>{l&&(l._rawFragmentSourceCode=t),m[1]=t,y()},s)}function u(t,e,r,o,a,n){let h;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return void o((0,i.Zl)(t));if("source:"===t.substring(0,7))return void o(t.substring(7));if("base64:"===t.substring(0,7))return void o(window.atob(t.substring(7)));let _=s.l.GetShadersStore(a);if(_[t+e+"Shader"])return void o(_[t+e+"Shader"]);if(r&&_[t+r+"Shader"])return void o(_[t+r+"Shader"]);if(h="."===t[0]||"/"===t[0]||t.indexOf("http")>-1?t:s.l.GetShadersRepository(a)+t,!(n=n||l.sb))throw Error("loadFileInjection is not defined");n(h+"."+e.toLowerCase()+".fx",o)}let m=(t,e,r,i)=>{try{let s=t.context?(0,o.N5)(t.context):null;s&&(s.disableParallelShaderCompile=t.disableParallelCompilation);let a=t.existingPipelineContext||e(t.shaderProcessingContext);return a._name=t.name,t.name&&s&&(s.cachedPipelines[t.name]=a),r(a,t.vertex,t.fragment,!!t.createAsRaw,"","",t.rebuildRebind,t.defines,t.transformFeedbackVaryings,"",()=>{i(a,()=>{t.onRenderingStateCompiled?.(a)})}),a}catch(t){throw a.V.Error("Error compiling effect"),t}}},59624(t,e,r){r.d(e,{$x:()=>s,_0:()=>l,xp:()=>a});var i,o,s,a,n=r(70134);(i=s||(s={}))[i.LOCAL=0]="LOCAL",i[i.WORLD=1]="WORLD",i[i.BONE=2]="BONE";class l{}l.X=new n.Pq(1,0,0),l.Y=new n.Pq(0,1,0),l.Z=new n.Pq(0,0,1),(o=a||(a={}))[o.X=0]="X",o[o.Y=1]="Y",o[o.Z=2]="Z"},70134(t,e,r){r.d(e,{AA:()=>x,I9:()=>c,IU:()=>m,PT:()=>y,Pq:()=>u,uq:()=>f});var i=r(26108),o=r(70728),s=r(27371),a=r(64858),n=r(94470),l=r(39058),h=r(89219);let _=t=>parseInt(t.toString().replace(/\W/g,""));class c{constructor(t=0,e=0){this.x=t,this.y=e}toString(){return`{X: ${this.x} Y: ${this.y}}`}getClassName(){return"Vector2"}getHashCode(){let t=_(this.x),e=_(this.y),r=t;return 397*r^e}toArray(t,e=0){return t[e]=this.x,t[e+1]=this.y,this}fromArray(t,e=0){return c.FromArrayToRef(t,e,this),this}asArray(){return[this.x,this.y]}copyFrom(t){return this.x=t.x,this.y=t.y,this}copyFromFloats(t,e){return this.x=t,this.y=e,this}set(t,e){return this.copyFromFloats(t,e)}setAll(t){return this.copyFromFloats(t,t)}add(t){return new c(this.x+t.x,this.y+t.y)}addToRef(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e}addInPlace(t){return this.x+=t.x,this.y+=t.y,this}addInPlaceFromFloats(t,e){return this.x+=t,this.y+=e,this}addVector3(t){return new c(this.x+t.x,this.y+t.y)}subtract(t){return new c(this.x-t.x,this.y-t.y)}subtractToRef(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this}multiply(t){return new c(this.x*t.x,this.y*t.y)}multiplyToRef(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e}multiplyByFloats(t,e){return new c(this.x*t,this.y*e)}divide(t){return new c(this.x/t.x,this.y/t.y)}divideToRef(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e}divideInPlace(t){return this.x=this.x/t.x,this.y=this.y/t.y,this}minimizeInPlace(t){return this.minimizeInPlaceFromFloats(t.x,t.y)}maximizeInPlace(t){return this.maximizeInPlaceFromFloats(t.x,t.y)}minimizeInPlaceFromFloats(t,e){return this.x=Math.min(t,this.x),this.y=Math.min(e,this.y),this}maximizeInPlaceFromFloats(t,e){return this.x=Math.max(t,this.x),this.y=Math.max(e,this.y),this}subtractFromFloats(t,e){return new c(this.x-t,this.y-e)}subtractFromFloatsToRef(t,e,r){return r.x=this.x-t,r.y=this.y-e,r}negate(){return new c(-this.x,-this.y)}negateInPlace(){return this.x*=-1,this.y*=-1,this}negateToRef(t){return t.x=-this.x,t.y=-this.y,t}scaleInPlace(t){return this.x*=t,this.y*=t,this}scale(t){return new c(this.x*t,this.y*t)}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,e}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,e}equals(t){return t&&this.x===t.x&&this.y===t.y}equalsWithEpsilon(t,e=i.bH){return t&&(0,l.WithinEpsilon)(this.x,t.x,e)&&(0,l.WithinEpsilon)(this.y,t.y,e)}equalsToFloats(t,e){return this.x===t&&this.y===e}floor(){return new c(Math.floor(this.x),Math.floor(this.y))}floorToRef(t){return t.x=Math.floor(this.x),t.y=Math.floor(this.y),t}fract(){return new c(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}fractToRef(t){return t.x=this.x-Math.floor(this.x),t.y=this.y-Math.floor(this.y),t}rotate(t){return this.rotateToRef(t,new c)}rotateToRef(t,e){let r=Math.cos(t),i=Math.sin(t);return e.x=r*this.x-i*this.y,e.y=i*this.x+r*this.y,e}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){let t=new c;return this.normalizeToRef(t),t}normalizeToRef(t){let e=this.length();return 0===e&&(t.x=this.x,t.y=this.y),this.scaleToRef(1/e,t)}clone(){return new c(this.x,this.y)}dot(t){return this.x*t.x+this.y*t.y}static Zero(){return new c(0,0)}static One(){return new c(1,1)}static Random(t=0,e=1){return new c((0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e))}static RandomToRef(t=0,e=1,r){return r.copyFromFloats((0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e))}static get ZeroReadOnly(){return c._ZeroReadOnly}static FromArray(t,e=0){return new c(t[e],t[e+1])}static FromArrayToRef(t,e,r){return r.x=t[e],r.y=t[e+1],r}static FromFloatsToRef(t,e,r){return r.copyFromFloats(t,e),r}static CatmullRom(t,e,r,i,o){let s=o*o,a=o*s;return new c(.5*(2*e.x+(-t.x+r.x)*o+(2*t.x-5*e.x+4*r.x-i.x)*s+(-t.x+3*e.x-3*r.x+i.x)*a),.5*(2*e.y+(-t.y+r.y)*o+(2*t.y-5*e.y+4*r.y-i.y)*s+(-t.y+3*e.y-3*r.y+i.y)*a))}static ClampToRef(t,e,r,i){return i.x=(0,l.Clamp)(t.x,e.x,r.x),i.y=(0,l.Clamp)(t.y,e.y,r.y),i}static Clamp(t,e,r){return new c((0,l.Clamp)(t.x,e.x,r.x),(0,l.Clamp)(t.y,e.y,r.y))}static Hermite(t,e,r,i,o){let s=o*o,a=o*s,n=2*a-3*s+1,l=-2*a+3*s,h=a-2*s+o,_=a-s;return new c(t.x*n+r.x*l+e.x*h+i.x*_,t.y*n+r.y*l+e.y*h+i.y*_)}static Hermite1stDerivative(t,e,r,i,o){return this.Hermite1stDerivativeToRef(t,e,r,i,o,new c)}static Hermite1stDerivativeToRef(t,e,r,i,o,s){let a=o*o;return s.x=(a-o)*6*t.x+(3*a-4*o+1)*e.x+(-a+o)*6*r.x+(3*a-2*o)*i.x,s.y=(a-o)*6*t.y+(3*a-4*o+1)*e.y+(-a+o)*6*r.y+(3*a-2*o)*i.y,s}static Lerp(t,e,r){return c.LerpToRef(t,e,r,new c)}static LerpToRef(t,e,r,i){return i.x=t.x+(e.x-t.x)*r,i.y=t.y+(e.y-t.y)*r,i}static Dot(t,e){return t.x*e.x+t.y*e.y}static Normalize(t){return c.NormalizeToRef(t,new c)}static NormalizeToRef(t,e){return t.normalizeToRef(e),e}static Minimize(t,e){return new c(t.x<e.x?t.x:e.x,t.y<e.y?t.y:e.y)}static Maximize(t,e){return new c(t.x>e.x?t.x:e.x,t.y>e.y?t.y:e.y)}static Transform(t,e){return c.TransformToRef(t,e,new c)}static TransformToRef(t,e,r){let i=e.m,o=t.x*i[0]+t.y*i[4]+i[12],s=t.x*i[1]+t.y*i[5]+i[13];return r.x=o,r.y=s,r}static PointInTriangle(t,e,r,i){let o=.5*(-r.y*i.x+e.y*(-r.x+i.x)+e.x*(r.y-i.y)+r.x*i.y),s=o<0?-1:1,a=(e.y*i.x-e.x*i.y+(i.y-e.y)*t.x+(e.x-i.x)*t.y)*s,n=(e.x*r.y-e.y*r.x+(e.y-r.y)*t.x+(r.x-e.x)*t.y)*s;return a>0&&n>0&&a+n<2*o*s}static Distance(t,e){return Math.sqrt(c.DistanceSquared(t,e))}static DistanceSquared(t,e){let r=t.x-e.x,i=t.y-e.y;return r*r+i*i}static Center(t,e){return c.CenterToRef(t,e,new c)}static CenterToRef(t,e,r){return r.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2)}static DistanceOfPointFromSegment(t,e,r){let i=c.DistanceSquared(e,r);if(0===i)return c.Distance(t,e);let o=r.subtract(e),s=Math.max(0,Math.min(1,c.Dot(t.subtract(e),o)/i)),a=e.add(o.multiplyByFloats(s,s));return c.Distance(t,a)}}c._V8PerformanceHack=new c(.5,.5),c._ZeroReadOnly=c.Zero(),Object.defineProperties(c.prototype,{dimension:{value:[2]},rank:{value:1}});class u{get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}constructor(t=0,e=0,r=0){this._isDirty=!0,this._x=t,this._y=e,this._z=r}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z}}`}getClassName(){return"Vector3"}getHashCode(){let t=_(this._x),e=_(this._y),r=_(this._z),i=t;return 397*(i=397*i^e)^r}asArray(){return[this._x,this._y,this._z]}toArray(t,e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,this}fromArray(t,e=0){return u.FromArrayToRef(t,e,this),this}toQuaternion(){return y.RotationYawPitchRoll(this._y,this._x,this._z)}addInPlace(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._isDirty=!0,this}addInPlaceFromFloats(t,e,r){return this._x+=t,this._y+=e,this._z+=r,this._isDirty=!0,this}add(t){return new u(this._x+t._x,this._y+t._y,this._z+t._z)}addToRef(t,e){return e._x=this._x+t._x,e._y=this._y+t._y,e._z=this._z+t._z,e._isDirty=!0,e}subtractInPlace(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._isDirty=!0,this}subtract(t){return new u(this._x-t._x,this._y-t._y,this._z-t._z)}subtractToRef(t,e){return this.subtractFromFloatsToRef(t._x,t._y,t._z,e)}subtractFromFloats(t,e,r){return new u(this._x-t,this._y-e,this._z-r)}subtractFromFloatsToRef(t,e,r,i){return i._x=this._x-t,i._y=this._y-e,i._z=this._z-r,i._isDirty=!0,i}negate(){return new u(-this._x,-this._y,-this._z)}negateInPlace(){return this._x*=-1,this._y*=-1,this._z*=-1,this._isDirty=!0,this}negateToRef(t){return t._x=-1*this._x,t._y=-1*this._y,t._z=-1*this._z,t._isDirty=!0,t}scaleInPlace(t){return this._x*=t,this._y*=t,this._z*=t,this._isDirty=!0,this}scale(t){return new u(this._x*t,this._y*t,this._z*t)}scaleToRef(t,e){return e._x=this._x*t,e._y=this._y*t,e._z=this._z*t,e._isDirty=!0,e}getNormalToRef(t){let e=this.length(),r=Math.acos(this._y/e),i=Math.atan2(this._z,this._x);r>Math.PI/2?r-=Math.PI/2:r+=Math.PI/2;let o=e*Math.sin(r)*Math.cos(i),s=e*Math.cos(r),a=e*Math.sin(r)*Math.sin(i);return t.set(o,s,a),t}applyRotationQuaternionToRef(t,e){let r=this._x,i=this._y,o=this._z,s=t._x,a=t._y,n=t._z,l=t._w,h=2*(a*o-n*i),_=2*(n*r-s*o),c=2*(s*i-a*r);return e._x=r+l*h+a*c-n*_,e._y=i+l*_+n*h-s*c,e._z=o+l*c+s*_-a*h,e._isDirty=!0,e}applyRotationQuaternionInPlace(t){return this.applyRotationQuaternionToRef(t,this)}applyRotationQuaternion(t){return this.applyRotationQuaternionToRef(t,new u)}scaleAndAddToRef(t,e){return e._x+=this._x*t,e._y+=this._y*t,e._z+=this._z*t,e._isDirty=!0,e}projectOnPlane(t,e){return this.projectOnPlaneToRef(t,e,new u)}projectOnPlaneToRef(t,e,r){let i=t.normal,o=t.d,s=d.Vector3[0];this.subtractToRef(e,s),s.normalize();let a=u.Dot(s,i);if(1e-10>Math.abs(a))r.setAll(1/0);else{let t=-(u.Dot(e,i)+o)/a,n=s.scaleInPlace(t);e.addToRef(n,r)}return r}equals(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z}equalsWithEpsilon(t,e=i.bH){return t&&(0,l.WithinEpsilon)(this._x,t._x,e)&&(0,l.WithinEpsilon)(this._y,t._y,e)&&(0,l.WithinEpsilon)(this._z,t._z,e)}equalsToFloats(t,e,r){return this._x===t&&this._y===e&&this._z===r}multiplyInPlace(t){return this._x*=t._x,this._y*=t._y,this._z*=t._z,this._isDirty=!0,this}multiply(t){return this.multiplyByFloats(t._x,t._y,t._z)}multiplyToRef(t,e){return e._x=this._x*t._x,e._y=this._y*t._y,e._z=this._z*t._z,e._isDirty=!0,e}multiplyByFloats(t,e,r){return new u(this._x*t,this._y*e,this._z*r)}divide(t){return new u(this._x/t._x,this._y/t._y,this._z/t._z)}divideToRef(t,e){return e._x=this._x/t._x,e._y=this._y/t._y,e._z=this._z/t._z,e._isDirty=!0,e}divideInPlace(t){return this._x=this._x/t._x,this._y=this._y/t._y,this._z=this._z/t._z,this._isDirty=!0,this}minimizeInPlace(t){return this.minimizeInPlaceFromFloats(t._x,t._y,t._z)}maximizeInPlace(t){return this.maximizeInPlaceFromFloats(t._x,t._y,t._z)}minimizeInPlaceFromFloats(t,e,r){return t<this._x&&(this.x=t),e<this._y&&(this.y=e),r<this._z&&(this.z=r),this}maximizeInPlaceFromFloats(t,e,r){return t>this._x&&(this.x=t),e>this._y&&(this.y=e),r>this._z&&(this.z=r),this}isNonUniformWithinEpsilon(t){let e=Math.abs(this._x),r=Math.abs(this._y);if(!(0,l.WithinEpsilon)(e,r,t))return!0;let i=Math.abs(this._z);return!((0,l.WithinEpsilon)(e,i,t)&&(0,l.WithinEpsilon)(r,i,t))}get isNonUniform(){let t=Math.abs(this._x);return t!==Math.abs(this._y)||t!==Math.abs(this._z)}floorToRef(t){return t._x=Math.floor(this._x),t._y=Math.floor(this._y),t._z=Math.floor(this._z),t._isDirty=!0,t}floor(){return new u(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))}fractToRef(t){return t._x=this._x-Math.floor(this._x),t._y=this._y-Math.floor(this._y),t._z=this._z-Math.floor(this._z),t._isDirty=!0,t}fract(){return new u(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z))}length(){return Math.sqrt(this.lengthSquared())}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z}get hasAZeroComponent(){return this._x*this._y*this._z==0}normalize(){return this.normalizeFromLength(this.length())}reorderInPlace(t){if("xyz"===(t=t.toLowerCase()))return this;let e=d.Vector3[0].copyFrom(this);return this.x=e[t[0]],this.y=e[t[1]],this.z=e[t[2]],this}rotateByQuaternionToRef(t,e){return t.toRotationMatrix(d.Matrix[0]),u.TransformCoordinatesToRef(this,d.Matrix[0],e),e}rotateByQuaternionAroundPointToRef(t,e,r){return this.subtractToRef(e,d.Vector3[0]),d.Vector3[0].rotateByQuaternionToRef(t,d.Vector3[0]),e.addToRef(d.Vector3[0],r),r}cross(t){return u.CrossToRef(this,t,new u)}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){return this.normalizeToRef(new u)}normalizeToRef(t){let e=this.length();return 0===e||1===e?(t._x=this._x,t._y=this._y,t._z=this._z,t._isDirty=!0,t):this.scaleToRef(1/e,t)}clone(){return new u(this._x,this._y,this._z)}copyFrom(t){return this.copyFromFloats(t._x,t._y,t._z)}copyFromFloats(t,e,r){return this._x=t,this._y=e,this._z=r,this._isDirty=!0,this}set(t,e,r){return this.copyFromFloats(t,e,r)}setAll(t){return this._x=this._y=this._z=t,this._isDirty=!0,this}static GetClipFactor(t,e,r,i){let o=u.Dot(t,r);return(o-i)/(o-u.Dot(e,r))}static GetAngleBetweenVectors(t,e,r){let i=t.normalizeToRef(d.Vector3[1]),o=e.normalizeToRef(d.Vector3[2]),s=u.Dot(i,o),a=Math.acos(s=(0,l.Clamp)(s,-1,1)),n=d.Vector3[3];return(u.CrossToRef(i,o,n),u.Dot(n,r)>0)?isNaN(a)?0:a:isNaN(a)?-Math.PI:-Math.acos(s)}static GetAngleBetweenVectorsOnPlane(t,e,r){d.Vector3[0].copyFrom(t);let i=d.Vector3[0];d.Vector3[1].copyFrom(e);let o=d.Vector3[1];d.Vector3[2].copyFrom(r);let s=d.Vector3[2],a=d.Vector3[3],n=d.Vector3[4];i.normalize(),o.normalize(),s.normalize(),u.CrossToRef(s,i,a),u.CrossToRef(a,s,n);let h=Math.atan2(u.Dot(o,a),u.Dot(o,n));return(0,l.NormalizeRadians)(h)}static PitchYawRollToMoveBetweenPointsToRef(t,e,r){let i=x.Vector3[0];return e.subtractToRef(t,i),r._y=Math.atan2(i.x,i.z)||0,r._x=Math.atan2(Math.sqrt(i.x**2+i.z**2),i.y)||0,r._z=0,r._isDirty=!0,r}static PitchYawRollToMoveBetweenPoints(t,e){let r=u.Zero();return u.PitchYawRollToMoveBetweenPointsToRef(t,e,r)}static SlerpToRef(t,e,r,o){let s,a;r=(0,l.Clamp)(r,0,1);let n=d.Vector3[0],h=d.Vector3[1];n.copyFrom(t);let _=n.length();n.normalizeFromLength(_),h.copyFrom(e);let c=h.length();h.normalizeFromLength(c);let m=u.Dot(n,h);if(m<1-i.bH){let t=Math.acos(m),e=1/Math.sin(t);s=Math.sin((1-r)*t)*e,a=Math.sin(r*t)*e}else s=1-r,a=r;return n.scaleInPlace(s),h.scaleInPlace(a),o.copyFrom(n).addInPlace(h),o.scaleInPlace((0,l.Lerp)(_,c,r)),o}static SmoothToRef(t,e,r,i,o){return u.SlerpToRef(t,e,0===i?1:r/i,o),o}static FromArray(t,e=0){return new u(t[e],t[e+1],t[e+2])}static FromFloatArray(t,e){return u.FromArray(t,e)}static FromArrayToRef(t,e,r){return r._x=t[e],r._y=t[e+1],r._z=t[e+2],r._isDirty=!0,r}static FromFloatArrayToRef(t,e,r){return u.FromArrayToRef(t,e,r)}static FromFloatsToRef(t,e,r,i){return i.copyFromFloats(t,e,r),i}static Zero(){return new u(0,0,0)}static One(){return new u(1,1,1)}static Up(){return new u(0,1,0)}static get UpReadOnly(){return u._UpReadOnly}static get DownReadOnly(){return u._DownReadOnly}static get RightReadOnly(){return u._RightReadOnly}static get LeftReadOnly(){return u._LeftReadOnly}static get LeftHandedForwardReadOnly(){return u._LeftHandedForwardReadOnly}static get RightHandedForwardReadOnly(){return u._RightHandedForwardReadOnly}static get LeftHandedBackwardReadOnly(){return u._LeftHandedBackwardReadOnly}static get RightHandedBackwardReadOnly(){return u._RightHandedBackwardReadOnly}static get ZeroReadOnly(){return u._ZeroReadOnly}static get OneReadOnly(){return u._OneReadOnly}static Down(){return new u(0,-1,0)}static Forward(t=!1){return new u(0,0,t?-1:1)}static Backward(t=!1){return new u(0,0,t?1:-1)}static Right(){return new u(1,0,0)}static Left(){return new u(-1,0,0)}static Random(t=0,e=1){return new u((0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e))}static RandomToRef(t=0,e=1,r){return r.copyFromFloats((0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e))}static TransformCoordinates(t,e){let r=u.Zero();return u.TransformCoordinatesToRef(t,e,r),r}static TransformCoordinatesToRef(t,e,r){return u.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,e,r),r}static TransformCoordinatesFromFloatsToRef(t,e,r,i,o){let s=i.m,a=t*s[0]+e*s[4]+r*s[8]+s[12],n=t*s[1]+e*s[5]+r*s[9]+s[13],l=t*s[2]+e*s[6]+r*s[10]+s[14],h=1/(t*s[3]+e*s[7]+r*s[11]+s[15]);return o._x=a*h,o._y=n*h,o._z=l*h,o._isDirty=!0,o}static TransformNormal(t,e){let r=u.Zero();return u.TransformNormalToRef(t,e,r),r}static TransformNormalToRef(t,e,r){return this.TransformNormalFromFloatsToRef(t._x,t._y,t._z,e,r),r}static TransformNormalFromFloatsToRef(t,e,r,i,o){let s=i.m;return o._x=t*s[0]+e*s[4]+r*s[8],o._y=t*s[1]+e*s[5]+r*s[9],o._z=t*s[2]+e*s[6]+r*s[10],o._isDirty=!0,o}static CatmullRom(t,e,r,i,o){let s=o*o,a=o*s;return new u(.5*(2*e._x+(-t._x+r._x)*o+(2*t._x-5*e._x+4*r._x-i._x)*s+(-t._x+3*e._x-3*r._x+i._x)*a),.5*(2*e._y+(-t._y+r._y)*o+(2*t._y-5*e._y+4*r._y-i._y)*s+(-t._y+3*e._y-3*r._y+i._y)*a),.5*(2*e._z+(-t._z+r._z)*o+(2*t._z-5*e._z+4*r._z-i._z)*s+(-t._z+3*e._z-3*r._z+i._z)*a))}static Clamp(t,e,r){let i=new u;return u.ClampToRef(t,e,r,i),i}static ClampToRef(t,e,r,i){let o=t._x;o=(o=o>r._x?r._x:o)<e._x?e._x:o;let s=t._y;s=(s=s>r._y?r._y:s)<e._y?e._y:s;let a=t._z;return a=(a=a>r._z?r._z:a)<e._z?e._z:a,i.copyFromFloats(o,s,a),i}static CheckExtends(t,e,r){e.minimizeInPlace(t),r.maximizeInPlace(t)}static Hermite(t,e,r,i,o){let s=o*o,a=o*s,n=2*a-3*s+1,l=-2*a+3*s,h=a-2*s+o,_=a-s;return new u(t._x*n+r._x*l+e._x*h+i._x*_,t._y*n+r._y*l+e._y*h+i._y*_,t._z*n+r._z*l+e._z*h+i._z*_)}static Hermite1stDerivative(t,e,r,i,o){let s=new u;return this.Hermite1stDerivativeToRef(t,e,r,i,o,s),s}static Hermite1stDerivativeToRef(t,e,r,i,o,s){let a=o*o;return s._x=(a-o)*6*t._x+(3*a-4*o+1)*e._x+(-a+o)*6*r._x+(3*a-2*o)*i._x,s._y=(a-o)*6*t._y+(3*a-4*o+1)*e._y+(-a+o)*6*r._y+(3*a-2*o)*i._y,s._z=(a-o)*6*t._z+(3*a-4*o+1)*e._z+(-a+o)*6*r._z+(3*a-2*o)*i._z,s._isDirty=!0,s}static Lerp(t,e,r){let i=new u(0,0,0);return u.LerpToRef(t,e,r,i),i}static LerpToRef(t,e,r,i){return i._x=t._x+(e._x-t._x)*r,i._y=t._y+(e._y-t._y)*r,i._z=t._z+(e._z-t._z)*r,i._isDirty=!0,i}static Dot(t,e){return t._x*e._x+t._y*e._y+t._z*e._z}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z}static Cross(t,e){let r=new u;return u.CrossToRef(t,e,r),r}static CrossToRef(t,e,r){let i=t._y*e._z-t._z*e._y,o=t._z*e._x-t._x*e._z,s=t._x*e._y-t._y*e._x;return r.copyFromFloats(i,o,s),r}static Normalize(t){let e=u.Zero();return u.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){return t.normalizeToRef(e),e}static Project(t,e,r,i){let o=new u;return u.ProjectToRef(t,e,r,i,o),o}static ProjectToRef(t,e,r,i,o){let s=i.width,a=i.height,l=i.x,h=i.y,_=d.Matrix[1],c=n.q.LastCreatedEngine?.isNDCHalfZRange;f.FromValuesToRef(s/2,0,0,0,0,-a/2,0,0,0,0,c?1:.5,0,l+s/2,a/2+h,.5*!c,1,_);let m=d.Matrix[0];return e.multiplyToRef(r,m),m.multiplyToRef(_,m),u.TransformCoordinatesToRef(t,m,o),o}static Reflect(t,e){return this.ReflectToRef(t,e,new u)}static ReflectToRef(t,e,r){let i=x.Vector3[0];return i.copyFrom(e).scaleInPlace(2*u.Dot(t,e)),r.copyFrom(t).subtractInPlace(i)}static UnprojectFromTransform(t,e,r,i,o){return this.Unproject(t,e,r,i,o,f.IdentityReadOnly)}static Unproject(t,e,r,i,o,s){let a=new u;return u.UnprojectToRef(t,e,r,i,o,s,a),a}static UnprojectToRef(t,e,r,i,o,s,a){return u.UnprojectFloatsToRef(t._x,t._y,t._z,e,r,i,o,s,a),a}static UnprojectFloatsToRef(t,e,r,i,o,s,a,l,h){let _=d.Matrix[0];s.multiplyToRef(a,_),_.multiplyToRef(l,_),_.invert();let c=d.Vector3[0];return c.x=t/i*2-1,c.y=-(e/o*2-1),n.q.LastCreatedEngine?.isNDCHalfZRange?c.z=r:c.z=2*r-1,u.TransformCoordinatesToRef(c,_,h),h}static Minimize(t,e){let r=new u;return r.copyFrom(t),r.minimizeInPlace(e),r}static Maximize(t,e){let r=new u;return r.copyFrom(t),r.maximizeInPlace(e),r}static Distance(t,e){return Math.sqrt(u.DistanceSquared(t,e))}static DistanceSquared(t,e){let r=t._x-e._x,i=t._y-e._y,o=t._z-e._z;return r*r+i*i+o*o}static ProjectOnTriangleToRef(t,e,r,o,s){let a,n,h=d.Vector3[0],_=d.Vector3[1],c=d.Vector3[2],m=d.Vector3[3],y=d.Vector3[4];r.subtractToRef(e,h),o.subtractToRef(e,_),o.subtractToRef(r,c);let f=h.length(),x=_.length(),R=c.length();if(f<i.bH||x<i.bH||R<i.bH)return s.copyFrom(e),u.Distance(t,e);t.subtractToRef(e,y),u.CrossToRef(h,_,m);let p=m.length();if(p<i.bH)return s.copyFrom(e),u.Distance(t,e);m.normalizeFromLength(p);let T=y.length();if(T<i.bH)return s.copyFrom(e),0;y.normalizeFromLength(T);let g=u.Dot(m,y),w=d.Vector3[5],z=d.Vector3[6];w.copyFrom(m).scaleInPlace(-T*g),z.copyFrom(t).addInPlace(w);let F=d.Vector3[4],P=d.Vector3[5],A=d.Vector3[7],v=d.Vector3[8];F.copyFrom(h).scaleInPlace(1/f),v.copyFrom(_).scaleInPlace(1/x),F.addInPlace(v).scaleInPlace(-1),P.copyFrom(h).scaleInPlace(-1/f),v.copyFrom(c).scaleInPlace(1/R),P.addInPlace(v).scaleInPlace(-1),A.copyFrom(c).scaleInPlace(-1/R),v.copyFrom(_).scaleInPlace(-1/x),A.addInPlace(v).scaleInPlace(-1);let C=d.Vector3[9];C.copyFrom(z).subtractInPlace(e),u.CrossToRef(F,C,v);let U=u.Dot(v,m);C.copyFrom(z).subtractInPlace(r),u.CrossToRef(P,C,v);let M=u.Dot(v,m);C.copyFrom(z).subtractInPlace(o),u.CrossToRef(A,C,v);let K=u.Dot(v,m),b=d.Vector3[10];U>0&&M<0?(b.copyFrom(h),a=e,n=r):M>0&&K<0?(b.copyFrom(c),a=r,n=o):(b.copyFrom(_).scaleInPlace(-1),a=o,n=e);let I=d.Vector3[9],L=d.Vector3[4];if(a.subtractToRef(z,v),n.subtractToRef(z,I),u.CrossToRef(v,I,L),!(0>u.Dot(L,m)))return s.copyFrom(z),Math.abs(T*g);let D=d.Vector3[5];u.CrossToRef(b,L,D),D.normalize();let S=d.Vector3[9];S.copyFrom(a).subtractInPlace(z);let E=S.length();if(E<i.bH)return s.copyFrom(a),u.Distance(t,a);S.normalizeFromLength(E);let B=u.Dot(D,S),O=d.Vector3[7];O.copyFrom(z).addInPlace(D.scaleInPlace(E*B)),v.copyFrom(O).subtractInPlace(a),T=b.length(),b.normalizeFromLength(T);let k=u.Dot(v,b)/Math.max(T,i.bH);return k=(0,l.Clamp)(k,0,1),O.copyFrom(a).addInPlace(b.scaleInPlace(k*T)),s.copyFrom(O),u.Distance(t,O)}static Center(t,e){return u.CenterToRef(t,e,u.Zero())}static CenterToRef(t,e,r){return r.copyFromFloats((t._x+e._x)/2,(t._y+e._y)/2,(t._z+e._z)/2)}static RotationFromAxis(t,e,r){let i=new u;return u.RotationFromAxisToRef(t,e,r,i),i}static RotationFromAxisToRef(t,e,r,i){let o=d.Quaternion[0];return y.RotationQuaternionFromAxisToRef(t,e,r,o),o.toEulerAnglesToRef(i),i}}u._V8PerformanceHack=new u(.5,.5,.5),u._UpReadOnly=u.Up(),u._DownReadOnly=u.Down(),u._LeftHandedForwardReadOnly=u.Forward(!1),u._RightHandedForwardReadOnly=u.Forward(!0),u._LeftHandedBackwardReadOnly=u.Backward(!1),u._RightHandedBackwardReadOnly=u.Backward(!0),u._RightReadOnly=u.Right(),u._LeftReadOnly=u.Left(),u._ZeroReadOnly=u.Zero(),u._OneReadOnly=u.One(),Object.defineProperties(u.prototype,{dimension:{value:[3]},rank:{value:1}});class m{get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}get w(){return this._w}set w(t){this._w=t,this._isDirty=!0}constructor(t=0,e=0,r=0,i=0){this._isDirty=!0,this._x=t,this._y=e,this._z=r,this._w=i}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z} W: ${this._w}}`}getClassName(){return"Vector4"}getHashCode(){let t=_(this._x),e=_(this._y),r=_(this._z),i=_(this._w),o=t;return 397*(o=397*(o=397*o^e)^r)^i}asArray(){return[this._x,this._y,this._z,this._w]}toArray(t,e){return void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,this}fromArray(t,e=0){return m.FromArrayToRef(t,e,this),this}addInPlace(t){return this.x+=t._x,this.y+=t._y,this.z+=t._z,this.w+=t._w,this}addInPlaceFromFloats(t,e,r,i){return this.x+=t,this.y+=e,this.z+=r,this.w+=i,this}add(t){return new m(this._x+t.x,this._y+t.y,this._z+t.z,this._w+t.w)}addToRef(t,e){return e.x=this._x+t.x,e.y=this._y+t.y,e.z=this._z+t.z,e.w=this._w+t.w,e}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subtract(t){return new m(this._x-t.x,this._y-t.y,this._z-t.z,this._w-t.w)}subtractToRef(t,e){return e.x=this._x-t.x,e.y=this._y-t.y,e.z=this._z-t.z,e.w=this._w-t.w,e}subtractFromFloats(t,e,r,i){return new m(this._x-t,this._y-e,this._z-r,this._w-i)}subtractFromFloatsToRef(t,e,r,i,o){return o.x=this._x-t,o.y=this._y-e,o.z=this._z-r,o.w=this._w-i,o}negate(){return new m(-this._x,-this._y,-this._z,-this._w)}negateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this}negateToRef(t){return t.x=-this._x,t.y=-this._y,t.z=-this._z,t.w=-this._w,t}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scale(t){return new m(this._x*t,this._y*t,this._z*t,this._w*t)}scaleToRef(t,e){return e.x=this._x*t,e.y=this._y*t,e.z=this._z*t,e.w=this._w*t,e}scaleAndAddToRef(t,e){return e.x+=this._x*t,e.y+=this._y*t,e.z+=this._z*t,e.w+=this._w*t,e}equals(t){return t&&this._x===t.x&&this._y===t.y&&this._z===t.z&&this._w===t.w}equalsWithEpsilon(t,e=i.bH){return t&&(0,l.WithinEpsilon)(this._x,t.x,e)&&(0,l.WithinEpsilon)(this._y,t.y,e)&&(0,l.WithinEpsilon)(this._z,t.z,e)&&(0,l.WithinEpsilon)(this._w,t.w,e)}equalsToFloats(t,e,r,i){return this._x===t&&this._y===e&&this._z===r&&this._w===i}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiply(t){return new m(this._x*t.x,this._y*t.y,this._z*t.z,this._w*t.w)}multiplyToRef(t,e){return e.x=this._x*t.x,e.y=this._y*t.y,e.z=this._z*t.z,e.w=this._w*t.w,e}multiplyByFloats(t,e,r,i){return new m(this._x*t,this._y*e,this._z*r,this._w*i)}divide(t){return new m(this._x/t.x,this._y/t.y,this._z/t.z,this._w/t.w)}divideToRef(t,e){return e.x=this._x/t.x,e.y=this._y/t.y,e.z=this._z/t.z,e.w=this._w/t.w,e}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return t.x<this._x&&(this.x=t.x),t.y<this._y&&(this.y=t.y),t.z<this._z&&(this.z=t.z),t.w<this._w&&(this.w=t.w),this}maximizeInPlace(t){return t.x>this._x&&(this.x=t.x),t.y>this._y&&(this.y=t.y),t.z>this._z&&(this.z=t.z),t.w>this._w&&(this.w=t.w),this}minimizeInPlaceFromFloats(t,e,r,i){return this.x=Math.min(t,this._x),this.y=Math.min(e,this._y),this.z=Math.min(r,this._z),this.w=Math.min(i,this._w),this}maximizeInPlaceFromFloats(t,e,r,i){return this.x=Math.max(t,this._x),this.y=Math.max(e,this._y),this.z=Math.max(r,this._z),this.w=Math.max(i,this._w),this}floorToRef(t){return t.x=Math.floor(this._x),t.y=Math.floor(this._y),t.z=Math.floor(this._z),t.w=Math.floor(this._w),t}floor(){return new m(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z),Math.floor(this._w))}fractToRef(t){return t.x=this._x-Math.floor(this._x),t.y=this._y-Math.floor(this._y),t.z=this._z-Math.floor(this._z),t.w=this._w-Math.floor(this._w),t}fract(){return new m(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z),this._w-Math.floor(this._w))}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){return this.normalizeToRef(new m)}normalizeToRef(t){let e=this.length();return 0===e||1===e?(t.x=this._x,t.y=this._y,t.z=this._z,t.w=this._w,t):this.scaleToRef(1/e,t)}toVector3(){return new u(this._x,this._y,this._z)}clone(){return new m(this._x,this._y,this._z,this._w)}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}copyFromFloats(t,e,r,i){return this.x=t,this.y=e,this.z=r,this.w=i,this}set(t,e,r,i){return this.copyFromFloats(t,e,r,i)}setAll(t){return this.x=this.y=this.z=this.w=t,this}dot(t){return this._x*t.x+this._y*t.y+this._z*t.z+this._w*t.w}static FromArray(t,e){return e||(e=0),new m(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e,r){return r.x=t[e],r.y=t[e+1],r.z=t[e+2],r.w=t[e+3],r}static FromFloatArrayToRef(t,e,r){return m.FromArrayToRef(t,e,r),r}static FromFloatsToRef(t,e,r,i,o){return o.x=t,o.y=e,o.z=r,o.w=i,o}static Zero(){return new m(0,0,0,0)}static One(){return new m(1,1,1,1)}static Random(t=0,e=1){return new m((0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e))}static RandomToRef(t=0,e=1,r){return r.x=(0,l.RandomRange)(t,e),r.y=(0,l.RandomRange)(t,e),r.z=(0,l.RandomRange)(t,e),r.w=(0,l.RandomRange)(t,e),r}static Clamp(t,e,r){return m.ClampToRef(t,e,r,new m)}static ClampToRef(t,e,r,i){return i.x=(0,l.Clamp)(t.x,e.x,r.x),i.y=(0,l.Clamp)(t.y,e.y,r.y),i.z=(0,l.Clamp)(t.z,e.z,r.z),i.w=(0,l.Clamp)(t.w,e.w,r.w),i}static CheckExtends(t,e,r){e.minimizeInPlace(t),r.maximizeInPlace(t)}static get ZeroReadOnly(){return m._ZeroReadOnly}static Normalize(t){return m.NormalizeToRef(t,new m)}static NormalizeToRef(t,e){return t.normalizeToRef(e),e}static Minimize(t,e){let r=new m;return r.copyFrom(t),r.minimizeInPlace(e),r}static Maximize(t,e){let r=new m;return r.copyFrom(t),r.maximizeInPlace(e),r}static Distance(t,e){return Math.sqrt(m.DistanceSquared(t,e))}static DistanceSquared(t,e){let r=t.x-e.x,i=t.y-e.y,o=t.z-e.z,s=t.w-e.w;return r*r+i*i+o*o+s*s}static Center(t,e){return m.CenterToRef(t,e,new m)}static CenterToRef(t,e,r){return r.x=(t.x+e.x)/2,r.y=(t.y+e.y)/2,r.z=(t.z+e.z)/2,r.w=(t.w+e.w)/2,r}static TransformCoordinates(t,e){return m.TransformCoordinatesToRef(t,e,new m)}static TransformCoordinatesToRef(t,e,r){return m.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,e,r),r}static TransformCoordinatesFromFloatsToRef(t,e,r,i,o){let s=i.m,a=t*s[0]+e*s[4]+r*s[8]+s[12],n=t*s[1]+e*s[5]+r*s[9]+s[13],l=t*s[2]+e*s[6]+r*s[10]+s[14],h=t*s[3]+e*s[7]+r*s[11]+s[15];return o.x=a,o.y=n,o.z=l,o.w=h,o}static TransformNormal(t,e){return m.TransformNormalToRef(t,e,new m)}static TransformNormalToRef(t,e,r){let i=e.m,o=t.x*i[0]+t.y*i[4]+t.z*i[8],s=t.x*i[1]+t.y*i[5]+t.z*i[9],a=t.x*i[2]+t.y*i[6]+t.z*i[10];return r.x=o,r.y=s,r.z=a,r.w=t.w,r}static TransformNormalFromFloatsToRef(t,e,r,i,o,s){let a=o.m;return s.x=t*a[0]+e*a[4]+r*a[8],s.y=t*a[1]+e*a[5]+r*a[9],s.z=t*a[2]+e*a[6]+r*a[10],s.w=i,s}static FromVector3(t,e=0){return new m(t._x,t._y,t._z,e)}static Dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w}}m._V8PerformanceHack=new m(.5,.5,.5,.5),m._ZeroReadOnly=m.Zero(),Object.defineProperties(m.prototype,{dimension:{value:[4]},rank:{value:1}});class y{get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}get w(){return this._w}set w(t){this._w=t,this._isDirty=!0}constructor(t=0,e=0,r=0,i=1){this._isDirty=!0,this._x=t,this._y=e,this._z=r,this._w=i}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z} W: ${this._w}}`}getClassName(){return"Quaternion"}getHashCode(){let t=_(this._x),e=_(this._y),r=_(this._z),i=_(this._w),o=t;return 397*(o=397*(o=397*o^e)^r)^i}asArray(){return[this._x,this._y,this._z,this._w]}toArray(t,e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,this}fromArray(t,e=0){return y.FromArrayToRef(t,e,this)}equals(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z&&this._w===t._w}equalsWithEpsilon(t,e=i.bH){return t&&(0,l.WithinEpsilon)(this._x,t._x,e)&&(0,l.WithinEpsilon)(this._y,t._y,e)&&(0,l.WithinEpsilon)(this._z,t._z,e)&&(0,l.WithinEpsilon)(this._w,t._w,e)}isApprox(t,e=i.bH){return t&&((0,l.WithinEpsilon)(this._x,t._x,e)&&(0,l.WithinEpsilon)(this._y,t._y,e)&&(0,l.WithinEpsilon)(this._z,t._z,e)&&(0,l.WithinEpsilon)(this._w,t._w,e)||(0,l.WithinEpsilon)(this._x,-t._x,e)&&(0,l.WithinEpsilon)(this._y,-t._y,e)&&(0,l.WithinEpsilon)(this._z,-t._z,e)&&(0,l.WithinEpsilon)(this._w,-t._w,e))}clone(){return new y(this._x,this._y,this._z,this._w)}copyFrom(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._w=t._w,this._isDirty=!0,this}copyFromFloats(t,e,r,i){return this._x=t,this._y=e,this._z=r,this._w=i,this._isDirty=!0,this}set(t,e,r,i){return this.copyFromFloats(t,e,r,i)}setAll(t){return this.copyFromFloats(t,t,t,t)}add(t){return new y(this._x+t._x,this._y+t._y,this._z+t._z,this._w+t._w)}addInPlace(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this._isDirty=!0,this}addToRef(t,e){return e._x=this._x+t._x,e._y=this._y+t._y,e._z=this._z+t._z,e._w=this._w+t._w,e._isDirty=!0,e}addInPlaceFromFloats(t,e,r,i){return this._x+=t,this._y+=e,this._z+=r,this._w+=i,this._isDirty=!0,this}subtractToRef(t,e){return e._x=this._x-t._x,e._y=this._y-t._y,e._z=this._z-t._z,e._w=this._w-t._w,e._isDirty=!0,e}subtractFromFloats(t,e,r,i){return this.subtractFromFloatsToRef(t,e,r,i,new y)}subtractFromFloatsToRef(t,e,r,i,o){return o._x=this._x-t,o._y=this._y-e,o._z=this._z-r,o._w=this._w-i,o._isDirty=!0,o}subtract(t){return new y(this._x-t._x,this._y-t._y,this._z-t._z,this._w-t._w)}subtractInPlace(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this._isDirty=!0,this}scale(t){return new y(this._x*t,this._y*t,this._z*t,this._w*t)}scaleToRef(t,e){return e._x=this._x*t,e._y=this._y*t,e._z=this._z*t,e._w=this._w*t,e._isDirty=!0,e}scaleInPlace(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this._isDirty=!0,this}scaleAndAddToRef(t,e){return e._x+=this._x*t,e._y+=this._y*t,e._z+=this._z*t,e._w+=this._w*t,e._isDirty=!0,e}multiply(t){let e=new y(0,0,0,1);return this.multiplyToRef(t,e),e}multiplyToRef(t,e){let r=this._x*t._w+this._y*t._z-this._z*t._y+this._w*t._x,i=-this._x*t._z+this._y*t._w+this._z*t._x+this._w*t._y,o=this._x*t._y-this._y*t._x+this._z*t._w+this._w*t._z,s=-this._x*t._x-this._y*t._y-this._z*t._z+this._w*t._w;return e.copyFromFloats(r,i,o,s),e}multiplyInPlace(t){return this.multiplyToRef(t,this)}multiplyByFloats(t,e,r,i){return this._x*=t,this._y*=e,this._z*=r,this._w*=i,this._isDirty=!0,this}divide(t){throw ReferenceError("Can not divide a quaternion")}divideToRef(t,e){throw ReferenceError("Can not divide a quaternion")}divideInPlace(t){throw ReferenceError("Can not divide a quaternion")}minimizeInPlace(){throw ReferenceError("Can not minimize a quaternion")}minimizeInPlaceFromFloats(){throw ReferenceError("Can not minimize a quaternion")}maximizeInPlace(){throw ReferenceError("Can not maximize a quaternion")}maximizeInPlaceFromFloats(){throw ReferenceError("Can not maximize a quaternion")}negate(){return this.negateToRef(new y)}negateInPlace(){return this._x=-this._x,this._y=-this._y,this._z=-this._z,this._w=-this._w,this._isDirty=!0,this}negateToRef(t){return t._x=-this._x,t._y=-this._y,t._z=-this._z,t._w=-this._w,t._isDirty=!0,t}equalsToFloats(t,e,r,i){return this._x===t&&this._y===e&&this._z===r&&this._w===i}floorToRef(t){throw ReferenceError("Can not floor a quaternion")}floor(){throw ReferenceError("Can not floor a quaternion")}fractToRef(t){throw ReferenceError("Can not fract a quaternion")}fract(){throw ReferenceError("Can not fract a quaternion")}conjugateToRef(t){return t.copyFromFloats(-this._x,-this._y,-this._z,this._w),t}conjugateInPlace(){return this._x*=-1,this._y*=-1,this._z*=-1,this._isDirty=!0,this}conjugate(){return new y(-this._x,-this._y,-this._z,this._w)}invert(){let t=this.conjugate(),e=this.lengthSquared();return 0==e||1==e||t.scaleInPlace(1/e),t}invertInPlace(){this.conjugateInPlace();let t=this.lengthSquared();return 0==t||1==t||this.scaleInPlace(1/t),this}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this.lengthSquared())}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){let t=new y(0,0,0,1);return this.normalizeToRef(t),t}normalizeToRef(t){let e=this.length();return 0===e||1===e?t.copyFromFloats(this._x,this._y,this._z,this._w):this.scaleToRef(1/e,t)}toEulerAngles(){let t=u.Zero();return this.toEulerAnglesToRef(t),t}toEulerAnglesToRef(t){let e=this._z,r=this._x,i=this._y,o=this._w,s=i*e-r*o;if(s<-.4999999)t._y=2*Math.atan2(i,o),t._x=Math.PI/2,t._z=0,t._isDirty=!0;else if(s>.4999999)t._y=2*Math.atan2(i,o),t._x=-Math.PI/2,t._z=0,t._isDirty=!0;else{let a=o*o,n=e*e,l=r*r,h=i*i;t._z=Math.atan2(2*(r*i+e*o),-n-l+h+a),t._x=Math.asin(-2*s),t._y=Math.atan2(2*(e*r+i*o),n-l-h+a),t._isDirty=!0}return t}toAlphaBetaGammaToRef(t){let e=this._z,r=this._x,i=this._y,o=this._w,s=2*Math.atan2(Math.sqrt(r*r+i*i),Math.sqrt(e*e+o*o)),a=2*Math.atan2(e,o),n=2*Math.atan2(i,r);return t.set((a-n)/2,s,(a+n)/2),t}toRotationMatrix(t){return f.FromQuaternionToRef(this,t),t}fromRotationMatrix(t){return y.FromRotationMatrixToRef(t,this),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}toAxisAngle(){let t=u.Zero(),e=this.toAxisAngleToRef(t);return{axis:t,angle:e}}toAxisAngleToRef(t){let e=0,r=Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z),i=this._w;return r>0?(e=2*Math.atan2(r,i),t.set(this._x/r,this._y/r,this._z/r)):(e=0,t.set(1,0,0)),e}static FromRotationMatrix(t){let e=new y;return y.FromRotationMatrixToRef(t,e),e}static FromRotationMatrixToRef(t,e){let r,i=t.m,o=i[0],s=i[4],a=i[8],n=i[1],l=i[5],h=i[9],_=i[2],c=i[6],u=i[10],m=o+l+u;return m>0?(e._w=.25/(r=.5/Math.sqrt(m+1)),e._x=(c-h)*r,e._y=(a-_)*r,e._z=(n-s)*r):o>l&&o>u?(e._w=(c-h)/(r=2*Math.sqrt(1+o-l-u)),e._x=.25*r,e._y=(s+n)/r,e._z=(a+_)/r):l>u?(e._w=(a-_)/(r=2*Math.sqrt(1+l-o-u)),e._x=(s+n)/r,e._y=.25*r,e._z=(h+c)/r):(e._w=(n-s)/(r=2*Math.sqrt(1+u-o-l)),e._x=(a+_)/r,e._y=(h+c)/r,e._z=.25*r),e._isDirty=!0,e}static Dot(t,e){return t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w}static AreClose(t,e,r=.1){let i=y.Dot(t,e);return 1-i*i<=r}static SmoothToRef(t,e,r,i,o){let s=0===i?1:r/i;return s=(0,l.Clamp)(s,0,1),y.SlerpToRef(t,e,s,o),o}static Zero(){return new y(0,0,0,0)}static Inverse(t){return new y(-t._x,-t._y,-t._z,t._w)}static InverseToRef(t,e){return e.set(-t._x,-t._y,-t._z,t._w),e}static Identity(){return new y(0,0,0,1)}static IsIdentity(t){return t&&0===t._x&&0===t._y&&0===t._z&&1===t._w}static RotationAxis(t,e){return y.RotationAxisToRef(t,e,new y)}static RotationAxisToRef(t,e,r){r._w=Math.cos(e/2);let i=Math.sin(e/2)/t.length();return r._x=t._x*i,r._y=t._y*i,r._z=t._z*i,r._isDirty=!0,r}static FromArray(t,e){return e||(e=0),new y(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e,r){return r._x=t[e],r._y=t[e+1],r._z=t[e+2],r._w=t[e+3],r._isDirty=!0,r}static FromFloatsToRef(t,e,r,i,o){return o.copyFromFloats(t,e,r,i),o}static FromEulerAngles(t,e,r){let i=new y;return y.RotationYawPitchRollToRef(e,t,r,i),i}static FromEulerAnglesToRef(t,e,r,i){return y.RotationYawPitchRollToRef(e,t,r,i),i}static FromEulerVector(t){let e=new y;return y.RotationYawPitchRollToRef(t._y,t._x,t._z,e),e}static FromEulerVectorToRef(t,e){return y.RotationYawPitchRollToRef(t._y,t._x,t._z,e),e}static FromUnitVectorsToRef(t,e,r,o=i.bH){let s=u.Dot(t,e)+1;return s<o?Math.abs(t.x)>Math.abs(t.z)?r.set(-t.y,t.x,0,0):r.set(0,-t.z,t.y,0):(u.CrossToRef(t,e,x.Vector3[0]),r.set(x.Vector3[0].x,x.Vector3[0].y,x.Vector3[0].z,s)),r.normalize()}static RotationYawPitchRoll(t,e,r){let i=new y;return y.RotationYawPitchRollToRef(t,e,r,i),i}static RotationYawPitchRollToRef(t,e,r,i){let o=.5*r,s=.5*e,a=.5*t,n=Math.sin(o),l=Math.cos(o),h=Math.sin(s),_=Math.cos(s),c=Math.sin(a),u=Math.cos(a);return i._x=u*h*l+c*_*n,i._y=c*_*l-u*h*n,i._z=u*_*n-c*h*l,i._w=u*_*l+c*h*n,i._isDirty=!0,i}static RotationAlphaBetaGamma(t,e,r){let i=new y;return y.RotationAlphaBetaGammaToRef(t,e,r,i),i}static RotationAlphaBetaGammaToRef(t,e,r,i){let o=(r+t)*.5,s=(r-t)*.5,a=.5*e;return i._x=Math.cos(s)*Math.sin(a),i._y=Math.sin(s)*Math.sin(a),i._z=Math.sin(o)*Math.cos(a),i._w=Math.cos(o)*Math.cos(a),i._isDirty=!0,i}static RotationQuaternionFromAxis(t,e,r){let i=new y(0,0,0,0);return y.RotationQuaternionFromAxisToRef(t,e,r,i),i}static RotationQuaternionFromAxisToRef(t,e,r,i){let o=d.Matrix[0];return t=t.normalizeToRef(d.Vector3[0]),e=e.normalizeToRef(d.Vector3[1]),r=r.normalizeToRef(d.Vector3[2]),f.FromXYZAxesToRef(t,e,r,o),y.FromRotationMatrixToRef(o,i),i}static FromLookDirectionLH(t,e){let r=new y;return y.FromLookDirectionLHToRef(t,e,r),r}static FromLookDirectionLHToRef(t,e,r){let i=d.Matrix[0];return f.LookDirectionLHToRef(t,e,i),y.FromRotationMatrixToRef(i,r),r}static FromLookDirectionRH(t,e){let r=new y;return y.FromLookDirectionRHToRef(t,e,r),r}static FromLookDirectionRHToRef(t,e,r){let i=d.Matrix[0];return f.LookDirectionRHToRef(t,e,i),y.FromRotationMatrixToRef(i,r)}static Slerp(t,e,r){let i=y.Identity();return y.SlerpToRef(t,e,r,i),i}static SlerpToRef(t,e,r,i){let o,s,a=t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w,n=!1;if(a<0&&(n=!0,a=-a),a>.999999)s=1-r,o=n?-r:r;else{let t=Math.acos(a),e=1/Math.sin(t);s=Math.sin((1-r)*t)*e,o=n?-Math.sin(r*t)*e:Math.sin(r*t)*e}return i._x=s*t._x+o*e._x,i._y=s*t._y+o*e._y,i._z=s*t._z+o*e._z,i._w=s*t._w+o*e._w,i._isDirty=!0,i}static Hermite(t,e,r,i,o){let s=o*o,a=o*s,n=2*a-3*s+1,l=-2*a+3*s,h=a-2*s+o,_=a-s;return new y(t._x*n+r._x*l+e._x*h+i._x*_,t._y*n+r._y*l+e._y*h+i._y*_,t._z*n+r._z*l+e._z*h+i._z*_,t._w*n+r._w*l+e._w*h+i._w*_)}static Hermite1stDerivative(t,e,r,i,o){let s=new y;return this.Hermite1stDerivativeToRef(t,e,r,i,o,s),s}static Hermite1stDerivativeToRef(t,e,r,i,o,s){let a=o*o;return s._x=(a-o)*6*t._x+(3*a-4*o+1)*e._x+(-a+o)*6*r._x+(3*a-2*o)*i._x,s._y=(a-o)*6*t._y+(3*a-4*o+1)*e._y+(-a+o)*6*r._y+(3*a-2*o)*i._y,s._z=(a-o)*6*t._z+(3*a-4*o+1)*e._z+(-a+o)*6*r._z+(3*a-2*o)*i._z,s._w=(a-o)*6*t._w+(3*a-4*o+1)*e._w+(-a+o)*6*r._w+(3*a-2*o)*i._w,s._isDirty=!0,s}static Normalize(t){let e=y.Zero();return y.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){return t.normalizeToRef(e),e}static Clamp(t,e,r){let i=new y;return y.ClampToRef(t,e,r,i),i}static ClampToRef(t,e,r,i){return i.copyFromFloats((0,l.Clamp)(t.x,e.x,r.x),(0,l.Clamp)(t.y,e.y,r.y),(0,l.Clamp)(t.z,e.z,r.z),(0,l.Clamp)(t.w,e.w,r.w))}static Random(t=0,e=1){return new y((0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e))}static RandomToRef(t=0,e=1,r){return r.copyFromFloats((0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e),(0,l.RandomRange)(t,e))}static Minimize(){throw ReferenceError("Quaternion.Minimize does not make sense")}static Maximize(){throw ReferenceError("Quaternion.Maximize does not make sense")}static Distance(t,e){return Math.sqrt(y.DistanceSquared(t,e))}static DistanceSquared(t,e){let r=t.x-e.x,i=t.y-e.y,o=t.z-e.z,s=t.w-e.w;return r*r+i*i+o*o+s*s}static Center(t,e){return y.CenterToRef(t,e,y.Zero())}static CenterToRef(t,e,r){return r.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2,(t.w+e.w)/2)}}y._V8PerformanceHack=new y(.5,.5,.5,.5),Object.defineProperties(y.prototype,{dimension:{value:[4]},rank:{value:1}});class f{static get Use64Bits(){return a.I.MatrixUse64Bits}get m(){return this._m}markAsUpdated(){this.updateFlag=h.jk._UpdateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}_updateIdentityStatus(t,e=!1,r=!1,i=!0){this._isIdentity=t,this._isIdentity3x2=t||r,this._isIdentityDirty=!this._isIdentity&&e,this._isIdentity3x2Dirty=!this._isIdentity3x2&&i}constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,a.I.MatrixTrackPrecisionChange&&a.I.MatrixTrackedMatrices.push(this),this._m=new a.I.MatrixCurrentType(16),this.markAsUpdated()}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;let t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;let t=this._m,e=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],n=t[6],l=t[7],h=t[8],_=t[9],c=t[10],u=t[11],m=t[12],y=t[13],f=t[14],d=t[15],x=c*d-f*u,R=_*d-y*u,p=_*f-y*c,T=h*d-m*u,g=h*f-c*m,w=h*y-m*_;return e*(a*x-n*R+l*p)+-(r*(s*x-n*T+l*g))+i*(s*R-a*T+l*w)+-(o*(s*p-a*g+n*w))}toString(){return`{${this.m[0]}, ${this.m[1]}, ${this.m[2]}, ${this.m[3]}
${this.m[4]}, ${this.m[5]}, ${this.m[6]}, ${this.m[7]}
${this.m[8]}, ${this.m[9]}, ${this.m[10]}, ${this.m[11]}
${this.m[12]}, ${this.m[13]}, ${this.m[14]}, ${this.m[15]}}`}toArray(t=null,e=0){if(!t)return this._m;let r=this._m;for(let i=0;i<16;i++)t[e+i]=r[i];return this}asArray(){return this._m}fromArray(t,e=0){return f.FromArrayToRef(t,e,this)}copyFromFloats(...t){return f.FromArrayToRef(t,0,this)}set(...t){let e=this._m;for(let r=0;r<16;r++)e[r]=t[r];return this.markAsUpdated(),this}setAll(t){let e=this._m;for(let r=0;r<16;r++)e[r]=t;return this.markAsUpdated(),this}invert(){return this.invertToRef(this),this}reset(){return f.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(t){let e=new f;return this.addToRef(t,e),e}addToRef(t,e){let r=this._m,i=e._m,o=t.m;for(let t=0;t<16;t++)i[t]=r[t]+o[t];return e.markAsUpdated(),e}addToSelf(t){let e=this._m,r=t.m;return e[0]+=r[0],e[1]+=r[1],e[2]+=r[2],e[3]+=r[3],e[4]+=r[4],e[5]+=r[5],e[6]+=r[6],e[7]+=r[7],e[8]+=r[8],e[9]+=r[9],e[10]+=r[10],e[11]+=r[11],e[12]+=r[12],e[13]+=r[13],e[14]+=r[14],e[15]+=r[15],this.markAsUpdated(),this}addInPlace(t){let e=this._m,r=t.m;for(let t=0;t<16;t++)e[t]+=r[t];return this.markAsUpdated(),this}addInPlaceFromFloats(...t){let e=this._m;for(let r=0;r<16;r++)e[r]+=t[r];return this.markAsUpdated(),this}subtract(t){let e=this._m,r=t.m;for(let t=0;t<16;t++)e[t]-=r[t];return this.markAsUpdated(),this}subtractToRef(t,e){let r=this._m,i=t.m,o=e._m;for(let t=0;t<16;t++)o[t]=r[t]-i[t];return e.markAsUpdated(),e}subtractInPlace(t){let e=this._m,r=t.m;for(let t=0;t<16;t++)e[t]-=r[t];return this.markAsUpdated(),this}subtractFromFloats(...t){return this.subtractFromFloatsToRef(...t,new f)}subtractFromFloatsToRef(...t){let e=t.pop(),r=this._m,i=e._m;for(let e=0;e<16;e++)i[e]=r[e]-t[e];return e.markAsUpdated(),e}invertToRef(t){return!0===this._isIdentity?f.IdentityToRef(t):(0,h.yj)(this,t.asArray())?t.markAsUpdated():t.copyFrom(this),t}addAtIndex(t,e){return this._m[t]+=e,this.markAsUpdated(),this}multiplyAtIndex(t,e){return this._m[t]*=e,this.markAsUpdated(),this}setTranslationFromFloats(t,e,r){return this._m[12]=t,this._m[13]=e,this._m[14]=r,this.markAsUpdated(),this}addTranslationFromFloats(t,e,r){return this._m[12]+=t,this._m[13]+=e,this._m[14]+=r,this.markAsUpdated(),this}setTranslation(t){return this.setTranslationFromFloats(t._x,t._y,t._z)}getTranslation(){return new u(this._m[12],this._m[13],this._m[14])}getTranslationToRef(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],t}removeRotationAndScaling(){let t=this.m;return f.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],this),this._updateIdentityStatus(0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]),this}copyFrom(t){return t.copyToArray(this._m),this.updateFlag=t.updateFlag,this._updateIdentityStatus(t._isIdentity,t._isIdentityDirty,t._isIdentity3x2,t._isIdentity3x2Dirty),this}copyToArray(t,e=0){return(0,h.rl)(this,t,e),this}multiply(t){let e=new f;return this.multiplyToRef(t,e),e}multiplyInPlace(t){let e=this._m,r=t.m;for(let t=0;t<16;t++)e[t]*=r[t];return this.markAsUpdated(),this}multiplyByFloats(...t){let e=this._m;for(let r=0;r<16;r++)e[r]*=t[r];return this.markAsUpdated(),this}multiplyByFloatsToRef(...t){let e=t.pop(),r=this._m,i=e._m;for(let e=0;e<16;e++)i[e]=r[e]*t[e];return e.markAsUpdated(),e}multiplyToRef(t,e){return this._isIdentity?e.copyFrom(t):t._isIdentity?e.copyFrom(this):(this.multiplyToArray(t,e._m,0),e.markAsUpdated()),e}multiplyToArray(t,e,r){return(0,h.xO)(this,t,e,r),this}divide(t){return this.divideToRef(t,new f)}divideToRef(t,e){let r=this._m,i=t.m,o=e._m;for(let t=0;t<16;t++)o[t]=r[t]/i[t];return e.markAsUpdated(),e}divideInPlace(t){let e=this._m,r=t.m;for(let t=0;t<16;t++)e[t]/=r[t];return this.markAsUpdated(),this}minimizeInPlace(t){let e=this._m,r=t.m;for(let t=0;t<16;t++)e[t]=Math.min(e[t],r[t]);return this.markAsUpdated(),this}minimizeInPlaceFromFloats(...t){let e=this._m;for(let r=0;r<16;r++)e[r]=Math.min(e[r],t[r]);return this.markAsUpdated(),this}maximizeInPlace(t){let e=this._m,r=t.m;for(let t=0;t<16;t++)e[t]=Math.min(e[t],r[t]);return this.markAsUpdated(),this}maximizeInPlaceFromFloats(...t){let e=this._m;for(let r=0;r<16;r++)e[r]=Math.min(e[r],t[r]);return this.markAsUpdated(),this}negate(){return this.negateToRef(new f)}negateInPlace(){let t=this._m;for(let e=0;e<16;e++)t[e]=-t[e];return this.markAsUpdated(),this}negateToRef(t){let e=this._m,r=t._m;for(let t=0;t<16;t++)r[t]=-e[t];return t.markAsUpdated(),t}equals(t){if(!t)return!1;if((this._isIdentity||t._isIdentity)&&!this._isIdentityDirty&&!t._isIdentityDirty)return this._isIdentity&&t._isIdentity;let e=this.m,r=t.m;return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]&&e[9]===r[9]&&e[10]===r[10]&&e[11]===r[11]&&e[12]===r[12]&&e[13]===r[13]&&e[14]===r[14]&&e[15]===r[15]}equalsWithEpsilon(t,e=0){let r=this._m,i=t.m;for(let t=0;t<16;t++)if(!(0,l.WithinEpsilon)(r[t],i[t],e))return!1;return!0}equalsToFloats(...t){let e=this._m;for(let r=0;r<16;r++)if(e[r]!=t[r])return!1;return!0}floor(){return this.floorToRef(new f)}floorToRef(t){let e=this._m,r=t._m;for(let t=0;t<16;t++)r[t]=Math.floor(e[t]);return t.markAsUpdated(),t}fract(){return this.fractToRef(new f)}fractToRef(t){let e=this._m,r=t._m;for(let t=0;t<16;t++)r[t]=e[t]-Math.floor(e[t]);return t.markAsUpdated(),t}clone(){let t=new f;return t.copyFrom(this),t}getClassName(){return"Matrix"}getHashCode(){let t=_(this._m[0]);for(let e=1;e<16;e++)t=397*t^_(this._m[e]);return t}decomposeToTransformNode(t){return t.rotationQuaternion=t.rotationQuaternion||new y,this.decompose(t.scaling,t.rotationQuaternion,t.position)}decompose(t,e,r,i,o=!0){if(this._isIdentity)return r&&r.setAll(0),t&&t.setAll(1),e&&e.copyFromFloats(0,0,0,1),!0;let s=this._m;if(r&&r.copyFromFloats(s[12],s[13],s[14]),(t=t||d.Vector3[0]).x=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]),t.y=Math.sqrt(s[4]*s[4]+s[5]*s[5]+s[6]*s[6]),t.z=Math.sqrt(s[8]*s[8]+s[9]*s[9]+s[10]*s[10]),i){let e=(o?i.absoluteScaling.x:i.scaling.x)<0?-1:1,r=(o?i.absoluteScaling.y:i.scaling.y)<0?-1:1,s=(o?i.absoluteScaling.z:i.scaling.z)<0?-1:1;t.x*=e,t.y*=r,t.z*=s}else 0>=this.determinant()&&(t.y*=-1);if(0===t._x||0===t._y||0===t._z)return e&&e.copyFromFloats(0,0,0,1),!1;if(e){let r=1/t._x,i=1/t._y,o=1/t._z;f.FromValuesToRef(s[0]*r,s[1]*r,s[2]*r,0,s[4]*i,s[5]*i,s[6]*i,0,s[8]*o,s[9]*o,s[10]*o,0,0,0,0,1,d.Matrix[0]),y.FromRotationMatrixToRef(d.Matrix[0],e)}return!0}getRow(t){if(t<0||t>3)return null;let e=4*t;return new m(this._m[e+0],this._m[e+1],this._m[e+2],this._m[e+3])}getRowToRef(t,e){if(t>=0&&t<=3){let r=4*t;e.x=this._m[r+0],e.y=this._m[r+1],e.z=this._m[r+2],e.w=this._m[r+3]}return e}setRow(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)}transpose(){let t=new f;return f.TransposeToRef(this,t),t}transposeToRef(t){return f.TransposeToRef(this,t),t}setRowFromFloats(t,e,r,i,o){if(t<0||t>3)return this;let s=4*t;return this._m[s+0]=e,this._m[s+1]=r,this._m[s+2]=i,this._m[s+3]=o,this.markAsUpdated(),this}scale(t){let e=new f;return this.scaleToRef(t,e),e}scaleToRef(t,e){for(let r=0;r<16;r++)e._m[r]=this._m[r]*t;return e.markAsUpdated(),e}scaleAndAddToRef(t,e){for(let r=0;r<16;r++)e._m[r]+=this._m[r]*t;return e.markAsUpdated(),e}scaleInPlace(t){let e=this._m;for(let r=0;r<16;r++)e[r]*=t;return this.markAsUpdated(),this}toNormalMatrix(t){let e=d.Matrix[0];this.invertToRef(e),e.transposeToRef(t);let r=t._m;return f.FromValuesToRef(r[0],r[1],r[2],0,r[4],r[5],r[6],0,r[8],r[9],r[10],0,0,0,0,1,t),t}getRotationMatrix(){let t=new f;return this.getRotationMatrixToRef(t),t}getRotationMatrixToRef(t){let e=d.Vector3[0];if(!this.decompose(e))return f.IdentityToRef(t),t;let r=this._m,i=1/e._x,o=1/e._y,s=1/e._z;return f.FromValuesToRef(r[0]*i,r[1]*i,r[2]*i,0,r[4]*o,r[5]*o,r[6]*o,0,r[8]*s,r[9]*s,r[10]*s,0,0,0,0,1,t),t}toggleModelMatrixHandInPlace(){let t=this._m;return t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this.markAsUpdated(),this}toggleProjectionMatrixHandInPlace(){let t=this._m;return t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this.markAsUpdated(),this}static FromArray(t,e=0){let r=new f;return f.FromArrayToRef(t,e,r),r}static FromArrayToRef(t,e,r){for(let i=0;i<16;i++)r._m[i]=t[i+e];return r.markAsUpdated(),r}static FromFloat32ArrayToRefScaled(t,e,r,i){return i._m[0]=t[0+e]*r,i._m[1]=t[1+e]*r,i._m[2]=t[2+e]*r,i._m[3]=t[3+e]*r,i._m[4]=t[4+e]*r,i._m[5]=t[5+e]*r,i._m[6]=t[6+e]*r,i._m[7]=t[7+e]*r,i._m[8]=t[8+e]*r,i._m[9]=t[9+e]*r,i._m[10]=t[10+e]*r,i._m[11]=t[11+e]*r,i._m[12]=t[12+e]*r,i._m[13]=t[13+e]*r,i._m[14]=t[14+e]*r,i._m[15]=t[15+e]*r,i.markAsUpdated(),i}static get IdentityReadOnly(){return f._IdentityReadOnly}static FromValuesToRef(t,e,r,i,o,s,a,n,l,h,_,c,u,m,y,f,d){let x=d._m;x[0]=t,x[1]=e,x[2]=r,x[3]=i,x[4]=o,x[5]=s,x[6]=a,x[7]=n,x[8]=l,x[9]=h,x[10]=_,x[11]=c,x[12]=u,x[13]=m,x[14]=y,x[15]=f,d.markAsUpdated()}static FromValues(t,e,r,i,o,s,a,n,l,h,_,c,u,m,y,d){let x=new f,R=x._m;return R[0]=t,R[1]=e,R[2]=r,R[3]=i,R[4]=o,R[5]=s,R[6]=a,R[7]=n,R[8]=l,R[9]=h,R[10]=_,R[11]=c,R[12]=u,R[13]=m,R[14]=y,R[15]=d,x.markAsUpdated(),x}static Compose(t,e,r){let i=new f;return f.ComposeToRef(t,e,r,i),i}static ComposeToRef(t,e,r,i){let o=i._m,s=e._x,a=e._y,n=e._z,l=e._w,h=s+s,_=a+a,c=n+n,u=s*h,m=s*_,y=s*c,f=a*_,d=a*c,x=n*c,R=l*h,p=l*_,T=l*c,g=t._x,w=t._y,z=t._z;return o[0]=(1-(f+x))*g,o[1]=(m+T)*g,o[2]=(y-p)*g,o[3]=0,o[4]=(m-T)*w,o[5]=(1-(u+x))*w,o[6]=(d+R)*w,o[7]=0,o[8]=(y+p)*z,o[9]=(d-R)*z,o[10]=(1-(u+f))*z,o[11]=0,o[12]=r._x,o[13]=r._y,o[14]=r._z,o[15]=1,i.markAsUpdated(),i}static Identity(){let t=f.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t._updateIdentityStatus(!0),t}static IdentityToRef(t){return f.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(!0),t}static Zero(){let t=f.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t._updateIdentityStatus(!1),t}static RotationX(t){let e=new f;return f.RotationXToRef(t,e),e}static Invert(t){let e=new f;return t.invertToRef(e),e}static RotationXToRef(t,e){let r=Math.sin(t),i=Math.cos(t);return f.FromValuesToRef(1,0,0,0,0,i,r,0,0,-r,i,0,0,0,0,1,e),e._updateIdentityStatus(1===i&&0===r),e}static RotationY(t){let e=new f;return f.RotationYToRef(t,e),e}static RotationYToRef(t,e){let r=Math.sin(t),i=Math.cos(t);return f.FromValuesToRef(i,0,-r,0,0,1,0,0,r,0,i,0,0,0,0,1,e),e._updateIdentityStatus(1===i&&0===r),e}static RotationZ(t){let e=new f;return f.RotationZToRef(t,e),e}static RotationZToRef(t,e){let r=Math.sin(t),i=Math.cos(t);return f.FromValuesToRef(i,r,0,0,-r,i,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(1===i&&0===r),e}static RotationAxis(t,e){let r=new f;return f.RotationAxisToRef(t,e,r),r}static RotationAxisToRef(t,e,r){let i=Math.sin(-e),o=Math.cos(-e),s=1-o;t=t.normalizeToRef(d.Vector3[0]);let a=r._m;return a[0]=t._x*t._x*s+o,a[1]=t._x*t._y*s-t._z*i,a[2]=t._x*t._z*s+t._y*i,a[3]=0,a[4]=t._y*t._x*s+t._z*i,a[5]=t._y*t._y*s+o,a[6]=t._y*t._z*s-t._x*i,a[7]=0,a[8]=t._z*t._x*s-t._y*i,a[9]=t._z*t._y*s+t._x*i,a[10]=t._z*t._z*s+o,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,r.markAsUpdated(),r}static RotationAlignToRef(t,e,r,o=!1){let s=u.Dot(e,t),a=r._m;if(s<-1+i.bH)a[0]=-1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o?1:-1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=o?-1:1,a[11]=0;else{let r=u.Cross(e,t),i=1/(1+s);a[0]=r._x*r._x*i+s,a[1]=r._y*r._x*i-r._z,a[2]=r._z*r._x*i+r._y,a[3]=0,a[4]=r._x*r._y*i+r._z,a[5]=r._y*r._y*i+s,a[6]=r._z*r._y*i-r._x,a[7]=0,a[8]=r._x*r._z*i-r._y,a[9]=r._y*r._z*i+r._x,a[10]=r._z*r._z*i+s,a[11]=0}return a[12]=0,a[13]=0,a[14]=0,a[15]=1,r.markAsUpdated(),r}static RotationYawPitchRoll(t,e,r){let i=new f;return f.RotationYawPitchRollToRef(t,e,r,i),i}static RotationYawPitchRollToRef(t,e,r,i){return y.RotationYawPitchRollToRef(t,e,r,d.Quaternion[0]),d.Quaternion[0].toRotationMatrix(i),i}static Scaling(t,e,r){let i=new f;return f.ScalingToRef(t,e,r,i),i}static ScalingToRef(t,e,r,i){return f.FromValuesToRef(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1,i),i._updateIdentityStatus(1===t&&1===e&&1===r),i}static Translation(t,e,r){let i=new f;return f.TranslationToRef(t,e,r,i),i}static TranslationToRef(t,e,r,i){return f.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t,e,r,1,i),i._updateIdentityStatus(0===t&&0===e&&0===r),i}static Lerp(t,e,r){let i=new f;return f.LerpToRef(t,e,r,i),i}static LerpToRef(t,e,r,i){let o=i._m,s=t.m,a=e.m;for(let t=0;t<16;t++)o[t]=s[t]*(1-r)+a[t]*r;return i.markAsUpdated(),i}static DecomposeLerp(t,e,r){let i=new f;return f.DecomposeLerpToRef(t,e,r,i),i}static DecomposeLerpToRef(t,e,r,i){let o=d.Vector3[0],s=d.Quaternion[0],a=d.Vector3[1];t.decompose(o,s,a);let n=d.Vector3[2],l=d.Quaternion[1],h=d.Vector3[3];e.decompose(n,l,h);let _=d.Vector3[4];u.LerpToRef(o,n,r,_);let c=d.Quaternion[2];y.SlerpToRef(s,l,r,c);let m=d.Vector3[5];return u.LerpToRef(a,h,r,m),f.ComposeToRef(_,c,m,i),i}static LookAtLH(t,e,r){let i=new f;return f.LookAtLHToRef(t,e,r,i),i}static LookAtLHToRef(t,e,r,i){let o=d.Vector3[0],s=d.Vector3[1],a=d.Vector3[2];e.subtractToRef(t,a),a.normalize(),u.CrossToRef(r,a,o);let n=o.lengthSquared();0===n?o.x=1:o.normalizeFromLength(Math.sqrt(n)),u.CrossToRef(a,o,s),s.normalize();let l=-u.Dot(o,t),h=-u.Dot(s,t),_=-u.Dot(a,t);return f.FromValuesToRef(o._x,s._x,a._x,0,o._y,s._y,a._y,0,o._z,s._z,a._z,0,l,h,_,1,i),i}static LookAtRH(t,e,r){let i=new f;return f.LookAtRHToRef(t,e,r,i),i}static LookAtRHToRef(t,e,r,i){let o=d.Vector3[0],s=d.Vector3[1],a=d.Vector3[2];t.subtractToRef(e,a),a.normalize(),u.CrossToRef(r,a,o);let n=o.lengthSquared();0===n?o.x=1:o.normalizeFromLength(Math.sqrt(n)),u.CrossToRef(a,o,s),s.normalize();let l=-u.Dot(o,t),h=-u.Dot(s,t),_=-u.Dot(a,t);return f.FromValuesToRef(o._x,s._x,a._x,0,o._y,s._y,a._y,0,o._z,s._z,a._z,0,l,h,_,1,i),i}static LookDirectionLH(t,e){let r=new f;return f.LookDirectionLHToRef(t,e,r),r}static LookDirectionLHToRef(t,e,r){let i=d.Vector3[0];i.copyFrom(t),i.scaleInPlace(-1);let o=d.Vector3[1];return u.CrossToRef(e,i,o),f.FromValuesToRef(o._x,o._y,o._z,0,e._x,e._y,e._z,0,i._x,i._y,i._z,0,0,0,0,1,r),r}static LookDirectionRH(t,e){let r=new f;return f.LookDirectionRHToRef(t,e,r),r}static LookDirectionRHToRef(t,e,r){let i=d.Vector3[2];return u.CrossToRef(e,t,i),f.FromValuesToRef(i._x,i._y,i._z,0,e._x,e._y,e._z,0,t._x,t._y,t._z,0,0,0,0,1,r),r}static OrthoLH(t,e,r,i,o){let s=new f;return f.OrthoLHToRef(t,e,r,i,s,o),s}static OrthoLHToRef(t,e,r,i,o,s){let a=2/t,n=2/e,l=2/(i-r),h=-(i+r)/(i-r);return f.FromValuesToRef(a,0,0,0,0,n,0,0,0,0,l,0,0,0,h,1,o),s&&o.multiplyToRef(R,o),o._updateIdentityStatus(1===a&&1===n&&1===l&&0===h),o}static OrthoOffCenterLH(t,e,r,i,o,s,a){let n=new f;return f.OrthoOffCenterLHToRef(t,e,r,i,o,s,n,a),n}static OrthoOffCenterLHToRef(t,e,r,i,o,s,a,n){return f.FromValuesToRef(2/(e-t),0,0,0,0,2/(i-r),0,0,0,0,2/(s-o),0,(t+e)/(t-e),(i+r)/(r-i),-(s+o)/(s-o),1,a),n&&a.multiplyToRef(R,a),a.markAsUpdated(),a}static ObliqueOffCenterLHToRef(t,e,r,i,o,s,a,n,l,h,_){let c=-a*Math.cos(n),u=-a*Math.sin(n);return f.TranslationToRef(0,0,-l,d.Matrix[1]),f.FromValuesToRef(1,0,0,0,0,1,0,0,c,u,1,0,0,0,0,1,d.Matrix[0]),d.Matrix[1].multiplyToRef(d.Matrix[0],d.Matrix[0]),f.TranslationToRef(0,0,l,d.Matrix[1]),d.Matrix[0].multiplyToRef(d.Matrix[1],d.Matrix[0]),f.OrthoOffCenterLHToRef(t,e,r,i,o,s,h,_),d.Matrix[0].multiplyToRef(h,h),h}static OrthoOffCenterRH(t,e,r,i,o,s,a){let n=new f;return f.OrthoOffCenterRHToRef(t,e,r,i,o,s,n,a),n}static OrthoOffCenterRHToRef(t,e,r,i,o,s,a,n){return f.OrthoOffCenterLHToRef(t,e,r,i,o,s,a,n),a._m[10]*=-1,a}static ObliqueOffCenterRHToRef(t,e,r,i,o,s,a,n,l,h,_){let c=a*Math.cos(n),u=a*Math.sin(n);return f.TranslationToRef(0,0,l,d.Matrix[1]),f.FromValuesToRef(1,0,0,0,0,1,0,0,c,u,1,0,0,0,0,1,d.Matrix[0]),d.Matrix[1].multiplyToRef(d.Matrix[0],d.Matrix[0]),f.TranslationToRef(0,0,-l,d.Matrix[1]),d.Matrix[0].multiplyToRef(d.Matrix[1],d.Matrix[0]),f.OrthoOffCenterRHToRef(t,e,r,i,o,s,h,_),d.Matrix[0].multiplyToRef(h,h),h}static PerspectiveLH(t,e,r,i,o,s=0){let a=new f,n=Math.tan(s);return f.FromValuesToRef(2*r/t,0,0,0,0,2*r/e,0,n,0,0,(i+r)/(i-r),1,0,0,-2*i*r/(i-r),0,a),o&&a.multiplyToRef(R,a),a._updateIdentityStatus(!1),a}static PerspectiveFovLH(t,e,r,i,o,s=0,a=!1){let n=new f;return f.PerspectiveFovLHToRef(t,e,r,i,n,!0,o,s,a),n}static PerspectiveFovLHToRef(t,e,r,i,o,s=!0,a,n=0,l=!1){let h=1/Math.tan(.5*t),_=s?h/e:h,c=s?h:h*e,u=l&&0===r?-1:0!==i?(i+r)/(i-r):1,m=l&&0===r?2*i:0!==i?-2*i*r/(i-r):-2*r,y=Math.tan(n);return f.FromValuesToRef(_,0,0,0,0,c,0,y,0,0,u,1,0,0,m,0,o),a&&o.multiplyToRef(R,o),o._updateIdentityStatus(!1),o}static PerspectiveFovReverseLHToRef(t,e,r,i,o,s=!0,a,n=0){let l=1/Math.tan(.5*t),h=s?l/e:l,_=s?l:l*e,c=Math.tan(n);return f.FromValuesToRef(h,0,0,0,0,_,0,c,0,0,-r,1,0,0,1,0,o),a&&o.multiplyToRef(R,o),o._updateIdentityStatus(!1),o}static PerspectiveFovRH(t,e,r,i,o,s=0,a=!1){let n=new f;return f.PerspectiveFovRHToRef(t,e,r,i,n,!0,o,s,a),n}static PerspectiveFovRHToRef(t,e,r,i,o,s=!0,a,n=0,l=!1){let h=1/Math.tan(.5*t),_=s?h/e:h,c=s?h:h*e,u=l&&0===r?1:0!==i?-(i+r)/(i-r):-1,m=l&&0===r?2*i:0!==i?-2*i*r/(i-r):-2*r,y=Math.tan(n);return f.FromValuesToRef(_,0,0,0,0,c,0,y,0,0,u,-1,0,0,m,0,o),a&&o.multiplyToRef(R,o),o._updateIdentityStatus(!1),o}static PerspectiveFovReverseRHToRef(t,e,r,i,o,s=!0,a,n=0){let l=1/Math.tan(.5*t),h=s?l/e:l,_=s?l:l*e,c=Math.tan(n);return f.FromValuesToRef(h,0,0,0,0,_,0,c,0,0,-r,-1,0,0,-1,0,o),a&&o.multiplyToRef(R,o),o._updateIdentityStatus(!1),o}static GetFinalMatrix(t,e,r,i,o,s){let a=t.width,n=t.height,l=t.x,h=t.y,_=f.FromValues(a/2,0,0,0,0,-n/2,0,0,0,0,s-o,0,l+a/2,n/2+h,o,1),c=new f;return e.multiplyToRef(r,c),c.multiplyToRef(i,c),c.multiplyToRef(_,c)}static GetAsMatrix2x2(t){let e=t.m,r=[e[0],e[1],e[4],e[5]];return a.I.MatrixUse64Bits?r:new Float32Array(r)}static GetAsMatrix3x3(t){let e=t.m,r=[e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]];return a.I.MatrixUse64Bits?r:new Float32Array(r)}static Transpose(t){let e=new f;return f.TransposeToRef(t,e),e}static TransposeToRef(t,e){let r=t.m,i=r[0],o=r[4],s=r[8],a=r[12],n=r[1],l=r[5],h=r[9],_=r[13],c=r[2],u=r[6],m=r[10],y=r[14],f=r[3],d=r[7],x=r[11],R=r[15],p=e._m;return p[0]=i,p[1]=o,p[2]=s,p[3]=a,p[4]=n,p[5]=l,p[6]=h,p[7]=_,p[8]=c,p[9]=u,p[10]=m,p[11]=y,p[12]=f,p[13]=d,p[14]=x,p[15]=R,e.markAsUpdated(),e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty),e}static Reflection(t){let e=new f;return f.ReflectionToRef(t,e),e}static ReflectionToRef(t,e){t.normalize();let r=t.normal.x,i=t.normal.y,o=t.normal.z,s=-2*r,a=-2*i,n=-2*o;return f.FromValuesToRef(s*r+1,a*r,n*r,0,s*i,a*i+1,n*i,0,s*o,a*o,n*o+1,0,s*t.d,a*t.d,n*t.d,1,e),e}static FromXYZAxesToRef(t,e,r,i){return f.FromValuesToRef(t._x,t._y,t._z,0,e._x,e._y,e._z,0,r._x,r._y,r._z,0,0,0,0,1,i),i}static FromQuaternionToRef(t,e){let r=t._x*t._x,i=t._y*t._y,o=t._z*t._z,s=t._x*t._y,a=t._z*t._w,n=t._z*t._x,l=t._y*t._w,h=t._y*t._z,_=t._x*t._w;return e._m[0]=1-2*(i+o),e._m[1]=2*(s+a),e._m[2]=2*(n-l),e._m[3]=0,e._m[4]=2*(s-a),e._m[5]=1-2*(o+r),e._m[6]=2*(h+_),e._m[7]=0,e._m[8]=2*(n+l),e._m[9]=2*(h-_),e._m[10]=1-2*(i+r),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e.markAsUpdated(),e}}f._IdentityReadOnly=f.Identity(),Object.defineProperties(f.prototype,{dimension:{value:[4,4]},rank:{value:2}});class d{}d.Vector3=(0,o.ln)(11,u.Zero),d.Matrix=(0,o.ln)(2,f.Identity),d.Quaternion=(0,o.ln)(3,y.Zero);class x{}x.Vector2=(0,o.ln)(3,c.Zero),x.Vector3=(0,o.ln)(13,u.Zero),x.Vector4=(0,o.ln)(3,m.Zero),x.Quaternion=(0,o.ln)(3,y.Zero),x.Matrix=(0,o.ln)(8,f.Identity),(0,s.Y5)("BABYLON.Vector2",c),(0,s.Y5)("BABYLON.Vector3",u),(0,s.Y5)("BABYLON.Vector4",m),(0,s.Y5)("BABYLON.Matrix",f);let R=f.FromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1)},77629(t,e,r){function i(){return"undefined"!=typeof window}function o(){return"undefined"!=typeof navigator}function s(){return"undefined"!=typeof document}function a(t){let e="",r=t.firstChild;for(;r;)3===r.nodeType&&(e+=r.textContent),r=r.nextSibling;return e}r.d(e,{Az:()=>n,BA:()=>i,Nf:()=>s,XD:()=>o,Zl:()=>a});let n={IsWindowObjectExist:i,IsNavigatorAvailable:o,IsDocumentAvailable:s,GetDOMTextContent:a}},32715(t,e,r){let i;r.d(e,{M1:()=>w,Mi:()=>p,NJ:()=>P,VB:()=>T,W$:()=>F,ZP:()=>K,dy:()=>I,eC:()=>g,f2:()=>M,hX:()=>R,my:()=>U,ny:()=>C,qc:()=>z,rh:()=>L,rz:()=>b,sh:()=>v,wS:()=>i,zU:()=>A});var o=r(66443),s=r(77629),a=r(52969),n=r(8236),l=r(49505),h=r(4328),_=r(78898),c=r(39543),u=r(94470),m=r(31656),y=r(26675),f=r(91178),d=r(87201);let x=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class R extends h.bu{constructor(t,e){super(t,h.tG.LoadFileError),this.name="LoadFileError",h.Cf._setPrototypeOf(this,R.prototype),e instanceof o.u?this.request=e:this.file=e}}class p extends h.bu{constructor(t,e){super(t,h.tG.RequestFileError),this.request=e,this.name="RequestFileError",h.Cf._setPrototypeOf(this,p.prototype)}}class T extends h.bu{constructor(t,e){super(t,h.tG.ReadFileError),this.file=e,this.name="ReadFileError",h.Cf._setPrototypeOf(this,T.prototype)}}let g={DefaultRetryStrategy:l.a.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:t=>t,ScriptBaseUrl:"",ScriptPreprocessUrl:t=>t,CleanUrl:t=>t=t.replace(/#/gm,"%23")},w=(t,e)=>{if((!t||0!==t.indexOf("data:"))&&g.CorsBehavior)if("string"==typeof g.CorsBehavior||g.CorsBehavior instanceof String)e.crossOrigin=g.CorsBehavior;else{let r=g.CorsBehavior(t);r&&(e.crossOrigin=r)}},z={getRequiredSize:null},F=(t,e,r,i,s="",a,l=u.q.LastCreatedEngine)=>{let h;if("undefined"==typeof HTMLImageElement&&!l?._features.forceBitmapOverHTMLImageElement)return r("LoadImage is only supported in web or BabylonNative environments."),null;let c=!1;t instanceof ArrayBuffer||ArrayBuffer.isView(t)?"undefined"!=typeof Blob&&"undefined"!=typeof URL?(h=URL.createObjectURL(new Blob([t],{type:s})),c=!0):h=`data:${s};base64,`+(0,_.EL)(t):t instanceof Blob?(h=URL.createObjectURL(t),c=!0):(h=g.CleanUrl(t),h=g.PreprocessUrl(h));let m=e=>{if(r){let i=h||t.toString();r(`Error while trying to load image: ${0===i.indexOf("http")||i.length<=128?i:i.slice(0,128)+"..."}`,e)}};if(l?._features.forceBitmapOverHTMLImageElement)return A(h,i=>{l.createImageBitmap(new Blob([i],{type:s}),{premultiplyAlpha:"none",...a}).then(t=>{e(t),c&&URL.revokeObjectURL(h)}).catch(e=>{r&&r("Error while trying to load image: "+t,e)})},void 0,i||void 0,!0,(t,e)=>{m(e)}),null;let y=new Image;if(z.getRequiredSize){let e=z.getRequiredSize(t);e.width&&(y.width=e.width),e.height&&(y.height=e.height)}w(h,y);let f=[],d=()=>{for(let t of f)t.target.removeEventListener(t.name,t.handler);f.length=0};for(let t of(f.push({target:y,name:"load",handler:()=>{d(),e(y),c&&y.src&&URL.revokeObjectURL(y.src)}}),f.push({target:y,name:"error",handler:t=>{d(),m(t),c&&y.src&&URL.revokeObjectURL(y.src)}}),f.push({target:document,name:"securitypolicyviolation",handler:t=>{if(t.blockedURI!==y.src||"report"===t.disposition)return;d();let e=Error(`CSP violation of policy ${t.effectiveDirective} ${t.blockedURI}. Current policy is ${t.originalPolicy}`);u.q.UseFallbackTexture=!1,m(e),c&&y.src&&URL.revokeObjectURL(y.src),y.src=""}}),f))t.target.addEventListener(t.name,t.handler);let x="blob:"===h.substring(0,5),R="data:"===h.substring(0,5),p=()=>{x||R||!o.u.IsCustomRequestAvailable?y.src=h:A(h,(t,e,r)=>{let i=new Blob([t],{type:!s&&r?r:s}),o=URL.createObjectURL(i);c=!0,y.src=o},void 0,i||void 0,!0,(t,e)=>{m(e)})};if(!x&&!R&&i&&i.enableTexturesOffline)i.open(()=>{i&&i.loadImage(h,y)},p);else{if(-1!==h.indexOf("file:")){let t=decodeURIComponent(h.substring(5).toLowerCase());if(n.T.FilesToLoad[t]&&"undefined"!=typeof URL){try{let e;try{e=URL.createObjectURL(n.T.FilesToLoad[t])}catch(r){e=URL.createObjectURL(n.T.FilesToLoad[t])}y.src=e,c=!0}catch(t){y.src=""}return y}}p()}return y},P=(t,e,r,i,o)=>{let s=new FileReader,n={onCompleteObservable:new a.cP,abort:()=>s.abort()};return s.onloadend=()=>n.onCompleteObservable.notifyObservers(n),o&&(s.onerror=()=>{o(new T(`Unable to read ${t.name}`,t))}),s.onload=t=>{e(t.target.result)},r&&(s.onprogress=r),i?s.readAsArrayBuffer(t):s.readAsText(t),n},A=(t,e,r,i,o,s,l)=>{if(t.name)return P(t,e,r,o,s?t=>{s(void 0,t)}:void 0);if(-1!==t.indexOf("file:")){let i=decodeURIComponent(t.substring(5).toLowerCase());0===i.indexOf("./")&&(i=i.substring(2));let a=n.T.FilesToLoad[i];if(a)return P(a,e,r,o,s?t=>s(void 0,new R(t.message,t.file)):void 0)}let{match:h,type:_}=K(t);if(h){let r={onCompleteObservable:new a.cP,abort:()=>()=>{}};try{let r=o?b(t):I(t);e(r,void 0,_)}catch(t){s?s(void 0,t):m.V.Error(t.message||"Failed to parse the Data URL")}return y._.SetImmediate(()=>{r.onCompleteObservable.notifyObservers(r)}),r}return v(t,(t,r)=>{e(t,r?.responseURL,r?.getResponseHeader("content-type"))},r,i,o,s?t=>{s(t.request,new R(t.message,t.request))}:void 0,l)},v=(t,e,r,i,n,l,h)=>{null!==i&&(i??(i=u.q.LastCreatedScene?.offlineProvider)),t=g.CleanUrl(t),t=g.PreprocessUrl(t);let _=g.BaseUrl+t,c=!1,y={onCompleteObservable:new a.cP,abort:()=>c=!0},f=()=>{let t,i=new o.u,a=null,u=()=>{i&&(r&&i.removeEventListener("progress",r),t&&i.removeEventListener("readystatechange",t),i.removeEventListener("loadend",f))},f=()=>{u(),y.onCompleteObservable.notifyObservers(y),y.onCompleteObservable.clear(),r=void 0,t=null,f=null,l=void 0,h=void 0,e=void 0};y.abort=()=>{c=!0,f&&f(),i&&i.readyState!==(XMLHttpRequest.DONE||4)&&i.abort(),null!==a&&(clearTimeout(a),a=null),i=null};let d=t=>{let e=t.message||"Unknown error";l&&i?l(new p(e,i)):m.V.Error(e)},x=m=>{if(i){if(i.open("GET",_),h)try{h(i)}catch(t){d(t);return}n&&(i.responseType="arraybuffer"),r&&i.addEventListener("progress",r),f&&i.addEventListener("loadend",f),t=()=>{if(!c&&i&&i.readyState===(XMLHttpRequest.DONE||4)){if(t&&i.removeEventListener("readystatechange",t),i.status>=200&&i.status<300||0===i.status&&(!(0,s.BA)()||U())){let t=n?i.response:i.responseText;if(null!==t){try{e&&e(t,i)}catch(t){d(t)}return}}let r=g.DefaultRetryStrategy;if(r){let t=r(_,i,m);if(-1!==t){u(),i=new o.u,a=setTimeout(()=>x(m+1),t);return}}let h=new p("Error status: "+i.status+" "+i.statusText+" - Unable to load "+_,i);l&&l(h)}},i.addEventListener("readystatechange",t),i.send()}};x(0)};if(i&&i.enableSceneOffline&&!t.startsWith("blob:")){let o=t=>{t&&t.status>400?l&&l(t):f()};i.open(()=>{i&&i.loadFile(g.BaseUrl+t,t=>{!c&&e&&e(t),y.onCompleteObservable.notifyObservers(y)},r?t=>{!c&&r&&r(t)}:void 0,o,n)},o)}else f();return y},C=t=>{let{match:e,type:r}=K(t);if(e)return r||void 0;let i=t.lastIndexOf(".");switch(t.substring(i+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"gltf":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"ktx":return"image/ktx";case"ktx2":return"image/ktx2";case"avif":return"image/avif";default:return}},U=()=>"undefined"!=typeof location&&"file:"===location.protocol,M=t=>x.test(t),K=t=>{let e=x.exec(t);return null===e||0===e.length?{match:!1,type:""}:{match:!0,type:e[0].replace("data:","").replace(";base64,","")}};function b(t){return(0,_.yS)(t.split(",")[1])}let I=t=>(0,_.AV)(t.split(",")[1]);d.$._FileToolsLoadImage=F,f.sg.loadFile=A,c.Hd.loadFile=A;let L=(t,e,r,o,s,a,n,l,h,_)=>{Object.defineProperty(i={DecodeBase64UrlToBinary:t,DecodeBase64UrlToString:e,DefaultRetryStrategy:r.DefaultRetryStrategy,BaseUrl:r.BaseUrl,CorsBehavior:r.CorsBehavior,PreprocessUrl:r.PreprocessUrl,IsBase64DataUrl:o,IsFileURL:s,LoadFile:a,LoadImage:n,ReadFile:l,RequestFile:h,SetCorsBehavior:_},"DefaultRetryStrategy",{get:function(){return r.DefaultRetryStrategy},set:function(t){r.DefaultRetryStrategy=t}}),Object.defineProperty(i,"BaseUrl",{get:function(){return r.BaseUrl},set:function(t){r.BaseUrl=t}}),Object.defineProperty(i,"PreprocessUrl",{get:function(){return r.PreprocessUrl},set:function(t){r.PreprocessUrl=t}}),Object.defineProperty(i,"CorsBehavior",{get:function(){return r.CorsBehavior},set:function(t){r.CorsBehavior=t}})};L(b,I,g,M,U,A,F,P,v,w)},99512(t,e,r){r.d(e,{n:()=>s});var i=r(31656),o=r(27371);class s{static Instantiate(t){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[t])return this.RegisteredExternalClasses[t];let e=(0,o.n9)(t);if(e)return e;i.V.Warn(t+" not found, you may have missed an import.");let r=t.split("."),s=window||this;for(let t=0,e=r.length;t<e;t++)s=s[r[t]];return"function"!=typeof s?null:s}}s.RegisteredExternalClasses={}},78598(t,e,r){function i(t){let e=1;do e*=2;while(e<t);return e===t}function o(t,e,r){return t*(1-r)+e*r}function s(t){let e=a(t),r=n(t);return e-t>t-r?r:e}function a(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function n(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)-(t>>1)}function l(t,e,r=2){let i;switch(r){case 1:i=n(t);break;case 2:i=s(t);break;default:i=a(t)}return Math.min(i,e)}r.d(e,{C4:()=>n,L8:()=>i,OG:()=>s,R:()=>l,zF:()=>o})},32997(t,e,r){r.d(e,{LV:()=>p,S0:()=>x,s7:()=>R});var i,o=r(52969),s=r(77629),a=r(31656),n=r(94088),l=r(61146),h=r(39446),_=r(66443),c=r(94470),u=r(32715),m=r(26675),y=r(99512),f=r(74761),d=r(78598);class x{static get BaseUrl(){return u.eC.BaseUrl}static set BaseUrl(t){u.eC.BaseUrl=t}static get CleanUrl(){return u.eC.CleanUrl}static set CleanUrl(t){u.eC.CleanUrl=t}static IsAbsoluteUrl(t){return 0===t.indexOf("//")||!(-1===t.indexOf("://")||-1===t.indexOf(".")||-1===t.indexOf("/")||t.indexOf(":")>t.indexOf("/"))&&(!!(t.indexOf("://")<t.indexOf("."))||0===t.indexOf("data:")||0===t.indexOf("blob:"))}static set ScriptBaseUrl(t){u.eC.ScriptBaseUrl=t}static get ScriptBaseUrl(){return u.eC.ScriptBaseUrl}static set CDNBaseUrl(t){i.ScriptBaseUrl=t,i.AssetBaseUrl=t}static set ScriptPreprocessUrl(t){u.eC.ScriptPreprocessUrl=t}static get ScriptPreprocessUrl(){return u.eC.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return u.eC.DefaultRetryStrategy}static set DefaultRetryStrategy(t){u.eC.DefaultRetryStrategy=t}static get CorsBehavior(){return u.eC.CorsBehavior}static set CorsBehavior(t){u.eC.CorsBehavior=t}static get UseFallbackTexture(){return c.q.UseFallbackTexture}static set UseFallbackTexture(t){c.q.UseFallbackTexture=t}static get RegisteredExternalClasses(){return y.n.RegisteredExternalClasses}static set RegisteredExternalClasses(t){y.n.RegisteredExternalClasses=t}static get fallbackTexture(){return c.q.FallbackTexture}static set fallbackTexture(t){c.q.FallbackTexture=t}static FetchToRef(t,e,r,i,o,s){let a=((Math.abs(t)*r%r|0)+(Math.abs(e)*i%i|0)*r)*4;s.r=o[a]/255,s.g=o[a+1]/255,s.b=o[a+2]/255,s.a=o[a+3]/255}static Mix(t,e,r){return 0}static Instantiate(t){return y.n.Instantiate(t)}static SetImmediate(t){m._.SetImmediate(t)}static IsExponentOfTwo(t){return!0}static FloatRound(t){return Math.fround(t)}static GetFilename(t){let e=t.lastIndexOf("/");return e<0?t:t.substring(e+1)}static GetFolderPath(t,e=!1){let r=t.lastIndexOf("/");return r<0?e?t:"":t.substring(0,r+1)}static ToDegrees(t){return 180*t/Math.PI}static ToRadians(t){return t*Math.PI/180}static SmoothAngleChange(t,e,r=.9){let i=this.ToRadians(t),o=this.ToRadians(e);return this.ToDegrees(Math.atan2((1-r)*Math.sin(o)+r*Math.sin(i),(1-r)*Math.cos(o)+r*Math.cos(i)))}static MakeArray(t,e){return!0!==e&&(void 0===t||null==t)?null:Array.isArray(t)?t:[t]}static GetPointerPrefix(t){return(0,s.BA)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(t,e){(0,u.M1)(t,e)}static SetReferrerPolicyBehavior(t,e){e.referrerPolicy=t}static get PreprocessUrl(){return u.eC.PreprocessUrl}static set PreprocessUrl(t){u.eC.PreprocessUrl=t}static LoadImage(t,e,r,i,o,s){return(0,u.W$)(t,e,r,i,o,s)}static LoadFile(t,e,r,i,o,s){return(0,u.zU)(t,e,r,i,o,s)}static async LoadFileAsync(t,e=!0){return await new Promise((r,i)=>{(0,u.zU)(t,t=>{r(t)},void 0,void 0,e,(t,e)=>{i(e)})})}static GetAssetUrl(t){if(!t)return"";if(i.AssetBaseUrl&&t.startsWith(i._DefaultAssetsUrl)){let e="/"===i.AssetBaseUrl[i.AssetBaseUrl.length-1]?i.AssetBaseUrl.substring(0,i.AssetBaseUrl.length-1):i.AssetBaseUrl;return t.replace(i._DefaultAssetsUrl,e)}return t}static GetBabylonScriptURL(t,e){if(!t)return"";if(i.ScriptBaseUrl&&t.startsWith(i._DefaultCdnUrl)){let e="/"===i.ScriptBaseUrl[i.ScriptBaseUrl.length-1]?i.ScriptBaseUrl.substring(0,i.ScriptBaseUrl.length-1):i.ScriptBaseUrl;t=t.replace(i._DefaultCdnUrl,e)}return t=i.ScriptPreprocessUrl(t),e&&!i.IsAbsoluteUrl(t)&&(t=i.GetAbsoluteUrl(t)),t}static LoadBabylonScript(t,e,r,o){t=i.GetBabylonScriptURL(t),i.LoadScript(t,e,r)}static async LoadBabylonScriptAsync(t){return t=i.GetBabylonScriptURL(t),await i.LoadScriptAsync(t)}static _LoadScriptNative(t,e,r){_native&&i.LoadFile(t,t=>{Function(t).apply(null),e&&e()},void 0,void 0,!1,(t,e)=>{r&&r("LoadScript Error",e)})}static _LoadScriptWeb(t,e,r,i,o=!1){if("function"==typeof importScripts){try{importScripts(t),e&&e()}catch(e){r?.(`Unable to load script '${t}' in worker`,e)}return}if(!(0,s.BA)())return void r?.(`Cannot load script '${t}' outside of a window or a worker`);let a=document.getElementsByTagName("head")[0],n=document.createElement("script");o?(n.setAttribute("type","module"),n.innerText=t):(n.setAttribute("type","text/javascript"),n.setAttribute("src",t)),i&&(n.id=i),n.onload=()=>{e&&e()},n.onerror=e=>{r&&r(`Unable to load script '${t}'`,e)},a.appendChild(n)}static async LoadScriptAsync(t,e){return await new Promise((r,i)=>{this.LoadScript(t,()=>{r()},(t,e)=>{i(e||Error(t))},e)})}static ReadFileAsDataURL(t,e,r){let i=new FileReader,s={onCompleteObservable:new o.cP,abort:()=>i.abort()};return i.onloadend=()=>{s.onCompleteObservable.notifyObservers(s)},i.onload=t=>{e(t.target.result)},i.onprogress=r,i.readAsDataURL(t),s}static ReadFile(t,e,r,i,o){return(0,u.NJ)(t,e,r,i,o)}static FileAsURL(t){let e=new Blob([t]);return window.URL.createObjectURL(e)}static Format(t,e=2){return t.toFixed(e)}static DeepCopy(t,e,r,i){n.r.DeepCopy(t,e,r,i)}static IsEmpty(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}static RegisterTopRootEvents(t,e){for(let r=0;r<e.length;r++){let i=e[r];t.addEventListener(i.name,i.handler,!1);try{window.parent&&window.parent.addEventListener(i.name,i.handler,!1)}catch(t){}}}static UnregisterTopRootEvents(t,e){for(let r=0;r<e.length;r++){let i=e[r];t.removeEventListener(i.name,i.handler);try{t.parent&&t.parent.removeEventListener(i.name,i.handler)}catch(t){}}}static async DumpFramebuffer(t,e,r,i,o="image/png",s,a){throw(0,h.n)("DumpTools")}static DumpData(t,e,r,i,o="image/png",s,a=!1,n=!1,l){throw(0,h.n)("DumpTools")}static async DumpDataAsync(t,e,r,i="image/png",o,s=!1,a=!1,n){throw(0,h.n)("DumpTools")}static _IsOffScreenCanvas(t){return void 0!==t.convertToBlob}static ToBlob(t,e,r="image/png",o){i._IsOffScreenCanvas(t)||t.toBlob||(t.toBlob=function(t,e,r){setTimeout(()=>{let i=atob(this.toDataURL(e,r).split(",")[1]),o=i.length,s=new Uint8Array(o);for(let t=0;t<o;t++)s[t]=i.charCodeAt(t);t(new Blob([s]))})}),i._IsOffScreenCanvas(t)?t.convertToBlob({type:r,quality:o}).then(t=>e(t)):t.toBlob(function(t){e(t)},r,o)}static DownloadBlob(t,e){if("download"in document.createElement("a")){if(!e){let t=new Date;e="screenshot_"+((t.getFullYear()+"-"+(t.getMonth()+1)).slice(2)+"-"+t.getDate()+"_"+t.getHours()+"-")+("0"+t.getMinutes()).slice(-2)+".png"}i.Download(t,e)}else if(t&&"undefined"!=typeof URL){let e=URL.createObjectURL(t),r=window.open("");if(!r)return;let i=r.document.createElement("img");i.onload=function(){URL.revokeObjectURL(e)},i.src=e,r.document.body.appendChild(i)}}static EncodeScreenshotCanvasData(t,e,r="image/png",o,s){if("string"!=typeof o&&e){if(e){if(i._IsOffScreenCanvas(t))return void t.convertToBlob({type:r,quality:s}).then(t=>{let r=new FileReader;r.readAsDataURL(t),r.onloadend=()=>{e(r.result)}});e(t.toDataURL(r,s))}}else this.ToBlob(t,function(t){t&&i.DownloadBlob(t,o),e&&e("")},r,s)}static Download(t,e){if("undefined"==typeof URL)return;let r=window.URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.style.display="none",i.href=r,i.download=e,i.addEventListener("click",()=>{i.parentElement&&i.parentElement.removeChild(i)}),i.click(),window.URL.revokeObjectURL(r)}static BackCompatCameraNoPreventDefault(t){return"boolean"==typeof t[0]?t[0]:"boolean"==typeof t[1]&&t[1]}static CreateScreenshot(t,e,r,i,o="image/png",s=!1,a){throw(0,h.n)("ScreenshotTools")}static async CreateScreenshotAsync(t,e,r,i="image/png",o){throw(0,h.n)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(t,e,r,i,o="image/png",s=1,a=!1,n,l=!1,_=!1,c=!0,u,m){throw(0,h.n)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(t,e,r,i="image/png",o=1,s=!1,a,n=!1,l=!1,_=!0,c,u){throw(0,h.n)("ScreenshotTools")}static RandomId(){return(0,f.z)()}static IsBase64(t){return(0,u.f2)(t)}static DecodeBase64(t){return(0,u.rz)(t)}static get errorsCount(){return a.V.errorsCount}static Log(t){a.V.Log(t)}static Warn(t){a.V.Warn(t)}static Error(t){a.V.Error(t)}static get LogCache(){return a.V.LogCache}static ClearLogCache(){a.V.ClearLogCache()}static set LogLevels(t){a.V.LogLevels=t}static set PerformanceLogLevel(t){(t&i.PerformanceUserMarkLogLevel)===i.PerformanceUserMarkLogLevel?_native?.enablePerformanceLogging?(_native.enablePerformanceLogging(1),i.StartPerformanceCounter=i._StartMarkNative,i.EndPerformanceCounter=i._EndMarkNative):(i.StartPerformanceCounter=i._StartUserMark,i.EndPerformanceCounter=i._EndUserMark):(t&i.PerformanceConsoleLogLevel)===i.PerformanceConsoleLogLevel?_native?.enablePerformanceLogging?(_native.enablePerformanceLogging(2),i.StartPerformanceCounter=i._StartMarkNative,i.EndPerformanceCounter=i._EndMarkNative):(i.StartPerformanceCounter=i._StartPerformanceConsole,i.EndPerformanceCounter=i._EndPerformanceConsole):(i.StartPerformanceCounter=i._StartPerformanceCounterDisabled,i.EndPerformanceCounter=i._EndPerformanceCounterDisabled,_native?.disablePerformanceLogging?.())}static _StartPerformanceCounterDisabled(t,e){}static _EndPerformanceCounterDisabled(t,e){}static _StartUserMark(t,e=!0){if(!i._Performance){if(!(0,s.BA)())return;i._Performance=window.performance}e&&i._Performance.mark&&i._Performance.mark(t+"-Begin")}static _EndUserMark(t,e=!0){e&&i._Performance.mark&&(i._Performance.mark(t+"-End"),i._Performance.measure(t,t+"-Begin",t+"-End"))}static _StartPerformanceConsole(t,e=!0){e&&(i._StartUserMark(t,e),console.time&&console.time(t))}static _EndPerformanceConsole(t,e=!0){e&&(i._EndUserMark(t,e),console.timeEnd(t))}static _StartMarkNative(t,e=!0){if(e&&_native?.startPerformanceCounter)if(i._NativePerformanceCounterHandles.has(t))i.Warn(`Performance counter with name ${t} is already started.`);else{let e=_native.startPerformanceCounter(t);i._NativePerformanceCounterHandles.set(t,e)}}static _EndMarkNative(t,e=!0){if(e&&_native?.endPerformanceCounter){let e=i._NativePerformanceCounterHandles.get(t);e?(_native.endPerformanceCounter(e),i._NativePerformanceCounterHandles.delete(t)):i.Warn(`Performance counter with name ${t} was not started.`)}}static get Now(){return l.j.Now}static GetClassName(t,e=!1){let r=null;return!e&&t.getClassName?r=t.getClassName():(t instanceof Object&&(r=(e?t:Object.getPrototypeOf(t)).constructor.__bjsclassName__),r||(r=typeof t)),r}static First(t,e){for(let r of t)if(e(r))return r;return null}static getFullClassName(t,e=!1){let r=null,i=null;if(!e&&t.getClassName)r=t.getClassName();else{if(t instanceof Object){let o=e?t:Object.getPrototypeOf(t);r=o.constructor.__bjsclassName__,i=o.constructor.__bjsmoduleName__}r||(r=typeof t)}return r?(null!=i?i+".":"")+r:null}static async DelayAsync(t){await new Promise(e=>{setTimeout(()=>{e()},t)})}static IsSafari(){return!!(0,s.XD)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function R(t,e){return r=>{r.__bjsclassName__=t,r.__bjsmoduleName__=null!=e?e:null}}i=x,x.AssetBaseUrl="",x.UseCustomRequestHeaders=!1,x.CustomRequestHeaders=_.u.CustomRequestHeaders,x.GetDOMTextContent=s.Zl,x._DefaultCdnUrl="https://cdn.babylonjs.com",x._DefaultAssetsUrl="https://assets.babylonjs.com/core",x.LoadScript="undefined"==typeof _native?i._LoadScriptWeb:i._LoadScriptNative,x.GetAbsoluteUrl="object"==typeof document?t=>{let e=document.createElement("a");return e.href=t,e.href}:"function"==typeof URL&&"object"==typeof location?t=>new URL(t,location.origin).href:()=>{throw Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},x.NoneLogLevel=a.V.NoneLogLevel,x.MessageLogLevel=a.V.MessageLogLevel,x.WarningLogLevel=a.V.WarningLogLevel,x.ErrorLogLevel=a.V.ErrorLogLevel,x.AllLogLevel=a.V.AllLogLevel,x.IsWindowObjectExist=s.BA,x.PerformanceNoneLogLevel=0,x.PerformanceUserMarkLogLevel=1,x.PerformanceConsoleLogLevel=2,x._NativePerformanceCounterHandles=new Map,x.StartPerformanceCounter=i._StartPerformanceCounterDisabled,x.EndPerformanceCounter=i._EndPerformanceCounterDisabled;class p{constructor(t,e,r,i=0){this.iterations=t,this.index=i-1,this._done=!1,this._fn=e,this._successCallback=r}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(t,e,r,i=0){let o=new p(t,e,r,i);return o.executeNext(),o}static SyncAsyncForLoop(t,e,r,i,o,s=0){return p.Run(Math.ceil(t/e),i=>{o&&o()?i.breakLoop():setTimeout(()=>{for(let s=0;s<e;++s){let a=i.index*e+s;if(a>=t)break;if(r(a),o&&o()){i.breakLoop();break}}i.executeNext()},s)},i)}}x.Mix=d.zF,x.IsExponentOfTwo=d.L8,c.q.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"}}]);