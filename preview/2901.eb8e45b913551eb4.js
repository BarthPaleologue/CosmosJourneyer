"use strict";(globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).push([["2901"],{97035(e,t,r){r.d(t,{_HDRTextureLoader:()=>n});var a=r(85738);class n{constructor(){this.supportCascades=!1}loadCubeData(){throw".hdr not supported in Cube."}loadData(e,t,r){let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o=(0,a.NK)(n),i=(0,a.LT)(n,o),h=o.width*o.height,u=new Float32Array(4*h);for(let e=0;e<h;e+=1)u[4*e]=i[3*e],u[4*e+1]=i[3*e+1],u[4*e+2]=i[3*e+2],u[4*e+3]=1;r(o.width,o.height,t.generateMipMaps,!1,()=>{let e=t.getEngine();t.type=1,t.format=5,t._gammaSpace=!1,e._uploadDataToTextureDirectly(t,u)})}}},61182(e,t,r){r.d(t,{EE:()=>d,ER:()=>o,Ky:()=>i,Tf:()=>h,fd:()=>f,fg:()=>u,jk:()=>a,rl:()=>w,v9:()=>s,xO:()=>l,yj:()=>c});class a{}function n(e,t,r,a,n,i,h,u,l,f,s,w,d,c,C,p,P){let g=e.asArray();g[0]=t,g[1]=r,g[2]=a,g[3]=n,g[4]=i,g[5]=h,g[6]=u,g[7]=l,g[8]=f,g[9]=s,g[10]=w,g[11]=d,g[12]=c,g[13]=C,g[14]=p,g[15]=P,o(e)}function o(e){e.updateFlag=a._UpdateFlagSeed++}function i(e){n(e,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}function h(e,t,r,a){n(a,1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1)}function u(e,t,r,a){n(a,e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1)}function l(e,t,r,a=0){let n=e.asArray(),o=t.asArray(),i=n[0],h=n[1],u=n[2],f=n[3],s=n[4],w=n[5],d=n[6],c=n[7],C=n[8],p=n[9],P=n[10],g=n[11],m=n[12],A=n[13],b=n[14],y=n[15],F=o[0],T=o[1],_=o[2],q=o[3],M=o[4],E=o[5],D=o[6],R=o[7],x=o[8],B=o[9],H=o[10],I=o[11],v=o[12],O=o[13],S=o[14],U=o[15];r[a]=i*F+h*M+u*x+f*v,r[a+1]=i*T+h*E+u*B+f*O,r[a+2]=i*_+h*D+u*H+f*S,r[a+3]=i*q+h*R+u*I+f*U,r[a+4]=s*F+w*M+d*x+c*v,r[a+5]=s*T+w*E+d*B+c*O,r[a+6]=s*_+w*D+d*H+c*S,r[a+7]=s*q+w*R+d*I+c*U,r[a+8]=C*F+p*M+P*x+g*v,r[a+9]=C*T+p*E+P*B+g*O,r[a+10]=C*_+p*D+P*H+g*S,r[a+11]=C*q+p*R+P*I+g*U,r[a+12]=m*F+A*M+b*x+y*v,r[a+13]=m*T+A*E+b*B+y*O,r[a+14]=m*_+A*D+b*H+y*S,r[a+15]=m*q+A*R+b*I+y*U}function f(e,t,r,a=0){l(e,t,r.asArray(),a),o(r)}function s(e,t){w(e,t.asArray()),o(t)}function w(e,t,r=0){let a=e.asArray();t[r]=a[0],t[r+1]=a[1],t[r+2]=a[2],t[r+3]=a[3],t[r+4]=a[4],t[r+5]=a[5],t[r+6]=a[6],t[r+7]=a[7],t[r+8]=a[8],t[r+9]=a[9],t[r+10]=a[10],t[r+11]=a[11],t[r+12]=a[12],t[r+13]=a[13],t[r+14]=a[14],t[r+15]=a[15]}function d(e,t){let r=c(e,t.asArray());return r&&o(t),r}function c(e,t){let r=e.asArray(),a=r[0],n=r[1],o=r[2],i=r[3],h=r[4],u=r[5],l=r[6],f=r[7],s=r[8],w=r[9],d=r[10],c=r[11],C=r[12],p=r[13],P=r[14],g=r[15],m=d*g-P*c,A=w*g-p*c,b=w*P-p*d,y=s*g-C*c,F=s*P-d*C,T=s*p-C*w,_=+(u*m-l*A+f*b),q=-(h*m-l*y+f*F),M=+(h*A-u*y+f*T),E=-(h*b-u*F+l*T),D=a*_+n*q+o*M+i*E;if(0===D)return!1;let R=1/D,x=l*g-P*f,B=u*g-p*f,H=u*P-p*l,I=h*g-C*f,v=h*P-C*l,O=h*p-C*u,S=l*c-d*f,U=u*c-w*f,j=u*d-w*l,k=h*c-s*f,z=h*d-s*l,L=h*w-s*u;return t[0]=_*R,t[1]=-(n*m-o*A+i*b)*R,t[2]=(n*x-o*B+i*H)*R,t[3]=-(n*S-o*U+i*j)*R,t[4]=q*R,t[5]=(a*m-o*y+i*F)*R,t[6]=-(a*x-o*I+i*v)*R,t[7]=(a*S-o*k+i*z)*R,t[8]=M*R,t[9]=-(a*A-n*y+i*T)*R,t[10]=(a*B-n*I+i*O)*R,t[11]=-(a*U-n*k+i*L)*R,t[12]=E*R,t[13]=(a*b-n*F+o*T)*R,t[14]=-(a*H-n*v+o*O)*R,t[15]=(a*j-n*z+o*L)*R,!0}a._UpdateFlagSeed=0},85738(e,t,r){r.d(t,{I9:()=>f,LT:()=>u,NK:()=>i,VH:()=>h});var a=r(22784);function n(e,t,r,a,n,o){if(n>0){var i;n=(i=n-136)>1023?898846567431158e293*Math.pow(2,i-1023):i<-1074?5e-324*Math.pow(2,i+1074):+Math.pow(2,i),e[o+0]=t*n,e[o+1]=r*n,e[o+2]=a*n}else e[o+0]=0,e[o+1]=0,e[o+2]=0}function o(e,t){let r="",a="";for(let n=t;n<e.length-t&&"\n"!=(a=String.fromCharCode(e[n]));n++)r+=a;return r}function i(e){let t=0,r=0,a=o(e,0);if("#"!=a[0]||"?"!=a[1])throw"Bad HDR Format.";let n=!1,i=!1,h=0;do h+=a.length+1,"FORMAT=32-bit_rle_rgbe"==(a=o(e,h))?i=!0:0==a.length&&(n=!0);while(!n);if(!i)throw"HDR Bad header format, unsupported FORMAT";h+=a.length+1,a=o(e,h);let u=/^-Y (.*) \+X (.*)$/g.exec(a);if(!u||u.length<3)throw"HDR Bad header format, no size";if(r=parseInt(u[2]),t=parseInt(u[1]),r<8||r>32767)throw"HDR Bad header format, unsupported size";return{height:t,width:r,dataPosition:h+=a.length+1}}function h(e,t,r=!1){let n=new Uint8Array(e),o=i(n),u=l(n,o);return a.D.ConvertPanoramaToCubemap(u,o.width,o.height,t,r)}function u(e,t){return l(e,t)}function l(e,t){let r,a,o,i,h,u=t.height,l=t.width,f=t.dataPosition,s=0,w=0,d=0,c=new Uint8Array(new ArrayBuffer(4*l)),C=new Float32Array(new ArrayBuffer(t.width*t.height*12));for(;u>0;){if(r=e[f++],a=e[f++],o=e[f++],i=e[f++],2!=r||2!=a||128&o||t.width<8||t.width>32767)return function(e,t){let r,a,o,i=t.height,h=t.width,u=t.dataPosition,l=new Float32Array(new ArrayBuffer(t.width*t.height*12));for(;i>0;){for(o=0;o<t.width;o++)r=e[u++],a=e[u++],n(l,r,a,e[u++],e[u++],(t.height-i)*h*3+3*o);i--}return l}(e,t);if((o<<8|i)!=l)throw"HDR Bad header format, wrong scan line width";for(d=0,s=0;d<4;d++)for(w=(d+1)*l;s<w;)if(r=e[f++],a=e[f++],r>128){if(0==(h=r-128)||h>w-s)throw"HDR Bad Format, bad scanline data (run)";for(;h-- >0;)c[s++]=a}else{if(0==(h=r)||h>w-s)throw"HDR Bad Format, bad scanline data (non-run)";if(c[s++]=a,--h>0)for(let t=0;t<h;t++)c[s++]=e[f++]}for(d=0;d<l;d++)r=c[d],a=c[d+l],n(C,r,a,o=c[d+2*l],i=c[d+3*l],(t.height-u)*l*3+3*d);u--}return C}let f={RGBE_ReadHeader:i,GetCubeMapTextureData:h,RGBE_ReadPixels:u}},22784(e,t,r){r.d(t,{D:()=>n});var a=r(93287);class n{static ConvertPanoramaToCubemap(e,t,r,a,n=!1,o=!0){if(!e)throw"ConvertPanoramaToCubemap: input cannot be null";let i=0;if(e.length!=t*r*3)if(e.length!=t*r*4)throw"ConvertPanoramaToCubemap: input size is wrong";else i=4;else i=3;return{front:this.CreateCubemapTexture(a,this.FACE_FRONT,e,t,r,n,o,i),back:this.CreateCubemapTexture(a,this.FACE_BACK,e,t,r,n,o,i),left:this.CreateCubemapTexture(a,this.FACE_LEFT,e,t,r,n,o,i),right:this.CreateCubemapTexture(a,this.FACE_RIGHT,e,t,r,n,o,i),up:this.CreateCubemapTexture(a,this.FACE_UP,e,t,r,n,o,i),down:this.CreateCubemapTexture(a,this.FACE_DOWN,e,t,r,n,o,i),size:a,type:1,format:4,gammaSpace:!1}}static CreateCubemapTexture(e,t,r,a,n,o,i,h){let u=new Float32Array(new ArrayBuffer(e*e*12)),l=o?Math.max(1,Math.round(a/4/e)):1,f=1/l,s=f*f,w=t[1].subtract(t[0]).scale(f/e),d=t[3].subtract(t[2]).scale(f/e),c=1/e,C=0;for(let o=0;o<e;o++)for(let p=0;p<l;p++){let p=t[0],P=t[2];for(let t=0;t<e;t++)for(let f=0;f<l;f++){let l=P.subtract(p).scale(C).add(p);l.normalize();let f=this.CalcProjectionSpherical(l,r,a,n,h,i);u[o*e*3+3*t+0]+=f.r*s,u[o*e*3+3*t+1]+=f.g*s,u[o*e*3+3*t+2]+=f.b*s,p=p.add(w),P=P.add(d)}C+=c*f}return u}static CalcProjectionSpherical(e,t,r,a,n,o){let i=Math.atan2(e.z,e.x),h=Math.acos(e.y);for(;i<-Math.PI;)i+=2*Math.PI;for(;i>Math.PI;)i-=2*Math.PI;let u=i/Math.PI,l=h/Math.PI,f=Math.round((u=.5*u+.5)*r);f<0?f=0:f>=r&&(f=r-1);let s=Math.round(l*a);s<0?s=0:s>=a&&(s=a-1);let w=o?a-s-1:s;return{r:t[w*r*n+f*n+0],g:t[w*r*n+f*n+1],b:t[w*r*n+f*n+2]}}}n.FACE_LEFT=[new a.Pq(-1,-1,-1),new a.Pq(1,-1,-1),new a.Pq(-1,1,-1),new a.Pq(1,1,-1)],n.FACE_RIGHT=[new a.Pq(1,-1,1),new a.Pq(-1,-1,1),new a.Pq(1,1,1),new a.Pq(-1,1,1)],n.FACE_FRONT=[new a.Pq(1,-1,-1),new a.Pq(1,-1,1),new a.Pq(1,1,-1),new a.Pq(1,1,1)],n.FACE_BACK=[new a.Pq(-1,-1,1),new a.Pq(-1,-1,-1),new a.Pq(-1,1,1),new a.Pq(-1,1,-1)],n.FACE_DOWN=[new a.Pq(1,1,-1),new a.Pq(1,1,1),new a.Pq(-1,1,-1),new a.Pq(-1,1,1)],n.FACE_UP=[new a.Pq(-1,-1,-1),new a.Pq(-1,-1,1),new a.Pq(1,-1,-1),new a.Pq(1,-1,1)]}}]);