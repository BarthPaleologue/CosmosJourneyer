/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

"use strict";(globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).push([["6597"],{79578:function(e,t,r){r.d(t,{ge:()=>s,p9:()=>a,rX:()=>i});let i=!1;function s(e){i=e}let a={get UseOpenGLOrientationForUV(){return i},set UseOpenGLOrientationForUV(value){i=value}}},19531:function(e,t,r){r.d(t,{t:()=>c});var i=r(47115),s=r(51568),a=r(51091),n=r(66144),u=r(30168),l=r(76367);r(29497);var o=r(19085),h=r(2642);class c extends o.D{set hasAlpha(e){this._hasAlpha!==e&&(this._hasAlpha=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,e=>e.hasTexture(this)))}get hasAlpha(){return this._hasAlpha}set getAlphaFromRGB(e){this._getAlphaFromRGB!==e&&(this._getAlphaFromRGB=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,e=>e.hasTexture(this)))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(e){this._coordinatesIndex!==e&&(this._coordinatesIndex=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,e=>e.hasTexture(this)))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(e){this._coordinatesMode!==e&&(this._coordinatesMode=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,e=>e.hasTexture(this)))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(e){this._wrapU=e}get wrapV(){return this._wrapV}set wrapV(e){this._wrapV=e}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(e){this._texture?this._texture.isCube=e:this._isCube=e}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(e){this._texture&&(this._texture.is3D=e)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(e){this._texture&&(this._texture.is2DArray=e)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(e){if(this._texture){if(this._texture._gammaSpace===e)return;this._texture._gammaSpace=e}else{if(this._gammaSpace===e)return;this._gammaSpace=e}this.getScene()?.markAllMaterialsAsDirty(1,e=>e.hasTexture(this))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(e){e!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=e),this.getScene()?.markAllMaterialsAsDirty(1,e=>e.hasTexture(this)))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(e){this._texture&&(this._texture._lodGenerationOffset=e)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(e){this._texture&&(this._texture._lodGenerationScale=e)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(e){this._texture&&(this._texture._linearSpecularLOD=e)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(e){this._texture&&(this._texture._irradianceTexture=e)}get uid(){return this._uid||(this._uid=(0,l.z)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(e,t=null){super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=c.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.onDisposeObservable=new a.cP,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,e?c._IsScene(e)?this._scene=e:this._engine=e:this._scene=u.q.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=t,this._uid=null}getScene(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return n.uq.IdentityReadOnly}getReflectionTextureMatrix(){return n.uq.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(e){}get canRescale(){return!1}_getFromCache(e,t,r,i,s,a){let n=this._getEngine();if(!n)return null;let u=n._getUseSRGBBuffer(!!s,t),l=n.getLoadedTexturesCache();for(let n=0;n<l.length;n++){let o=l[n];if((void 0===s||u===o._useSRGBBuffer)&&(void 0===i||i===o.invertY)&&o.url===e&&!t===o.generateMipMaps&&(!r||r===o.samplingMode)&&(void 0===a||a===o.isCube))return o.incrementReferences(),o}return null}_rebuild(e=!1){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){let e=this.getScene();e&&e.markAllMaterialsAsDirty(1)}readPixels(e=0,t=0,r=null,i=!0,s=!1,a=0,n=0,u=Number.MAX_VALUE,l=Number.MAX_VALUE){if(!this._texture)return null;let o=this._getEngine();if(!o)return null;let h=this.getSize(),c=h.width,_=h.height;0!==t&&(c/=Math.pow(2,t),_/=Math.pow(2,t),c=Math.round(c),_=Math.round(_)),u=Math.min(c,u),l=Math.min(_,l);try{if(this._texture.isCube)return o._readTexturePixels(this._texture,u,l,e,t,r,i,s,a,n);return o._readTexturePixels(this._texture,u,l,-1,t,r,i,s,a,n)}catch(e){return null}}_readPixelsSync(e=0,t=0,r=null,i=!0,s=!1){if(!this._texture)return null;let a=this.getSize(),n=a.width,u=a.height,l=this._getEngine();if(!l)return null;0!=t&&(n/=Math.pow(2,t),u/=Math.pow(2,t),n=Math.round(n),u=Math.round(u));try{if(this._texture.isCube)return l._readTexturePixelsSync(this._texture,n,u,e,t,r,i,s);return l._readTexturePixelsSync(this._texture,n,u,-1,t,r,i,s)}catch(e){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);let e=this._scene.textures.indexOf(this);if(e>=0&&this._scene.textures.splice(e,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){let e=this._parentContainer.textures.indexOf(this);e>-1&&this._parentContainer.textures.splice(e,1),this._parentContainer=null}}this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.metadata=null,super.dispose()}serialize(e=!1){if(!this.name&&!e)return null;let t=h.p.Serialize(this);return h.p.AppendSerializedAnimations(this,t),t}static WhenAllReady(e,t){let r=e.length;if(0===r)return void t();for(let i=0;i<e.length;i++){let s=e[i];if(s.isReady())0==--r&&t();else{let e=s.onLoadObservable;e?e.addOnce(()=>{0==--r&&t()}):0==--r&&t()}}}static _IsScene(e){return"Scene"===e.getClassName()}}c.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,i.Cg)([(0,s.lK)()],c.prototype,"uniqueId",void 0),(0,i.Cg)([(0,s.lK)()],c.prototype,"name",void 0),(0,i.Cg)([(0,s.lK)()],c.prototype,"displayName",void 0),(0,i.Cg)([(0,s.lK)()],c.prototype,"metadata",void 0),(0,i.Cg)([(0,s.lK)("hasAlpha")],c.prototype,"_hasAlpha",void 0),(0,i.Cg)([(0,s.lK)("getAlphaFromRGB")],c.prototype,"_getAlphaFromRGB",void 0),(0,i.Cg)([(0,s.lK)()],c.prototype,"level",void 0),(0,i.Cg)([(0,s.lK)("coordinatesIndex")],c.prototype,"_coordinatesIndex",void 0),(0,i.Cg)([(0,s.lK)()],c.prototype,"optimizeUVAllocation",void 0),(0,i.Cg)([(0,s.lK)("coordinatesMode")],c.prototype,"_coordinatesMode",void 0),(0,i.Cg)([(0,s.lK)()],c.prototype,"wrapU",null),(0,i.Cg)([(0,s.lK)()],c.prototype,"wrapV",null),(0,i.Cg)([(0,s.lK)()],c.prototype,"wrapR",void 0),(0,i.Cg)([(0,s.lK)()],c.prototype,"anisotropicFilteringLevel",void 0),(0,i.Cg)([(0,s.lK)()],c.prototype,"isCube",null),(0,i.Cg)([(0,s.lK)()],c.prototype,"is3D",null),(0,i.Cg)([(0,s.lK)()],c.prototype,"is2DArray",null),(0,i.Cg)([(0,s.lK)()],c.prototype,"gammaSpace",null),(0,i.Cg)([(0,s.lK)()],c.prototype,"invertZ",void 0),(0,i.Cg)([(0,s.lK)()],c.prototype,"lodLevelInAlpha",void 0),(0,i.Cg)([(0,s.lK)()],c.prototype,"lodGenerationOffset",null),(0,i.Cg)([(0,s.lK)()],c.prototype,"lodGenerationScale",null),(0,i.Cg)([(0,s.lK)()],c.prototype,"linearSpecularLOD",null),(0,i.Cg)([(0,s.uM)()],c.prototype,"irradianceTexture",null),(0,i.Cg)([(0,s.lK)()],c.prototype,"isRenderTarget",void 0)},19085:function(e,t,r){r.d(t,{D:()=>s});var i=r(38158);class s{get wrapU(){return this._wrapU}set wrapU(e){this._wrapU=e}get wrapV(){return this._wrapV}set wrapV(e){this._wrapV=e}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(e){this._texture&&(this._texture.isCube=e)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(e){this._texture&&(this._texture.is3D=e)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(e){this._texture&&(this._texture.is2DArray=e)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(e){return e?.shareDepth!==void 0}constructor(e){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=i.o.Zero(),this._cachedBaseSize=i.o.Zero(),this._initialSamplingMode=2,this._texture=s._IsRenderTargetWrapper(e)?e.texture:e,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;this._texture._size&&(this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size)}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0),this._cachedBaseSize}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(e,t=!1){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(e,this._texture,this._texture.generateMipMaps&&t)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}},60653:function(e,t,r){r.d(t,{EE:()=>d,ER:()=>a,Ky:()=>n,Tf:()=>u,fd:()=>h,fg:()=>l,jk:()=>i,rl:()=>_,v9:()=>c,xO:()=>o,yj:()=>g});class i{}function s(e,t,r,i,s,n,u,l,o,h,c,_,d,g,p,x,f){let m=e.asArray();m[0]=t,m[1]=r,m[2]=i,m[3]=s,m[4]=n,m[5]=u,m[6]=l,m[7]=o,m[8]=h,m[9]=c,m[10]=_,m[11]=d,m[12]=g,m[13]=p,m[14]=x,m[15]=f,a(e)}function a(e){e.updateFlag=i._UpdateFlagSeed++}function n(e){s(e,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}function u(e,t,r,i){s(i,1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1)}function l(e,t,r,i){s(i,e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1)}function o(e,t,r,i=0){let s=e.asArray(),a=t.asArray(),n=s[0],u=s[1],l=s[2],h=s[3],c=s[4],_=s[5],d=s[6],g=s[7],p=s[8],x=s[9],f=s[10],m=s[11],y=s[12],T=s[13],A=s[14],v=s[15],S=a[0],b=a[1],C=a[2],w=a[3],D=a[4],R=a[5],M=a[6],I=a[7],O=a[8],P=a[9],L=a[10],z=a[11],F=a[12],B=a[13],G=a[14],k=a[15];r[i]=n*S+u*D+l*O+h*F,r[i+1]=n*b+u*R+l*P+h*B,r[i+2]=n*C+u*M+l*L+h*G,r[i+3]=n*w+u*I+l*z+h*k,r[i+4]=c*S+_*D+d*O+g*F,r[i+5]=c*b+_*R+d*P+g*B,r[i+6]=c*C+_*M+d*L+g*G,r[i+7]=c*w+_*I+d*z+g*k,r[i+8]=p*S+x*D+f*O+m*F,r[i+9]=p*b+x*R+f*P+m*B,r[i+10]=p*C+x*M+f*L+m*G,r[i+11]=p*w+x*I+f*z+m*k,r[i+12]=y*S+T*D+A*O+v*F,r[i+13]=y*b+T*R+A*P+v*B,r[i+14]=y*C+T*M+A*L+v*G,r[i+15]=y*w+T*I+A*z+v*k}function h(e,t,r,i=0){o(e,t,r.asArray(),i),a(r)}function c(e,t){_(e,t.asArray()),a(t)}function _(e,t,r=0){let i=e.asArray();t[r]=i[0],t[r+1]=i[1],t[r+2]=i[2],t[r+3]=i[3],t[r+4]=i[4],t[r+5]=i[5],t[r+6]=i[6],t[r+7]=i[7],t[r+8]=i[8],t[r+9]=i[9],t[r+10]=i[10],t[r+11]=i[11],t[r+12]=i[12],t[r+13]=i[13],t[r+14]=i[14],t[r+15]=i[15]}function d(e,t){let r=g(e,t.asArray());return r&&a(t),r}function g(e,t){let r=e.asArray(),i=r[0],s=r[1],a=r[2],n=r[3],u=r[4],l=r[5],o=r[6],h=r[7],c=r[8],_=r[9],d=r[10],g=r[11],p=r[12],x=r[13],f=r[14],m=r[15],y=d*m-f*g,T=_*m-x*g,A=_*f-x*d,v=c*m-p*g,S=c*f-d*p,b=c*x-p*_,C=+(l*y-o*T+h*A),w=-(u*y-o*v+h*S),D=+(u*T-l*v+h*b),R=-(u*A-l*S+o*b),M=i*C+s*w+a*D+n*R;if(0===M)return!1;let I=1/M,O=o*m-f*h,P=l*m-x*h,L=l*f-x*o,z=u*m-p*h,F=u*f-p*o,B=u*x-p*l,G=o*g-d*h,k=l*g-_*h,E=l*d-_*o,U=u*g-c*h,K=u*d-c*o,q=u*_-c*l;return t[0]=C*I,t[1]=-(s*y-a*T+n*A)*I,t[2]=(s*O-a*P+n*L)*I,t[3]=-(s*G-a*k+n*E)*I,t[4]=w*I,t[5]=(i*y-a*v+n*S)*I,t[6]=-(i*O-a*z+n*F)*I,t[7]=(i*G-a*U+n*K)*I,t[8]=D*I,t[9]=-(i*T-s*v+n*b)*I,t[10]=(i*P-s*z+n*B)*I,t[11]=-(i*k-s*U+n*q)*I,t[12]=R*I,t[13]=(i*A-s*S+a*b)*I,t[14]=-(i*L-s*F+a*B)*I,t[15]=(i*E-s*K+a*q)*I,!0}i._UpdateFlagSeed=0},99946:function(e,t,r){r.d(t,{Z:()=>i});class i{static Eval(e,t){return"true"===(e=e.match(/\([^()]*\)/g)?e.replace(/\([^()]*\)/g,e=>(e=e.slice(1,e.length-1),i._HandleParenthesisContent(e,t))):i._HandleParenthesisContent(e,t))||"false"!==e&&i.Eval(e,t)}static _HandleParenthesisContent(e,t){let r;t=t||(e=>"true"===e);let s=e.split("||");for(let e in s)if(Object.prototype.hasOwnProperty.call(s,e)){let a=i._SimplifyNegation(s[e].trim()),n=a.split("&&");if(n.length>1)for(let e=0;e<n.length;++e){let s=i._SimplifyNegation(n[e].trim());if(!(r="true"!==s&&"false"!==s?"!"===s[0]?!t(s.substring(1)):t(s):"true"===s)){a="false";break}}if(r||"true"===a){r=!0;break}r="true"!==a&&"false"!==a?"!"===a[0]?!t(a.substring(1)):t(a):"true"===a}return r?"true":"false"}static _SimplifyNegation(e){return"!true"===(e=(e=e.replace(/^[\s!]+/,e=>(e=e.replace(/[\s]/g,()=>"")).length%2?"!":"")).trim())?e="false":"!false"===e&&(e="true"),e}}},16622:function(e,t,r){function i(e,t){let r=[];for(let i=0;i<e;++i)r.push(t());return r}function s(e,t){return i(e,t)}r.d(t,{lL:()=>n,ln:()=>s,mI:()=>i});let a=["push","splice","pop","shift","unshift"];function n(e,t){let r=a.map(r=>(function(e,t,r){let i=e[t];if("function"!=typeof i)return null;let s=function(){let i=e.length,a=s.previous.apply(e,arguments);return r(t,i),a};return i.next=s,s.previous=i,e[t]=s,()=>{let r=s.previous;if(!r)return;let i=s.next;i?(r.next=i,i.previous=r):(r.next=void 0,e[t]=r),s.next=void 0,s.previous=void 0}})(e,r,t));return()=>{for(let e of r)e?.()}}},12560:function(e,t,r){function i(e,t,r=!1){let s=t.width,a=t.height;if(e instanceof Float32Array){let t=e.byteLength/e.BYTES_PER_ELEMENT,r=new Uint8Array(t);for(;--t>=0;){let i=e[t];i<0?i=0:i>1&&(i=1),r[t]=255*i}e=r}let n=document.createElement("canvas");n.width=s,n.height=a;let u=n.getContext("2d");if(!u)return null;let l=u.createImageData(s,a);if(l.data.set(e),u.putImageData(l,0,0),r){let e=document.createElement("canvas");e.width=s,e.height=a;let t=e.getContext("2d");return t?(t.translate(0,a),t.scale(1,-1),t.drawImage(n,0,0),e.toDataURL("image/png")):null}return n.toDataURL("image/png")}function s(e,t=0,r=0){let a=e.getInternalTexture();if(!a)return null;let n=e._readPixelsSync(t,r);return n?i(n,e.getSize(),a.invertY):null}async function a(e,t=0,r=0){let s=e.getInternalTexture();if(!s)return null;let n=await e.readPixels(t,r);return n?i(n,e.getSize(),s.invertY):null}r.d(t,{D8:()=>n,c9:()=>i,lP:()=>s,nh:()=>a});let n={GenerateBase64StringFromPixelData:i,GenerateBase64StringFromTexture:s,GenerateBase64StringFromTextureAsync:a}},51568:function(e,t,r){r.d(t,{$z:()=>a,Cx:()=>y,GG:()=>f,P_:()=>c,WM:()=>h,Y9:()=>o,bR:()=>x,fW:()=>m,jT:()=>l,lK:()=>n,n1:()=>p,qK:()=>g,uM:()=>u,wL:()=>d,xG:()=>_});var i=r(66403);function s(e,t){return(r,s)=>{let a=(0,i.B)(r);a[s]||(a[s]={type:e,sourceName:t})}}function a(e,t=null){return function(e,t=null){return(r,i)=>{let s=t||"_"+i;Object.defineProperty(r,i,{get:function(){return this[s]},set:function(t){"function"==typeof this[s]?.equals&&this[s].equals(t)||this[s]!==t&&(this[s]=t,r[e].apply(this))},enumerable:!0,configurable:!0})}}(e,t)}function n(e){return s(0,e)}function u(e){return s(1,e)}function l(e){return s(2,e)}function o(e){return s(3,e)}function h(e){return s(4,e)}function c(e){return s(5,e)}function _(e){return s(6,e)}function d(e){return s(7,e)}function g(e){return s(8,e)}function p(e){return s(9,e)}function x(e){return s(10,e)}function f(e){return s(12,e)}function m(e){return s(11,e)}function y(e,t,r,i){let s=r.value;r.value=(...r)=>{let a=s;if("undefined"!=typeof _native&&_native[t]){let e=_native[t];a=i?(...t)=>i(...t)?e(...t):s(...t):e}return e[t]=a,a(...r)}}y.filter=function(e){return(t,r,i)=>y(t,r,i,e)}},2642:function(e,t,r){r.d(t,{p:()=>o});var i=r(32040),s=r(94763),a=r(20088),n=r(66144),u=r(66403);let l=function(e,t,r,i={}){let a=e();s.Y&&s.Y.HasTags(t)&&s.Y.AddTagsTo(a,s.Y.GetTags(t,!0));let n=(0,u.K)(a),l={};for(let e in n){let s=n[e],u=t[e],h=s.type;if(null!=u&&("uniqueId"!==e||o.AllowLoadingUniqueId))switch(h){case 0:case 6:case 9:case 11:a[e]=u;break;case 1:i.cloneTexturesOnlyOnce&&l[u.uniqueId]?a[e]=l[u.uniqueId]:(a[e]=r||u.isRenderTarget?u:u.clone(),l[u.uniqueId]=a[e]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:a[e]=r?u:u.clone()}}return a};class o{static AppendSerializedAnimations(e,t){if(e.animations){t.animations=[];for(let r=0;r<e.animations.length;r++){let i=e.animations[r];t.animations.push(i.serialize())}}}static Serialize(e,t){t||(t={}),s.Y&&(t.tags=s.Y.GetTags(e));let r=(0,u.K)(e);for(let i in r){let s=r[i],a=s.sourceName||i,n=s.type,u=e[i];if(null!=u&&("uniqueId"!==i||o.AllowLoadingUniqueId))switch(n){case 0:Array.isArray(u)?t[a]=u.slice():t[a]=u;break;case 1:case 3:case 7:case 9:t[a]=u.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:t[a]=u.asArray();break;case 6:case 11:t[a]=u.id}}return t}static ParseProperties(e,t,r,i){i||(i="");let s=(0,u.K)(t);for(let u in s){let l=s[u],h=e[l.sourceName||u],c=l.type;if(null!=h&&("uniqueId"!==u||o.AllowLoadingUniqueId))switch(c){case 0:t[u]=h;break;case 1:r&&(t[u]=o._TextureParser(h,r,i));break;case 2:t[u]=a.v9.FromArray(h);break;case 3:t[u]=o._FresnelParametersParser(h);break;case 4:t[u]=n.I9.FromArray(h);break;case 5:t[u]=n.Pq.FromArray(h);break;case 6:r&&(t[u]=r.getLastMeshById(h));break;case 7:t[u]=o._ColorCurvesParser(h);break;case 8:t[u]=a.ov.FromArray(h);break;case 9:t[u]=o._ImageProcessingConfigurationParser(h);break;case 10:t[u]=n.PT.FromArray(h);break;case 11:r&&(t[u]=r.getCameraById(h));break;case 12:t[u]=n.uq.FromArray(h)}}}static Parse(e,t,r,i=null){let a=e();return s.Y&&s.Y.AddTagsTo(a,t.tags),o.ParseProperties(t,a,r,i),a}static Clone(e,t,r={}){return l(e,t,!1,r)}static Instanciate(e,t){return l(e,t,!0)}}o.AllowLoadingUniqueId=!1,o._ImageProcessingConfigurationParser=e=>{throw(0,i.n)("ImageProcessingConfiguration")},o._FresnelParametersParser=e=>{throw(0,i.n)("FresnelParameters")},o._ColorCurvesParser=e=>{throw(0,i.n)("ColorCurves")},o._TextureParser=(e,t,r)=>{throw(0,i.n)("Texture")}},94763:function(e,t,r){r.d(t,{Y:()=>s});var i=r(99946);class s{static EnableFor(e){e._tags=e._tags||{},e.hasTags=()=>s.HasTags(e),e.addTags=t=>s.AddTagsTo(e,t),e.removeTags=t=>s.RemoveTagsFrom(e,t),e.matchesTagsQuery=t=>s.MatchesQuery(e,t)}static DisableFor(e){delete e._tags,delete e.hasTags,delete e.addTags,delete e.removeTags,delete e.matchesTagsQuery}static HasTags(e){if(!e._tags)return!1;let t=e._tags;for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!0;return!1}static GetTags(e,t=!0){if(!e._tags)return null;if(!t)return e._tags;{let t=[];for(let r in e._tags)Object.prototype.hasOwnProperty.call(e._tags,r)&&!0===e._tags[r]&&t.push(r);return t.join(" ")}}static AddTagsTo(e,t){if(t&&"string"==typeof t)for(let r of t.split(" "))s._AddTagTo(e,r)}static _AddTagTo(e,t){""===(t=t.trim())||"true"===t||"false"===t||t.match(/[\s]/)||t.match(/^([!]|([|]|[&]){2})/)||(s.EnableFor(e),e._tags[t]=!0)}static RemoveTagsFrom(e,t){if(!s.HasTags(e))return;let r=t.split(" ");for(let t in r)s._RemoveTagFrom(e,r[t])}static _RemoveTagFrom(e,t){delete e._tags[t]}static MatchesQuery(e,t){return void 0===t||(""===t?s.HasTags(e):i.Z.Eval(t,t=>s.HasTags(e)&&e._tags[t]))}}}}]);