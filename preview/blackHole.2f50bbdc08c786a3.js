/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

(()=>{"use strict";var e,t,r,a,n,o,i={59883:function(e,t,r){r.d(t,{G:()=>o,k:()=>i});var a,n=r(42917),o=((a={}).INVALID_JSON="INVALID_JSON",a.INVALID_SAVE="INVALID_SAVE",a.INVALID_STORAGE_FORMAT="INVALID_STORAGE_FORMAT",a);function i(e){switch(e.type){case"INVALID_JSON":return n.A.t("notifications:invalidSaveFileJson");case"INVALID_SAVE":return n.A.t("notifications:invalidSaveFile");case"INVALID_STORAGE_FORMAT":return n.A.t("notifications:invalidStorageFormat")}}},28248:function(e,t,r){r.d(t,{nc:()=>s,pX:()=>k});var a,n,o=r(47526),i=r(60251),c=r(90584),u=r(58934),l=r(8330),d=r(59883),s={STELLAR_OBJECT:0,PLANETARY_MASS_OBJECT:1,ANOMALY:2,ORBITAL_FACILITY:3},f=o.Ikc({objectType:o.k5n(s),objectIndex:o.aig()}),p=o.Ikc((a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){var a;a=r[t],t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a})}return e}({},f.shape),n=n={starSystemCoordinates:c.Y},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r.push.apply(r,a)}return r})(Object(n)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(n,e))}),a)),b={WANDERER:0},m=o.Ikc({currentFuel:o.aig(),maxFuel:o.aig()}),y=o.Ikc({fuelPerSecond:o.aig().default(1)}),v=o.Ikc({id:o.uRe().default(function(){return crypto.randomUUID()}),name:o.YjP().default("Wanderer"),type:o.k5n(b).default(b.WANDERER),fuelTanks:o.YOg(m).default([{currentFuel:100,maxFuel:100}]),fuelScoop:o.mee(y).nullable().default({fuelPerSecond:2.5})}),g=o.Ikc({objectId:p,discoveryTimestamp:o.aig().default(0),explorerName:o.YjP().default("Unknown")}),h=o.Ikc({version:o.YjP().default(l.rE),timestamp:o.aig().default(function(){return Date.now()}),player:o.Ikc({uuid:o.YjP().default(function(){return crypto.randomUUID()}),name:o.YjP().default("Python"),balance:o.aig().default(1e4),creationDate:o.YjP().default(new Date().toISOString()),timePlayedSeconds:o.aig().default(0),visitedSystemHistory:o.YOg(c.Y).default([]),discoveries:o.Ikc({local:o.YOg(g).default([]),uploaded:o.YOg(g).default([])}).default({local:[],uploaded:[]}),currentItinerary:o.YOg(c.Y).default([]),systemBookmarks:o.YOg(c.Y).default([]),currentMissions:o.YOg(o.L5J()).default([]),completedMissions:o.YOg(o.L5J()).default([]),spaceShips:o.YOg(v).default([v.parse({})]),tutorials:i.wk.default({flightCompleted:!1,stationLandingCompleted:!1,starMapCompleted:!1,fuelScoopingCompleted:!1})}),universeCoordinates:o.Ikc({universeObjectId:o.Ikc({objectType:o.k5n(s),objectIndex:o.aig(),starSystemCoordinates:c.Y}),positionX:o.aig().default(0),positionY:o.aig().default(0),positionZ:o.aig().default(0),rotationQuaternionX:o.aig().default(0),rotationQuaternionY:o.aig().default(0),rotationQuaternionZ:o.aig().default(0),rotationQuaternionW:o.aig().default(1)}),padNumber:o.aig().optional()});function k(e){var t=h.safeParse(e);return t.success?(0,u.ok)(t.data):(0,u._q)({type:d.G.INVALID_SAVE,content:t.error})}},66403:function(e,t,r){r.d(t,{Eq:()=>d,oC:()=>l});var a=r(47526),n=r(17686),o=r(25650),i=r(7126),c=r(4258),u=a.Ikc({id:a.uRe(),name:a.YjP(),components:a.Ikc({primary:a.Ikc({warpDrive:c.i,thrusters:i.Y,fuelTank:n.a}),optional:a.YOg(o.B)})}).extend({type:a.euz("WANDERER"),components:a.Ikc({primary:a.Ikc({warpDrive:c.i.nullable(),thrusters:i.Y.nullable(),fuelTank:n.a.nullable()}),optional:a.PVZ([o.B.nullable(),o.B.nullable(),o.B.nullable()])})});a.gMt("type",[u]);var l=a.gMt("type",[u]);function d(){return u.parse({type:"WANDERER",name:"Wanderer",id:crypto.randomUUID(),components:{primary:{warpDrive:{type:"warpDrive",size:3,quality:1},thrusters:{type:"thrusters",size:3,quality:1},fuelTank:{type:"fuelTank",size:2,quality:1,currentFuel01:1}},optional:[null,{type:"fuelScoop",size:2,quality:1},{type:"discoveryScanner",size:2,quality:1}]}})}},58943:function(e,t,r){r.a(e,async function(e,t){try{r(34424);var a=r(73109),n=r(41330),o=r(61800),i=r(95237),c=await i.K.CreateAsync();c.setAutoSaveEnabled(!1);var u=c.starSystemView,l=u.scene,d=(0,a.p)("blackHole",42,"Gargantua",[]),s=(0,n.k)("miller",47,"Miller",[d]);s.orbit.semiMajorAxis=10*d.accretionDiskRadius,s.orbit.inclination=.2;var f={name:"Black Hole Demo",coordinates:{starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},stellarObjects:[d],planets:[s],satellites:[],anomalies:[],orbitalFacilities:[]};c.backend.universe.registerCustomSystem(f);var p=await u.loadStarSystem(f);await c.init(!0),await u.switchToDefaultControls(!0);var b=p.getStellarObjects()[0];u.getDefaultControls().speed=b.getBoundingRadius(),(0,o.Ez)(l.getActiveControls(),b,p,5),t()}catch(e){t(e)}},1)},55338:function(e,t,r){r.d(t,{Q:()=>o});var a=r(76945),n=r(42917);function o(e,t){var r=document.createElement("dialog");return r.innerHTML='\n        <form method="dialog">\n            <p>'.concat(e,'</p>\n            <menu>\n                <button value="cancel">').concat(n.A.t("common:cancel"),'</button>\n                <button value="ok">').concat(n.A.t("common:confirm"),"</button>\n            </menu>\n        </form>\n    "),document.body.appendChild(r),r.showModal(),new Promise(function(e){r.addEventListener("close",function(){t.playNow(a.Wo.CLICK),e("ok"===r.returnValue),r.remove()})})}},80821:function(e,t,r){r.d(t,{T:()=>o});var a=r(76945),n=r(42917);function o(e,t,r){var o=document.createElement("dialog");return o.innerHTML='\n        <form method="dialog">\n            <p>'.concat(e,'</p>\n            <input type="text" value="').concat(t,'">\n            <menu>\n                <button type="reset" value="cancel">').concat(n.A.t("common:cancel"),'</button>\n                <button type="submit" value="ok">').concat(n.A.t("common:ok"),"</button>\n            </menu>\n        </form>\n    "),document.body.appendChild(o),o.showModal(),new Promise(function(e){var t=o.querySelector("input");t.focus(),t.select(),t.addEventListener("keydown",function(e){e.stopPropagation()}),o.addEventListener("reset",function(){r.playNow(a.Wo.CLICK),e(null),o.remove()}),o.addEventListener("close",function(){r.playNow(a.Wo.CLICK),"ok"===o.returnValue?e(t.value):e(null),o.remove()})})}},83472:function(e,t,r){r.d(t,{W:()=>a});function a(e){try{return window.btoa(encodeURIComponent(e))}catch(e){return null}}},54600:function(e,t,r){r.d(t,{F4:()=>o,ep:()=>c,hz:()=>i});var a=r(82748),n=r(97678);function o(e){return Math.pow(e/a.G3,.78)*a.Ow}function i(e,t){return 2*Math.PI*Math.sqrt(e/t)}function c(e,t,r){var a,o=(a=(0,n.F1)(100),e<=0?0:1/(1/a+2044761436301033e-19*Math.log(101325/e))),i=(0,n.F1)(0);return!(e<.05)&&!(o<i)&&!(t>o)&&!(r<i)}}},c={};function u(e){var t=c[e];if(void 0!==t)return t.exports;var r=c[e]={exports:{}};return i[e](r,r.exports,u),r.exports}u.m=i,d=(l="function"==typeof Symbol)?Symbol("webpack queues"):"__webpack_queues__",s=u.aE=l?Symbol("webpack exports"):"__webpack_exports__",f=l?Symbol("webpack error"):"__webpack_error__",p=l?Symbol("webpack done"):"__webpack_done__",b=u.zS=l?Symbol("webpack defer"):"__webpack_defer__",m=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},u.a=(e,t,r)=>{r&&((a=[]).d=-1);var a,n,o,i,l=new Set,y=e.exports,v=new Promise((e,t)=>{i=t,o=e});v[s]=y,v[d]=e=>{a&&e(a),l.forEach(e),v.catch(()=>{})},e.exports=v,t(e=>{n=e.map(e=>{if(null!==e&&"object"==typeof e){if(!e[d]&&e[b]){var t=e[b];if(!t.some(e=>{var t=c[e];return!t||!1===t[p]}))return e;var r=e;e={then(e){Promise.all(t.map(u)).then(()=>e(r))}}}if(e[d])return e;if(e.then){var a=[];a.d=0,e.then(e=>{n[s]=e,m(a)},e=>{n[f]=e,m(a)});var n={};return n[b]=!1,n[d]=e=>e(a),n}}var o={};return o[d]=()=>{},o[s]=e,o});var t,r=()=>n.map(e=>{if(e[b])return e;if(e[f])throw e[f];return e[s]}),o=new Promise(e=>{(t=()=>e(r)).r=0;var o=e=>e!==a&&!l.has(e)&&(l.add(e),e&&!e.d&&(t.r++,e.push(t)));n.map(e=>e[b]||e[d](o))});return t.r?o:r()},e=>(e?i(v[f]=e):o(y),m(a),v[p]=!0)),a&&a.d<0&&(a.d=0)},u.d=(e,t)=>{for(var r in t)u.o(t,r)&&!u.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},u.f={},u.e=e=>Promise.all(Object.keys(u.f).reduce((t,r)=>(u.f[r](e,t),t),[])),u.k=e=>""+e+".css",u.u=e=>""+e+"."+({1047:"f9870ba2cb35a4c3",1126:"c4bc4f6376d16eeb",1197:"4a4dfbcffee364c2",1203:"f09154a4964ca1ac",1259:"1263d26220352304",1267:"46e683738abd28df",1281:"3ff3fd4b6231532d",1291:"fa6da1c953de2ddf",1644:"5110b8ab76187d05",171:"0dcf6eb2bc28372f",1889:"188d7628f51b495d",2132:"93a36e0afbcd9e2c",2168:"e3b06286c4c004e6",2209:"7df8ed9b31c3c743",2398:"dfae1487f83e637f",2745:"6c4b2ea66cb1e728",2888:"727bfc69633ecb2f",3313:"96307e0a60b4fa77",3634:"0e052b4584021251",371:"b6c66ccfcd858c16",3988:"d9d33964229b9ba8",4323:"d8c927cfbee63055",4348:"b5afeca1a07064d0",4411:"786af4e3281b4f9b",4487:"2761dfc0428b51ee",4663:"90578b109cfdf18e",488:"2d8e4b167e1f0b27",5034:"f6b386c498838fe7",5123:"82d635288dcfd0c8",5264:"3292eebda0a110e4",5355:"9ca8d71f3f8aa344",5511:"25007e5e7f7613af",6026:"178d566f5cfab677",6235:"3d8b6ab338b1e422",6484:"c8df4ff4e5d4634b",6540:"0992effc37b601a9",6557:"3ce387ce54df9c93",6577:"a5dbaa132fb180ef",6967:"4aa4f719c745d4b1",8214:"8b4f74cc79a0e1eb",8399:"38eaa5b68c6e7f1e",8429:"0711af8bd0e87eb7",863:"58a29d9a3ee53ef7",8956:"0f32b714e80afd89",8968:"d41e8143cae9af5a",9768:"57572cf96ab4c41c"})[e]+".js",u.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),y={},u.l=function(e,t,r,a){if(y[e])return void y[e].push(t);if(void 0!==r)for(var n,o,i=document.getElementsByTagName("script"),c=0;c<i.length;c++){var l=i[c];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")=="@cosmos-journeyer/game:"+r){n=l;break}}n||(o=!0,(n=document.createElement("script")).timeout=120,u.nc&&n.setAttribute("nonce",u.nc),n.setAttribute("data-webpack","@cosmos-journeyer/game:"+r),n.src=e),y[e]=[t];var d=function(t,r){n.onerror=n.onload=null,clearTimeout(s);var a=y[e];if(delete y[e],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach(function(e){return e(r)}),t)return t(r)},s=setTimeout(d.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=d.bind(null,n.onerror),n.onload=d.bind(null,n.onload),o&&document.head.appendChild(n)},u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},v=[],u.O=(e,t,r,a)=>{if(t){a=a||0;for(var n=v.length;n>0&&v[n-1][2]>a;n--)v[n]=v[n-1];v[n]=[t,r,a];return}for(var o=1/0,n=0;n<v.length;n++){for(var[t,r,a]=v[n],i=!0,c=0;c<t.length;c++)(!1&a||o>=a)&&Object.keys(u.O).every(e=>u.O[e](t[c]))?t.splice(c--,1):(i=!1,a<o&&(o=a));if(i){v.splice(n--,1);var l=r();void 0!==l&&(e=l)}}return e},u.rv=()=>"1.6.5",u.g.importScripts&&(g=u.g.location+"");var l,d,s,f,p,b,m,y,v,g,h=u.g.document;if(!g&&h&&(h.currentScript&&"SCRIPT"===h.currentScript.tagName.toUpperCase()&&(g=h.currentScript.src),!g)){var k=h.getElementsByTagName("script");if(k.length)for(var w=k.length-1;w>-1&&(!g||!/^http(s?):/.test(g));)g=k[w--].src}if(!g)throw Error("Automatic publicPath is not supported in this browser");u.p=g=g.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e={4787:0},r="data-webpack-loading",(t=(t,r)=>{e[r]=0})(u.m,0,"4787"),u.f.css=(a,n,o)=>{var i=u.o(e,a)?e[a]:void 0;if(0!==i)if(i)n.push(i[2]);else if(4787==a){var c=new Promise(function(t,r){i=e[a]=[t,r]});n.push(i[2]=c);var l=u.p+u.k(a),d=Error(),s=function(r){if(u.o(e,a)&&(0!==(i=e[a])&&(e[a]=void 0),i))if("load"!==r.type){var n=r&&r.type,o=r&&r.target&&r.target.src;d.message="Loading css chunk "+a+" failed.\n("+n+": "+o+")",d.name="ChunkLoadError",d.type=n,d.request=o,i[1](d)}else t(u.m,a),i[0]()};"undefined"!=typeof document?((e,t,a,n,o)=>{var i,c,l="chunk-"+e;if(!n){for(var d=document.getElementsByTagName("link"),s=0;s<d.length;s++){var f=d[s],p=f.getAttribute("href")||f.href;if(p&&!p.startsWith(u.p)&&(p=u.p+(p.startsWith("/")?p.slice(1):p)),"stylesheet"==f.rel&&(p&&p.startsWith(t)||f.getAttribute("data-webpack")=="@cosmos-journeyer/game:"+l)){i=f;break}}if(!a)return}i||(c=!0,i=document.createElement("link"),u.nc&&i.setAttribute("nonce",u.nc),i.setAttribute("data-webpack","@cosmos-journeyer/game:"+l),i.setAttribute(r,1),i.rel="stylesheet",i.href=t);var b=(e,t)=>{if(i.onerror=i.onload=null,i.removeAttribute(r),clearTimeout(m),t&&"load"!=t.type&&i.parentNode.removeChild(i),a(t),e)return e(t)};if(i.getAttribute(r)){var m=setTimeout(b.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=b.bind(null,i.onerror),i.onload=b.bind(null,i.onload)}else b(void 0,{type:"load",target:i});return n&&n.getAttribute("fetchpriority")&&i.setAttribute("fetchpriority",n.getAttribute("fetchpriority")),n?document.head.insertBefore(i,n):c&&document.head.appendChild(i)})(a,l,s,void 0,0):s({type:"load"})}else e[a]=0},u.b=document.baseURI||self.location.href,a={3087:0},u.f.j=function(e,t){var r=u.o(a,e)?a[e]:void 0;if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((t,n)=>r=a[e]=[t,n]);t.push(r[2]=n);var o=u.p+u.u(e),i=Error();u.l(o,function(t){if(u.o(a,e)&&(0!==(r=a[e])&&(a[e]=void 0),r)){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",i.name="ChunkLoadError",i.type=n,i.request=o,r[1](i)}},"chunk-"+e,e)}},u.O.j=e=>0===a[e],n=(e,t)=>{var r,n,[o,i,c]=t,l=0;if(o.some(e=>0!==a[e])){for(r in i)u.o(i,r)&&(u.m[r]=i[r]);if(c)var d=c(u)}for(e&&e(t);l<o.length;l++)n=o[l],u.o(a,n)&&a[n]&&a[n][0](),a[n]=0;return u.O(d)},(o=globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o)),u.ruid="bundler=rspack@1.6.5";var O=u.O(void 0,["6267","3195","5299","8505","4260","723","8795","4166","5155","4787","3808"],()=>u(58943));O=u.O(O)})();