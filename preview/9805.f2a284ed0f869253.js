"use strict";(globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).push([["9805"],{25740:function(t,e,o){o.r(e),o.d(e,{FlowGraphJsonPointerParserBlock:()=>u});var i=o(82352),r=o(3481),n=o(66717),a=o(66144),s=o(20088),l=o(49444);class u extends l.r{constructor(t){super(r.Vv,t),this.config=t,this.object=this.registerDataOutput("object",r.Vv),this.propertyName=this.registerDataOutput("propertyName",r.Vv),this.setterFunction=this.registerDataOutput("setFunction",r.Vv,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",r.Vv,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",r.Vv,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new i.H(t.jsonPointer,this)}_doOperation(t){let e=this.templateComponent.getAccessor(this.config.pathConverter,t),o=e.info.get(e.object),i=e.info.getTarget?.(e.object),r=e.info.getPropertyName?.[0](e.object);if(i)this.object.setValue(i,t),r&&this.propertyName.setValue(r,t);else throw Error("Object is undefined");return o}_setPropertyValue(t,e,o,i){let r=this.templateComponent.getAccessor(this.config.pathConverter,i),n=r.info.type;n.startsWith("Color")&&(o=c(o,n)),r.info.set?.(o,r.object)}_getPropertyValue(t,e,o){let i=this.templateComponent.getAccessor(this.config.pathConverter,o),r=i.info.type,n=i.info.get(i.object);return r.startsWith("Color")?function(t){if(t instanceof s.v9)return new a.Pq(t.r,t.g,t.b);if(t instanceof s.ov)return new a.IU(t.r,t.g,t.b,t.a);throw Error("Invalid color type")}(n):n}_getInterpolationAnimationPropertyInfo(t,e,o){let i=this.templateComponent.getAccessor(this.config.pathConverter,o);return(t,e,o,r)=>{let n=[],a=i.info.type;return a.startsWith("Color")&&(t=t.map(t=>({frame:t.frame,value:c(t.value,a)}))),i.info.interpolation?.forEach((e,a)=>{let s=i.info.getPropertyName?.[a](i.object)||"Animation-interpolation-"+a,l=t;for(let a of(o!==e.type&&(l=t.map(t=>({frame:t.frame,value:e.getValue(void 0,t.value.asArray?t.value.asArray():[t.value],0,1)}))),e.buildAnimations(i.object,s,60,l)))r&&a.babylonAnimation.setEasingFunction(r),n.push(a.babylonAnimation)}),n}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function c(t,e){return t.getClassName().startsWith("Color")?t:"Color3"===e?new s.v9(t.x,t.y,t.z):"Color4"===e?new s.ov(t.x,t.y,t.z,t.w):t}(0,n.Y5)("FlowGraphJsonPointerParserBlock",u)},49444:function(t,e,o){o.d(e,{r:()=>s});var i=o(15559),r=o(3481);let n="cachedOperationValue",a="cachedExecutionId";class s extends i.e{constructor(t,e){super(e),this.value=this.registerDataOutput("value",t),this.isValid=this.registerDataOutput("isValid",r.RI)}_updateOutputs(t){let e=t._getExecutionVariable(this,a,-1),o=t._getExecutionVariable(this,n,null);if(null!=o&&e===t.executionId)this.isValid.setValue(!0,t),this.value.setValue(o,t);else try{let e=this._doOperation(t);if(null==e)return void this.isValid.setValue(!1,t);t._setExecutionVariable(this,n,e),t._setExecutionVariable(this,a,t.executionId),this.value.setValue(e,t),this.isValid.setValue(!0,t)}catch(e){this.isValid.setValue(!1,t)}}}},82352:function(t,e,o){o.d(e,{H:()=>a});var i=o(31897),r=o(3481);let n=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class a{constructor(t,e){this.path=t,this.ownerBlock=e,this.templatedInputs=[];let o=n.exec(t);const a=new Set;for(;o;){const[,s]=o;if(a.has(s))throw Error("Duplicate template variable detected.");a.add(s),this.templatedInputs.push(e.registerDataInput(s,r.x2,new i.P(0))),o=n.exec(t)}}getAccessor(t,e){let o=this.path;for(let t of this.templatedInputs){let i=t.getValue(e).value;if("number"!=typeof i||i<0)throw Error("Invalid value for templated input.");o=o.replace(`{${t.name}}`,i.toString())}return t.convert(o)}}}}]);