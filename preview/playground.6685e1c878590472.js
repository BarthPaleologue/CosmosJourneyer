/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

(()=>{"use strict";var e,t,n,r,a,o,i={59883:function(e,t,n){n.d(t,{G:()=>o,k:()=>i});var r,a=n(42917),o=((r={}).INVALID_JSON="INVALID_JSON",r.INVALID_SAVE="INVALID_SAVE",r.INVALID_STORAGE_FORMAT="INVALID_STORAGE_FORMAT",r);function i(e){switch(e.type){case"INVALID_JSON":return a.A.t("notifications:invalidSaveFileJson");case"INVALID_SAVE":return a.A.t("notifications:invalidSaveFile");case"INVALID_STORAGE_FORMAT":return a.A.t("notifications:invalidStorageFormat")}}},28248:function(e,t,n){n.d(t,{nc:()=>f,pX:()=>w});var r,a,o=n(47526),i=n(60251),s=n(90584),l=n(58934),u=n(8330),c=n(59883),f={STELLAR_OBJECT:0,PLANETARY_MASS_OBJECT:1,ANOMALY:2,ORBITAL_FACILITY:3},d=o.Ikc({objectType:o.k5n(f),objectIndex:o.aig()}),p=o.Ikc((r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},d.shape),a=a={starSystemCoordinates:s.Y},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))}),r)),h={WANDERER:0},m=o.Ikc({currentFuel:o.aig(),maxFuel:o.aig()}),y=o.Ikc({fuelPerSecond:o.aig().default(1)}),b=o.Ikc({id:o.uRe().default(function(){return crypto.randomUUID()}),name:o.YjP().default("Wanderer"),type:o.k5n(h).default(h.WANDERER),fuelTanks:o.YOg(m).default([{currentFuel:100,maxFuel:100}]),fuelScoop:o.mee(y).nullable().default({fuelPerSecond:2.5})}),v=o.Ikc({objectId:p,discoveryTimestamp:o.aig().default(0),explorerName:o.YjP().default("Unknown")}),g=o.Ikc({version:o.YjP().default(u.rE),timestamp:o.aig().default(function(){return Date.now()}),player:o.Ikc({uuid:o.YjP().default(function(){return crypto.randomUUID()}),name:o.YjP().default("Python"),balance:o.aig().default(1e4),creationDate:o.YjP().default(new Date().toISOString()),timePlayedSeconds:o.aig().default(0),visitedSystemHistory:o.YOg(s.Y).default([]),discoveries:o.Ikc({local:o.YOg(v).default([]),uploaded:o.YOg(v).default([])}).default({local:[],uploaded:[]}),currentItinerary:o.YOg(s.Y).default([]),systemBookmarks:o.YOg(s.Y).default([]),currentMissions:o.YOg(o.L5J()).default([]),completedMissions:o.YOg(o.L5J()).default([]),spaceShips:o.YOg(b).default([b.parse({})]),tutorials:i.wk.default({flightCompleted:!1,stationLandingCompleted:!1,starMapCompleted:!1,fuelScoopingCompleted:!1})}),universeCoordinates:o.Ikc({universeObjectId:o.Ikc({objectType:o.k5n(f),objectIndex:o.aig(),starSystemCoordinates:s.Y}),positionX:o.aig().default(0),positionY:o.aig().default(0),positionZ:o.aig().default(0),rotationQuaternionX:o.aig().default(0),rotationQuaternionY:o.aig().default(0),rotationQuaternionZ:o.aig().default(0),rotationQuaternionW:o.aig().default(1)}),padNumber:o.aig().optional()});function w(e){var t=g.safeParse(e);return t.success?(0,l.ok)(t.data):(0,l._q)({type:c.G.INVALID_SAVE,content:t.error})}},67556:function(e,t,n){n.d(t,{QU:()=>d});var r=n(67902),a=n(29743),o=n(52628),i=(0,a.p)(o.w.POWER_PLAY_SEED),s=0,l=(0,r.makeNoise3D)(function(){return i(s++)}),u=(0,a.p)(o.w.POWER_PLAY_SEED+598),c=0,f=(0,r.makeNoise3D)(function(){return u(c++)});function d(e){var t,n;return{materialistSpiritualist:(t=e.x,.5*l(.2*t,.2*e.y,.2*e.z)+.5),capitalistCommunist:(n=e.x,.5*f(.2*n,.2*e.y,.2*e.z)+.5)}}},66403:function(e,t,n){n.d(t,{Eq:()=>c,oC:()=>u});var r=n(47526),a=n(17686),o=n(25650),i=n(7126),s=n(4258),l=r.Ikc({id:r.uRe(),name:r.YjP(),components:r.Ikc({primary:r.Ikc({warpDrive:s.i,thrusters:i.Y,fuelTank:a.a}),optional:r.YOg(o.B)})}).extend({type:r.euz("WANDERER"),components:r.Ikc({primary:r.Ikc({warpDrive:s.i.nullable(),thrusters:i.Y.nullable(),fuelTank:a.a.nullable()}),optional:r.PVZ([o.B.nullable(),o.B.nullable(),o.B.nullable()])})});r.gMt("type",[l]);var u=r.gMt("type",[l]);function c(){return l.parse({type:"WANDERER",name:"Wanderer",id:crypto.randomUUID(),components:{primary:{warpDrive:{type:"warpDrive",size:3,quality:1},thrusters:{type:"thrusters",size:3,quality:1},fuelTank:{type:"fuelTank",size:2,quality:1,currentFuel01:1}},optional:[null,{type:"fuelScoop",size:2,quality:1},{type:"discoveryScanner",size:2,quality:1}]}})}},76945:function(e,t,n){n.d(t,{bk:()=>i,Wo:()=>o});var r,a=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"play",value:function(){}},{key:"setVolume",value:function(){}},{key:"setMaskFactor",value:function(){}},{key:"getMask",value:function(){return 0}},{key:"dispose",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}(),o=((r={})[r.CLICK=0]="CLICK",r[r.HOVER=1]="HOVER",r[r.SUCCESS=2]="SUCCESS",r[r.ERROR=3]="ERROR",r[r.WARNING=4]="WARNING",r[r.INFO=5]="INFO",r[r.ENABLE_ORBIT_DISPLAY=6]="ENABLE_ORBIT_DISPLAY",r[r.DISABLE_ORBIT_DISPLAY=7]="DISABLE_ORBIT_DISPLAY",r[r.TARGET_LOCK=8]="TARGET_LOCK",r[r.TARGET_UNLOCK=9]="TARGET_UNLOCK",r[r.ITINERARY_COMPUTED=10]="ITINERARY_COMPUTED",r[r.OPEN_PAUSE_MENU=11]="OPEN_PAUSE_MENU",r[r.ENABLE_WARP_DRIVE=12]="ENABLE_WARP_DRIVE",r[r.DISABLE_WARP_DRIVE=13]="DISABLE_WARP_DRIVE",r[r.ACCELERATING_WARP_DRIVE=14]="ACCELERATING_WARP_DRIVE",r[r.DECELERATING_WARP_DRIVE=15]="DECELERATING_WARP_DRIVE",r[r.HYPER_SPACE=16]="HYPER_SPACE",r[r.THRUSTER=17]="THRUSTER",r),i=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"playNow",value:function(){}},{key:"enqueuePlay",value:function(){}},{key:"createInstance",value:function(){return Promise.resolve(new a)}},{key:"freeInstance",value:function(){}},{key:"setInstanceMask",value:function(){}},{key:"update",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()},12014:function(e,t,n){n.d(t,{bm:()=>i,g9:()=>s,yT:()=>o});var r,a,o=((r={})[r.CHARLOTTE=0]="CHARLOTTE",r),i=((a={})[a.INITIATING_PLANETARY_LANDING=0]="INITIATING_PLANETARY_LANDING",a[a.LANDING_REQUEST_GRANTED=1]="LANDING_REQUEST_GRANTED",a[a.LANDING_COMPLETE=2]="LANDING_COMPLETE",a[a.MISSION_COMPLETE=3]="MISSION_COMPLETE",a[a.NEW_DISCOVERY=4]="NEW_DISCOVERY",a[a.CANNOT_ENGAGE_WARP_DRIVE=5]="CANNOT_ENGAGE_WARP_DRIVE",a[a.WARP_DRIVE_EMERGENCY_SHUT_DOWN=6]="WARP_DRIVE_EMERGENCY_SHUT_DOWN",a[a.WARP_DRIVE_DISENGAGED=7]="WARP_DRIVE_DISENGAGED",a[a.ENGAGING_WARP_DRIVE=8]="ENGAGING_WARP_DRIVE",a[a.FUEL_SCOOPING=9]="FUEL_SCOOPING",a[a.FUEL_SCOOPING_COMPLETE=10]="FUEL_SCOOPING_COMPLETE",a[a.LOW_FUEL_WARNING=11]="LOW_FUEL_WARNING",a),s=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"sayNow",value:function(){}},{key:"enqueueSay",value:function(){}},{key:"update",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()},44175:function(e,t,n){function r(e,t){var n=[];if(e.children.forEach(function(e,r){if("x"!==r&&"y"!==r){var a,o,i=e.name;i=i.replace("key:",""),i=null!=(o=null==t||null==(a=t.get(i))?void 0:a.toUpperCase())?o:i,n.push([r,i])}}),void 0===n[0]||void 0===n[1]||void 0===n[2]||void 0===n[3])throw Error("DPadComposite keys are undefined");return[n[2],n[0],n[3],n[1]]}function a(e,t){var n=[];return e.children.forEach(function(e,r){var a,o,i=e.name;i=i.replace("key:",""),i=null!=(o=null==t||null==(a=t.get(i))?void 0:a.toUpperCase())?o:i,n.push([r,i])}),n}function o(e,t){return e.action.bindings.map(function(e){var n,r,a,o;return n=e.control,o=(o=n.name).replace("key:",""),o=null!=(a=null==t||null==(r=t.get(o))?void 0:r.toUpperCase())?a:o})}n.d(t,{Fd:()=>r,Lc:()=>a,hg:()=>o})},61800:function(e,t,n){n.d(t,{Ez:()=>o}),n(52754);var r=n(97782),a=n(16663);function o(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=function(e,t){var n=-1,r=t[0];if(void 0===r)throw Error("no bodieees !");var a=!0,o=!1,i=void 0;try{for(var s,l=t[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value,c=e.subtract(u.getTransform().getAbsolutePosition()).length();(-1===n||c<n)&&(r=u,n=c)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return r}(t.getTransform().getAbsolutePosition(),n.getStellarObjects());if(i===t)e.getTransform().setAbsolutePosition(t.getTransform().getAbsolutePosition().add(new r.Pq(0,.2,1).scaleInPlace(t.getBoundingRadius()*o)));else{var s=t.getTransform().getAbsolutePosition().subtract(i.getTransform().getAbsolutePosition()),l=s.length();s.scaleInPlace(1/l);var u=i.getTransform().getAbsolutePosition().add(s.scale(l-o*t.getBoundingRadius()));e.getTransform().setAbsolutePosition(u)}(0,a.t5)(e.getTransform(),t.getTransform().getAbsolutePosition(),e.getTransform().getScene().useRightHandedSystem)}},16663:function(e,t,n){n.d(t,{CL:()=>f,H7:()=>d,Pf:()=>c,Tl:()=>i,e$:()=>s,hQ:()=>l,oh:()=>p,rD:()=>u,t5:()=>o});var r=n(29608),a=n(97782);function o(e,t,n){e.lookAt(t),n&&e.rotate(r._0.Y,Math.PI)}function i(e,t){e.setAbsolutePosition(e.getAbsolutePosition().add(t)),e.computeWorldMatrix(!0)}function s(e,t,n){e.rotate(t,n,r.$x.WORLD)}function l(e){if(null===e.rotationQuaternion)throw Error("Null quaternion for ".concat(e.name));return e.rotationQuaternion}function u(e,t){e.rotationQuaternion=t,e.computeWorldMatrix(!0)}function c(e,t){if(!t.equalsWithEpsilon(e.up,1e-7)){var n=e.up;s(e,a.Pq.Cross(t,n),-Math.acos(a.Pq.Dot(t,n)))}}function f(e,t){s(e,e.forward,t)}function d(e,t){s(e,e.right,t)}function p(e,t){s(e,e.up,t)}},55338:function(e,t,n){n.d(t,{Q:()=>o});var r=n(76945),a=n(42917);function o(e,t){var n=document.createElement("dialog");return n.innerHTML='\n        <form method="dialog">\n            <p>'.concat(e,'</p>\n            <menu>\n                <button value="cancel">').concat(a.A.t("common:cancel"),'</button>\n                <button value="ok">').concat(a.A.t("common:confirm"),"</button>\n            </menu>\n        </form>\n    "),document.body.appendChild(n),n.showModal(),new Promise(function(e){n.addEventListener("close",function(){t.playNow(r.Wo.CLICK),e("ok"===n.returnValue),n.remove()})})}},80821:function(e,t,n){n.d(t,{T:()=>o});var r=n(76945),a=n(42917);function o(e,t,n){var o=document.createElement("dialog");return o.innerHTML='\n        <form method="dialog">\n            <p>'.concat(e,'</p>\n            <input type="text" value="').concat(t,'">\n            <menu>\n                <button type="reset" value="cancel">').concat(a.A.t("common:cancel"),'</button>\n                <button type="submit" value="ok">').concat(a.A.t("common:ok"),"</button>\n            </menu>\n        </form>\n    "),document.body.appendChild(o),o.showModal(),new Promise(function(e){var t=o.querySelector("input");t.focus(),t.select(),t.addEventListener("keydown",function(e){e.stopPropagation()}),o.addEventListener("reset",function(){n.playNow(r.Wo.CLICK),e(null),o.remove()}),o.addEventListener("close",function(){n.playNow(r.Wo.CLICK),"ok"===o.returnValue?e(t.value):e(null),o.remove()})})}},32634:function(e,t,n){n.d(t,{e:()=>i});var r=n(76945),a=n(52628);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n,i){var s=e[0];if(void 0===s)return Promise.resolve(null);var l=new Promise(function(e){V=e}),u=document.createElement("div");u.style.position="fixed",u.style.inset="0",u.style.display="flex",u.style.alignItems="center",u.style.justifyContent="center",u.style.background="rgba(0, 0, 0, 0.2)",u.style.zIndex="1000",u.style.pointerEvents="auto",u.tabIndex=-1;var c=null!=(H=null==i?void 0:i.useVirtualCursor)?H:null!==document.pointerLockElement;u.style.cursor=c?"none":"default";var f=function(e,t,n){return Math.min(Math.max(e,t),n)},d="http://www.w3.org/2000/svg",p=getComputedStyle(document.documentElement).getPropertyValue("--accent-color-dark").trim(),h=2*Math.PI/e.length,m=-Math.PI/2,y="radial-choice-".concat(Math.random().toString(36).slice(2)),b=getComputedStyle(document.documentElement).getPropertyValue("--accent-color").trim(),v=getComputedStyle(document.documentElement).getPropertyValue("--accent-color-light").trim(),g=document.createElement("div");g.style.position="relative",g.style.width="".concat(500,"px"),g.style.height="".concat(500,"px"),g.style.borderRadius="50%",g.style.boxShadow="0 0 25px rgba(0, 0, 0, 0.6)",g.style.display="flex",g.style.alignItems="center",g.style.justifyContent="center",u.appendChild(g);var w=document.createElementNS(d,"svg");w.setAttribute("viewBox","0 0 ".concat(500," ").concat(500)),w.style.width="100%",w.style.height="100%",w.style.position="absolute",w.style.inset="0",g.appendChild(w);var P=document.createElementNS(d,"defs");w.appendChild(P);var S=document.createElement("div");S.style.color="white",S.style.fontFamily=a.w.MAIN_FONT,S.style.fontSize="2em",S.style.textAlign="center",S.style.pointerEvents="none",S.style.maxWidth="60%",S.style.zIndex="2",g.appendChild(S);var R=[],A=0,C=function(t){var n;return null!=(n=e[t])?n:s},x=function(e,t){var n=g.getBoundingClientRect();return{x:e-(n.left+n.width/2),y:t-(n.top+n.height/2)}},T=function(n){A=(n+e.length)%e.length,R.forEach(function(e,t){var n=e.path,r=e.label,a=t===A;n.style.fill=a?v:b,r.style.color="white",r.style.textShadow=a?"0 0 8px rgba(255, 255, 255, 0.6)":"none"}),S.textContent=t(C(A))},E=function(e,t){var n=x(e,t),r=n.x,a=n.y,o=A,i=1/0;R.forEach(function(e,t){var n=e.center,s=r-n.x,l=a-n.y,u=s*s+l*l;u<i&&(i=u,o=t)}),o!==A&&T(o)},O=function(){u.removeEventListener("keydown",_),u.removeEventListener("click",M),u.removeEventListener("mousemove",D),c&&J(),u.isConnected&&u.remove()},k=!1,I=function(e){k||(k=!0,O(),n.playNow(r.Wo.CLICK),V(e))},M=function(){I(C(A))},_=function(e){e.stopPropagation(),"Escape"===e.key&&(e.preventDefault(),I(null))},D=function(e){E(e.clientX,e.clientY)},L=function(e,t){return{x:250+Math.cos(e)*t,y:250+Math.sin(e)*t}},N=function(e,t){var n=L(e,247),r=L(t,247),a=L(t,137),o=L(e,137),i=t-e<=Math.PI?"0":"1";return["M ".concat(n.x," ").concat(n.y),"A ".concat(247," ").concat(247," 0 ").concat(i," 1 ").concat(r.x," ").concat(r.y),"L ".concat(a.x," ").concat(a.y),"A ".concat(137," ").concat(137," 0 ").concat(i," 0 ").concat(o.x," ").concat(o.y),"Z"].join(" ")},j=!0,B=!1,F=void 0;try{for(var V,H,U,G=e.entries()[Symbol.iterator]();!(j=(U=G.next()).done);j=!0)!function(){var e,n=(e=U.value,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,s=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),2!==o.length);i=!0);}catch(e){s=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(s)throw r}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1],s=m+h*r,l=s+0,u=s+h-0,c=(l+u)/2,f=document.createElementNS(d,"g");f.style.cursor="pointer";var p=document.createElementNS(d,"clipPath"),v=document.createElementNS(d,"path"),g="".concat(y,"-").concat(r);p.id=g,p.setAttribute("clipPathUnits","userSpaceOnUse"),v.setAttribute("d",N(l,u)),p.appendChild(v),P.appendChild(p);var S=document.createElementNS(d,"path");S.setAttribute("d",N(l,u)),S.setAttribute("clip-path","url(#".concat(g,")")),S.style.fill=b,S.style.transition="fill 0.12s ease, filter 0.12s ease";var A=L(c,192),C=192*(u-l),x=Math.max(Math.min(.75*C,160),70),E=document.createElementNS(d,"foreignObject");E.setAttribute("x",(A.x-x/2).toString()),E.setAttribute("y",(A.y-35).toString()),E.setAttribute("width",x.toString()),E.setAttribute("height","70"),E.style.pointerEvents="none";var O=document.createElement("div");O.textContent=t(i),O.style.fontFamily=a.w.MAIN_FONT,O.style.fontSize="20px",O.style.lineHeight="1.25",O.style.color="rgba(35, 35, 35, 0.85)",O.style.fontWeight="400",O.style.display="flex",O.style.alignItems="center",O.style.justifyContent="center",O.style.textAlign="center",O.style.width="100%",O.style.height="100%",O.style.boxSizing="border-box",O.style.padding="6px 10px",O.style.wordBreak="break-word",O.style.overflowWrap="anywhere",O.style.pointerEvents="none",E.appendChild(O),f.appendChild(S),f.appendChild(E),f.addEventListener("mouseenter",function(){T(r)}),f.addEventListener("click",function(e){e.stopPropagation(),I(i)}),R.push({path:S,label:O,center:{x:192*Math.cos(c),y:192*Math.sin(c)}}),w.appendChild(f)}()}catch(e){B=!0,F=e}finally{try{j||null==G.return||G.return()}finally{if(B)throw F}}var Z=document.createElementNS(d,"g");Z.style.pointerEvents="none";var q=document.createElementNS(d,"circle");q.setAttribute("cx","250"),q.setAttribute("cy","250"),q.setAttribute("r","247"),q.style.fill="none",q.style.stroke=p,q.style.strokeWidth="6",q.style.strokeLinejoin="round",Z.appendChild(q);var W=document.createElementNS(d,"circle");W.setAttribute("cx","250"),W.setAttribute("cy","250"),W.setAttribute("r","137"),W.style.fill="none",W.style.stroke=p,W.style.strokeWidth="6",W.style.strokeLinejoin="round",Z.appendChild(W);for(var z=0;z<e.length;z+=1){var Y=m+h*z+0,Q=L(Y,247),X=L(Y,137),K=document.createElementNS(d,"line");K.setAttribute("x1",Q.x.toString()),K.setAttribute("y1",Q.y.toString()),K.setAttribute("x2",X.x.toString()),K.setAttribute("y2",X.y.toString()),K.style.stroke=p,K.style.strokeWidth="6",K.style.strokeLinecap="round",Z.appendChild(K)}w.appendChild(Z);var J=function(){};if(c){var $={x:window.innerWidth/2,y:window.innerHeight/2},ee=document.createElement("div");ee.classList.add("virtualCursor"),ee.style.position="fixed",ee.style.left="0",ee.style.top="0",ee.style.zIndex="1001",u.appendChild(ee);var et=function(e,t){$.x=f(e,0,window.innerWidth),$.y=f(t,0,window.innerHeight),ee.style.transform="translate(calc(".concat($.x,"px - 50%), calc(").concat($.y,"px - 50%))"),E($.x,$.y)},en=function(e){et($.x+e.movementX,$.y+e.movementY)},er=function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),I(C(A)))},ea=function(){et($.x,$.y)};et($.x,$.y),window.addEventListener("mousemove",en,!0),window.addEventListener("mousedown",er,!0),window.addEventListener("resize",ea),J=function(){window.removeEventListener("mousemove",en,!0),window.removeEventListener("mousedown",er,!0),window.removeEventListener("resize",ea),ee.remove()}}return document.body.appendChild(u),u.focus({preventScroll:!0}),u.addEventListener("click",M),u.addEventListener("keydown",_),u.addEventListener("mousemove",D),T(0),l}},36071:function(e,t,n){n.d(t,{I9:()=>o,yg:()=>i}),n.p,n(43056),n(66913),n(74520);var r,a,o=((r={}).GENERAL="info",r.SPACESHIP="spaceship",r.EXPLORATION="exploration",r.SPACE_STATION="space-station",r),i=((a={}).INFO="info",a.SUCCESS="success",a.WARNING="warning",a.ERROR="error",a)},94754:function(e,t,n){n.d(t,{A:()=>u,h:()=>c});var r=n(30630),a=n(55322),o=n(94524),i=n(55308);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(e,t,n,i){return(0,o.qc)(e,{points:l(t),updatable:!1},{color:new a.v9(n.r,n.g,n.b),width:5,colorMode:r.ZB.COLOR_MODE_SET,sizeAttenuation:!0},i)},c=function(e,t,n,r){var o=new a.ov(n.r,n.g,n.b,1),s=t.map(function(){return o});return(0,i.sh)(e,{points:l(t),colors:s,updatable:!1},r)}},72334:function(e,t,n){n.d(t,{_I:()=>a,ck:()=>i,nH:()=>o});var r=n(97782);function a(e,t){for(var n=Math.floor(e.length/16),r=Math.floor(n/t),a=new Float32Array(16*r),o=0;o<r;o++){var i=16*Math.floor(Math.random()*n);a.set(e.subarray(i,i+16),16*o)}return a}function o(e,t,n,a){for(var o=new Float32Array(n*n*16),i=t/n,s=0,l=0;l<n;l++)for(var u=0;u<n;u++){var c=a()*i,f=a()*i,d=e.x+l*i-t/2+c,p=e.z+u*i-t/2+f,h=.7+.6*a();r.uq.Compose(new r.Pq(h,h,h),r.PT.RotationAxis(r.Pq.Up(),2*a()*Math.PI),new r.Pq(d,0,p)).copyToArray(o,16*s),s+=1}return o}function i(e,t,n,a){if(void 0===e[0]||void 0===e[1]||void 0===e[2]||void 0===e[3]||void 0===e[4]||void 0===e[5]||void 0===e[6]||void 0===e[7]||void 0===e[8]||void 0===e[9]||void 0===e[10]||void 0===e[11]||void 0===e[12]||void 0===e[13]||void 0===e[14]||void 0===e[15])throw Error("Matrix is not defined");t.set(e[12],e[13],e[14]);var o=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);a.set(o,o,o);var i=r.uq.Identity();i.setRowFromFloats(0,e[0]/o,e[1]/o,e[2]/o,0),i.setRowFromFloats(1,e[4]/o,e[5]/o,e[6]/o,0),i.setRowFromFloats(2,e[8]/o,e[9]/o,e[10]/o,0),i.setRowFromFloats(3,0,0,0,1),n.copyFrom(r.PT.FromRotationMatrix(i))}},7492:function(e,t,n){n.a(e,async function(e,t){try{n(34424),n(64945),n(15888);var r,a=n(61365),o=n(88768),i=n(66379),s=n(2110),l=n(51881);function u(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}var c=document.createElement("canvas");document.body.appendChild(c),c.width=window.innerWidth,c.height=window.innerHeight;var f=new o.x(c),d=new a.Engine(c,!0,{useHighPrecisionMatrix:!0});d.useReverseDepthBuffer=!0,d.loadingScreen=f,d.displayLoadingUI();var p=new URLSearchParams(window.location.search),h=null!=(r=p.get("scene"))?r:"",m=new s.D().get(h),y=new i.C;y.addProgressCallback(function(e,t){f.setProgress(e,t),f.loadingUIText="Loading ".concat(h," (").concat(t,"/").concat(e,")")}),y.startTask();var b=await m(d,y);if(window.scene=b,y.completeTask(),null!==p.get("debug")){var v=document.createElement("div");v.id="inspectorLayer",document.body.appendChild(v),await b.debugLayer.show({globalRoot:v}),document.addEventListener("keypress",function(e){var t;return(t=function(){return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if("i"!==e.key)return[3,3];if(!b.debugLayer.isVisible())return[3,1];return b.debugLayer.hide(),[3,3];case 1:return[4,b.debugLayer.show({globalRoot:v})];case 2:t.sent(),t.label=3;case 3:return[2]}})},function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(e){u(o,r,a,i,s,"next",e)}function s(e){u(o,r,a,i,s,"throw",e)}i(void 0)})})()})}if(null!==p.get("physicsViewer")){var g=new a.PhysicsViewer(b);b.onBeforeRenderObservable.add(function(){var e=!0,t=!1,n=void 0;try{for(var r,a=b.meshes[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value.physicsBody;o&&g.showBody(o)}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}})}if(null!==p.get("qr")){var w=new URL(window.location.href);w.searchParams.delete("qr");var P=void 0;void 0!==P&&("localhost"===w.hostname||"127.0.0.1"===w.hostname||"[::1]"===w.hostname)&&(w.hostname=P);var S=w.toString();await (0,l.zH)(S)}var R=p.get("freeze"),A=Number(R);if(null!==R&&!isNaN(A)){d.getDeltaTime=function(){return 0};var C=0;b.onAfterRenderObservable.add(function(){if(++C>=A){d.stopRenderLoop(),c.dataset.frozen="1";return}})}b.onAfterRenderObservable.addOnce(function(){c.dataset.ready="1"}),b.executeWhenReady(function(){d.loadingScreen.hideLoadingUI(),d.runRenderLoop(function(){b.render()})}),window.addEventListener("resize",function(){c.width=window.innerWidth,c.height=window.innerHeight,d.resize(!0)}),document.addEventListener("keypress",function(e){"p"===e.key&&null!==b.activeCamera&&a.Tools.CreateScreenshot(d,b.activeCamera,{precision:1})}),window.scene=b,t()}catch(e){t(e)}},1)},2110:function(e,t,n){n.d(t,{D:()=>nR});var r=n(61365),a=n(97681),o=n(70101),i=n(55895);function s(e,t){var n,s=new r.Scene(e,{useFloatingOrigin:!0});s.useRightHandedSystem=!0;var l=new URLSearchParams(window.location.search),u=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,3e6,r.Vector3.Zero(),s);u.attachControl(),u.wheelPrecision/=3e4,u.maxZ=1e8;var c=s.enableDepthRenderer(null,!1,!0),f=(0,a.h)("juliaSet",Number(null!=(n=l.get("seed"))?n:1e5*Math.random()),"Julia Set",[]),d=new i.i(f,s),p=new o.t(d.getTransform(),d.getBoundingRadius(),f.accentColor,s,[]);return s.cameras.forEach(function(e){return e.attachPostProcess(p)}),s.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(p)}),s.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p.update(t)}),s.onBeforeCameraRenderObservable.add(function(e){c.getDepthMap().activeCamera=e}),Promise.resolve(s)}var l=n(33630),u=n(11398);function c(e,t){var n,a=new r.Scene(e,{useFloatingOrigin:!0});a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),s=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5e5,r.Vector3.Zero(),a);s.attachControl(),s.wheelPrecision/=1e3,s.maxZ=1e8;var c=a.enableDepthRenderer(null,!1,!0),f=(0,l.c)("mandelbox",Number(null!=(n=o.get("seed"))?n:1e5*Math.random()),"Mandelbox",[]),d=new i.i(f,a),p=new u.M(d.getTransform(),d.getBoundingRadius(),f,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(p)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(p)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){c.getDepthMap().activeCamera=e}),Promise.resolve(a)}var f=n(61092),d=n(66485);function p(e,t){var n,a=new r.Scene(e,{useFloatingOrigin:!0});a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),s=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,3e6,r.Vector3.Zero(),a);s.attachControl(),s.wheelPrecision/=3e4,s.maxZ=1e8;var l=a.enableDepthRenderer(null,!1,!0),u=(0,f.G)("mandelbulb",Number(null!=(n=o.get("seed"))?n:1e5*Math.random()),"Mandelbulb",[]),c=new i.i(u,a),p=new d.W(c.getTransform(),c.getBoundingRadius(),u,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(p)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(p)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){l.getDepthMap().activeCamera=e}),Promise.resolve(a)}var h=n(28234),m=n(43302);function y(e,t){var n,a=new r.Scene(e,{useFloatingOrigin:!0});a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),s=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5e5,r.Vector3.Zero(),a);s.attachControl(),s.wheelPrecision/=1e3,s.maxZ=1e8;var l=a.enableDepthRenderer(null,!1,!0),u=(0,h.w)("mengerSponge",Number(null!=(n=o.get("seed"))?n:1e5*Math.random()),"Menger Sponge",[]),c=new i.i(u,a),f=new m.Q(c.getTransform(),c.getBoundingRadius(),u,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(f)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(f)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;f.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){l.getDepthMap().activeCamera=e}),Promise.resolve(a)}var b=n(40373),v=n(66267);function g(e,t){var n,a=new r.Scene(e,{useFloatingOrigin:!0});a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),s=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5e5,r.Vector3.Zero(),a);s.attachControl(),s.wheelPrecision/=1e3,s.maxZ=1e8;var l=a.enableDepthRenderer(null,!1,!0),u=(0,b.p)("sierpinski",Number(null!=(n=o.get("seed"))?n:1e5*Math.random()),"Sierpinski Pyramid",[]),c=new i.i(u,a),f=new v.$(c.getTransform(),c.getBoundingRadius(),u,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(f)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(f)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;f.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){l.getDepthMap().activeCamera=e}),Promise.resolve(a)}var w=n(84773),P=n(6098),S=n(16663),R=n(84006),A=n(91320),C=n(51881);function x(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function T(e,t){var n;return(n=function(){var n,a,o,i,s,l,u;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(c){switch(c.label){case 0:return(n=new r.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,[4,(0,C.z6)(n)];case 1:return c.sent(),(o=(a=new P.w(n)).getActiveCamera()).attachControl(),n.enableDepthRenderer(o,!1,!0),[4,(0,w.jP)(n,t)];case 2:return i=c.sent(),new r.DirectionalLight("sun",new r.Vector3(1,-1,0),n).intensity=.7,new r.HemisphericLight("hemi",r.Vector3.Up(),n).intensity=.4,a.getTransform().position.z=-75e3,a.getTransform().position.y=1500,a.speed*=500,o.maxZ*=500,s=r.MeshBuilder.CreateSphere("sphere",{diameter:1e4},n),new r.PhysicsAggregate(s,r.PhysicsShapeType.SPHERE,{mass:0},n),A.q.BATCH_SIZE=1e4,l=new R.U(42,s,6e4,127500,n),(u=r.MeshBuilder.CreateTorus("torus",{diameter:17e4,thickness:1e5,tessellation:32},n)).visibility=.1,u.parent=s,u.scaling.y=2e-4,(0,S.t5)(a.getTransform(),s.position,n.useRightHandedSystem),n.onBeforeRenderObservable.add(function(){a.update(e.getDeltaTime()/1e3),l.update(a.getTransform().getAbsolutePosition(),i,e.getDeltaTime()/1e3)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){x(o,r,a,i,s,"next",e)}function s(e){x(o,r,a,i,s,"throw",e)}i(void 0)})})()}var E=n(38241),O=n(2218),k=n(73331);function I(e,t){var n=new E.Z(e,{useFloatingOrigin:!0});n.useRightHandedSystem=!0;var a=new P.w(n),o=a.getActiveCamera();a.speed=6e6,o.maxZ*=6e6,a.getTransform().setAbsolutePosition(new r.Vector3(0,1,-2).scaleInPlace(6e6)),(0,S.t5)(a.getTransform(),r.Vector3.Zero(),n.useRightHandedSystem),o.attachControl(),n.enableDepthRenderer(null,!1,!0);var i=new r.PointLight("light1",new r.Vector3(6e7,0,0),n),s=r.MeshBuilder.CreateSphere("sphere",{diameter:12e6,segments:64},n),l=new O.Q(6e6,1e5),u=new k.D(s,6e6,l,[i],n);return o.attachPostProcess(u),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;a.update(e)}),Promise.resolve(n)}var M=n(14464),_=n(97782),D=n(43589),L=n(65639),N=n(31964),j=n(76945),B=n(73403),F=n(28464),V=n(52628);function H(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function U(e,t){var n;return(n=function(){var n,a,o,i,s,l,u,c,f,d,p;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(h){switch(h.label){case 0:return(n=new E.Z(e)).useRightHandedSystem=!0,[4,(0,C.z6)(n)];case 1:return h.sent(),[4,(0,N.Q)(n,t)];case 2:return a=h.sent(),o=new j.bk,[4,B.Z.CreateDefault(n,a,o)];case 3:return(i=h.sent()).getTransform().position.copyFromFloats((0,D.randRange)(-50,50,Math.random,0),(0,D.randRange)(30,50,Math.random,0),(0,D.randRange)(-50,50,Math.random,0)),i.getTransform().rotationQuaternion=r.Quaternion.Random().normalize(),(s=new P.w(n)).getTransform().position.copyFromFloats(0,10,75),s.speed*=10,(l=s.getActiveCamera()).minZ=.1,l.attachControl(),u=new L.r(42,F.a.SMALL,a,n),(c=r.MeshBuilder.CreateBox("ground",{width:100,height:1,depth:100},n)).position.y=-2,c.position.x=75,(f=new r.PBRMaterial("groundMaterial",n)).albedoColor.set(.5,.5,.2),f.metallic=0,f.roughness=.9,c.material=f,(d=new r.PhysicsAggregate(c,r.PhysicsShapeType.BOX,{mass:0},n)).shape.filterMembershipMask=V.H.ENVIRONMENT,d.shape.filterCollideMask=V.H.DYNAMIC_OBJECTS,p=new r.DirectionalLight("sun",new _.Pq(1,-2,-1),n),new M.g("hemi",_.Pq.Up(),n).intensity=.1,(0,C.tZ)(p),i.engageLandingOnPad(u),n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;i.update(t),s.update(t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){H(o,r,a,i,s,"next",e)}function s(e){H(o,r,a,i,s,"throw",e)}i(void 0)})})()}var G=n(36759),Z=n(54330),q=n(22687),W=n(85005);function z(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function Y(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){z(o,r,a,i,s,"next",e)}function s(e){z(o,r,a,i,s,"throw",e)}i(void 0)})}}function Q(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function X(e,t){return Y(function(){var n,a,o,i,s,l,u,c,f,d,p,h,m,y,b;return Q(this,function(v){switch(v.label){case 0:return(a=new E.Z(e)).useRightHandedSystem=!0,[4,(0,C.z6)(a,new _.Pq(0,-9.81,0))];case 1:return v.sent(),null==(n=e.getRenderingCanvas())||n.addEventListener("click",function(){return Y(function(){var t;return Q(this,function(n){switch(n.label){case 0:return[4,null==(t=e.getRenderingCanvas())?void 0:t.requestPointerLock()];case 1:return n.sent(),[2]}})})()}),[4,(0,G.H)(a,t)];case 2:if(o=v.sent(),(i=new r.DirectionalLight("dir01",new _.Pq(1,-2,-1),a)).position=new _.Pq(5,5,5).scaleInPlace(10),(0,C.ez)(i.direction.scale(-1),a),new r.HemisphericLight("hemi",new _.Pq(0,1,0),a).intensity=.5,!(s=o.default.spawn()).success)throw Error("Failed to instantiate character: ".concat(s.error));if(l=new W.T(s.value,a),(u=new Z.Y(l,a)).getTransform().position.y=40,!(c=o.default.spawn()).success)throw Error("Failed to instantiate character: ".concat(c.error));if((f=new W.T(c.value,a)).getTransform().position=new _.Pq(10,40,6),!(d=o.default.spawn()).success)throw Error("Failed to instantiate character: ".concat(d.error));return(p=new W.T(d.value,a)).getTransform().position=new _.Pq(10,40,7.5),p.getTransform().rotate(r.Axis.Y,Math.PI,r.Space.WORLD),(0,C.tZ)(i),null!==new URLSearchParams(window.location.search).get("thirdPerson")&&u.setThirdPersonCameraActive(),u.getActiveCamera().attachControl(),q.b.setEnabled(!0),h=r.MeshBuilder.CreateIcoSphere("ground",{radius:40},a),new r.PhysicsAggregate(h,r.PhysicsShapeType.MESH,{mass:0},a),(m=new r.PBRMetallicRoughnessMaterial("groundMaterial",a)).baseColor=new r.Color3(.5,.5,.5),h.material=m,y={getTransform:function(){return h}},u.setClosestWalkableObject(y),p.dance(),b=_.Pq.Zero(),a.onBeforeRenderObservable.add(function(){if(u.getActiveCamera()!==a.activeCamera){null==(t=a.activeCamera)||t.detachControl();var t,n=u.getActiveCamera();n.attachControl(),a.activeCamera=n}var r=l.instance.head;r.bone.getAbsolutePositionToRef(r.attachmentMesh,b);var o=e.getDeltaTime()/1e3;u.update(o),f.update(o,y),p.update(o,y),f.lookAt(b),p.lookAt(b)}),[2,a]}})})()}var K=n(66371),J=n(77911),$=n(94403),ee=n(48211);function et(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function en(e,t){var n;return(n=function(){var n,a,o,i,s;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(l){switch(l.label){case 0:return(n=new r.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,[4,(0,J.s)(n,t)];case 1:return a=l.sent(),new ee.y(a.milkyWay,1e6,n),(i=(o=new P.w(n)).getActiveCamera()).attachControl(),n.enableDepthRenderer(),o.speed=s=new $.i((0,K.S)([]),n).getBoundingRadius(),i.maxZ*=s,o.getTransform().setAbsolutePosition(new r.Vector3(0,1,-2).scaleInPlace(s)),(0,S.t5)(o.getTransform(),r.Vector3.Zero(),n.useRightHandedSystem),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){et(o,r,a,i,s,"next",e)}function s(e){et(o,r,a,i,s,"throw",e)}i(void 0)})})()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ea(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function eo(e,t){var n;return(n=function(){var n,a,o,i,s,l,u,c,f,d,p,h,m,y,b,v,g,w,P,S,R,A,x,T,O;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(k){switch(k.label){case 0:return(n=new E.Z(e)).useRightHandedSystem=!0,[4,(0,C.z6)(n)];case 1:return k.sent(),[4,(0,N.Q)(n,t)];case 2:k.sent(),(a=new r.FreeCamera("camera",new _.Pq(0,1,-1).scale(15),n)).setTarget(_.Pq.Zero()),a.attachControl(),new r.PointLight("light",new _.Pq(0,100,-10),n),new M.g("hemisphericLight",new _.Pq(0,1,0),n).intensity=.5,o=0,i=!0,s=!1,l=void 0;try{for(u=n.meshes[Symbol.iterator]();!(i=(c=u.next()).done);i=!0)(f=c.value).isVisible=!0,null===f.parent&&(o++,d=f.getHierarchyBoundingVectors(),p=Math.max(d.max.x-d.min.x,d.max.y-d.min.y,d.max.z-d.min.z),f.scaling.scaleInPlace(1/p),f.position=new _.Pq(10+o%10-5,0,Math.floor(o/10)-5))}catch(e){s=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw l}}h=n.transformNodes.slice(),m=!0,y=!1,b=void 0;try{for(v=h[Symbol.iterator]();!(m=(g=v.next()).done);m=!0)g.value.instantiateHierarchy()}catch(e){y=!0,b=e}finally{try{m||null==v.return||v.return()}finally{if(y)throw b}}w=!0,P=!1,S=void 0;try{for(R=n.textures.entries()[Symbol.iterator]();!(w=(A=R.next()).done);w=!0){var I;I=A.value,T=(x=function(e){if(Array.isArray(e))return e}(I)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,s=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),2!==o.length);i=!0);}catch(e){s=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(s)throw r}}return o}}(I,2)||function(e,t){if(e){if("string"==typeof e)return er(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(e,2)}}(I,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],O=x[1],function(e,t){var a=r.MeshBuilder.CreateGround("plane",{width:.9,height:.9},n),o=new r.StandardMaterial("material",n);o.emissiveTexture=e,o.disableLighting=!0,o.specularColor.scaleInPlace(0),a.position=t,a.material=o}(O,new _.Pq(T%10-5,0,Math.floor(T/10)-5))}}catch(e){P=!0,S=e}finally{try{w||null==R.return||R.return()}finally{if(P)throw S}}return[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){ea(o,r,a,i,s,"next",e)}function s(e){ea(o,r,a,i,s,"throw",e)}i(void 0)})})()}function ei(e,t){var n=new E.Z(e),a=new r.FreeCamera("camera1",new r.Vector3(0,5,-10),n);return a.setTarget(r.Vector3.Zero()),a.attachControl(),new r.HemisphericLight("light1",new r.Vector3(0,1,0),n).intensity=.7,r.MeshBuilder.CreateSphere("sphere",{diameter:2,segments:32},n).position.y=1,r.MeshBuilder.CreateGround("ground",{width:6,height:6},n),Promise.resolve(n)}var es=n(12014),el=n(99259),eu=n(31694);n(36071);var ec=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"update",value:function(){}},{key:"create",value:function(){}},{key:"setVisible",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function ef(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function ed(e,t){var n;return(n=function(){var n,a,o,i,s,l,u,c,f,d,p,h,m;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(y){switch(y.label){case 0:return(n=new E.Z(e)).useRightHandedSystem=!0,n.defaultCursor="crosshair",[4,(0,C.z6)(n)];case 1:return y.sent(),[4,(0,N.Q)(n,t)];case 2:return a=y.sent(),o=new j.bk,i=new es.g9,s=new ec,[4,el.l.CreateDefault(n,a,i,o,s)];case 3:return(u=(l=y.sent()).getActiveCamera()).minZ=.1,u.attachControl(),n.activeCamera=u,eu._.setEnabled(!0),c=new r.DirectionalLight("sun",new _.Pq(1,-1,0),n),new M.g("hemi",_.Pq.Up(),n).intensity=.1,f=r.MeshBuilder.CreateBox("box",{size:50},n),d=new r.SolidParticleSystem("boxes",n,{updatable:!1}),p=function(e,t){return Math.random()*(t-e)+e},d.addShape(f,1e4,{positionFunction:function(e){e.position=new _.Pq(p(-1,1),p(-1,1),p(-1,1)).scaleInPlace(5e3)}}),h=d.buildMesh(),(m=new r.PBRMetallicRoughnessMaterial("material",n)).baseColor=new r.Color3(.5,.5,.5),m.metallic=0,m.roughness=.5,h.material=m,f.setEnabled(!1),(0,C.tZ)(c,{maxZ:3e3}),n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;l.update(t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){ef(o,r,a,i,s,"next",e)}function s(e){ef(o,r,a,i,s,"throw",e)}i(void 0)})})()}var ep=n(67541),eh=n(74637),em=n(18728),ey=n(82132),eb=n(26653),ev=n(73979),eg=n(45178);function ew(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function eP(e,t){var n;return(n=function(){var n,a,o,i,s,l,u,c,f,d,p,h,m;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(y){switch(y.label){case 0:return(n=new r.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,n.clearColor.setAll(0),[4,(0,eh.P)(n,t)];case 1:return a=y.sent(),[4,(0,C.z6)(n)];case 2:if(y.sent(),o=10*V.w.EARTH_RADIUS,s=(i=new P.w(n)).getActiveCamera(),i.speed=o,s.maxZ*=o,i.getTransform().setAbsolutePosition(new r.Vector3(0,1,-2).scaleInPlace(o)),(0,S.t5)(i.getTransform(),r.Vector3.Zero(),n.useRightHandedSystem),s.attachControl(),n.enableDepthRenderer(null,!1,!0),l=new r.PointLight("light1",new r.Vector3(7,5,-10).scaleInPlace(o),n),u=new URLSearchParams(window.location.search).get("seed"),c=(0,ep.p)("gasPlanet",null!==u?Number(u):1e3*Math.random(),"Gas Planet",[]),f=new eg.K(function(){return new ey.q(n)}),d=new ev.s(c,a,f,n),p=new eb.U(d.getTransform(),d.getBoundingRadius(),d.ringsUniforms,null,!1,[{getBoundingRadius:function(){return 0},getLight:function(){return l}}],n),s.attachPostProcess(p),h=new k.D(d.getTransform(),d.getBoundingRadius(),d.atmosphereUniforms,[l],n),s.attachPostProcess(h),!d.ringsUniforms)return[3,4];return m=new em.b(d.getTransform(),d.ringsUniforms,c,[l],n),s.attachPostProcess(m),[4,new Promise(function(e){var t;(null==(t=d.ringsUniforms)?void 0:t.patternLut.type)==="procedural"&&d.ringsUniforms.patternLut.lut.getTexture().executeWhenReady(function(){e()})})];case 3:y.sent(),y.label=4;case 4:return n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;i.update(e),d.updateMaterial([l],e)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){ew(o,r,a,i,s,"next",e)}function s(e){ew(o,r,a,i,s,"throw",e)}i(void 0)})})()}var eS=n(2733),eR=n(57693),eA=n(94455),eC=n(72334),ex=n(34495);function eT(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function eE(e,t){var n;return(n=function(){var n,a,o,i,s,l,u,c,f,d,p;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(h){switch(h.label){case 0:return n=new E.Z(e),[4,(0,eh.P)(n,t)];case 1:return a=h.sent(),(o=new r.FreeCamera("camera1",new r.Vector3(0,5,-10),n)).setTarget(r.Vector3.Zero()),o.attachControl(),i=new r.PointLight("light1",new r.Vector3(200,800,100),n),r.MeshBuilder.CreateSphere("lightSphere",{diameter:.1,segments:8},n).position=i.position,(0,C.ez)(i.position,n),s=r.MeshBuilder.CreateGround("ground",{width:32,height:32,subdivisions:4},n),(l=(0,eR.R)(n,5)).isVisible=!1,l.material=u=new eA.y(n,a.noises,!1),c=(0,eS.seededSquirrelNoise)(0),f=0,d=function(){return c(f++)},(p=new ex.l((0,eC.nH)(r.Vector3.Zero(),32,256,d))).createInstances([{mesh:l,distance:0}]),p.getCurrentMesh().parent=s,n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;u.update([i],t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){eT(o,r,a,i,s,"next",e)}function s(e){eT(o,r,a,i,s,"throw",e)}i(void 0)})})()}var eO=n(21007);function ek(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function eI(e,t){var n;return(n=function(){var t,n,a,o,i,s,l,u,c,f,d,p;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(h){switch(h.label){case 0:return(t=new r.Scene(e)).useRightHandedSystem=!0,[4,(0,C.z6)(t)];case 1:for(h.sent(),n=new r.DirectionalLight("sun",new r.Vector3(.5,-1,-.5),t),new r.HemisphericLight("hemi",r.Vector3.Up(),t).intensity=.1,a=r.MeshBuilder.CreateSphere("ground",{diameter:20},t),o=10/3,(i=r.MeshBuilder.CreateSphere("sphere2",{diameter:2*o},t)).position.x=40,(s=new r.PBRMaterial("groundMaterial",t)).albedoColor.set(.8,.4,.2),s.metallic=0,s.roughness=.7,a.material=s,i.material=s,new r.PhysicsAggregate(a,r.PhysicsShapeType.SPHERE,{mass:0,restitution:0,friction:2},t),new r.PhysicsAggregate(i,r.PhysicsShapeType.SPHERE,{mass:0,restitution:0,friction:2},t).body.disablePreStep=!1,l=function(){var e=2*Math.random()*Math.PI,t=Math.acos(2*Math.random()-1),n=Math.sin(t)*Math.cos(e),a=Math.sin(t)*Math.sin(e),o=Math.cos(t);return new r.Vector3(n,a,o)},u=0;u<200;u++)(c=r.MeshBuilder.CreateBox("box".concat(u),{size:.2+Math.random()},t)).position=l().scaleInPlace(10+40*Math.random()),c.rotation=new r.Vector3(Math.random(),Math.random(),Math.random()),(f=new r.PBRMaterial("boxMaterial",t)).albedoColor=r.Color3.Random(),f.metallic=0,f.roughness=.7,c.material=f,new r.PhysicsAggregate(c,r.PhysicsShapeType.BOX,{mass:50,restitution:.3,friction:1},t).body.applyImpulse(l().scale(1e3*Math.random()),c.position);return new r.ArcRotateCamera("Camera",Math.PI/3,Math.PI/3,80,r.Vector3.Zero(),t).attachControl(),(0,C.tZ)(n),d=new eO.q(t),p=0,t.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p+=t,i.position.copyFromFloats(50*Math.cos(2*Math.PI*p/10),50*Math.sin(2*Math.PI*p/10),0),d.applyGravity([{name:"sphere1",mass:1,radius:10,position:a.position},{name:"sphere2",mass:1,radius:o,position:i.position}])}),[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){ek(o,r,a,i,s,"next",e)}function s(e){ek(o,r,a,i,s,"throw",e)}i(void 0)})})()}var eM=n(32803),e_=n(29608),eD=n(44671);function eL(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function eN(e,t){var n;return(n=function(){var n,r,a,o,i;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return(n=new E.Z(e)).useRightHandedSystem=!0,(a=(r=new P.w(n)).getActiveCamera()).attachControl(),n.enableDepthRenderer(a,!1,!0),[4,(0,eh.P)(n,t)];case 1:return o=s.sent(),new eM.Z("sun",new _.Pq(1,-1,0),n).intensity=.7,i=new eD.R(e_._0.Z,n,o.noises),n.onBeforeRenderObservable.add(function(){r.update(e.getDeltaTime()/1e3),i.update(e.getDeltaTime()/1e3)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){eL(o,r,a,i,s,"next",e)}function s(e){eL(o,r,a,i,s,"throw",e)}i(void 0)})})()}var ej=n(1933),eB=n(9064),eF=n(47627),eV=n(27550),eH=n(55322),eU=n(99047),eG=n(3143),eZ=n(58034);function eq(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function eW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ez=function(){var e;function t(e,n){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");eW(this,"mesh",void 0),eW(this,"aggregate",void 0),eW(this,"isBeingPressed",!1),eW(this,"interaction",void 0),this.interaction=e,this.mesh=eU.P.CreateCylinder("button",{diameter:.25,height:.1},n);var r=new eV.PBRMaterial("buttonMaterial",n);r.albedoColor=new eH.v9(1,0,0),r.roughness=.5,r.metallic=0,this.mesh.material=r,this.aggregate=new eZ.L(this.mesh,eG.DK.CYLINDER,{mass:0},n),this.aggregate.body.setMotionType(eG.AH.ANIMATED),this.aggregate.body.disablePreStep=!1}return e=[{key:"getTransform",value:function(){return this.mesh}},{key:"getPhysicsAggregate",value:function(){return this.aggregate}},{key:"getInteractions",value:function(){var e=this;return this.isBeingPressed?[]:[{label:this.interaction.label,perform:function(){var t;return(t=function(){return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return this.startPressAnimation(),[4,this.interaction.perform()];case 1:return e.sent(),[2]}})},function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(e){eq(o,r,a,i,s,"next",e)}function s(e){eq(o,r,a,i,s,"throw",e)}i(void 0)})}).call(e)}}]}},{key:"startPressAnimation",value:function(){var e=this;if(!this.isBeingPressed){this.isBeingPressed=!0;var t=this.getTransform().position.y,n=Math.round(6),r=t-.05;eF.X5.CreateAndStartAnimation("buttonPressDown",this.getTransform(),"position.y",60,n,t,r,eF.X5.ANIMATIONLOOPMODE_CONSTANT,void 0,function(){eF.X5.CreateAndStartAnimation("buttonPressUp",e.getTransform(),"position.y",60,n,r,t,eF.X5.ANIMATIONLOOPMODE_CONSTANT,void 0,function(){e.isBeingPressed=!1})})}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}(),eY=n(32907),eQ=n(25508),eX=n(42792),eK=n(42917);function eJ(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function e$(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){eJ(o,r,a,i,s,"next",e)}function s(e){eJ(o,r,a,i,s,"throw",e)}i(void 0)})}}function e0(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function e1(e,t){return e$(function(){var n,a,o,i,s,l,u,c,f,d,p,h,m,y,b,v,g,w,P,S,R,A,x;return e0(this,function(T){switch(T.label){case 0:return(a=new r.Scene(e)).useRightHandedSystem=!0,[4,(0,eK.L)()];case 1:return T.sent(),[4,(0,C.z6)(a,new r.Vector3(0,-9.81,0))];case 2:return T.sent(),[4,(0,r.CreateAudioEngineAsync)()];case 3:return o=T.sent(),null==(n=e.getRenderingCanvas())||n.addEventListener("click",function(){return e$(function(){var t;return e0(this,function(n){switch(n.label){case 0:return[4,null==(t=e.getRenderingCanvas())?void 0:t.requestPointerLock()];case 1:return n.sent(),[2]}})})()}),[4,(0,G.H)(a,t)];case 4:return i=T.sent(),[4,(0,ej.d)(o,t)];case 5:if(s=T.sent(),l=new r.DirectionalLight("dir01",new r.Vector3(0,-1,-1),a),(0,C.ez)(l.direction.scale(-1),a),new r.HemisphericLight("hemi",new r.Vector3(0,1,0),a).intensity=.1,u=100,c=r.MeshBuilder.CreateGround("ground",{width:u,height:u},a),(f=new r.PBRMaterial("groundMaterial",a)).albedoColor=new r.Color3(.7,.7,.7),f.roughness=.7,f.metallic=0,c.material=f,(d=new r.PhysicsAggregate(c,r.PhysicsShapeType.MESH,{mass:0},a)).shape.filterMembershipMask=V.H.ENVIRONMENT,d.shape.material.friction=2,!(p=i.default.spawn()).success)throw Error("Failed to instantiate character: ".concat(p.error));return h=new W.T(p.value,a),(m=new Z.Y(h,a)).getActiveCamera().attachControl(),q.b.setEnabled(!0),(0,C.tZ)(l),y=new j.bk,b=new eB.A(V.H.INTERACTIVE,a,[m.firstPersonCamera],function(t){return e$(function(){var n,r,o;return e0(this,function(i){switch(i.label){case 0:if(0===t.length)return[2,null];return null==(n=a.activeCamera)||n.detachControl(),[4,(0,eY.e9)(t,function(e){return e.label},y,{useVirtualCursor:e.isPointerLock})];case 1:return o=i.sent(),null==(r=a.activeCamera)||r.attachControl(!0),[2,o]}})})()}),g=eQ.e.bind,w=[void 0,b],[4,(0,eX.t)()];case 6:for(v=new(g.apply(eQ.e,w.concat([T.sent()]))),document.body.appendChild(v.root),P=0;P<200;P++)S=.2+Math.random(),e2({position:new r.Vector3((Math.random()-.5)*u,S/2,(Math.random()-.5)*u),size:S},a,b);return(R=r.MeshBuilder.CreateBox("pillar",{width:.3,depth:.3,height:1},a)).position.z=2,R.position.y=.5,(A=new r.PBRMaterial("pillarMaterial",a)).albedoColor=new r.Color3(.4,.4,.4),A.roughness=.9,A.metallic=0,R.material=A,(x=new ez({label:"Spawn Box",perform:function(){s.menuSelect.setVolume(5),s.menuSelect.play();var e=.3+.3*Math.random(),t=a.activeCamera;if(null===t)return Promise.resolve();var n=t.getForwardRay(5,t.getWorldMatrix(),t.getWorldMatrix().getTranslation()),r=n.origin.add(n.direction.scale(7));return r.y=3+Math.max(r.y,e/2),e2({position:r,size:e},a,b),Promise.resolve()}},a)).getTransform().position=R.position.add(new r.Vector3(0,.55,0)),b.register(x),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;if(b.update(t),v.update(t),m.getActiveCamera()!==a.activeCamera){null==(n=a.activeCamera)||n.detachControl();var n,r=m.getActiveCamera();r.attachControl(),a.activeCamera=r}m.update(t)}),[2,a]}})})()}function e2(e,t,n){var a=e.position,o=e.size,i=r.MeshBuilder.CreateBox("box",{size:o},t);i.position=a,i.rotation.y=Math.random();var s=new r.PBRMaterial("boxMaterial",t);s.albedoColor=r.Color3.Random(),s.metallic=0,s.roughness=.7,i.material=s;var l=new r.PhysicsAggregate(i,r.PhysicsShapeType.BOX,{mass:50,restitution:.3,friction:1},t);return l.shape.filterMembershipMask=V.H.DYNAMIC_OBJECTS,n.register({getPhysicsAggregate:function(){return l},getInteractions:function(){return[{label:"push",perform:function(){var e,n=null==(e=t.activeCamera)?void 0:e.getForwardRay(1,t.activeCamera.getWorldMatrix(),t.activeCamera.getWorldMatrix().getTranslation());return void 0===n||(l.body.applyImpulse(n.direction.scale(200).add(r.Vector3.Up().scale(200)),l.body.getObjectCenterWorld()),l.body.applyAngularImpulse(new r.Vector3((Math.random()-.5)*10,(Math.random()-.5)*10,(Math.random()-.5)*10))),Promise.resolve()}},{label:"spin",perform:function(){return l.body.applyAngularImpulse(new r.Vector3(0,50,0)),Promise.resolve()}},{label:"change color",perform:function(){return i.material=new r.PBRMaterial("boxMaterial",t),i.material.albedoColor=r.Color3.Random(),i.material.metallic=0,i.material.roughness=.7,Promise.resolve()}},{label:"delete",perform:function(){return i.dispose(),Promise.resolve()}},{label:"make bouncy",perform:function(){return l.shape.material.restitution=1.5,Promise.resolve()}}]}}),l}var e3=n(49477),e5=n(37631),e6=n(44064);function e4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var e7=function(){var e;function t(e,n){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");e4(this,"_transform",void 0),e4(this,"model",void 0),e4(this,"type",void 0),e4(this,"boundingRadius",void 0),this._transform=e,this._transform.rotationQuaternion=_.PT.Identity(),this.model=n,this.type=n.type;var r=this.getTransform().getHierarchyBoundingVectors();this.boundingRadius=r.max.subtract(r.min).length()/2}return e=[{key:"getTransform",value:function(){return this._transform}},{key:"getBoundingRadius",value:function(){return this.boundingRadius}},{key:"getTypeName",value:function(){return"Wrapped Orbital Object"}},{key:"dispose",value:function(){this.getTransform().dispose()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}(),e8=n(94754),e9=n(6475);function te(e,t){var n=new E.Z(e,{useFloatingOrigin:!0});n.useRightHandedSystem=!0;var r=new P.w(n),a=r.getActiveCamera();a.minZ=.1,a.attachControl(),new M.g("hemi",_.Pq.Up(),n).intensity=1;var o=new e7(eU.P.CreateSphere("sun",{diameter:1},n),{id:"sun",name:"Sun",orbit:{parentIds:[],argumentOfPeriapsis:0,semiMajorAxis:0,initialMeanAnomaly:0,longitudeOfAscendingNode:0,inclination:0,eccentricity:0,p:2},type:"custom",axialTilt:0,mass:1e12,siderealDaySeconds:0}),i=new e7(eU.P.CreateSphere("earth",{diameter:.5},n),{id:"earth",name:"Earth",orbit:{parentIds:[o.model.id],argumentOfPeriapsis:0,semiMajorAxis:10,initialMeanAnomaly:0,longitudeOfAscendingNode:1.7,inclination:e3.S0.ToRadians(23.5),eccentricity:.5,p:2},type:"custom",axialTilt:e3.S0.ToRadians(23.5),mass:1e11,siderealDaySeconds:0}),s=new e7(eU.P.CreateSphere("moon",{diameter:.2},n),{id:"moon",name:"Moon",orbit:{parentIds:[i.model.id],argumentOfPeriapsis:0,semiMajorAxis:3,initialMeanAnomaly:0,longitudeOfAscendingNode:0,inclination:i.model.orbit.inclination+i.model.axialTilt,eccentricity:.7,p:2},type:"custom",mass:1e10,axialTilt:0,siderealDaySeconds:0}),l=[o,i,s],u=new Map;u.set(i,[o]),u.set(s,[i]);var c=new e9.G(e8.A);c.setOrbitalObjects(l,n),c.setVisibility(!0);var f=new e6.F(e8.A);f.setVisibility(!0),f.setOrbitalObjects(l,n);var d=_.uq.Identity(),p=0;return r.getTransform().setAbsolutePosition(new _.Pq(0,0,-10)),(0,S.t5)(r.getTransform(),o.getTransform().position,n.useRightHandedSystem),n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p+=t,r.update(t),l.forEach(function(e){var t;(0,e5.je)(e,null!=(t=u.get(e))?t:[],d,p),(0,e5.d_)(e,d,p)}),c.update(d)}),Promise.resolve(n)}var tt=n(63685);function tn(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function tr(e,t){var n;return(n=function(){var t,n,a,o,i,s,l,u,c,f;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(t=new E.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,t.clearColor.set(0,0,0,1),n=1e7,o=(a=new P.w(t)).getActiveCamera(),a.speed=n,o.maxZ*=n,a.getTransform().setAbsolutePosition(new r.Vector3(0,5,-10).scaleInPlace(n)),(0,S.t5)(a.getTransform(),r.Vector3.Zero(),t.useRightHandedSystem),o.attachControl(),t.enableDepthRenderer(),(i=new r.PointLight("light1",new r.Vector3(-1,.5,-2).scaleInPlace(10*n),t)).intensity=.7,s=r.MeshBuilder.CreateSphere("sphere",{diameter:2*n,segments:32},t),l=new eg.K(function(){return new ey.q(t)}),u={innerRadius:1.7*n,outerRadius:3.5*n,type:"procedural",seed:0,frequency:10,albedo:{r:120/255,g:112/255,b:104/255}},c=tt.zl.NewProcedural(u,l,0,t),[4,new Promise(function(e){"procedural"===c.patternLut.type&&c.patternLut.lut.getTexture().executeWhenReady(function(){e()})})];case 1:return d.sent(),f=new em.b(s,c,{name:"Sphere",radius:+n},[i],t),o.attachPostProcess(f),t.onBeforeRenderObservable.add(function(){var e=t.getEngine().getDeltaTime()/1e3;a.update(e)}),[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tn(o,r,a,i,s,"next",e)}function s(e){tn(o,r,a,i,s,"throw",e)}i(void 0)})})()}var ta=n(31411),to=n(4529),ti=n(97078),ts=n(34537),tl=n(25656);function tu(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function tc(e,t){var n;return(n=function(){var t,n,a,o,i,s;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(l){switch(l.label){case 0:return t=new E.Z(e),new r.FreeCamera("camera",r.Vector3.Zero(),t).attachControl(),[4,(0,eK.L)()];case 1:return l.sent(),n=new ts.Y((0,ti.u)()),a=new j.bk,o=new ec,(i=new tl.X(n,a,o)).htmlRoot.style.position="absolute",document.body.appendChild(i.htmlRoot),[4,ta.E.CreateAsync(new to.m(to.m.SAVES_KEY),new to.m(to.m.BACKUP_SAVE_KEY),n)];case 2:if((s=l.sent()).success)return[3,4];return[4,(0,eY.sQ)("Could not load saves",a)];case 3:case 5:return l.sent(),[2,t];case 4:return[4,i.populateCmdrList(n,s.value)]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tu(o,r,a,i,s,"next",e)}function s(e){tu(o,r,a,i,s,"throw",e)}i(void 0)})})()}var tf=n(82748),td=n(97678);function tp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function th(e){return{id:"jupiter",name:"Jupiter",type:"gasPlanet",radius:69911e3,mass:1898e24,axialTilt:(0,td.tR)(3.13),siderealDaySeconds:35730,orbit:{parentIds:function(e){if(Array.isArray(e))return tp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return tp(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tp(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),semiMajorAxis:7785472e5,eccentricity:.0934,inclination:(0,td.tR)(1.85),longitudeOfAscendingNode:(0,td.tR)(49.558),argumentOfPeriapsis:(0,td.tR)(286.502),initialMeanAnomaly:0,p:2},atmosphere:{pressure:tf.th,greenHouseEffectFactor:.7},colorPalette:{type:"textured",textureId:"jupiter"},rings:null,seed:0}}function tm(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function ty(e,t){var n;return(n=function(){var n,a,o,i,s,l,u,c,f;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(n=new r.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),[4,(0,eh.P)(n,t)];case 1:return a=d.sent(),[4,(0,C.z6)(n)];case 2:return d.sent(),i=(o=new P.w(n)).getActiveCamera(),o.speed=66e6,i.maxZ*=66e6,o.getTransform().setAbsolutePosition(new r.Vector3(0,1,-2).scaleInPlace(66e6)),(0,S.t5)(o.getTransform(),r.Vector3.Zero(),n.useRightHandedSystem),i.attachControl(),n.enableDepthRenderer(null,!1,!0),(s=new r.PointLight("light1",new r.Vector3(7,5,-10).scaleInPlace(66e6),n)).falloffType=r.Light.FALLOFF_STANDARD,V.w.EARTH_RADIUS=6371e3,l=th([]),u=new eg.K(function(){return new ey.q(n)}),c=new ev.s(l,a,u,n),f=new k.D(c.getTransform(),c.getBoundingRadius(),c.atmosphereUniforms,[s],n),i.attachPostProcess(f),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e),c.getTransform().rotate(r.Axis.Y,.1*e),c.updateMaterial([s],e)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tm(o,r,a,i,s,"next",e)}function s(e){tm(o,r,a,i,s,"throw",e)}i(void 0)})})()}function tb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tv(e){return{id:"saturn",name:"Saturn",type:"gasPlanet",radius:58232e3,mass:5683e23,axialTilt:(0,td.tR)(26.73),siderealDaySeconds:38361.6,orbit:{parentIds:function(e){if(Array.isArray(e))return tb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return tb(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tb(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),semiMajorAxis:143344937e4,eccentricity:.0565,inclination:(0,td.tR)(2.49),longitudeOfAscendingNode:(0,td.tR)(113.715),argumentOfPeriapsis:(0,td.tR)(336.092),initialMeanAnomaly:0,p:2},atmosphere:{pressure:tf.th,greenHouseEffectFactor:.5},colorPalette:{type:"textured",textureId:"saturn"},rings:{innerRadius:74658e3,outerRadius:136775e3,type:"textured",textureId:"saturn"},seed:0}}function tg(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function tw(e,t){var n;return(n=function(){var n,a,o,i,s,l,u,c,f,d,p,h,m;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(y){switch(y.label){case 0:return(n=new r.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),[4,(0,C.z6)(n)];case 1:return y.sent(),[4,(0,N.Q)(n,t)];case 2:return a=y.sent(),i=(o=new P.w(n)).getActiveCamera(),o.speed=96e6,i.maxZ*=96e6,o.getTransform().setAbsolutePosition(new r.Vector3(0,2,-2).scaleInPlace(96e6)),(0,S.t5)(o.getTransform(),r.Vector3.Zero(),n.useRightHandedSystem),i.attachControl(),n.enableDepthRenderer(null,!1,!0),(s=new r.TransformNode("sun",n)).position=new r.Vector3(7,5.5,-10).scaleInPlace(96e6),(l=new r.PointLight("light1",r.Vector3.Zero(),n)).falloffType=r.Light.FALLOFF_STANDARD,l.parent=s,V.w.EARTH_RADIUS=6371e3,u=tv([]),c=new eg.K(function(){return new ey.q(n)}),f=new ev.s(u,a.textures,c,n),d=null,null!==u.rings&&(d=new R.U(0,f.getTransform(),u.rings.innerRadius,u.rings.outerRadius,n)),p=new eb.U(f.getTransform(),f.getBoundingRadius(),f.ringsUniforms,null,!1,[{getBoundingRadius:function(){return 0},getLight:function(){return l}}],n),i.attachPostProcess(p),h=new k.D(f.getTransform(),f.getBoundingRadius(),f.atmosphereUniforms,[l],n),i.attachPostProcess(h),null!==f.ringsUniforms&&(m=new em.b(f.getTransform(),f.ringsUniforms,f.model,[l],n),i.attachPostProcess(m)),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e),f.updateMaterial([l],e),null==d||d.update(i.globalPosition,a.objects.asteroids,e)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tg(o,r,a,i,s,"next",e)}function s(e){tg(o,r,a,i,s,"throw",e)}i(void 0)})})()}function tP(){return{id:"sun",name:"Sun",type:"star",radius:695508e3,mass:1989e27,blackBodyTemperature:5778,axialTilt:(0,td.tR)(7.25),siderealDaySeconds:2217888,orbit:{parentIds:[],semiMajorAxis:0,eccentricity:0,p:2,inclination:0,longitudeOfAscendingNode:0,argumentOfPeriapsis:0,initialMeanAnomaly:0},rings:null,seed:0}}var tS=n(16580),tR=n(35531),tA=n(24111),tC=n(72023),tx=n(6110),tT=n(46515);function tE(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function tO(e,t){var n;return(n=function(){var n,a,o,i,s,l,u,c,f,d,p,h,m,y,b,v;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(g){switch(g.label){case 0:return(n=new tS.B(e)).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),[4,(0,C.z6)(n)];case 1:return g.sent(),[4,(0,eK.L)()];case 2:return g.sent(),[4,(0,N.Q)(n,t)];case 3:return a=g.sent(),i=(o=new P.w(n)).getActiveCamera(),o.speed=66e6,i.maxZ*=66e6,[4,n.setActiveControls(o)];case 4:var w,R,A,x,T,E,O,k,I,M;return g.sent(),n.enableDepthRenderer(null,!1,!0),s=new tC.u(V.w.VERTEX_RESOLUTION),l=new tT.$,[4,tx.k.CreateAsync((w=tP(),R={id:"mercury",name:"Mercury",type:"telluricPlanet",radius:2439700,mass:3301e20,axialTilt:(0,td.tR)(.034),siderealDaySeconds:5067014.4,waterAmount:0,temperature:{min:437,max:437},orbit:{parentIds:[w.id],semiMajorAxis:(0,td.kK)(.38),eccentricity:.2056,p:2,inclination:(0,td.tR)(7),longitudeOfAscendingNode:(0,td.tR)(48.331),argumentOfPeriapsis:(0,td.tR)(29.124),initialMeanAnomaly:0},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:0,continent_base_height:0,mountains_frequency:0},atmosphere:null,rings:null,clouds:null,ocean:null,seed:0},A={id:"venus",name:"Venus",type:"telluricPlanet",radius:6051800,mass:48e19,axialTilt:(0,td.tR)(177.36),siderealDaySeconds:0x14064f0,waterAmount:0,temperature:{min:719,max:763},orbit:{parentIds:[w.id],semiMajorAxis:1082095e5,eccentricity:.0067,inclination:(0,td.tR)(3.39),longitudeOfAscendingNode:(0,td.tR)(76.68),argumentOfPeriapsis:(0,td.tR)(54.88),initialMeanAnomaly:0,p:2},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:2e4,continent_base_height:0,mountains_frequency:5},rings:null,atmosphere:{pressure:(0,td.J3)(93),greenHouseEffectFactor:.99},clouds:{layerRadius:6061800,smoothness:.7,specularPower:2,frequency:4,detailFrequency:12,coverage:0,sharpness:2.5,color:{r:.8,g:.8,b:.1},worleySpeed:5e-4,detailSpeed:.003},ocean:null,seed:0},x={id:"earth",name:"Earth",type:"telluricPlanet",radius:6371e3,mass:5972e21,axialTilt:(0,td.tR)(23.44),siderealDaySeconds:86400,waterAmount:1,temperature:{min:(0,td.F1)(-50),max:(0,td.F1)(50)},orbit:{parentIds:[w.id],semiMajorAxis:14959787e4,eccentricity:.0167,inclination:(0,td.tR)(0),longitudeOfAscendingNode:(0,td.tR)(0),argumentOfPeriapsis:(0,td.tR)(114.20783),initialMeanAnomaly:0,p:2},terrainSettings:{continents_frequency:1,continents_fragmentation:.65,bumps_frequency:30,max_bump_height:1500,max_mountain_height:1e4,continent_base_height:19e3,mountains_frequency:360},rings:null,atmosphere:{pressure:(0,td.J3)(1),greenHouseEffectFactor:.5},clouds:{layerRadius:6401e3,smoothness:.7,specularPower:2,frequency:4,detailFrequency:12,coverage:.5,sharpness:2.5,color:{r:.8,g:.8,b:.8},worleySpeed:5e-4,detailSpeed:.003},ocean:{depth:1e4},seed:0},T={id:"moon",name:"Moon",type:"telluricSatellite",radius:1737100,mass:7342e19,axialTilt:(0,td.tR)(6.68),siderealDaySeconds:2360620.8,waterAmount:0,temperature:{min:100,max:100},orbit:{parentIds:[x.id],semiMajorAxis:3844e5,eccentricity:.0549,inclination:(0,td.tR)(5.145),longitudeOfAscendingNode:(0,td.tR)(125.08),argumentOfPeriapsis:(0,td.tR)(318.15),initialMeanAnomaly:0,p:2},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:0,continent_base_height:0,mountains_frequency:0},atmosphere:null,clouds:null,ocean:null,seed:0},E={id:"mars",name:"Mars",type:"telluricPlanet",radius:3389500,mass:64171e19,axialTilt:(0,td.tR)(25.19),siderealDaySeconds:88732.79999999999,waterAmount:0,temperature:{min:(0,td.F1)(-140),max:(0,td.F1)(20)},orbit:{parentIds:[w.id],semiMajorAxis:2279392e5,eccentricity:.0934,inclination:(0,td.tR)(1.85),longitudeOfAscendingNode:(0,td.tR)(49.558),argumentOfPeriapsis:(0,td.tR)(286.502),initialMeanAnomaly:0,p:2},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:0,continent_base_height:0,mountains_frequency:0},atmosphere:{pressure:(0,td.J3)(.006),greenHouseEffectFactor:.1},rings:null,clouds:null,ocean:null,seed:0},O=th([w.id]),k=tv([w.id]),I={id:"uranus",name:"Uranus",type:"gasPlanet",radius:25362e3,mass:8681e22,axialTilt:(0,td.tR)(97.77),siderealDaySeconds:3600*17.24,orbit:{parentIds:[w.id],semiMajorAxis:287246327e4,eccentricity:.0565,inclination:(0,td.tR)(.77),longitudeOfAscendingNode:(0,td.tR)(74.229),argumentOfPeriapsis:(0,td.tR)(96.541),initialMeanAnomaly:0,p:2},colorPalette:{type:"textured",textureId:"uranus"},atmosphere:{pressure:(0,td.J3)(.1),greenHouseEffectFactor:.5},rings:{innerRadius:50724e3,outerRadius:62e6,type:"textured",textureId:"uranus"},seed:0},M={id:"neptune",name:"Neptune",type:"gasPlanet",radius:24622e3,mass:1024e23,axialTilt:(0,td.tR)(28.32),siderealDaySeconds:57996,orbit:{parentIds:[w.id],semiMajorAxis:449506e7,eccentricity:.0086,inclination:(0,td.tR)(1.77),longitudeOfAscendingNode:(0,td.tR)(131.72169),argumentOfPeriapsis:(0,td.tR)(265.646853),initialMeanAnomaly:0,p:2},colorPalette:{type:"textured",textureId:"neptune"},atmosphere:{pressure:(0,td.J3)(.1),greenHouseEffectFactor:.7},rings:null,seed:0},{name:"Sol",coordinates:{starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},stellarObjects:[w],planets:[R,A,x,E,O,k,I,M],satellites:[T],anomalies:[],orbitalFacilities:[]}),l,a,n)];case 5:(u=g.sent()).initPositions(2,s),c=u.getStellarObjects()[0],o.getTransform().position=c.getTransform().position.add(new r.Vector3(0,1,-2).scaleInPlace(7*c.getBoundingRadius())),(0,S.t5)(o.getTransform(),c.getTransform().position,n.useRightHandedSystem),(f=new tR.X(a.textures,n)).addCelestialBodies(u.getCelestialBodies(),u.getStellarObjects(),[u.starFieldBox.mesh]),d=new tA.p,p=!0,h=!1,m=void 0;try{for(y=u.getCelestialBodies()[Symbol.iterator]();!(p=(b=y.next()).done);p=!0)v=b.value,d.addObject(v)}catch(e){h=!0,m=e}finally{try{p||null==y.return||y.return()}finally{if(h)throw m}}return n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e),s.update(a),f.update(e),u.update(e,s),d.update(i)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tE(o,r,a,i,s,"next",e)}function s(e){tE(o,r,a,i,s,"throw",e)}i(void 0)})})()}var tk=n(1916),tI=n(36589),tM=n(71191);function t_(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function tD(e,t){var n;return(n=function(){var n,a,o,i,s,l,u,c,f;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(n=new r.Scene(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),[4,(0,C.z6)(n)];case 1:return d.sent(),[4,(0,eh.P)(n,t)];case 2:var p;return a=d.sent(),i=(o=new P.w(n)).getActiveCamera(),o.speed=9e8,i.maxZ*=9e8,n.enableDepthRenderer(i,!1,!0),o.getTransform().setAbsolutePosition(new r.Vector3(0,2,-2).scaleInPlace(9e8)),(0,S.t5)(o.getTransform(),r.Vector3.Zero(),n.useRightHandedSystem),(null!=(p=r.FreeCamera)&&"undefined"!=typeof Symbol&&p[Symbol.hasInstance]?!!p[Symbol.hasInstance](i):i instanceof p)&&i.setTarget(new r.Vector3(-.001,0,-.1)),i.attachControl(),s=new ee.y(a.environment.milkyWay,1e6,n),l=tP(),u=new tM.F(l,a,n),c=new tI.N(u.mesh,u.volumetricLightUniforms,[s.mesh],n),i.attachPostProcess(c),f=new tk.O(u.getTransform(),u.getBoundingRadius(),u.getLight().diffuse,n),i.attachPostProcess(f),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e),u.updateMaterial(e)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){t_(o,r,a,i,s,"next",e)}function s(e){t_(o,r,a,i,s,"throw",e)}i(void 0)})})()}var tL=n(65711),tN=n(40726);function tj(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function tB(e,t){var n;return(n=function(){var n,r,a,o,i,s,l,u,c,f,d,p,h;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(m){switch(m.label){case 0:return(r=new E.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,r.clearColor.set(0,0,0,1),[4,(0,C.z6)(r)];case 1:return m.sent(),[4,(0,N.Q)(r,t)];case 2:return a=m.sent(),(o=new P.w(r)).speed=2e3,(i=o.getActiveCamera()).maxZ=1e5*V.w.EARTH_RADIUS,i.attachControl(),s=tf.AU,l={starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},u=new ts.Y((0,ti.u)()).getSystemGalacticPosition(l),c=tP(),(f=new tM.F(c,a.textures,r)).getTransform().position=new _.Pq(7,2,5).normalize().scaleInPlace(s),d=new URLSearchParams(window.location.search).get("seed"),(p=(0,tL.S)("station",null!==d?Number(d):Math.random()*V.w.SEED_HALF_RANGE,l,u,[c])).orbit.semiMajorAxis=s,null==(n=(h=new tN.x(p,new Map([[c,s]]),a,r)).landingBays[0])||n.getTransform().position.addToRef(new _.Pq(0,3e3,0),o.getTransform().position),(0,S.t5)(o.getTransform(),h.getTransform().position,r.useRightHandedSystem),r.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;o.update(t);var n=i.globalPosition;h.update([f],n,t)}),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tj(o,r,a,i,s,"next",e)}function s(e){tj(o,r,a,i,s,"throw",e)}i(void 0)})})()}var tF=n(95631),tV=n(61125),tH=n(53940);function tU(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function tG(e,t){var n;return(n=function(){var n,r,a,o,i,s,l,u,c,f,d,p,h,m;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(y){switch(y.label){case 0:return(n=new E.Z(e)).useRightHandedSystem=!0,[4,(0,C.z6)(n)];case 1:return y.sent(),[4,(0,eK.L)()];case 2:return y.sent(),[4,(0,N.Q)(n,t)];case 3:if(r=y.sent(),a=new j.bk,o=new es.g9,i=new ec,s=new ts.Y((0,ti.u)()),void 0===(u=(l=tV.a.Default(s)).serializedSpaceships.shift()))throw Error("No spaceship found in player data");return[4,B.Z.Deserialize(u,l.spareSpaceshipComponents,n,r,a)];case 4:if(c=y.sent(),l.instancedSpaceships.push(c),(f=new el.l(c,n,a,o,i).thirdPersonCamera).attachControl(),n.activeCamera=f,d=s.fallbackSystem,p=new tF.k,h=new tH.M(l,p,s,a,i),void 0===(m=d.orbitalFacilities[0]))throw Error("No station found in system model");return h.setStation(m,[],l),h.setVisibility(!0),window.player=l,[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tU(o,r,a,i,s,"next",e)}function s(e){tU(o,r,a,i,s,"throw",e)}i(void 0)})})()}var tZ=n(7657),tq=n(93060);function tW(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function tz(e,t){var n;return(n=function(){var n,r,a,o,i;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return(n=new E.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),r=new ts.Y((0,ti.u)()),[4,(0,tZ.H)(n,t)];case 1:return a=s.sent(),o=new tq.b(r,a,n),i=new P.w(n),n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;i.update(t),o.update(i.getActiveCamera())}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tW(o,r,a,i,s,"next",e)}function s(e){tW(o,r,a,i,s,"throw",e)}i(void 0)})})()}var tY=n(14407),tQ=n(90584),tX=n(98406),tK=n(64753);function tJ(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function t$(e,t){var n;return(n=function(){var n,r,a,o,i,s,l,u,c,f;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return[4,(0,eK.L)()];case 1:return d.sent(),n=new ts.Y((0,ti.u)()),r=tV.a.Default(n),a=new tY.A(n),o=new j.bk,i=new ec,(s=new E.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,s.clearColor.set(0,0,0,1),[4,(0,tZ.H)(s,t)];case 2:if(l=d.sent(),(u=new tX.E(r,s,l,a,n,o,i)).setCurrentStarSystem(n.fallbackSystem.coordinates,!0),null!==(c=new URLSearchParams(window.location.search).get("systemCoordinates"))){if(null===(f=(0,tK.z)(decodeURIComponent(c))))throw Error("Invalid system coordinates json provided in URL parameters.");u.focusOnSystem(tQ.Y.parse(f),!0)}return[2,s]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tJ(o,r,a,i,s,"next",e)}function s(e){tJ(o,r,a,i,s,"throw",e)}i(void 0)})})()}var t0=n(11577),t1=n(85294),t2=n(41330),t3=n(92647),t5=n(61800),t6=n(7647);function t4(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function t7(e,t){var n;return(n=function(){var n,a,o,i,s,l,u,c,f,d;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(p){switch(p.label){case 0:return[4,(0,eK.L)()];case 1:var h,m,y,b,v,g,w;return p.sent(),n=new ts.Y((h={starSectorX:0,starSectorY:1,starSectorZ:0,localX:0,localY:0,localZ:0},(m=(0,t1.uF)("star0",420,"Weierstrass",[])).blackBodyTemperature=5778,(y=(0,t2.k)("hecate",253,"H\xe9cate",[m])).temperature.min=(0,td.F1)(-40),y.temperature.max=(0,td.F1)(30),y.orbit.semiMajorAxis=21e3*y.radius,b=(0,tL.S)("hecate->station",0,h,{x:0,y:0,z:0},[y]),(v=(0,t3.l)("hecate->manaleth",23,"Manaleth",[y])).orbit.inclination=(0,td.tR)(45),v.orbit.semiMajorAxis=(0,t0.oe)(v.siderealDaySeconds,y.mass),null!==(g=(0,t2.k)("ares",.3725,"Ares",[m])).clouds&&(g.clouds.coverage=1),null!==g.atmosphere&&(g.atmosphere.pressure=.5*tf.th),g.orbit.semiMajorAxis=25100*y.radius,(w=(0,ep.p)("andromaque",.28711440474126226,"Andromaque",[m])).orbit.semiMajorAxis=25300*y.radius,w.orbit.eccentricity=.8,{name:"Alpha Testis",coordinates:h,stellarObjects:[m],planets:[y,g,w],satellites:[v],anomalies:[],orbitalFacilities:[b]})),a=tV.a.Default(n),o=new tF.k,i=new j.bk,s=new es.g9,l=new ec,(u=new tS.B(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,[4,(0,C.z6)(u)];case 2:return c=p.sent(),[4,(0,N.Q)(u,t)];case 3:return f=p.sent(),[4,(d=new t6.l(u,a,e,c,o,n,i,s,l,f)).resetPlayer()];case 4:return p.sent(),[4,d.switchToSpaceshipControls()];case 5:return p.sent(),[4,d.loadStarSystem(n.fallbackSystem)];case 6:return p.sent(),d.initStarSystem(),(0,t5.Ez)(d.getSpaceshipControls(),d.getStarSystem().getStellarObjects()[0],d.getStarSystem()),d.getSpaceshipControls().getTransform().rotate(r.Axis.Y,Math.PI,r.Space.LOCAL),u.onBeforeRenderObservable.add(function(){var e=u.getEngine().getDeltaTime()/1e3;l.update(e)}),[2,d.scene]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){t4(o,r,a,i,s,"next",e)}function s(e){t4(o,r,a,i,s,"throw",e)}i(void 0)})})()}var t8=n(73109),t9=n(46245),ne=n(59431);function nt(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function nn(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){nt(o,r,a,i,s,"next",e)}function s(e){nt(o,r,a,i,s,"throw",e)}i(void 0)})}}function nr(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function na(e,t){return nn(function(){var n,r,a,o,i,s,l;return nr(this,function(u){switch(u.label){case 0:return(n=new E.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,[4,(0,J.s)(n,t)];case 1:return r=u.sent(),(a=new P.w(n)).speed=2e6,(o=a.getActiveCamera()).attachControl(),n.activeCamera=o,n.enableDepthRenderer(o,!1,!0),new ee.y(r.milkyWay,1e6,n),i=(0,t8.p)("blackHole",42,"Black Hole Demo",[]),(s=new t9.a(i,r.milkyWay,n)).getTransform().position=new _.Pq(0,-.2,1).scaleInPlace(20*s.getRadius()),l=new ne.$(s.getTransform(),s.blackHoleUniforms,n),o.attachPostProcess(l),o.maxZ=1e12,(0,S.t5)(a.getTransform(),s.getTransform().position,n.useRightHandedSystem),n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;a.update(t),l.update(t)}),document.addEventListener("click",function(){return nn(function(){var e;return nr(this,function(t){switch(t.label){case 0:if(null!==document.pointerLockElement)return[3,2];return[4,null==(e=a.getActiveCamera().getEngine().getRenderingCanvas())?void 0:e.requestPointerLock()];case 1:t.sent(),t.label=2;case 2:return[2]}})})()}),[2,n]}})})()}var no=n(69263),ni=n(87861),ns=n(44261),nl=n(51303);function nu(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function nc(e,t){var n;return(n=function(){var n,a,o,i,s,l,u,c,f;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(n=new E.Z(e,{useFloatingOrigin:!0})).useRightHandedSystem=!0,[4,(0,C.z6)(n)];case 1:return d.sent(),[4,(0,eh.P)(n,t)];case 2:return a=d.sent(),(o=new P.w(n)).speed=2e9,(i=o.getActiveCamera()).attachControl(),n.activeCamera=i,n.enableDepthRenderer(i,!1,!0),s=(0,no.z)("neutronStar",456,"Neutron Star Demo",[]),(l=new ns.G(s,a,n)).getTransform().position=new _.Pq(0,0,1).scaleInPlace(2e6*l.getRadius()),u=new tI.N(l.mesh,l.volumetricLightUniforms,[],n),i.attachPostProcess(u),c=new ni.A(l.getTransform(),l.getRadius(),l.model.dipoleTilt,n),i.attachPostProcess(c),f=new tk.O(l.getTransform(),l.getRadius(),(0,nl.C)(s.blackBodyTemperature),n),i.attachPostProcess(f),i.maxZ=1e12,(0,S.t5)(o.getTransform(),l.getTransform().position,n.useRightHandedSystem),n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;o.update(t),l.getTransform().rotate(r.Axis.Y,2*Math.PI*t/s.siderealDaySeconds),c.update(t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){nu(o,r,a,i,s,"next",e)}function s(e){nu(o,r,a,i,s,"throw",e)}i(void 0)})})()}var nf=n(23043),nd=n(48104),np=n(71518),nh=n(52107),nm=n(35514);function ny(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function nb(e,t){var n;return(n=function(){var t,n,a,o;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:return t=new E.Z(e),(n=new r.FreeCamera("camera1",new r.Vector3(0,5,-10),t)).setTarget(r.Vector3.Zero()),n.attachControl(),[4,(0,eK.L)()];case 1:switch(i.sent(),a=new nf.O(new j.bk),document.body.appendChild(a.root),null!=(o=new URLSearchParams(window.location.search).get("tutorial"))?o:"flight"){case"flight":return[3,2];case"fuelScoop":return[3,4];case"stationLanding":return[3,6];case"starMap":return[3,8]}return[3,10];case 2:return[4,a.setTutorial(new nd.$)];case 3:case 5:case 7:case 9:return i.sent(),[3,10];case 4:return[4,a.setTutorial(new np.F)];case 6:return[4,a.setTutorial(new nm.M)];case 8:return[4,a.setTutorial(new nh.r)];case 10:return[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){ny(o,r,a,i,s,"next",e)}function s(e){ny(o,r,a,i,s,"throw",e)}i(void 0)})})()}var nv=n(98334);function ng(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function nw(e,t){var n;return(n=function(){var t,n,a,o,i;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return(t=new E.Z(e)).useRightHandedSystem=!0,a=(n=new P.w(t)).getActiveCamera(),[4,(0,C.z6)(t)];case 1:return s.sent(),(o=r.MeshBuilder.CreateBox("Anchor",{size:10},t)).position.z=200,(i=new nv.D(t)).setThrottle(1),i.getTransform().parent=o,t.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;i.update(t),n.update(t),o.position.z-=2e3*t,n.getTransform().position.z-=2e3*t;var r=a.globalPosition;o.position.subtractInPlace(r),n.getTransform().position.subtractInPlace(r)}),[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){ng(o,r,a,i,s,"next",e)}function s(e){ng(o,r,a,i,s,"throw",e)}i(void 0)})})()}function nP(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function nS(e,t){var n;return(n=function(){var t,n,s,c,p;function y(n){t.cameras.forEach(function(e){return e.attachPostProcess(n)}),t.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(n)}),t.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;n.update(t)})}return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(g){switch(g.label){case 0:var w,P,S,R,A,C,x,T,O,k;return((t=new E.Z(e)).useRightHandedSystem=!0,n=new URLSearchParams(window.location.search),(s=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5,_.Pq.Zero(),t)).attachControl(),s.lowerRadiusLimit=.5,s.wheelPrecision*=100,s.minZ=.01,c=t.enableDepthRenderer(null,!1,!0),"mandelbulb"===(p=n.get("fractal")))?(w=(0,f.G)("mandelbulb",1e5*Math.random(),"XR Anomaly",[]),(P=new i.i(w,t)).getTransform().scalingDeterminant=1/4e5,y(new d.W(P.getTransform(),P.getBoundingRadius(),w,t,[])),P.getTransform()):"julia"===p?(S=(0,a.h)("julia",1e5*Math.random(),"XR Anomaly",[]),(R=new i.i(S,t)).getTransform().scalingDeterminant=1/4e5,y(new o.t(R.getTransform(),R.getBoundingRadius(),S.accentColor,t,[])),R.getTransform()):"mandelbox"===p?(A=(0,l.c)("mandelbox",1e5*Math.random(),"XR Anomaly",[]),(C=new i.i(A,t)).getTransform().scalingDeterminant=1e-5,y(new u.M(C.getTransform(),C.getBoundingRadius(),A,t,[])),C.getTransform()):"pyramid"===p?(x=(0,b.p)("sierpinski",1e5*Math.random(),"XR Anomaly",[]),(T=new i.i(x,t)).getTransform().scalingDeterminant=1e-5,y(new v.$(T.getTransform(),T.getBoundingRadius(),x,t,[])),T.getTransform()):(O=(0,h.w)("menger",1e5*Math.random(),"XR Anomaly",[]),(k=new i.i(O,t)).getTransform().scalingDeterminant=1e-5,y(new m.Q(k.getTransform(),k.getBoundingRadius(),O,t,[])),k.getTransform()),[4,t.createDefaultXRExperienceAsync()];case 1:return g.sent().baseExperience.camera.setTransformationFromNonVRCamera(s,!0),t.onBeforeCameraRenderObservable.add(function(e){c.getDepthMap().activeCamera=e}),[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){nP(o,r,a,i,s,"next",e)}function s(e){nP(o,r,a,i,s,"throw",e)}i(void 0)})})()}var nR=function(){var e;function t(){var e;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");e=new Map([["orbitalDemo",te],["tunnel",eN],["automaticLanding",U],["debugAssets",eo],["spaceStation",tB],["spaceStationUI",tG],["xr",nS],["flightDemo",ed],["neutronStar",nc],["character",X],["starMapView",t$],["starMap",tz],["tutorial",nb],["asteroidField",T],["starSystemView",t7],["rings",tr],["sierpinski",g],["mandelbox",c],["mandelbulb",p],["juliaSet",s],["mengerSponge",y],["atmosphericScattering",I],["darkKnight",en],["blackHole",na],["gasPlanet",eP],["jupiter",ty],["saturn",tw],["sol",tO],["grass",eE],["warpTunnel",nw],["saveLoadingPanelContent",tc],["sun",tD],["gravitySystem",eI],["interaction",e1]]),"map"in this?Object.defineProperty(this,"map",{value:e,enumerable:!0,configurable:!0,writable:!0}):this.map=e}return e=[{key:"register",value:function(e,t){this.map.set(e,t)}},{key:"get",value:function(e){var t;return null!=(t=this.map.get(e))?t:ei}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()},51881:function(e,t,n){n.d(t,{ez:()=>f,tZ:()=>d,z6:()=>c,zH:()=>p}),n(54785);var r=n(61365),a=n(70149),o=n(84794),i=n(53946);function s(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,l,"next",e)}function l(e){s(o,r,a,i,l,"throw",e)}i(void 0)})}}function u(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){var u=[s,l];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function c(e,t){return l(function(e){var t,n,o,i,s,l,c=arguments;return u(this,function(u){switch(u.label){case 0:if(t=c.length>1&&void 0!==c[1]?c[1]:r.Vector3.Zero(),n=c.length>2?c[2]:void 0,i=r.HavokPlugin.bind,s=[void 0,!1],null==n)return[3,1];return l=n,[3,3];case 1:return[4,(0,a.A)()];case 2:l=u.sent(),u.label=3;case 3:return o=new(i.apply(r.HavokPlugin,s.concat([l]))),e.enablePhysics(t,o),[2,o]}})}).apply(this,arguments)}function f(e,t,n){var a,i,s=new o.SkyMaterial("skyMaterial",t);s.backFaceCulling=!1,s.sunPosition=e,s.useSunPosition=!0;var l=r.MeshBuilder.CreateBox("skyBox",{size:null!=(i=null==n?void 0:n.size)?i:1e3},t);l.material=s,l.infiniteDistance=!0,l.isPickable=!1,l.ignoreCameraMaxZ=!0;var u=new r.ReflectionProbe("ref",512,t);null==(a=u.renderList)||a.push(l),t.customRenderTargets.push(u.cubeTexture),t.environmentTexture=u.cubeTexture}function d(e,t){var n=new r.CascadedShadowGenerator(null!=(l=null==t?void 0:t.resolution)?l:2048,e);n.transparencyShadow=!0,n.stabilizeCascades=!1,n.autoCalcDepthBounds=!0,n.lambda=1,n.usePercentageCloserFiltering=!0,n.filteringQuality=r.CascadedShadowGenerator.QUALITY_HIGH,n.depthClamp=!0,n.numCascades=null!=(u=null==t?void 0:t.cascadeCount)?u:4,n.shadowMaxZ=null!=(c=null==t?void 0:t.maxZ)?c:200,n.bias*=50,n.normalBias*=50,n.debug=null!=(f=null==t?void 0:t.debug)&&f;var a=function(e){e.infiniteDistance||(n.addShadowCaster(e),e.receiveShadows=!0)},o=!0,i=!1,s=void 0;try{for(var l,u,c,f,d,p=e.getScene().meshes[Symbol.iterator]();!(o=(d=p.next()).done);o=!0){var h=d.value;a(h)}}catch(e){i=!0,s=e}finally{try{o||null==p.return||p.return()}finally{if(i)throw s}}e.getScene().onNewMeshAddedObservable.add(function(e){a(e)});var m=new Map,y=null;return e.getScene().onBeforeCameraRenderObservable.add(function(t){if(t!==y){var r=!0,a=!1,o=void 0;try{for(var i,s=m.values()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)i.value.enabled=!1}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}y=t;var l=m.get(t);void 0===l&&(l=e.getScene().enableDepthRenderer(t),m.set(t,l)),l.enabled=!0,n.setDepthRenderer(l),n.autoCalcDepthBounds=!0}}),n}function p(e){return l(function(){var t,n,r;return u(this,function(a){switch(a.label){case 0:(t=document.createElement("div")).style.position="fixed",t.style.right="1.5rem",t.style.bottom="1.5rem",t.style.zIndex="1000",t.style.padding="0.75rem",t.style.borderRadius="0.75rem",t.style.backgroundColor="rgba(0, 0, 0, 0.75)",t.style.backdropFilter="blur(4px)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="center",t.style.gap="0.5rem",t.style.maxWidth="15rem",t.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.35)",(n=document.createElement("canvas")).style.width="12rem",n.style.height="12rem",t.appendChild(n),(r=document.createElement("div")).style.color="white",r.style.fontFamily="monospace",r.style.fontSize="0.75rem",r.style.wordBreak="break-all",r.style.textAlign="center",r.textContent=e,t.appendChild(r),document.body.appendChild(t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.toCanvas(n,e,{width:192,margin:1,color:{dark:"#000000ff",light:"#ffffffff"}})];case 2:return a.sent(),[3,4];case 3:return console.error("Failed to render QR code",a.sent()),t.remove(),[3,4];case 4:return[2]}})})()}},83472:function(e,t,n){n.d(t,{W:()=>r});function r(e){try{return window.btoa(encodeURIComponent(e))}catch(e){return null}}},30451:function(e,t,n){n.d(t,{E:()=>r});function r(e,t,n){return(0x466f45d*e^0x127409f*t^0x4f9ffb7*n)%1e9}},54600:function(e,t,n){n.d(t,{F4:()=>o,ep:()=>s,hz:()=>i});var r=n(82748),a=n(97678);function o(e){return Math.pow(e/r.G3,.78)*r.Ow}function i(e,t){return 2*Math.PI*Math.sqrt(e/t)}function s(e,t,n){var r,o=(r=(0,a.F1)(100),e<=0?0:1/(1/r+2044761436301033e-19*Math.log(101325/e))),i=(0,a.F1)(0);return!(e<.05)&&!(o<i)&&!(t>o)&&!(n<i)}},97678:function(e,t,n){n.d(t,{E1:()=>o,F1:()=>s,GI:()=>a,J3:()=>u,N9:()=>i,kK:()=>l,tR:()=>c});var r=n(82748);function a(e){return e/r.fM}function o(e){return e*r.fM}function i(e){return e/r.C}function s(e){return e+273.15}function l(e){return e*r.AU}function u(e){return 1e5*e}function c(e){return Math.PI/180*e}}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return i[e].call(n.exports,n,n.exports,l),n.exports}l.m=i,c=(u="function"==typeof Symbol)?Symbol("webpack queues"):"__webpack_queues__",f=l.aE=u?Symbol("webpack exports"):"__webpack_exports__",d=u?Symbol("webpack error"):"__webpack_error__",p=u?Symbol("webpack done"):"__webpack_done__",h=l.zS=u?Symbol("webpack defer"):"__webpack_defer__",m=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},l.a=(e,t,n)=>{n&&((r=[]).d=-1);var r,a,o,i,u=new Set,y=e.exports,b=new Promise((e,t)=>{i=t,o=e});b[f]=y,b[c]=e=>{r&&e(r),u.forEach(e),b.catch(()=>{})},e.exports=b,t(e=>{a=e.map(e=>{if(null!==e&&"object"==typeof e){if(!e[c]&&e[h]){var t=e[h];if(!t.some(e=>{var t=s[e];return!t||!1===t[p]}))return e;var n=e;e={then(e){Promise.all(t.map(l)).then(()=>e(n))}}}if(e[c])return e;if(e.then){var r=[];r.d=0,e.then(e=>{a[f]=e,m(r)},e=>{a[d]=e,m(r)});var a={};return a[h]=!1,a[c]=e=>e(r),a}}var o={};return o[c]=()=>{},o[f]=e,o});var t,n=()=>a.map(e=>{if(e[h])return e;if(e[d])throw e[d];return e[f]}),o=new Promise(e=>{(t=()=>e(n)).r=0;var o=e=>e!==r&&!u.has(e)&&(u.add(e),e&&!e.d&&(t.r++,e.push(t)));a.map(e=>e[h]||e[c](o))});return t.r?o:n()},e=>(e?i(b[d]=e):o(y),m(r),b[p]=!0)),r&&r.d<0&&(r.d=0)},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce((t,n)=>(l.f[n](e,t),t),[])),l.k=e=>""+e+".css",l.u=e=>""+e+"."+({1047:"f9870ba2cb35a4c3",1126:"c4bc4f6376d16eeb",1197:"4a4dfbcffee364c2",1203:"f09154a4964ca1ac",1259:"1263d26220352304",1267:"46e683738abd28df",1281:"281464be2add279f",1291:"fa6da1c953de2ddf",1644:"5110b8ab76187d05",171:"0dcf6eb2bc28372f",1889:"188d7628f51b495d",2168:"e3b06286c4c004e6",2209:"7df8ed9b31c3c743",2398:"dfae1487f83e637f",2745:"6c4b2ea66cb1e728",2888:"727bfc69633ecb2f",3313:"96307e0a60b4fa77",3634:"0e052b4584021251",371:"b6c66ccfcd858c16",4348:"b5afeca1a07064d0",4411:"786af4e3281b4f9b",4446:"f4aa6b5d4dac1898",4663:"90578b109cfdf18e",488:"2d8e4b167e1f0b27",5034:"f6b386c498838fe7",5123:"82d635288dcfd0c8",5264:"3292eebda0a110e4",5355:"9ca8d71f3f8aa344",6026:"178d566f5cfab677",6235:"3d8b6ab338b1e422",6484:"c8df4ff4e5d4634b",6557:"3ce387ce54df9c93",6577:"a5dbaa132fb180ef",6967:"4aa4f719c745d4b1",8214:"8b4f74cc79a0e1eb",8399:"38eaa5b68c6e7f1e",8429:"0711af8bd0e87eb7",863:"58a29d9a3ee53ef7",8956:"0f32b714e80afd89",8968:"d41e8143cae9af5a"})[e]+".js",l.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),y={},l.l=function(e,t,n,r){if(y[e])return void y[e].push(t);if(void 0!==n)for(var a,o,i=document.getElementsByTagName("script"),s=0;s<i.length;s++){var u=i[s];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")=="@cosmos-journeyer/game:"+n){a=u;break}}a||(o=!0,(a=document.createElement("script")).timeout=120,l.nc&&a.setAttribute("nonce",l.nc),a.setAttribute("data-webpack","@cosmos-journeyer/game:"+n),a.src=e),y[e]=[t];var c=function(t,n){a.onerror=a.onload=null,clearTimeout(f);var r=y[e];if(delete y[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach(function(e){return e(n)}),t)return t(n)},f=setTimeout(c.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=c.bind(null,a.onerror),a.onload=c.bind(null,a.onload),o&&document.head.appendChild(a)},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},b=[],l.O=(e,t,n,r)=>{if(t){r=r||0;for(var a=b.length;a>0&&b[a-1][2]>r;a--)b[a]=b[a-1];b[a]=[t,n,r];return}for(var o=1/0,a=0;a<b.length;a++){for(var[t,n,r]=b[a],i=!0,s=0;s<t.length;s++)(!1&r||o>=r)&&Object.keys(l.O).every(e=>l.O[e](t[s]))?t.splice(s--,1):(i=!1,r<o&&(o=r));if(i){b.splice(a--,1);var u=n();void 0!==u&&(e=u)}}return e},l.rv=()=>"1.6.5",l.g.importScripts&&(v=l.g.location+"");var u,c,f,d,p,h,m,y,b,v,g=l.g.document;if(!v&&g&&(g.currentScript&&"SCRIPT"===g.currentScript.tagName.toUpperCase()&&(v=g.currentScript.src),!v)){var w=g.getElementsByTagName("script");if(w.length)for(var P=w.length-1;P>-1&&(!v||!/^http(s?):/.test(v));)v=w[P--].src}if(!v)throw Error("Automatic publicPath is not supported in this browser");l.p=v=v.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e={4787:0},n="data-webpack-loading",(t=(t,n)=>{e[n]=0})(l.m,0,"4787"),l.f.css=(r,a,o)=>{var i=l.o(e,r)?e[r]:void 0;if(0!==i)if(i)a.push(i[2]);else if(4787==r){var s=new Promise(function(t,n){i=e[r]=[t,n]});a.push(i[2]=s);var u=l.p+l.k(r),c=Error(),f=function(n){if(l.o(e,r)&&(0!==(i=e[r])&&(e[r]=void 0),i))if("load"!==n.type){var a=n&&n.type,o=n&&n.target&&n.target.src;c.message="Loading css chunk "+r+" failed.\n("+a+": "+o+")",c.name="ChunkLoadError",c.type=a,c.request=o,i[1](c)}else t(l.m,r),i[0]()};"undefined"!=typeof document?((e,t,r,a,o)=>{var i,s,u="chunk-"+e;if(!a){for(var c=document.getElementsByTagName("link"),f=0;f<c.length;f++){var d=c[f],p=d.getAttribute("href")||d.href;if(p&&!p.startsWith(l.p)&&(p=l.p+(p.startsWith("/")?p.slice(1):p)),"stylesheet"==d.rel&&(p&&p.startsWith(t)||d.getAttribute("data-webpack")=="@cosmos-journeyer/game:"+u)){i=d;break}}if(!r)return}i||(s=!0,i=document.createElement("link"),l.nc&&i.setAttribute("nonce",l.nc),i.setAttribute("data-webpack","@cosmos-journeyer/game:"+u),i.setAttribute(n,1),i.rel="stylesheet",i.href=t);var h=(e,t)=>{if(i.onerror=i.onload=null,i.removeAttribute(n),clearTimeout(m),t&&"load"!=t.type&&i.parentNode.removeChild(i),r(t),e)return e(t)};if(i.getAttribute(n)){var m=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload)}else h(void 0,{type:"load",target:i});return a&&a.getAttribute("fetchpriority")&&i.setAttribute("fetchpriority",a.getAttribute("fetchpriority")),a?document.head.insertBefore(i,a):s&&document.head.appendChild(i)})(r,u,f,void 0,0):f({type:"load"})}else e[r]=0},l.b=document.baseURI||self.location.href,r={6181:0},l.f.j=function(e,t){var n=l.o(r,e)?r[e]:void 0;if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((t,a)=>n=r[e]=[t,a]);t.push(n[2]=a);var o=l.p+l.u(e),i=Error();l.l(o,function(t){if(l.o(r,e)&&(0!==(n=r[e])&&(r[e]=void 0),n)){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",i.name="ChunkLoadError",i.type=a,i.request=o,n[1](i)}},"chunk-"+e,e)}},l.O.j=e=>0===r[e],a=(e,t)=>{var n,a,[o,i,s]=t,u=0;if(o.some(e=>0!==r[e])){for(n in i)l.o(i,n)&&(l.m[n]=i[n]);if(s)var c=s(l)}for(e&&e(t);u<o.length;u++)a=o[u],l.o(r,a)&&r[a]&&r[a][0](),r[a]=0;return l.O(c)},(o=globalThis.webpackChunk_cosmos_journeyer_game=globalThis.webpackChunk_cosmos_journeyer_game||[]).forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o)),l.ruid="bundler=rspack@1.6.5";var S=l.O(void 0,["6267","3195","5299","8505","4260","7501","723","5621","6540","5511","4487","9768","8157","3988","1338","4787"],()=>l(7492));S=l.O(S)})();