/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

"use strict";(globalThis.webpackChunkcosmos_journeyer=globalThis.webpackChunkcosmos_journeyer||[]).push([["7778"],{15386:function(e,t,s){s.d(t,{$6:()=>g,DG:()=>f,Es:()=>d,Qq:()=>_,W:()=>m,kt:()=>p,vU:()=>A});var i=s(61834),r=s(57423),o=s(51577),n=s(91149),a=s(85296),l=s(70541),u=s(65098),h=s(49087),c=s(5902);function p(e){let t,s,r=[],o=[],a=[],l=[],u=e.width||e.size||1,h=e.height||e.size||1,p=0|(e.subdivisionsX||e.subdivisions||1),d=0|(e.subdivisionsY||e.subdivisions||1);for(t=0;t<=d;t++)for(s=0;s<=p;s++){let e=new i.P(s*u/p-u/2,0,(d-t)*h/d-h/2),r=new i.P(0,1,0);o.push(e.x,e.y,e.z),a.push(r.x,r.y,r.z),l.push(s/p,c.VJ?t/d:1-t/d)}for(t=0;t<d;t++)for(s=0;s<p;s++)r.push(s+1+(t+1)*(p+1)),r.push(s+1+t*(p+1)),r.push(s+t*(p+1)),r.push(s+(t+1)*(p+1)),r.push(s+1+(t+1)*(p+1)),r.push(s+t*(p+1));let _=new n.x;return _.indices=r,_.positions=o,_.normals=a,_.uvs=l,_}function d(e){let t,s,r,o,a=void 0!==e.xmin&&null!==e.xmin?e.xmin:-1,l=void 0!==e.zmin&&null!==e.zmin?e.zmin:-1,u=void 0!==e.xmax&&null!==e.xmax?e.xmax:1,h=void 0!==e.zmax&&null!==e.zmax?e.zmax:1,c=e.subdivisions||{w:1,h:1},p=e.precision||{w:1,h:1},d=[],_=[],g=[],f=[];c.h=c.h<1?1:c.h,c.w=c.w<1?1:c.w,p.w=p.w<1?1:p.w,p.h=p.h<1?1:p.h;let m={w:(u-a)/c.w,h:(h-l)/c.h};for(r=0;r<c.h;r++)for(o=0;o<c.w;o++)!function(e,r,o,n){let a=_.length/3,l=p.w+1;for(t=0;t<p.h;t++)for(s=0;s<p.w;s++){let e=[a+s+t*l,a+(s+1)+t*l,a+(s+1)+(t+1)*l,a+s+(t+1)*l];d.push(e[1]),d.push(e[2]),d.push(e[3]),d.push(e[0]),d.push(e[1]),d.push(e[3])}let u=i.P.Zero(),h=new i.P(0,1,0);for(t=0;t<=p.h;t++)for(s=0,u.z=t*(n-r)/p.h+r;s<=p.w;s++)u.x=s*(o-e)/p.w+e,u.y=0,_.push(u.x,u.y,u.z),g.push(h.x,h.y,h.z),f.push(s/p.w,t/p.h)}(a+o*m.w,l+r*m.h,a+(o+1)*m.w,l+(r+1)*m.h);let A=new n.x;return A.indices=d,A.positions=_,A.normals=g,A.uvs=f,A}function _(e){let t,s,o=[],a=[],l=[],u=[],c=e.colorFilter||new r.Wo(.3,.59,.11),p=e.alphaFilter||0,d=!1;if(e.minHeight>e.maxHeight){d=!0;let t=e.maxHeight;e.maxHeight=e.minHeight,e.minHeight=t}for(t=0;t<=e.subdivisions;t++)for(s=0;s<=e.subdivisions;s++){let r=new i.P(s*e.width/e.subdivisions-e.width/2,0,(e.subdivisions-t)*e.height/e.subdivisions-e.height/2),o=(((r.x+e.width/2)/e.width*(e.bufferWidth-1)|0)+((1-(r.z+e.height/2)/e.height)*(e.bufferHeight-1)|0)*e.bufferWidth)*4,n=e.buffer[o]/255,_=e.buffer[o+1]/255,g=e.buffer[o+2]/255,f=e.buffer[o+3]/255;d&&(n=1-n,_=1-_,g=1-g);let m=n*c.r+_*c.g+g*c.b;f>=p?r.y=e.minHeight+(e.maxHeight-e.minHeight)*m:r.y=e.minHeight-h.kn,e.heightBuffer&&(e.heightBuffer[t*(e.subdivisions+1)+s]=r.y),a.push(r.x,r.y,r.z),l.push(0,0,0),u.push(s/e.subdivisions,1-t/e.subdivisions)}for(t=0;t<e.subdivisions;t++)for(s=0;s<e.subdivisions;s++){let i=s+1+(t+1)*(e.subdivisions+1),r=s+1+t*(e.subdivisions+1),n=s+t*(e.subdivisions+1),l=s+(t+1)*(e.subdivisions+1),u=a[3*i+1]>=e.minHeight,h=a[3*r+1]>=e.minHeight,c=a[3*n+1]>=e.minHeight;u&&h&&c&&(o.push(i),o.push(r),o.push(n)),a[3*l+1]>=e.minHeight&&u&&c&&(o.push(l),o.push(i),o.push(n))}n.x.ComputeNormals(a,o,l);let _=new n.x;return _.indices=o,_.positions=a,_.normals=l,_.uvs=u,_}function g(e,t={},s){let i=new a.E(e,s);return i._setReady(!1),i._subdivisionsX=t.subdivisionsX||t.subdivisions||1,i._subdivisionsY=t.subdivisionsY||t.subdivisions||1,i._width=t.width||1,i._height=t.height||1,i._maxX=i._width/2,i._maxZ=i._height/2,i._minX=-i._maxX,i._minZ=-i._maxZ,p(t).applyToMesh(i,t.updatable),i._setReady(!0),i}function f(e,t,s=null){let i=new o.Kj(e,s);return d(t).applyToMesh(i,t.updatable),i}function m(e,t,s={},i=null){let o,n=s.width||10,h=s.height||10,c=s.subdivisions||1,p=s.minHeight||0,d=s.maxHeight||1,g=s.colorFilter||new r.Wo(.3,.59,.11),f=s.alphaFilter||0,A=s.updatable,y=s.onReady;i=i||u.l.LastCreatedScene;let T=new a.E(e,i);T._subdivisionsX=c,T._subdivisionsY=c,T._width=n,T._height=h,T._maxX=T._width/2,T._maxZ=T._height/2,T._minX=-T._maxX,T._minZ=-T._maxZ,T._setReady(!1),s.passHeightBufferInCallback&&(o=new Float32Array((c+1)*(c+1)));let b=(e,t,s)=>{_({width:n,height:h,subdivisions:c,minHeight:p,maxHeight:d,colorFilter:g,buffer:e,bufferWidth:t,bufferHeight:s,alphaFilter:f,heightBuffer:o}).applyToMesh(T,A),y&&y(T,o),T._setReady(!0)};return"string"==typeof t?l.w1.LoadImage(t,e=>{let t=e.width,s=e.height;i.isDisposed||b(i?.getEngine().resizeImageBitmap(e,t,s),t,s)},s.onError?s.onError:()=>{},i.offlineProvider):b(t.data,t.width,t.height),T}let A={CreateGround:g,CreateGroundFromHeightMap:m,CreateTiledGround:f};n.x.CreateGround=p,n.x.CreateTiledGround=d,n.x.CreateGroundFromHeightMap=_,o.Kj.CreateGround=(e,t,s,i,r,o)=>g(e,{width:t,height:s,subdivisions:i,updatable:o},r),o.Kj.CreateTiledGround=(e,t,s,i,r,o,n,a,l)=>f(e,{xmin:t,zmin:s,xmax:i,zmax:r,subdivisions:o,precision:n,updatable:l},a),o.Kj.CreateGroundFromHeightMap=(e,t,s,i,r,o,n,a,l,u,h)=>m(e,t,{width:s,height:i,subdivisions:r,minHeight:o,maxHeight:n,updatable:l,onReady:u,alphaFilter:h},a)},16091:function(e,t,s){s.d(t,{x:()=>o});var i=s(46363),r=s(99151);class o extends r.c{constructor(e){super(e)}getClassName(){return"DivideBlock"}_buildBlock(e){super._buildBlock(e);let t=this._outputs[0];return e.compilationString+=e._declareOutput(t)+` = ${this.left.associatedVariableName} / ${this.right.associatedVariableName};
`,this}}(0,i.H7)("BABYLON.DivideBlock",o)},1725:function(e,t,s){s.d(t,{S:()=>o});var i=s(46363),r=s(99151);class o extends r.c{constructor(e){super(e)}getClassName(){return"AddBlock"}_buildBlock(e){super._buildBlock(e);let t=this._outputs[0];return e.compilationString+=e._declareOutput(t)+` = ${this.left.associatedVariableName} + ${this.right.associatedVariableName};
`,this}}(0,i.H7)("BABYLON.AddBlock",o)},1793:function(e,t,s){s.d(t,{R:()=>p,m:()=>d});var i=s(21483),r=s(90314),o=s(61834),n=s(35038),a=s(46363),l=s(57645),u=s(40952),h=s(27736),c=s(28465);class p extends n.H{constructor(){super(...arguments),this.GREASED_LINE_HAS_COLOR=!1,this.GREASED_LINE_SIZE_ATTENUATION=!1,this.GREASED_LINE_COLOR_DISTRIBUTION_TYPE_LINE=!1,this.GREASED_LINE_RIGHT_HANDED_COORDINATE_SYSTEM=!1,this.GREASED_LINE_CAMERA_FACING=!0,this.GREASED_LINE_USE_OFFSETS=!1}}class d extends r.n{isCompatible(e){return!0}constructor(e,t,s){s=s||{color:l.Y.DEFAULT_COLOR};let r=new p;r.GREASED_LINE_HAS_COLOR=!!s.color&&!s.useColors,r.GREASED_LINE_SIZE_ATTENUATION=s.sizeAttenuation??!1,r.GREASED_LINE_COLOR_DISTRIBUTION_TYPE_LINE=1===s.colorDistributionType,r.GREASED_LINE_RIGHT_HANDED_COORDINATE_SYSTEM=(t??e.getScene()).useRightHandedSystem,r.GREASED_LINE_CAMERA_FACING=s.cameraFacing??!0,super(e,d.GREASED_LINE_MATERIAL_NAME,200,r,!0,!0),this.colorsTexture=null,this._forceGLSL=!1,this._forceGLSL=s?.forceGLSL||d.ForceGLSL,this._scene=t??e.getScene(),this._engine=this._scene.getEngine(),this._cameraFacing=s.cameraFacing??!0,this.visibility=s.visibility??1,this.useDash=s.useDash??!1,this.dashRatio=s.dashRatio??.5,this.dashOffset=s.dashOffset??0,this.width=s.width?s.width:s.sizeAttenuation?l.Y.DEFAULT_WIDTH_ATTENUATED:l.Y.DEFAULT_WIDTH,this._sizeAttenuation=s.sizeAttenuation??!1,this.colorMode=s.colorMode??0,this._color=s.color??null,this.useColors=s.useColors??!1,this._colorsDistributionType=s.colorDistributionType??0,this.colorsSampling=s.colorsSampling??i.l.NEAREST_NEAREST,this._colors=s.colors??null,this.dashCount=s.dashCount??1,this.resolution=s.resolution??new o.FM(this._engine.getRenderWidth(),this._engine.getRenderHeight()),s.colorsTexture?this.colorsTexture=s.colorsTexture:this._colors?this.colorsTexture=u.u.CreateColorsTexture(`${e.name}-colors-texture`,this._colors,this.colorsSampling,this._scene):(this._color=this._color??l.Y.DEFAULT_COLOR,u.u.PrepareEmptyColorsTexture(this._scene)),this._engine.onDisposeObservable.add(()=>{u.u.DisposeEmptyColorsTexture()})}getAttributes(e){e.push("grl_offsets"),e.push("grl_widths"),e.push("grl_colorPointers"),e.push("grl_counters"),this._cameraFacing?(e.push("grl_previousAndSide"),e.push("grl_nextAndCounters")):e.push("grl_slopes")}getSamplers(e){e.push("grl_colors")}getActiveTextures(e){this.colorsTexture&&e.push(this.colorsTexture)}getUniforms(e=0){let t=[{name:"grl_singleColor",size:3,type:"vec3"},{name:"grl_textureSize",size:2,type:"vec2"},{name:"grl_dashOptions",size:4,type:"vec4"},{name:"grl_colorMode_visibility_colorsWidth_useColors",size:4,type:"vec4"}];return this._cameraFacing&&t.push({name:"grl_projection",size:16,type:"mat4"},{name:"grl_aspect_resolution_lineWidth",size:4,type:"vec4"}),1===e&&t.push({name:"viewProjection",size:16,type:"mat4"}),{ubo:t,vertex:this._cameraFacing&&this._isGLSL(e)?`
                    uniform vec4 grl_aspect_resolution_lineWidth;
                    uniform mat4 grl_projection;
    `:"",fragment:this._isGLSL(e)?`
                    uniform vec4 grl_dashOptions;
                    uniform vec2 grl_textureSize;
                    uniform vec4 grl_colorMode_visibility_colorsWidth_useColors;
                    uniform vec3 grl_singleColor;
    `:""}}get isEnabled(){return!0}bindForSubMesh(e){if(this._cameraFacing){e.updateMatrix("grl_projection",this._scene.getProjectionMatrix()),this._isGLSL(this._material.shaderLanguage)||e.updateMatrix("viewProjection",this._scene.getTransformMatrix());let t=o.jp.Vector4["0"];t.x=this._aspect,t.y=this._resolution.x,t.z=this._resolution.y,t.w=this.width,e.updateVector4("grl_aspect_resolution_lineWidth",t)}let t=o.jp.Vector4["0"];t.x=u.u.BooleanToNumber(this.useDash),t.y=this._dashArray,t.z=this.dashOffset,t.w=this.dashRatio,e.updateVector4("grl_dashOptions",t);let s=o.jp.Vector4["1"];s.x=this.colorMode,s.y=this.visibility,s.z=this.colorsTexture?this.colorsTexture.getSize().width:0,s.w=u.u.BooleanToNumber(this.useColors),e.updateVector4("grl_colorMode_visibility_colorsWidth_useColors",s),this._color&&e.updateColor3("grl_singleColor",this._color);let i=this.colorsTexture??l.Y.EmptyColorsTexture;e.setTexture("grl_colors",i),e.updateFloat2("grl_textureSize",i?.getSize().width??1,i?.getSize().height??1)}prepareDefines(e,t,s){e.GREASED_LINE_HAS_COLOR=!!this.color&&!this.useColors,e.GREASED_LINE_SIZE_ATTENUATION=this._sizeAttenuation,e.GREASED_LINE_COLOR_DISTRIBUTION_TYPE_LINE=1===this._colorsDistributionType,e.GREASED_LINE_RIGHT_HANDED_COORDINATE_SYSTEM=t.useRightHandedSystem,e.GREASED_LINE_CAMERA_FACING=this._cameraFacing,e.GREASED_LINE_USE_OFFSETS=!!s.offsets}getClassName(){return d.GREASED_LINE_MATERIAL_NAME}getCustomCode(e,t=0){return this._isGLSL(t)?(0,h.k)(e,this._cameraFacing):(0,c.k)(e,this._cameraFacing)}dispose(){this.colorsTexture?.dispose(),super.dispose()}get colors(){return this._colors}set colors(e){this.setColors(e)}setColors(e,t=!1,s=!1){let i=this._colors?.length??0;if(this._colors=e,null===e||0===e.length)return void this.colorsTexture?.dispose();if(!t||s)if(this.colorsTexture&&i===e.length&&!s){let t=u.u.Color3toRGBAUint8(e);this.colorsTexture.update(t)}else this.colorsTexture?.dispose(),this.colorsTexture=u.u.CreateColorsTexture(`${this._material.name}-colors-texture`,e,this.colorsSampling,this._scene)}updateLazy(){this._colors&&this.setColors(this._colors,!1,!0)}get dashCount(){return this._dashCount}set dashCount(e){this._dashCount=e,this._dashArray=1/e}get sizeAttenuation(){return this._sizeAttenuation}set sizeAttenuation(e){this._sizeAttenuation=e,this.markAllDefinesAsDirty()}get color(){return this._color}set color(e){this.setColor(e)}setColor(e,t=!1){null===this._color&&null!==e||null!==this._color&&null===e?(this._color=e,t||this.markAllDefinesAsDirty()):this._color=e}get colorsDistributionType(){return this._colorsDistributionType}set colorsDistributionType(e){this._colorsDistributionType=e,this.markAllDefinesAsDirty()}get resolution(){return this._resolution}set resolution(e){this._aspect=e.x/e.y,this._resolution=e}serialize(){let e=super.serialize(),t={colorDistributionType:this._colorsDistributionType,colorsSampling:this.colorsSampling,colorMode:this.colorMode,dashCount:this._dashCount,dashOffset:this.dashOffset,dashRatio:this.dashRatio,resolution:this._resolution,sizeAttenuation:this._sizeAttenuation,useColors:this.useColors,useDash:this.useDash,visibility:this.visibility,width:this.width};return this._colors&&(t.colors=this._colors),this._color&&(t.color=this._color),e.greasedLineMaterialOptions=t,e}parse(e,t,s){super.parse(e,t,s);let i=e.greasedLineMaterialOptions;this.colorsTexture?.dispose(),i.color&&this.setColor(i.color,!0),i.colorDistributionType&&(this.colorsDistributionType=i.colorDistributionType),i.colors&&(this.colors=i.colors),i.colorsSampling&&(this.colorsSampling=i.colorsSampling),i.colorMode&&(this.colorMode=i.colorMode),i.useColors&&(this.useColors=i.useColors),i.visibility&&(this.visibility=i.visibility),i.useDash&&(this.useDash=i.useDash),i.dashCount&&(this.dashCount=i.dashCount),i.dashRatio&&(this.dashRatio=i.dashRatio),i.dashOffset&&(this.dashOffset=i.dashOffset),i.width&&(this.width=i.width),i.sizeAttenuation&&(this.sizeAttenuation=i.sizeAttenuation),i.resolution&&(this.resolution=i.resolution),this.colors?this.colorsTexture=u.u.CreateColorsTexture(`${this._material.name}-colors-texture`,this.colors,this.colorsSampling,t):u.u.PrepareEmptyColorsTexture(t),this.markAllDefinesAsDirty()}copyTo(e){e.colorsTexture?.dispose(),this._colors&&(e.colorsTexture=u.u.CreateColorsTexture(`${e._material.name}-colors-texture`,this._colors,e.colorsSampling,this._scene)),e.setColor(this.color,!0),e.colorsDistributionType=this.colorsDistributionType,e.colorsSampling=this.colorsSampling,e.colorMode=this.colorMode,e.useColors=this.useColors,e.visibility=this.visibility,e.useDash=this.useDash,e.dashCount=this.dashCount,e.dashRatio=this.dashRatio,e.dashOffset=this.dashOffset,e.width=this.width,e.sizeAttenuation=this.sizeAttenuation,e.resolution=this.resolution,e.markAllDefinesAsDirty()}_isGLSL(e){return 0===e||this._forceGLSL}}d.GREASED_LINE_MATERIAL_NAME="GreasedLinePluginMaterial",d.ForceGLSL=!1,(0,a.H7)(`BABYLON.${d.GREASED_LINE_MATERIAL_NAME}`,d)},2607:function(e,t,s){s.d(t,{LV:()=>i.Z,N3:()=>r.Z,Z9:()=>o.Z,xE:()=>n.Z}),s(65002),s(75208),s(50195),s(1812),s(89309),s(10645);var i=s(6331);s(44976);var r=s(96368);s(58237);var o=s(2043),n=s(81997)},37393:function(e,t,s){s.d(t,{S:()=>a});var i=s(58417),r=s(54603),o=s(59942),n=s(46363);class a extends i.k{constructor(e){super(e,o.u.Neutral),this.registerInput("value",r.E.AutoDetect),this.registerInput("edge0",r.E.Float),this.registerInput("edge1",r.E.Float),this.registerOutput("output",r.E.BasedOnInput),this._outputs[0]._typeConnectionSource=this._inputs[0]}getClassName(){return"SmoothStepBlock"}get value(){return this._inputs[0]}get edge0(){return this._inputs[1]}get edge1(){return this._inputs[2]}get output(){return this._outputs[0]}_buildBlock(e){super._buildBlock(e);let t=this._outputs[0],s=e._getShaderType(this.value.type);return e.compilationString+=e._declareOutput(t)+` = smoothstep(${s}(${this.edge0.associatedVariableName}), ${s}(${this.edge1.associatedVariableName}), ${this.value.associatedVariableName});
`,this}}(0,n.H7)("BABYLON.SmoothStepBlock",a)},39596:function(e,t,s){s.d(t,{NK:()=>m,SI:()=>o,Sy:()=>A,b9:()=>n,sl:()=>y,yB:()=>f,zN:()=>T});var i,r,o,n,a=s(46658),l=s(92731),u=s(51276),h=s(65098),c=s(55171),p=s(40952),d=s(4557),_=s(1793),g=s(57645);function f(e,t,s){let i;switch(s=s??h.l.LastCreatedScene,t.materialType){case 1:i=new l.Y(e,s,t.forceGLSL),new _.m(i,s,t);break;case 2:i=new c.o(e,s,t);break;default:i=new a.K(e,s,t.forceGLSL),new _.m(i,s,t)}return i}function m(e,t,s,i){let r;i=i??h.l.LastCreatedScene;let o=p.u.ConvertPoints(t.points,t.pointsOptions);t.widthDistribution=t.widthDistribution??3,t.ribbonOptions&&(t.ribbonOptions.facesMode=t.ribbonOptions.facesMode??1,t.ribbonOptions.pointsMode=t.ribbonOptions.pointsMode??0,t.ribbonOptions.directionsAutoMode=t.ribbonOptions.directionsAutoMode??99*!!t.ribbonOptions.directions),(s=s??{color:g.Y.DEFAULT_COLOR}).createAndAssignMaterial=s.createAndAssignMaterial??!0,s.colorDistribution=s?.colorDistribution??3,s.materialType=s.materialType??0;let n=A(o),a=y(n,t.widths??[],t.widthDistribution),l=s?.colors?T(n,s.colors,s.colorDistribution,s.color??g.Y.DEFAULT_COLOR):void 0,c={points:o,updatable:t.updatable,widths:a,lazy:t.lazy,ribbonOptions:t.ribbonOptions,uvs:t.uvs,colorPointers:t.colorPointers};if(c.ribbonOptions&&0===c.ribbonOptions.pointsMode&&(c.ribbonOptions.width=s.width??c.ribbonOptions.width??g.Y.DEFAULT_WIDTH),t.instance)if((r=t.instance)instanceof d.K)r.addPoints(o,c);else{let e=r.widths;if(e){let t=e.slice();for(let e of a)t.push(e);r.widths=t}else r.widths=a;if(r.addPoints(o),t.uvs){let e=r.uvs;if(e){let s=new Float32Array(e.length+t.uvs.length);s.set(e,0),s.set(t.uvs,e.length),r.uvs=s}else r.uvs=t.uvs}}else if(r=c.ribbonOptions?new d.K(e,i,c):new u.R(e,i,c),s){let o={materialType:s.materialType,dashCount:s.dashCount,dashOffset:s.dashOffset,dashRatio:s.dashRatio,resolution:s.resolution,sizeAttenuation:s.sizeAttenuation,useColors:s.useColors,useDash:s.useDash,visibility:s.visibility,width:s.width,color:s.color,colorMode:s.colorMode,colorsSampling:s.colorsSampling,colorDistributionType:s.colorDistributionType,colors:l,cameraFacing:!t.ribbonOptions,colorsTexture:s.colorsTexture};if(s.createAndAssignMaterial){let s=f(e,o,i);r.material=s,t.ribbonOptions?.facesMode===1&&(s.backFaceCulling=!1)}}if(l&&t.instance&&t.instance.greasedLineMaterial){let e=t.instance.greasedLineMaterial.colors;if(e){let s=e.concat(l);t.instance.greasedLineMaterial.setColors(s,r.isLazy())}}return r}function A(e){let t=0;for(let s of e)t+=s.length/3;return t}function y(e,t,s,i=1,r=1){let o=e-t.length/2,n=[];if(o<0)return t.slice(0,2*e);if(o>0){if(t.length%2!=0&&t.push(i),5===s){let e=Math.floor(t.length/2);for(let s=0,i=0;s<e-1;s++)n.push(t[i++]),n.push(t[i++]);let s=t[e/2],i=t[e/2+1];for(let e=0;e<o;e++)n.push(i),n.push(s);for(let s=e;s<t.length;s+=2)n.push(t[s]),n.push(t[s+1])}else if(3===s){for(let e=0;e<t.length;e+=2)n.push(t[e]),n.push(t[e+1]);for(let e=0;e<o;e++)n.push(i),n.push(r)}else if(4===s){for(let e=0;e<o;e++)n.push(i),n.push(r);for(let e=0;e<t.length;e+=2)n.push(t[e]),n.push(t[e+1])}else if(1===s){let s=0;for(let i=0;i<e;i++)n.push(t[s++]),n.push(t[s++]),s===t.length&&(s=0)}else if(2===s){let s=0,i=t.length/((e-1)*2);for(let r=0;r<e;r++){let e=Math.floor(s);n.push(t[e]),n.push(t[e+1]),s+=i}}}else for(let e=0;e<t.length;e++)n.push(t[e]);return n}function T(e,t,s,i){let r=(e=Math.max(t.length,e))-t.length;if(r<0)return t.slice(0,e);let o=[];if(r>0){if(5===s){let e=Math.floor(t.length/2);for(let s=0;s<e;s++)o.push(t[s]);for(let e=0;e<r-1;e++)o.push(i);for(let s=e;s<t.length;s++)o.push(t[s])}else if(3===s){for(let e=0;e<t.length;e++)o.push(t[e]);for(let e=0;e<r;e++)o.push(i)}else if(4===s){for(let e=0;e<r-1;e++)o.push(i);for(let e=0;e<t.length;e++)o.push(t[e])}else if(1===s){let s=0;for(let i=0;i<e;i++)o.push(t[s]),++s===t.length&&(s=0)}else if(2===s){let s=0,i=t.length/(e-1);for(let r=0;r<e-1;r++){let e=Math.floor(s);o.push(t[e]),s+=i}}else if(0===s)for(let e=0;e<t.length;e++)o.push(t[e])}else for(let s=0;s<e;s++)o.push(t[s]);return o}(i=o||(o={}))[i.COLOR_DISTRIBUTION_NONE=0]="COLOR_DISTRIBUTION_NONE",i[i.COLOR_DISTRIBUTION_REPEAT=1]="COLOR_DISTRIBUTION_REPEAT",i[i.COLOR_DISTRIBUTION_EVEN=2]="COLOR_DISTRIBUTION_EVEN",i[i.COLOR_DISTRIBUTION_START=3]="COLOR_DISTRIBUTION_START",i[i.COLOR_DISTRIBUTION_END=4]="COLOR_DISTRIBUTION_END",i[i.COLOR_DISTRIBUTION_START_END=5]="COLOR_DISTRIBUTION_START_END",(r=n||(n={}))[r.WIDTH_DISTRIBUTION_NONE=0]="WIDTH_DISTRIBUTION_NONE",r[r.WIDTH_DISTRIBUTION_REPEAT=1]="WIDTH_DISTRIBUTION_REPEAT",r[r.WIDTH_DISTRIBUTION_EVEN=2]="WIDTH_DISTRIBUTION_EVEN",r[r.WIDTH_DISTRIBUTION_START=3]="WIDTH_DISTRIBUTION_START",r[r.WIDTH_DISTRIBUTION_END=4]="WIDTH_DISTRIBUTION_END",r[r.WIDTH_DISTRIBUTION_START_END=5]="WIDTH_DISTRIBUTION_START_END"},4046:function(e,t,s){var i,r,o,n,a,l;s.d(t,{VL:()=>r,Vw:()=>i,qG:()=>o}),(n=i||(i={}))[n.MATERIAL_TYPE_STANDARD=0]="MATERIAL_TYPE_STANDARD",n[n.MATERIAL_TYPE_PBR=1]="MATERIAL_TYPE_PBR",n[n.MATERIAL_TYPE_SIMPLE=2]="MATERIAL_TYPE_SIMPLE",(a=r||(r={}))[a.COLOR_MODE_SET=0]="COLOR_MODE_SET",a[a.COLOR_MODE_ADD=1]="COLOR_MODE_ADD",a[a.COLOR_MODE_MULTIPLY=2]="COLOR_MODE_MULTIPLY",(l=o||(o={}))[l.COLOR_DISTRIBUTION_TYPE_SEGMENT=0]="COLOR_DISTRIBUTION_TYPE_SEGMENT",l[l.COLOR_DISTRIBUTION_TYPE_LINE=1]="COLOR_DISTRIBUTION_TYPE_LINE"},40952:function(e,t,s){s.d(t,{u:()=>h});var i=s(47888),r=s(31913),o=s(61834),n=s(91546),a=s(21483),l=s(20534),u=s(57645);class h{static ConvertPoints(e,t){if(e.length&&Array.isArray(e)&&"number"==typeof e[0])return[e];if(e.length&&Array.isArray(e[0])&&"number"==typeof e[0][0])return e;if(e.length&&!Array.isArray(e[0])&&e[0]instanceof o.P){let t=[];for(let s=0;s<e.length;s++){let i=e[s];t.push(i.x,i.y,i.z)}return[t]}if(e.length>0&&Array.isArray(e[0])&&e[0].length>0&&e[0][0]instanceof o.P){let t=[];for(let s of e)t.push(s.flatMap(e=>[e.x,e.y,e.z]));return t}if(e instanceof Float32Array)if(!t?.floatArrayStride)return[Array.from(e)];else{let s=[],i=3*t.floatArrayStride;for(let t=0;t<e.length;t+=i){let r=Array(i);for(let s=0;s<i;s++)r[s]=e[t+s];s.push(r)}return s}else if(e.length&&e[0]instanceof Float32Array){let t=[];for(let s of e)t.push(Array.from(s));return t}return[]}static OmitZeroLengthPredicate(e,t,s){let i=[];return t.subtract(e).lengthSquared()>0&&i.push([e,t]),s.subtract(t).lengthSquared()>0&&i.push([t,s]),e.subtract(s).lengthSquared()>0&&i.push([s,e]),0===i.length?null:i}static OmitDuplicatesPredicate(e,t,s,i){let r=[];return h._SearchInPoints(e,t,i)||r.push([e,t]),h._SearchInPoints(t,s,i)||r.push([t,s]),h._SearchInPoints(s,e,i)||r.push([s,e]),0===r.length?null:r}static _SearchInPoints(e,t,s){for(let i of s)for(let s=0;s<i.length;s++)if(i[s]?.equals(e)&&(i[s+1]?.equals(t)||i[s-1]?.equals(t)))return!0;return!1}static MeshesToLines(e,t){let s=[];for(let i=0;i<e.length;i++){let n=e[i],a=n.getVerticesData(r.o.PositionKind),l=n.getIndices();if(a&&l)for(let e=0,r=0;e<l.length;e++){let u=3*l[r++],h=3*l[r++],c=3*l[r++],p=new o.P(a[u],a[u+1],a[u+2]),d=new o.P(a[h],a[h+1],a[h+2]),_=new o.P(a[c],a[c+1],a[c+2]);if(t){let r=t(p,d,_,s,e,u,n,i,a,l);if(r)for(let e of r)s.push(e)}else s.push([p,d],[d,_],[_,p])}}return s}static ToVector3Array(e){if(Array.isArray(e[0])){let t=[];for(let s of e){let e=[];for(let t=0;t<s.length;t+=3)e.push(new o.P(s[t],s[t+1],s[t+2]));t.push(e)}return t}let t=[];for(let s=0;s<e.length;s+=3)t.push(new o.P(e[s],e[s+1],e[s+2]));return t}static ToNumberArray(e){return e.flatMap(e=>[e.x,e.y,e.z])}static GetPointsCountInfo(e){let t=Array(e.length),s=0;for(let i=e.length;i--;)t[i]=e[i].length/3,s+=t[i];return{total:s,counts:t}}static GetLineLength(e){let t;if(0===e.length)return 0;t="number"==typeof e[0]?h.ToVector3Array(e):e;let s=o.jp.Vector3["0"],i=0;for(let e=0;e<t.length-1;e++){let r=t[e];i+=t[e+1].subtractToRef(r,s).length()}return i}static GetLineLengthArray(e){let t=new Float32Array(e.length/3),s=0;for(let i=0,r=e.length/3-1;i<r;i++){let r=e[3*i+0],o=e[3*i+1],n=e[3*i+2];r-=e[3*i+3],o-=e[3*i+4],s+=Math.sqrt(r*r+o*o+(n-=e[3*i+5])*n),t[i+1]=s}return t}static SegmentizeSegmentByCount(e,t,s){let i=[],r=t.subtract(e),n=o.jp.Vector3["0"];n.setAll(s);let a=o.jp.Vector3["1"];r.divideToRef(n,a);let l=e.clone();i.push(l);for(let e=0;e<s;e++)i.push((l=l.clone()).addInPlace(a));return i}static SegmentizeLineBySegmentLength(e,t){let s=e[0]instanceof o.P?h.GetLineSegments(e):"number"==typeof e[0]?h.GetLineSegments(h.ToVector3Array(e)):e,i=[];for(let e of s)if(e.length>t)for(let s of h.SegmentizeSegmentByCount(e.point1,e.point2,Math.ceil(e.length/t)))i.push(s);else i.push(e.point1),i.push(e.point2);return i}static SegmentizeLineBySegmentCount(e,t){let s="number"==typeof e[0]?h.ToVector3Array(e):e,i=h.GetLineLength(s)/t;return h.SegmentizeLineBySegmentLength(s,i)}static GetLineSegments(e){let t=[];for(let s=0;s<e.length-1;s++){let i=e[s],r=e[s+1],o=r.subtract(i).length();t.push({point1:i,point2:r,length:o})}return t}static GetMinMaxSegmentLength(e){let t=h.GetLineSegments(e).sort(e=>e.length);return{min:t[0].length,max:t[t.length-1].length}}static GetPositionOnLineByVisibility(e,t,s,i=!1){let r=t*s,n=0,a=0,l=e.length;for(let t=0;t<l;t++){if(r<=n+e[t].length){a=t;break}n+=e[t].length}let u=(r-n)/e[a].length;return e[a].point2.subtractToRef(e[a].point1,o.jp.Vector3["0"]),o.jp.Vector3["1"]=o.jp.Vector3["0"].multiplyByFloats(u,u,u),i||o.jp.Vector3["1"].addInPlace(e[a].point1),o.jp.Vector3["1"].clone()}static GetCircleLinePoints(e,t,s=0,i=e,r=2*Math.PI/t){let n=[];for(let a=0;a<=t;a++)n.push(new o.P(Math.cos(a*r)*e,Math.sin(a*r)*i,s));return n}static GetBezierLinePoints(e,t,s,r){return i.j_.CreateQuadraticBezier(e,t,s,r).getPoints().flatMap(e=>[e.x,e.y,e.z])}static GetArrowCap(e,t,s,i,r,o=0,n=0){return{points:[e.clone(),e.add(t.multiplyByFloats(s,s,s))],widths:[i,r,o,n]}}static GetPointsFromText(e,t,s,i,r=0,o=!0){let a=[];for(let l of(0,n.v)(e,t,s,i)){for(let e of l.paths){let t=[];for(let s of e.getPoints())t.push(s.x,s.y,r);a.push(t)}if(o)for(let e of l.holes){let t=[];for(let s of e.getPoints())t.push(s.x,s.y,r);a.push(t)}}return a}static Color3toRGBAUint8(e){let t=new Uint8Array(4*e.length);for(let s=0,i=0;s<e.length;s++)t[i++]=255*e[s].r,t[i++]=255*e[s].g,t[i++]=255*e[s].b,t[i++]=255;return t}static CreateColorsTexture(e,t,s,i){let r=i.getEngine().getCaps().maxTextureSize??1,o=t.length>r?r:t.length,n=Math.ceil(t.length/r);n>1&&(t=[...t,...Array(o*n-t.length).fill(t[0])]);let u=h.Color3toRGBAUint8(t),c=new a.l(u,o,n,l.D.TEXTUREFORMAT_RGBA,i,!1,!0,s);return c.name=e,c}static PrepareEmptyColorsTexture(e){if(!u.Y.EmptyColorsTexture){let t=new Uint8Array(4);u.Y.EmptyColorsTexture=new a.l(t,1,1,l.D.TEXTUREFORMAT_RGBA,e,!1,!1,a.l.NEAREST_NEAREST),u.Y.EmptyColorsTexture.name="grlEmptyColorsTexture"}return u.Y.EmptyColorsTexture}static DisposeEmptyColorsTexture(){u.Y.EmptyColorsTexture?.dispose(),u.Y.EmptyColorsTexture=null}static BooleanToNumber(e){return+!!e}}},44787:function(e,t,s){s.d(t,{y:()=>a});var i=s(58417),r=s(54603),o=s(59942),n=s(46363);class a extends i.k{constructor(e){super(e,o.u.Neutral),this.registerInput("left",r.E.AutoDetect),this.registerInput("right",r.E.AutoDetect),this.registerOutput("output",r.E.Float),this._linkConnectionTypes(0,1),this._inputs[0].excludedConnectionPointTypes.push(r.E.Float),this._inputs[0].excludedConnectionPointTypes.push(r.E.Matrix),this._inputs[1].excludedConnectionPointTypes.push(r.E.Float),this._inputs[1].excludedConnectionPointTypes.push(r.E.Matrix)}getClassName(){return"DistanceBlock"}get left(){return this._inputs[0]}get right(){return this._inputs[1]}get output(){return this._outputs[0]}_buildBlock(e){super._buildBlock(e);let t=this._outputs[0];return e.compilationString+=e._declareOutput(t)+` = length(${this.left.associatedVariableName} - ${this.right.associatedVariableName});
`,this}}(0,n.H7)("BABYLON.DistanceBlock",a)},4489:function(e,t,s){s.d(t,{J:()=>a});var i=s(58417),r=s(54603),o=s(59942),n=s(46363);class a extends i.k{constructor(e){super(e,o.u.Neutral),this.registerInput("left",r.E.AutoDetect),this.registerInput("right",r.E.AutoDetect),this.registerInput("gradient",r.E.AutoDetect),this.registerOutput("output",r.E.BasedOnInput),this._outputs[0]._typeConnectionSource=this._inputs[0],this._linkConnectionTypes(0,1),this._linkConnectionTypes(1,2,!0),this._inputs[2].acceptedConnectionPointTypes.push(r.E.Float)}getClassName(){return"LerpBlock"}get left(){return this._inputs[0]}get right(){return this._inputs[1]}get gradient(){return this._inputs[2]}get output(){return this._outputs[0]}_buildBlock(e){super._buildBlock(e);let t=this._outputs[0];return e.compilationString+=e._declareOutput(t)+` = mix(${this.left.associatedVariableName} , ${this.right.associatedVariableName}, ${this.gradient.associatedVariableName});
`,this}}(0,n.H7)("BABYLON.LerpBlock",a)},4557:function(e,t,s){s.d(t,{K:()=>u});var i=s(61834),r=s(51577),o=s(31913),n=s(40761),a=s(40952),l=s(5493);r.Kj._GreasedLineRibbonMeshParser=(e,t)=>u.Parse(e,t);class u extends l.KH{constructor(e,t,s,i){if(super(e,t,s),this.name=e,!s.ribbonOptions)throw"'GreasedLineMeshOptions.ribbonOptions' is not set.";this._paths=[],this._counters=[],this._slopes=[],this._widths=s.widths??[],this._ribbonWidths=[],this._pathsOptions=i??[],s.points&&this.addPoints(a.u.ConvertPoints(s.points),s,!!i)}addPoints(e,t,s=!1){if(!t.ribbonOptions)throw"addPoints() on GreasedLineRibbonMesh instance requires 'GreasedLineMeshOptions.ribbonOptions'.";s||this._pathsOptions.push({options:t,pathCount:e.length}),super.addPoints(e,t)}getClassName(){return"GreasedLineRibbonMesh"}get isFlatLine(){return this._paths.length<3}get slopes(){return this._slopes}set slopes(e){this._slopes=e}_updateColorPointers(){if(this._options.colorPointers)return;let e=0;this._colorPointers=[];for(let t=0;t<this._pathsOptions.length;t++){let{options:s,pathCount:i}=this._pathsOptions[t],r=this._points[t];if(0===s.ribbonOptions.pointsMode)for(let t=0;t<i;t++)for(let t=0;t<r.length;t+=3)this._colorPointers.push(e),this._colorPointers.push(e++);else for(let t=0;t<r.length;t+=3){for(let t=0;t<i;t++)this._colorPointers.push(e);e++}}}_updateWidths(){super._updateWidthsWithValue(1)}_setPoints(e,t){let s;if(!this._options.ribbonOptions)throw"No 'GreasedLineMeshOptions.ribbonOptions' provided.";this._points=e,this._options.points=e,this._initGreasedLine();let i=0;for(let t=0,r=0;t<this._pathsOptions.length;t++){let{options:o,pathCount:n}=this._pathsOptions[t],l=e.slice(r,r+n);if(r+=n,o.ribbonOptions?.pointsMode===1)i=this._preprocess(a.u.ToVector3Array(l),i,o);else{if(o.ribbonOptions?.directionsAutoMode===99){if(!o.ribbonOptions.directions)throw"In GreasedLineRibbonAutoDirectionMode.AUTO_DIRECTIONS_NONE 'GreasedLineMeshOptions.ribbonOptions.directions' must be defined.";s=u._GetDirectionPlanesFromDirectionsOption(l.length,o.ribbonOptions.directions)}for(let e=0;e<l.length;e++){let t=l[e],r=u._ConvertToRibbonPath(t,o.ribbonOptions,this._scene.useRightHandedSystem,s?s[e]:s);i=this._preprocess(r,i,o)}}}!this._lazy&&(this._createVertexBuffers(),this.doNotSyncBoundingInfo||this.refreshBoundingInfo())}static _GetDirectionPlanesFromDirectionsOption(e,t){return Array.isArray(t)?t:Array(e).fill(t)}static _CreateRibbonVertexData(e,t){let s=e.length;if(s<2)throw"Minimum of two paths are required to create a GreasedLineRibbonMesh.";let i=[],r=[],o=e[0];for(let t=0;t<o.length;t++)for(let s=0;s<e.length;s++){let r=e[s][t];i.push(r.x,r.y,r.z)}let n=[1,0,s],a=t.ribbonOptions?.facesMode===2,l=t.ribbonOptions?.pointsMode===1&&t.ribbonOptions.closePath;if(s>2)for(let e=0;e<o.length-1;e++){n[0]=1+s*e,n[1]=s*e,n[2]=(e+1)*s;for(let e=0;e<(s-1)*2;e++)e%2!=0&&(n[2]+=1),e%2==0&&e>0&&(n[0]+=1,n[1]+=1),r.push(n[1]+(e%2!=0?s:0),n[0],n[2]),a&&r.push(n[0],n[1]+(e%2!=0?s:0),n[2])}else for(let e=0;e<i.length/3-3;e+=2)r.push(e,e+1,e+2),r.push(e+2,e+1,e+3),a&&(r.push(e+1,e,e+2),r.push(e+1,e+2,e+3));if(l){let e=s*(o.length-1);for(let t=0;t<s-1;t++)r.push(e,t+1,t),r.push(e+1,t+1,e),a&&(r.push(t,t+1,e),r.push(e,t+1,e+1)),e++}return{positions:i,indices:r}}_preprocess(e,t,s){this._paths=e;let i=u._CreateRibbonVertexData(e,s),r=i.positions;if(!this._options.widths)throw"No 'GreasedLineMeshOptions.widths' table is specified.";let o=Array.isArray(this._vertexPositions)?this._vertexPositions:Array.from(this._vertexPositions);this._vertexPositions=o;let n=Array.isArray(this._uvs)?this._uvs:Array.from(this._uvs);this._uvs=n;let a=Array.isArray(this._indices)?this._indices:Array.from(this._indices);for(let e of(this._indices=a,r))o.push(e);let l=e;if(s.ribbonOptions?.pointsMode===1&&s.ribbonOptions.closePath){l=[];for(let t=0;t<e.length;t++){let s=e[t].slice();s.push(e[t][0].clone()),l.push(s)}}this._calculateSegmentLengths(l);let h=l.length,c=Array(h).fill(0);for(let e=0;e<l[0].length;e++){let t=0;for(let s=0;s<h;s++){let i=c[s]+this._vSegmentLengths[s][e]/this._vTotalLengths[s];this._counters.push(i),n.push(i,t),c[s]=i,t+=this._uSegmentLengths[e][s]/this._uTotalLengths[e]}}for(let e=0,t=0;e<l[0].length;e++){let s=this._uSegmentLengths[e][0]/2,i=this._uSegmentLengths[e][h-1]/2;this._ribbonWidths.push(((this._widths[t++]??1)-1)*s);for(let e=0;e<h-2;e++)this._ribbonWidths.push(0);this._ribbonWidths.push(((this._widths[t++]??1)-1)*i)}for(let e of s.ribbonOptions?.pointsMode===1?Array(l[0].length*l.length*6).fill(0):u._CalculateSlopes(l))this._slopes.push(e);if(i.indices)for(let e=0;e<i.indices.length;e++)a.push(i.indices[e]+t);return t+=r.length/3}static _ConvertToRibbonPath(e,t,s,r){if(0===t.pointsMode&&!t.width)throw"'GreasedLineMeshOptions.ribbonOptiosn.width' must be specified in GreasedLineRibbonPointsMode.POINTS_MODE_POINTS.";let o=[],n=[];if(0===t.pointsMode){let l=t.width/2,h=a.u.ToVector3Array(e),c=null,p=null;if(0===t.directionsAutoMode&&(r=u._GetDirectionFromPoints(h[0],h[1],null)),3===t.directionsAutoMode&&!(t.directions instanceof i.P))throw"In GreasedLineRibbonAutoDirectionMode.AUTO_DIRECTIONS_FACE_TO 'GreasedLineMeshOptions.ribbonOptions.directions' must be a Vector3.";i.jp.Vector3["1"]=t.directions instanceof i.P?t.directions:u.DIRECTION_XZ;for(let e=0;e<h.length-!r;e++){let a=h[e],d=h[e+1];if(r)c=r;else if(3===t.directionsAutoMode)d.subtractToRef(a,i.jp.Vector3["0"]),c=i.P.CrossToRef(i.jp.Vector3["0"],i.jp.Vector3["1"],i.jp.Vector3["2"]).normalize();else if(1===t.directionsAutoMode)c=u._GetDirectionFromPoints(a,d,c);else{let e=d.subtract(a);e.applyRotationQuaternionInPlace(e.x>e.y&&e.x>e.z?s?u._RightHandedForwardReadOnlyQuaternion:u._LeftHandedForwardReadOnlyQuaternion:u._LeftReadOnlyQuaternion),c=e.normalize()}p=c.multiplyByFloats(l,l,l),o.push(a.add(p)),n.push(a.subtract(p))}r||(o.push(h[h.length-1].add(p)),n.push(h[h.length-1].subtract(p)))}return[o,n]}static _GetDirectionFromPoints(e,t,s){return e.x!==t.x||s&&s?.x!==1?e.y===t.y?u.DIRECTION_XZ:e.z===t.z?u.DIRECTION_XY:u.DIRECTION_XZ:u.DIRECTION_YZ}clone(e=`${this.name}-cloned`,t){let s=this._createLineOptions(),i={},r=[];n.j.DeepCopy(this._pathsOptions,r,void 0,void 0,!0),n.j.DeepCopy(s,i,["instance"],void 0,!0);let o=new u(e,this._scene,i,r);return t&&(o.parent=t),o.material=this.material,o}serialize(e){super.serialize(e),e.type=this.getClassName(),e.lineOptions=this._createLineOptions(),e.pathsOptions=this._pathsOptions}static Parse(e,t){let s=e.lineOptions;return new u(e.name,t,s,e.pathOptions)}_initGreasedLine(){super._initGreasedLine(),this._paths=[],this._counters=[],this._slopes=[],this._ribbonWidths=[]}_calculateSegmentLengths(e){let t=e.length;this._vSegmentLengths=Array(t),this._vTotalLengths=Array(t);let s=0;for(let i=0;i<t;i++){let t=e[i];this._vSegmentLengths[i]=[0],s=0;for(let e=0;e<t.length-1;e++){let r=Math.abs(t[e].subtract(t[e+1]).lengthSquared());s+=r,this._vSegmentLengths[i].push(r)}this._vTotalLengths[i]=s}let r=e[0].length;this._uSegmentLengths=Array(r).fill([]),this._uTotalLengths=Array(r).fill([]);let o=new i.P;for(let i=0;i<r;i++){s=0;for(let r=1;r<t;r++){e[r][i].subtractToRef(e[r-1][i],o);let t=o.length();s+=t,this._uSegmentLengths[i].push(t)}this._uTotalLengths[i]=s}}static _CalculateSlopes(e){let t=e[0],s=2===e.length?e[1]:e[e.length-1],r=[],o=new i.P;for(let i=0;i<t.length;i++)for(let n=0;n<e.length;n++)0===n||n===e.length-1?(t[i].subtract(s[i]).normalizeToRef(o),r.push(o.x,o.y,o.z),r.push(-o.x,-o.y,-o.z)):r.push(0,0,0,0,0,0);return r}_createVertexBuffers(){this._uvs=this._options.uvs??this._uvs;let e=super._createVertexBuffers(this._options.ribbonOptions?.smoothShading),t=new o.l(this._engine,this._counters,this._updatable,1);this.setVerticesBuffer(t.createVertexBuffer("grl_counters",0,1));let s=new o.l(this._engine,this._colorPointers,this._updatable,1);this.setVerticesBuffer(s.createVertexBuffer("grl_colorPointers",0,1));let i=new o.l(this._engine,this._slopes,this._updatable,3);this.setVerticesBuffer(i.createVertexBuffer("grl_slopes",0,3));let r=new o.l(this._engine,this._ribbonWidths,this._updatable,1);return this.setVerticesBuffer(r.createVertexBuffer("grl_widths",0,1)),this._widthsBuffer=r,e}}u.DEFAULT_WIDTH=.1,u._RightHandedForwardReadOnlyQuaternion=i._f.RotationAxis(i.P.RightHandedForwardReadOnly,Math.PI/2),u._LeftHandedForwardReadOnlyQuaternion=i._f.RotationAxis(i.P.LeftHandedForwardReadOnly,Math.PI/2),u._LeftReadOnlyQuaternion=i._f.RotationAxis(i.P.LeftReadOnly,Math.PI/2),u.DIRECTION_XY=i.P.LeftHandedForwardReadOnly,u.DIRECTION_XZ=i.P.UpReadOnly,u.DIRECTION_YZ=i.P.LeftReadOnly},51276:function(e,t,s){s.d(t,{R:()=>h});var i=s(61834),r=s(51577),o=s(31913),n=s(94826),a=s(40761),l=s(40952),u=s(5493);r.Kj._GreasedLineMeshParser=(e,t)=>h.Parse(e,t);class h extends u.KH{constructor(e,t,s){super(e,t,s),this.name=e,this.intersectionThreshold=.1,this._previousAndSide=[],this._nextAndCounters=[],s.points&&this.addPoints(l.u.ConvertPoints(s.points))}getClassName(){return"GreasedLineMesh"}_updateColorPointers(){if(this._options.colorPointers)return;let e=0;for(let t of(this._colorPointers=[],this._points))for(let s=0;s<t.length;s+=3)this._colorPointers.push(e),this._colorPointers.push(e++)}_updateWidths(){}_setPoints(e){this._points=e,this._options.points=e,this._initGreasedLine();let t=0,s=0,i=0,r=0,o=0;for(let t of e)s+=2*t.length,i+=(t.length-3)*2,r+=4*t.length/3,o+=8*t.length/3;let n=new Float32Array(s),a=s>65535?new Uint32Array(i):new Uint16Array(i),u=new Float32Array(r),c=new Float32Array(o),p=new Float32Array(o),d=0,_=0,g=0,f=0,m=0;for(let s of e){let e,i=l.u.GetLineLengthArray(s),r=i[i.length-1];for(let e=0,i=0;i<s.length;e++,i+=3){let r=d+2*i;if(n[r+0]=s[i+0],n[r+1]=s[i+1],n[r+2]=s[i+2],n[r+3]=s[i+0],n[r+4]=s[i+1],n[r+5]=s[i+2],i<s.length-3){let s=2*e+t,r=_+2*i;a[r+0]=s,a[r+1]=s+1,a[r+2]=s+2,a[r+3]=s+2,a[r+4]=s+1,a[r+5]=s+3}}t+=s.length/3*2;let o=2*s.length,A=n.subarray(d,d+o);d+=o,_+=(s.length-3)*2;let y=new Float32Array(A.length),T=new Float32Array(A.length),b=A.length/6;e=h._CompareV3(0,b-1,A)?A.subarray((b-2)*6,(b-1)*6):A.subarray(0,6),y.set(e),y.set(A.subarray(0,A.length-6),6),T.set(A.subarray(6)),e=h._CompareV3(b-1,0,A)?A.subarray(6,12):A.subarray((b-1)*6,6*b),T.set(e,T.length-6);for(let e=0,t=A.length/3;e<t;e++)c[f++]=y[3*e],c[f++]=y[3*e+1],c[f++]=y[3*e+2],c[f++]=1-((1&e)<<1),p[m++]=T[3*e],p[m++]=T[3*e+1],p[m++]=T[3*e+2],p[m++]=i[e>>1]/r;if(this._options.uvs)for(let e=0;e<this._options.uvs.length;e++)u[g++]=this._options.uvs[e];else for(let e=0;e<b;e++){let t=i[e]/r,s=g+4*e;u[s+0]=t,u[s+1]=0,u[s+2]=t,u[s+3]=1}}this._vertexPositions=n,this._indices=a,this._uvs=u,this._previousAndSide=c,this._nextAndCounters=p,!this._lazy&&(this._options.colorPointers||this._updateColorPointers(),this._createVertexBuffers(),this.doNotSyncBoundingInfo||this.refreshBoundingInfo())}clone(e=`${this.name}-cloned`,t){let s=this._createLineOptions(),i={};a.j.DeepCopy(s,i,["instance"],void 0,!0);let r=new h(e,this._scene,i);return t&&(r.parent=t),r.material=this.material,r}serialize(e){super.serialize(e),e.type=this.getClassName(),e.lineOptions=this._createLineOptions()}static Parse(e,t){let s=e.lineOptions;return new h(e.name,t,s)}_initGreasedLine(){super._initGreasedLine(),this._previousAndSide=[],this._nextAndCounters=[]}intersects(e,t,s,i=!1,r,o=!1){let a=new n.p,l=this.findAllIntersections(e,t,s,i,r,o,!0);if(l?.length===1){let t=l[0];a.hit=!0,a.distance=t.distance,a.ray=e,a.pickedMesh=this,a.pickedPoint=t.point}return a}findAllIntersections(e,t,s,i=!1,r,n=!1,a=!1){if(i&&!n&&!1===e.intersectsSphere(this._boundingSphere,this.intersectionThreshold))return;let l=this.getIndices(),u=this.getVerticesData(o.o.PositionKind),c=this._widths,p=this.greasedLineMaterial?.width??1,d=[];if(l&&u&&c){let t=0,s=0;for(t=0,s=l.length-1;t<s;t+=3){let s=l[t],i=l[t+1];h._V_START.fromArray(u,3*s),h._V_END.fromArray(u,3*i),this._offsets&&(h._V_OFFSET_START.fromArray(this._offsets,3*s),h._V_OFFSET_END.fromArray(this._offsets,3*i),h._V_START.addInPlace(h._V_OFFSET_START),h._V_END.addInPlace(h._V_OFFSET_END));let r=Math.floor(t/3),o=void 0!==c[r]?c[r]:1,n=this.intersectionThreshold*(p*o)/2,_=e.intersectionSegment(h._V_START,h._V_END,n);if(-1!==_&&(d.push({distance:_,point:e.direction.normalize().multiplyByFloats(_,_,_).add(e.origin)}),a))return d}t=s}return d}get _boundingSphere(){return this.getBoundingInfo().boundingSphere}static _CompareV3(e,t,s){let i=6*e,r=6*t;return s[i]===s[r]&&s[i+1]===s[r+1]&&s[i+2]===s[r+2]}_createVertexBuffers(){let e=super._createVertexBuffers(),t=this._scene.getEngine(),s=new o.l(t,this._previousAndSide,!1,4);this.setVerticesBuffer(s.createVertexBuffer("grl_previousAndSide",0,4));let i=new o.l(t,this._nextAndCounters,!1,4);this.setVerticesBuffer(i.createVertexBuffer("grl_nextAndCounters",0,4));let r=new o.l(t,this._widths,this._updatable,1);this.setVerticesBuffer(r.createVertexBuffer("grl_widths",0,1)),this._widthsBuffer=r;let n=new o.l(t,this._colorPointers,this._updatable,1);return this.setVerticesBuffer(n.createVertexBuffer("grl_colorPointers",0,1)),this._colorPointersBuffer=n,e}}h._V_START=new i.P,h._V_END=new i.P,h._V_OFFSET_START=new i.P,h._V_OFFSET_END=new i.P},52137:function(e,t,s){s.d(t,{x:()=>a});var i=s(58417),r=s(54603),o=s(59942),n=s(46363);class a extends i.k{constructor(e){super(e,o.u.Neutral),this.registerInput("x",r.E.Float),this.registerInput("y",r.E.Float),this.registerOutput("output",r.E.Float)}getClassName(){return"ArcTan2Block"}get x(){return this._inputs[0]}get y(){return this._inputs[1]}get output(){return this._outputs[0]}_buildBlock(e){super._buildBlock(e);let t=this._outputs[0],s=1===e.shaderLanguage?"atan2":"atan";return e.compilationString+=e._declareOutput(t)+` = ${s}(${this.x.associatedVariableName}, ${this.y.associatedVariableName});
`,this}}(0,n.H7)("BABYLON.ArcTan2Block",a)},55171:function(e,t,s){s.d(t,{o:()=>c,y:()=>h});var i=s(21483),r=s(76723),o=s(57423),n=s(61834),a=s(3472),l=s(40952),u=s(57645);let h="GREASED_LINE_USE_OFFSETS";class c extends r.j{constructor(e,t,r){let h=t.getEngine(),p=h.isWebGPU&&!(r.forceGLSL||c.ForceGLSL),d=["COLOR_DISTRIBUTION_TYPE_LINE 1.","COLOR_DISTRIBUTION_TYPE_SEGMENT 0.","COLOR_MODE_SET 0.","COLOR_MODE_ADD 1.","COLOR_MODE_MULTIPLY 2."];t.useRightHandedSystem&&d.push("GREASED_LINE_RIGHT_HANDED_COORDINATE_SYSTEM");let _=["position","grl_widths","grl_offsets","grl_colorPointers"];r.cameraFacing?(d.push("GREASED_LINE_CAMERA_FACING"),_.push("grl_previousAndSide","grl_nextAndCounters")):(_.push("grl_slopes"),_.push("grl_counters"));let g=["grlColorsWidth","grlUseColors","grlWidth","grlColor","grl_colorModeAndColorDistributionType","grlResolution","grlAspect","grlAizeAttenuation","grlDashArray","grlDashOffset","grlDashRatio","grlUseDash","grlVisibility","grlColors"];if(p||g.push("world","viewProjection","view","projection"),super(e,t,{vertex:"greasedLine",fragment:"greasedLine"},{uniformBuffers:p?["Scene","Mesh"]:void 0,attributes:_,uniforms:g,samplers:p?[]:["grlColors"],defines:d,extraInitializationsAsync:async()=>{p?await Promise.all([s.e("4280").then(s.bind(s,63330)),s.e("2508").then(s.bind(s,99465))]):await Promise.all([s.e("9824").then(s.bind(s,2993)),s.e("4003").then(s.bind(s,1493))])},shaderLanguage:+!!p}),this._color=o.Wo.White(),this._colorsDistributionType=0,this._colorsTexture=null,r=r||{color:u.Y.DEFAULT_COLOR},this.visibility=r.visibility??1,this.useDash=r.useDash??!1,this.dashRatio=r.dashRatio??.5,this.dashOffset=r.dashOffset??0,this.dashCount=r.dashCount??1,this.width=r.width?r.width:r.sizeAttenuation&&r.cameraFacing?u.Y.DEFAULT_WIDTH_ATTENUATED:u.Y.DEFAULT_WIDTH,this.sizeAttenuation=r.sizeAttenuation??!1,this.color=r.color??o.Wo.White(),this.useColors=r.useColors??!1,this.colorsDistributionType=r.colorDistributionType??0,this.colorsSampling=r.colorsSampling??i.l.NEAREST_NEAREST,this.colorMode=r.colorMode??0,this._colors=r.colors??null,this._cameraFacing=r.cameraFacing??!0,this.resolution=r.resolution??new n.FM(h.getRenderWidth(),h.getRenderHeight()),r.colorsTexture?this.colorsTexture=r.colorsTexture:this._colors?this.colorsTexture=l.u.CreateColorsTexture(`${this.name}-colors-texture`,this._colors,this.colorsSampling,t):(this._color=this._color??u.Y.DEFAULT_COLOR,this.colorsTexture=l.u.PrepareEmptyColorsTexture(t)),p){let e=new a.a;e.setParameters(),e.samplingMode=this.colorsSampling,this.setTextureSampler("grlColorsSampler",e)}h.onDisposeObservable.add(()=>{l.u.DisposeEmptyColorsTexture()})}dispose(){this._colorsTexture?.dispose(),super.dispose()}_setColorModeAndColorDistributionType(){this.setVector2("grl_colorModeAndColorDistributionType",new n.FM(this._colorMode,this._colorsDistributionType))}updateLazy(){this._colors&&this.setColors(this._colors,!1,!0)}get colors(){return this._colors}set colors(e){this.setColors(e)}setColors(e,t=!1,s=!1){let i=this._colors?.length??0;if(this._colors=e,null===e||0===e.length)return void this._colorsTexture?.dispose();if(!t||s)if(this._colorsTexture&&i===e.length&&!s){let t=l.u.Color3toRGBAUint8(e);this._colorsTexture.update(t)}else this._colorsTexture?.dispose(),this.colorsTexture=l.u.CreateColorsTexture(`${this.name}-colors-texture`,e,this.colorsSampling,this.getScene())}get colorsTexture(){return this._colorsTexture??null}set colorsTexture(e){this._colorsTexture=e,this.setFloat("grlColorsWidth",this._colorsTexture.getSize().width),this.setTexture("grlColors",this._colorsTexture)}get width(){return this._width}set width(e){this._width=e,this.setFloat("grlWidth",e)}get useColors(){return this._useColors}set useColors(e){this._useColors=e,this.setFloat("grlUseColors",l.u.BooleanToNumber(e))}get colorsSampling(){return this._colorsSampling}set colorsSampling(e){this._colorsSampling=e}get visibility(){return this._visibility}set visibility(e){this._visibility=e,this.setFloat("grlVisibility",e)}get useDash(){return this._useDash}set useDash(e){this._useDash=e,this.setFloat("grlUseDash",l.u.BooleanToNumber(e))}get dashOffset(){return this._dashOffset}set dashOffset(e){this._dashOffset=e,this.setFloat("grlDashOffset",e)}get dashRatio(){return this._dashRatio}set dashRatio(e){this._dashRatio=e,this.setFloat("grlDashRatio",e)}get dashCount(){return this._dashCount}set dashCount(e){this._dashCount=e,this._dashArray=1/e,this.setFloat("grlDashArray",this._dashArray)}get sizeAttenuation(){return this._sizeAttenuation}set sizeAttenuation(e){this._sizeAttenuation=e,this.setFloat("grlSizeAttenuation",l.u.BooleanToNumber(e))}get color(){return this._color}set color(e){this.setColor(e)}setColor(e){e=e??u.Y.DEFAULT_COLOR,this._color=e,this.setColor3("grlColor",e)}get colorsDistributionType(){return this._colorsDistributionType}set colorsDistributionType(e){this._colorsDistributionType=e,this._setColorModeAndColorDistributionType()}get colorMode(){return this._colorMode}set colorMode(e){this._colorMode=e,this._setColorModeAndColorDistributionType()}get resolution(){return this._resolution}set resolution(e){this._resolution=e,this.setVector2("grlResolution",e),this.setFloat("grlAspect",e.x/e.y)}serialize(){let e=super.serialize(),t={colorDistributionType:this._colorsDistributionType,colorsSampling:this._colorsSampling,colorMode:this._colorMode,color:this._color,dashCount:this._dashCount,dashOffset:this._dashOffset,dashRatio:this._dashRatio,resolution:this._resolution,sizeAttenuation:this._sizeAttenuation,useColors:this._useColors,useDash:this._useDash,visibility:this._visibility,width:this._width,cameraFacing:this._cameraFacing};return this._colors&&(t.colors=this._colors),e.greasedLineMaterialOptions=t,e}parse(e,t,s){let i=e.greasedLineMaterialOptions;this._colorsTexture?.dispose(),i.color&&(this.color=i.color),i.colorDistributionType&&(this.colorsDistributionType=i.colorDistributionType),i.colorsSampling&&(this.colorsSampling=i.colorsSampling),i.colorMode&&(this.colorMode=i.colorMode),i.useColors&&(this.useColors=i.useColors),i.visibility&&(this.visibility=i.visibility),i.useDash&&(this.useDash=i.useDash),i.dashCount&&(this.dashCount=i.dashCount),i.dashRatio&&(this.dashRatio=i.dashRatio),i.dashOffset&&(this.dashOffset=i.dashOffset),i.width&&(this.width=i.width),i.sizeAttenuation&&(this.sizeAttenuation=i.sizeAttenuation),i.resolution&&(this.resolution=i.resolution),i.colors?this.colorsTexture=l.u.CreateColorsTexture(`${this.name}-colors-texture`,i.colors,this.colorsSampling,this.getScene()):this.colorsTexture=l.u.PrepareEmptyColorsTexture(t),this._cameraFacing=i.cameraFacing??!0,this.setDefine("GREASED_LINE_CAMERA_FACING",this._cameraFacing)}}c.ForceGLSL=!1},56093:function(e,t,s){s.d(t,{n:()=>a});var i=s(58417),r=s(54603),o=s(59942),n=s(46363);class a extends i.k{constructor(e){super(e,o.u.Neutral),this.registerInput("value",r.E.Float),this.registerInput("edge",r.E.Float),this.registerOutput("output",r.E.Float)}getClassName(){return"StepBlock"}get value(){return this._inputs[0]}get edge(){return this._inputs[1]}get output(){return this._outputs[0]}_buildBlock(e){super._buildBlock(e);let t=this._outputs[0];return e.compilationString+=e._declareOutput(t)+` = step(${this.edge.associatedVariableName}, ${this.value.associatedVariableName});
`,this}}(0,n.H7)("BABYLON.StepBlock",a)},56877:function(e,t,s){s.d(t,{A8:()=>l,Gb:()=>o,LE:()=>a,an:()=>r,o_:()=>n});var i=s(53864);s(25146);let r={};function o(e,t,s=""){return s+(t?t+"\n":"")+e}function n(e,t,s,o,n,a,l){let u=l||r.loadFile;if(u)return u(e,t,s,o,n,a);throw(0,i.S)("FileTools")}function a(e,t,s,i){if(e){t?e.IS_NDC_HALF_ZRANGE="":delete e.IS_NDC_HALF_ZRANGE,s?e.USE_REVERSE_DEPTHBUFFER="":delete e.USE_REVERSE_DEPTHBUFFER,i?e.USE_EXACT_SRGB_CONVERSIONS="":delete e.USE_EXACT_SRGB_CONVERSIONS;return}{let e="";return t&&(e+="#define IS_NDC_HALF_ZRANGE"),s&&(e&&(e+="\n"),e+="#define USE_REVERSE_DEPTHBUFFER"),i&&(e&&(e+="\n"),e+="#define USE_EXACT_SRGB_CONVERSIONS"),e}}function l(e,t,s=!1,i){switch(e){case 3:{let e=(t instanceof ArrayBuffer,new Int8Array(t));return i&&e.set(new Int8Array(i)),e}case 0:{let e=(t instanceof ArrayBuffer,new Uint8Array(t));return i&&e.set(new Uint8Array(i)),e}case 4:{let e=new Int16Array(t instanceof ArrayBuffer?t:s?t/2:t);return i&&e.set(new Int16Array(i)),e}case 5:case 8:case 9:case 10:case 2:{let e=new Uint16Array(t instanceof ArrayBuffer?t:s?t/2:t);return i&&e.set(new Uint16Array(i)),e}case 6:{let e=new Int32Array(t instanceof ArrayBuffer?t:s?t/4:t);return i&&e.set(new Int32Array(i)),e}case 7:case 11:case 12:case 13:case 14:case 15:{let e=new Uint32Array(t instanceof ArrayBuffer?t:s?t/4:t);return i&&e.set(new Uint32Array(i)),e}case 1:{let e=new Float32Array(t instanceof ArrayBuffer?t:s?t/4:t);return i&&e.set(new Float32Array(i)),e}}let r=(t instanceof ArrayBuffer,new Uint8Array(t));return i&&r.set(new Uint8Array(i)),r}},57645:function(e,t,s){s.d(t,{Y:()=>r});var i=s(57423);class r{}r.DEFAULT_COLOR=i.Wo.White(),r.DEFAULT_WIDTH_ATTENUATED=1,r.DEFAULT_WIDTH=.1},65098:function(e,t,s){s.d(t,{l:()=>r});var i=s(85791);class r{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}r.Instances=[],r.OnEnginesDisposedObservable=new i.y$,r._LastCreatedScene=null,r.UseFallbackTexture=!0,r.FallbackTexture=""},71193:function(e,t,s){s.d(t,{S:()=>c,p:()=>r});var i,r,o=s(69254),n=s(58417),a=s(54603),l=s(59942),u=s(46363),h=s(16415);(i=r||(r={}))[i.Cos=0]="Cos",i[i.Sin=1]="Sin",i[i.Abs=2]="Abs",i[i.Exp=3]="Exp",i[i.Exp2=4]="Exp2",i[i.Round=5]="Round",i[i.Floor=6]="Floor",i[i.Ceiling=7]="Ceiling",i[i.Sqrt=8]="Sqrt",i[i.Log=9]="Log",i[i.Tan=10]="Tan",i[i.ArcTan=11]="ArcTan",i[i.ArcCos=12]="ArcCos",i[i.ArcSin=13]="ArcSin",i[i.Fract=14]="Fract",i[i.Sign=15]="Sign",i[i.Radians=16]="Radians",i[i.Degrees=17]="Degrees",i[i.Set=18]="Set";class c extends n.k{constructor(e){super(e,l.u.Neutral),this.operation=r.Cos,this.registerInput("input",a.E.AutoDetect),this.registerOutput("output",a.E.BasedOnInput),this._outputs[0]._typeConnectionSource=this._inputs[0]}getClassName(){return"TrigonometryBlock"}get input(){return this._inputs[0]}get output(){return this._outputs[0]}_buildBlock(e){super._buildBlock(e);let t=this._outputs[0],s="";switch(this.operation){case r.Cos:s="cos";break;case r.Sin:s="sin";break;case r.Abs:s="abs";break;case r.Exp:s="exp";break;case r.Exp2:s="exp2";break;case r.Round:s="round";break;case r.Floor:s="floor";break;case r.Ceiling:s="ceil";break;case r.Sqrt:s="sqrt";break;case r.Log:s="log";break;case r.Tan:s="tan";break;case r.ArcTan:s="atan";break;case r.ArcCos:s="acos";break;case r.ArcSin:s="asin";break;case r.Fract:s="fract";break;case r.Sign:s="sign";break;case r.Radians:s="radians";break;case r.Degrees:s="degrees";break;case r.Set:s=""}return e.compilationString+=e._declareOutput(t)+` = ${s}(${this.input.associatedVariableName});
`,this}serialize(){let e=super.serialize();return e.operation=this.operation,e}_deserialize(e,t,s){super._deserialize(e,t,s),this.operation=e.operation}_dumpPropertiesCode(){return super._dumpPropertiesCode()+`${this._codeVariableName}.operation = BABYLON.TrigonometryBlockOperations.${r[this.operation]};
`}}(0,o.gn)([(0,h.p)("Operation",4,"ADVANCED",{notifiers:{rebuild:!0},embedded:!0,options:[{label:"Cos",value:r.Cos},{label:"Sin",value:r.Sin},{label:"Abs",value:r.Abs},{label:"Exp",value:r.Exp},{label:"Exp2",value:r.Exp2},{label:"Round",value:r.Round},{label:"Floor",value:r.Floor},{label:"Ceiling",value:r.Ceiling},{label:"Sqrt",value:r.Sqrt},{label:"Log",value:r.Log},{label:"Tan",value:r.Tan},{label:"ArcTan",value:r.ArcTan},{label:"ArcCos",value:r.ArcCos},{label:"ArcSin",value:r.ArcSin},{label:"Fract",value:r.Fract},{label:"Sign",value:r.Sign},{label:"Radians",value:r.Radians},{label:"Degrees",value:r.Degrees},{label:"Set",value:r.Set}]})],c.prototype,"operation",void 0),(0,u.H7)("BABYLON.TrigonometryBlock",c)},76320:function(e,t,s){s.d(t,{A:()=>a});var i=s(58417),r=s(54603),o=s(59942),n=s(46363);class a extends i.k{constructor(e){super(e,o.u.Neutral),this.registerInput("input",r.E.AutoDetect),this.registerOutput("output",r.E.BasedOnInput),this._outputs[0]._typeConnectionSource=this._inputs[0],this._inputs[0].excludedConnectionPointTypes.push(r.E.Float),this._inputs[0].excludedConnectionPointTypes.push(r.E.Matrix)}getClassName(){return"NormalizeBlock"}get input(){return this._inputs[0]}get output(){return this._outputs[0]}_buildBlock(e){super._buildBlock(e);let t=this._outputs[0],s=this._inputs[0];return e.compilationString+=e._declareOutput(t)+` = normalize(${s.associatedVariableName});
`,this}}(0,n.H7)("BABYLON.NormalizeBlock",a)},77904:function(e,t,s){s.d(t,{d:()=>a});var i=s(58417),r=s(54603),o=s(59942),n=s(46363);class a extends i.k{constructor(e){super(e,o.u.Neutral),this.registerInput("left",r.E.AutoDetect),this.registerInput("right",r.E.AutoDetect),this.registerOutput("output",r.E.BasedOnInput),this._outputs[0]._typeConnectionSource=this._inputs[0],this._linkConnectionTypes(0,1)}getClassName(){return"MinBlock"}get left(){return this._inputs[0]}get right(){return this._inputs[1]}get output(){return this._outputs[0]}_buildBlock(e){super._buildBlock(e);let t=this._outputs[0];return e.compilationString+=e._declareOutput(t)+` = min(${this.left.associatedVariableName}, ${this.right.associatedVariableName});
`,this}}(0,n.H7)("BABYLON.MinBlock",a)},78626:function(e,t){t.uniformRandBool=t.normalRandom=t.randRange=t.randRangeInt=t.centeredRand=void 0;var s=function(e){return Math.random()};t.centeredRand=function(e,t){return void 0===e&&(e=s),(e(t)-.5)*2},t.randRangeInt=function(e,t,i,r){return void 0===i&&(i=s),Math.floor(i(r)*(t-e+1))+e},t.randRange=function(e,t,i,r){return void 0===e&&(e=0),void 0===t&&(t=1),void 0===i&&(i=s),i(r)*(t-e)+e},t.normalRandom=function(e,t,i,r){return void 0===i&&(i=s),e+t*Math.sqrt(-2*Math.log(i(r)))*Math.cos(2*Math.PI*i(r+1))},t.uniformRandBool=function(e,t,i){return void 0===t&&(t=s),t(i)<e}},80610:function(e,t,s){s.d(t,{D0:()=>v,En:()=>T,Lf:()=>D,QH:()=>m,Ro:()=>C,hO:()=>b,oJ:()=>S,p6:()=>A,qC:()=>R,qJ:()=>f,qh:()=>O});var i=s(70541),r=s(61834),o=s(16891),n=s(49192),a=s(90481),l=s(11740),u=s(76468),h=s(75590),c=s(88280),p=s(83393),d=s(23207);s(74484);let _="image/png",g=[134,22,135,150,246,214,150,54];function f(e){let t=new DataView(e.buffer,e.byteOffset,e.byteLength),s=0;for(let e=0;e<g.length;e++)if(t.getUint8(s++)!==g[e])return c.Y.Error("Not a babylon environment map"),null;let i="",r=0;for(;r=t.getUint8(s++);)i+=String.fromCharCode(r);let o=JSON.parse(i);return(o=m(o)).binaryDataPosition=s,o.specular&&(o.specular.lodGenerationScale=o.specular.lodGenerationScale||.8),o}function m(e){if(e.version>2)throw Error(`Unsupported babylon environment map version "${e.version}". Latest supported version is "2".`);return 2===e.version?e:e={...e,version:2,imageType:_}}async function A(e,t={}){let s=e.getInternalTexture();if(!s)return await Promise.reject("The cube texture is invalid.");let i=s.getEngine();if(2!==e.textureType&&1!==e.textureType&&0!==e.textureType&&0!==e.textureType&&7!==e.textureType&&-1!==e.textureType)return await Promise.reject("The cube texture should allow HDR (Full Float or Half Float).");let r=1;if(!i.getCaps().textureFloatRender&&(r=2,!i.getCaps().textureHalfFloatRender))return await Promise.reject("Env texture can only be created when the browser supports half float or full float rendering.");e.sphericalPolynomial;let n=e.getInternalTexture()?._sphericalPolynomialPromise,a=s.width,l=new u.x(i),h={},c={};i.flushFramebuffer();let p=t.imageType??_,d=(0,o.ILog2)(s.width);for(let s=0;s<=d;s++){let i=Math.pow(2,d-s);for(let o=0;o<6;o++)h[6*s+o]=await y(l,e,r,o,s,i,p,t.imageQuality)}let f=t.disableIrradianceTexture?null:e.irradianceTexture;if(f){let e=f.getSize().width;for(let s=0;s<6;s++)c[s]=await y(l,f,r,s,0,e,p,t.imageQuality)}l.dispose(),n&&await n;let m={version:2,width:a,imageType:p,irradiance:function(e){let t=e.sphericalPolynomial;return null==t?null:{x:[t.x.x,t.x.y,t.x.z],y:[t.y.x,t.y.y,t.y.z],z:[t.z.x,t.z.y,t.z.z],xx:[t.xx.x,t.xx.y,t.xx.z],yy:[t.yy.x,t.yy.y,t.yy.z],zz:[t.zz.x,t.zz.y,t.zz.z],yz:[t.yz.x,t.yz.y,t.yz.z],zx:[t.zx.x,t.zx.y,t.zx.z],xy:[t.xy.x,t.xy.y,t.xy.z]}}(e),specular:{mipmaps:[],lodGenerationScale:e.lodGenerationScale}},T=0;for(let e=0;e<=d;e++)for(let t=0;t<6;t++){let s=h[6*e+t].byteLength;m.specular.mipmaps.push({length:s,position:T}),T+=s}if(f){m.irradiance=m.irradiance||{x:[0,0,0],xx:[0,0,0],y:[0,0,0],yy:[0,0,0],z:[0,0,0],zz:[0,0,0],yz:[0,0,0],zx:[0,0,0],xy:[0,0,0]},m.irradiance.irradianceTexture={size:f.getSize().width,faces:[]};for(let e=0;e<6;e++){let t=c[e].byteLength;m.irradiance.irradianceTexture.faces.push({length:t,position:T}),T+=t}}let b=JSON.stringify(m),C=new ArrayBuffer(b.length+1),x=new Uint8Array(C);for(let e=0,t=b.length;e<t;e++)x[e]=b.charCodeAt(e);x[b.length]=0;let S=new ArrayBuffer(g.length+T+C.byteLength),v=new Uint8Array(S),E=new DataView(S),R=0;for(let e=0;e<g.length;e++)E.setUint8(R++,g[e]);v.set(new Uint8Array(C),R),R+=C.byteLength;for(let e=0;e<=d;e++)for(let t=0;t<6;t++){let s=h[6*e+t];v.set(new Uint8Array(s),R),R+=s.byteLength}if(f)for(let e=0;e<6;e++){let t=c[e];v.set(new Uint8Array(t),R),R+=t.byteLength}return S}async function y(e,t,s,i,r,o,n,a){let l=await t.readPixels(i,r,void 0,!1);if(l&&l.byteLength===l.length){let e=new Float32Array(4*l.byteLength);for(let t=0;t<l.byteLength;t++)e[t]=l[t]/255,e[t]=Math.pow(e[t],2.2);l=e}else if(l&&t.gammaSpace){let e=l;for(let t=0;t<e.length;t++)e[t]=Math.pow(e[t],2.2)}let u=e.getEngine(),h=u.createRawTexture(l,o,o,5,!1,!0,1,null,s);await p.r.EncodeTextureToRGBD(h,e,s);let c=await u._readTexturePixels(h,o,o),_=await (0,d.DumpDataAsync)(o,o,c,n,void 0,!1,!0,a);return h.dispose(),_}function T(e,t){let s=(t=m(t)).specular,i=Math.log2(t.width);if(i=Math.round(i)+1,s.mipmaps.length!==6*i)throw Error(`Unsupported specular mipmaps number "${s.mipmaps.length}"`);let r=Array(i);for(let o=0;o<i;o++){r[o]=Array(6);for(let i=0;i<6;i++){let n=s.mipmaps[6*o+i];r[o][i]=new Uint8Array(e.buffer,e.byteOffset+t.binaryDataPosition+n.position,n.length)}}return r}function b(e,t){t=m(t);let s=Array(6),i=t.irradiance?.irradianceTexture;if(i){if(6!==i.faces.length)throw Error(`Incorrect irradiance texture faces number "${i.faces.length}"`);for(let r=0;r<6;r++){let o=i.faces[r];s[r]=new Uint8Array(e.buffer,e.byteOffset+t.binaryDataPosition+o.position,o.length)}}return s}function C(e,t,s){let i=(s=m(s)).specular;if(!i)return Promise.resolve([]);e._lodGenerationScale=i.lodGenerationScale;let r=[],o=T(t,s);r.push(S(e,o,s.imageType));let n=s.irradiance?.irradianceTexture;if(n){let i=b(t,s);r.push(v(e,i,n.size,s.imageType))}return Promise.all(r)}async function x(e,t,s,i,r,o,n,a,l,u,h){return await new Promise((c,p)=>{if(s){let s=t.createTexture(null,!0,!0,null,1,null,e=>{p(e)},e);i?.onEffectCreatedObservable.addOnce(a=>{a.executeWhenCompiled(()=>{i.externalTextureSamplerBinding=!0,i.onApply=i=>{i._bindTexture("textureSampler",s),i.setFloat2("scale",1,t._features.needsInvertingBitmap&&e instanceof ImageBitmap?-1:1)},t.scenes.length&&(t.scenes[0].postProcessManager.directRender([i],u,!0,o,n),t.restoreDefaultFramebuffer(),s.dispose(),URL.revokeObjectURL(r),c())})})}else{if(t._uploadImageToTexture(h,e,o,n),a){let s=l[n];s&&t._uploadImageToTexture(s._texture,e,o,0)}c()}})}async function S(e,t,s=_){let i=e.getEngine();e.format=5,e.type=0,e.generateMipMaps=!0,e._cachedAnisotropicFilteringLevel=null,i.updateTextureSamplingMode(3,e),await E(e,t,!0,s),e.isReady=!0}async function v(e,t,s,i=_){let r=e.getEngine(),o=new a.l(r,5);e._irradianceTexture=new l.V(r,o),o.isCube=!0,o.format=5,o.type=0,o.generateMipMaps=!0,o._cachedAnisotropicFilteringLevel=null,o.generateMipMaps=!0,o.width=s,o.height=s,r.updateTextureSamplingMode(3,o),await E(o,[t],!1,i),r.generateMipMapsForCubemap(o),o.isReady=!0}async function E(e,t,r,n=_){if(!i.w1.IsExponentOfTwo(e.width))throw Error("Texture size must be a power of two");let u=(0,o.ILog2)(e.width)+1,c=e.getEngine(),p=!1,d=!1,g=null,f=null,m=null,A=c.getCaps();A.textureLOD?c._features.supportRenderAndCopyToLodForFloatTextures?A.textureHalfFloatRender&&A.textureHalfFloatLinearFiltering?(p=!0,e.type=2):A.textureFloatRender&&A.textureFloatLinearFiltering&&(p=!0,e.type=1):p=!1:(p=!1,d=r);let y=0;if(p)c.isWebGPU?(y=1,await s.e("5960").then(s.bind(s,38886))):await s.e("7843").then(s.bind(s,6963)),g=new h.D("rgbdDecode","rgbdDecode",null,null,1,null,3,c,!1,void 0,e.type,void 0,null,!1,void 0,y),e._isRGBD=!1,e.invertY=!1,f=c.createRenderTargetCubeTexture(e.width,{generateDepthBuffer:!1,generateMipMaps:!0,generateStencilBuffer:!1,samplingMode:3,type:e.type,format:5});else if(e._isRGBD=!0,e.invertY=!0,d){m={};let t=e._lodGenerationScale,s=e._lodGenerationOffset;for(let i=0;i<3;i++){let r=(u-1)*t+s,o=Math.round(Math.min(Math.max(s+(r-s)*(1-i/2),0),r)),n=new a.l(c,2);n.isCube=!0,n.invertY=!0,n.generateMipMaps=!1,c.updateTextureSamplingMode(2,n);let h=new l.V(null);switch(h._isCube=!0,h._texture=n,m[o]=h,i){case 0:e._lodTextureLow=h;break;case 1:e._lodTextureMid=h;break;case 2:e._lodTextureHigh=h}}}let T=[];for(let s=0;s<t.length;s++)for(let i=0;i<6;i++){let r,o=new Blob([t[s][i]],{type:n}),a=URL.createObjectURL(o);if(c._features.forceBitmapOverHTMLImageElement)r=c.createImageBitmap(o,{premultiplyAlpha:"none"}).then(async t=>await x(t,c,p,g,a,i,s,d,m,f,e));else{let t=new Image;t.src=a,r=new Promise((r,o)=>{t.onload=()=>{x(t,c,p,g,a,i,s,d,m,f,e).then(()=>r()).catch(e=>{o(e)})},t.onerror=e=>{o(e)}})}T.push(r)}if(await Promise.all(T),t.length<u){let s,i=Math.pow(2,u-1-t.length),r=i*i*4;switch(e.type){case 0:s=new Uint8Array(r);break;case 2:s=new Uint16Array(r);break;case 1:s=new Float32Array(r)}for(let i=t.length;i<u;i++)for(let t=0;t<6;t++)c._uploadArrayBufferViewToTexture(f?.texture||e,s,t,i)}if(f){let t=e._irradianceTexture;e._irradianceTexture=null,c._releaseTexture(e),f._swapAndDie(e),e._irradianceTexture=t}g&&g.dispose(),d&&(e._lodTextureHigh&&e._lodTextureHigh._texture&&(e._lodTextureHigh._texture.isReady=!0),e._lodTextureMid&&e._lodTextureMid._texture&&(e._lodTextureMid._texture.isReady=!0),e._lodTextureLow&&e._lodTextureLow._texture&&(e._lodTextureLow._texture.isReady=!0))}function R(e,t){let s=(t=m(t)).irradiance;if(!s)return;let i=new n.i;r.P.FromArrayToRef(s.x,0,i.x),r.P.FromArrayToRef(s.y,0,i.y),r.P.FromArrayToRef(s.z,0,i.z),r.P.FromArrayToRef(s.xx,0,i.xx),r.P.FromArrayToRef(s.yy,0,i.yy),r.P.FromArrayToRef(s.zz,0,i.zz),r.P.FromArrayToRef(s.yz,0,i.yz),r.P.FromArrayToRef(s.zx,0,i.zx),r.P.FromArrayToRef(s.xy,0,i.xy),e._sphericalPolynomial=i}function D(e,t,s,i,r){let o=S(e.getEngine().createRawCubeTexture(null,e.width,e.format,e.type,e.generateMipMaps,e.invertY,e.samplingMode,e._compression),t).then(()=>e);return e.onRebuildCallback=e=>({proxy:o,isReady:!0,isAsync:!0}),e._source=13,e._bufferViewArrayArray=t,e._lodGenerationScale=i,e._lodGenerationOffset=r,e._sphericalPolynomial=s,S(e,t).then(()=>(e.isReady=!0,e))}let O={GetEnvInfo:f,CreateEnvTextureAsync:A,CreateRadianceImageDataArrayBufferViews:T,CreateIrradianceImageDataArrayBufferViews:b,UploadEnvLevelsAsync:C,UploadRadianceLevelsAsync:S,UploadIrradianceLevelsAsync:v,UploadEnvSpherical:R}},80781:function(e,t,s){s.d(t,{MK:()=>d,Th:()=>g,mE:()=>f,n4:()=>A,ng:()=>_,qB:()=>p});var i=s(32160),r=s(57716),o=s(32519),n=s(88280),a=s(70541),l=s(23207),u=s(60746),h=s(67109);let c=null;function p(e,t,s,i,r="image/png",o=!1,l,u=!1){let{height:h,width:d}=m(e,t,s);return h&&d?t.getScene().activeCamera!==t?void g(e,t,s,e=>{if(o){let t=new Blob([e]);a.w1.DownloadBlob(t),i&&i("")}else i&&i(e)},r,1,e.getCreationOptions().antialias,void 0,void 0,void 0,void 0,l):void e.onEndFrameObservable.addOnce(()=>{c||(c=document.createElement("canvas")),c.width=d,c.height=h;let t=c.getContext("2d"),s=e.getRenderingCanvas();if(!t||!s)return void n.Y.Error("Failed to create screenshot. Rendering context or rendering canvas is not available.");let p=s.width,_=s.height,g=c.width,f=c.height,m=g/p,A=f/_,y=u?Math.max(m,A):Math.min(m,A),T=p*y,b=_*y;t.drawImage(s,0,0,p,_,(g-T)/2,(f-b)/2,T,b),o?(a.w1.EncodeScreenshotCanvasData(c,void 0,r,void 0,l),i&&i("")):a.w1.EncodeScreenshotCanvasData(c,i,r,void 0,l)}):void n.Y.Error("Invalid 'size' parameter !")}async function d(e,t,s,i="image/png",r,o=!1){return await new Promise((n,a)=>{p(e,t,s,e=>{void 0!==e?n(e):a(Error("Data is undefined"))},i,void 0,r,o)})}async function _(e,t,s,i,r="image/png",o,n=!1){return await new Promise(a=>{p(e,t,{width:s,height:i},()=>{a()},r,!0,o,n)})}function g(e,t,a,c,p="image/png",d=1,_=!1,f,A=!1,y=!1,T=!0,b,C,x){let{height:S,width:v,finalWidth:E,finalHeight:R}=m(e,t,a);if(!(S&&v))return void n.Y.Error("Invalid 'size' parameter !");e.skipFrameRender=!0;let D=e.getRenderWidth,O=e.getRenderHeight;e.getRenderWidth=(t=!1)=>!t&&e._currentRenderTarget?e._currentRenderTarget.width:v,e.getRenderHeight=(t=!1)=>!t&&e._currentRenderTarget?e._currentRenderTarget.height:S,e.onResizeObservable.hasObservers()&&e.onResizeObservable.notifyObservers(e);let w=t.getScene(),L=new r._("screenShot",{width:v,height:S},w,!1,!1,0,!1,i.x.BILINEAR_SAMPLINGMODE,void 0,y,void 0,void 0,void 0,d);L.renderList=w.meshes.slice(),L.samples=d,L.renderSprites=A,L.activeCamera=t,L.forceLayerMaskCheck=T,C?.(L);let I=x||l.DumpData,M=()=>{(0,h.l)(()=>L.isReadyForRendering()&&t.isReady(!0),()=>{e.onEndFrameObservable.addOnce(()=>{E===v&&R===S?L.readPixels(void 0,void 0,void 0,!1).then(e=>{I(v,S,e,c,p,f,!0,void 0,b),L.dispose()}):(e.isWebGPU?s.e("1801").then(s.bind(s,45460)):s.e("395").then(s.bind(s,35066))).then(async()=>await (0,u.$0)("pass",L.getInternalTexture(),w,void 0,void 0,void 0,E,R).then(t=>{e._readTexturePixels(t,E,R,-1,0,null,!0,!1,0,0).then(e=>{I(E,R,e,c,p,f,!0,void 0,b),t.dispose()})}))}),w.incrementRenderId(),w.resetCachedMaterial();let i=w.activeCamera,r=w.activeCameras,o=t.outputRenderTarget,n=w.spritesEnabled;w.activeCamera=t,w.activeCameras=null,t.outputRenderTarget=L,w.spritesEnabled=A;let a=w.meshes;w.meshes=L.renderList||w.meshes;try{w.render()}finally{w.activeCamera=i,w.activeCameras=r,t.outputRenderTarget=o,w.spritesEnabled=n,w.meshes=a,e.getRenderWidth=D,e.getRenderHeight=O,e.onResizeObservable.hasObservers()&&e.onResizeObservable.notifyObservers(e),t.getProjectionMatrix(!0),e.skipFrameRender=!1}},()=>{e.skipFrameRender=!1,e.getRenderWidth=D,e.getRenderHeight=O})},F=()=>{w.incrementRenderId(),w.resetCachedMaterial(),M()};if(_){let e=new o.P("antialiasing",1,w.activeCamera);L.addPostProcess(e),e.autoClear=!0,e.onEffectCreatedObservable.addOnce(e=>{e.isReady()?F():e.onCompiled=()=>{F()}})}else F()}async function f(e,t,s,i="image/png",r=1,o=!1,n,a=!1,l=!1,u=!0,h,c,p){return await new Promise((d,_)=>{g(e,t,s,e=>{void 0!==e?d(e):_(Error("Data is undefined"))},i,r,o,n,a,l,u,h,c,p)})}function m(e,t,s){let i=0,r=0,o=0,n=0;if("object"==typeof s){let a=s.precision?Math.abs(s.precision):1;s.width&&s.height?(i=s.height*a,r=s.width*a):s.width&&!s.height?i=Math.round((r=s.width*a)/e.getAspectRatio(t)):s.height&&!s.width?r=Math.round((i=s.height*a)*e.getAspectRatio(t)):i=Math.round((r=Math.round(e.getRenderWidth()*a))/e.getAspectRatio(t)),s.finalWidth&&s.finalHeight?(n=s.finalHeight,o=s.finalWidth):s.finalWidth&&!s.finalHeight?n=Math.round((o=s.finalWidth)/e.getAspectRatio(t)):s.finalHeight&&!s.finalWidth?o=Math.round((n=s.finalHeight)*e.getAspectRatio(t)):(o=r,n=i)}else isNaN(s)||(i=s,r=s,o=s,n=s);return r&&(r=Math.floor(r)),i&&(i=Math.floor(i)),o&&(o=Math.floor(o)),n&&(n=Math.floor(n)),{height:0|i,width:0|r,finalWidth:0|o,finalHeight:0|n}}let A={CreateScreenshot:p,CreateScreenshotAsync:d,CreateScreenshotWithResizeAsync:_,CreateScreenshotUsingRenderTarget:g,CreateScreenshotUsingRenderTargetAsync:f};a.w1.CreateScreenshot=p,a.w1.CreateScreenshotAsync=d,a.w1.CreateScreenshotUsingRenderTarget=g,a.w1.CreateScreenshotUsingRenderTargetAsync=f},81731:function(e,t,s){s.d(t,{u:()=>a});var i=s(58417),r=s(54603),o=s(59942),n=s(46363);class a extends i.k{constructor(e){super(e,o.u.Neutral),this.registerInput("value",r.E.AutoDetect),this.registerOutput("output",r.E.Float),this._inputs[0].excludedConnectionPointTypes.push(r.E.Float),this._inputs[0].excludedConnectionPointTypes.push(r.E.Matrix)}getClassName(){return"LengthBlock"}get value(){return this._inputs[0]}get output(){return this._outputs[0]}_buildBlock(e){super._buildBlock(e);let t=this._outputs[0];return e.compilationString+=e._declareOutput(t)+` = length(${this.value.associatedVariableName});
`,this}}(0,n.H7)("BABYLON.LengthBlock",a)},83612:function(e,t,s){s.d(t,{F:()=>o});var i=s(46363),r=s(99151);class o extends r.c{constructor(e){super(e)}getClassName(){return"SubtractBlock"}_buildBlock(e){super._buildBlock(e);let t=this._outputs[0];return e.compilationString+=e._declareOutput(t)+` = ${this.left.associatedVariableName} - ${this.right.associatedVariableName};
`,this}}(0,i.H7)("BABYLON.SubtractBlock",o)},88431:function(e,t,s){s.d(t,{y:()=>i});class i{constructor(){this._valueCache={},this.vertexCompilationError=null,this.fragmentCompilationError=null,this.programLinkError=null,this.programValidationError=null,this._isDisposed=!1}get isAsync(){return this.isParallelCompiled}get isReady(){return!!this.program&&(!this.isParallelCompiled||this.engine._isRenderingStateCompiled(this))}_handlesSpectorRebuildCallback(e){e&&this.program&&e(this.program)}setEngine(e){this.engine=e}_fillEffectInformation(e,t,s,i,r,o,n,a){let l,u=this.engine;if(u.supportsUniformBuffers)for(let s in t)e.bindUniformBlock(s,t[s]);for(this.engine.getUniforms(this,s).forEach((e,t)=>{i[s[t]]=e}),this._uniforms=i,l=0;l<r.length;l++)null==e.getUniform(r[l])&&(r.splice(l,1),l--);for(let e of(r.forEach((e,t)=>{o[e]=t}),u.getAttributes(this,n)))a.push(e)}dispose(){this._uniforms={},this._isDisposed=!0}_cacheMatrix(e,t){let s=this._valueCache[e],i=t.updateFlag;return(void 0===s||s!==i)&&(this._valueCache[e]=i,!0)}_cacheFloat2(e,t,s){let i=this._valueCache[e];if(!i||2!==i.length)return i=[t,s],this._valueCache[e]=i,!0;let r=!1;return i[0]!==t&&(i[0]=t,r=!0),i[1]!==s&&(i[1]=s,r=!0),r}_cacheFloat3(e,t,s,i){let r=this._valueCache[e];if(!r||3!==r.length)return r=[t,s,i],this._valueCache[e]=r,!0;let o=!1;return r[0]!==t&&(r[0]=t,o=!0),r[1]!==s&&(r[1]=s,o=!0),r[2]!==i&&(r[2]=i,o=!0),o}_cacheFloat4(e,t,s,i,r){let o=this._valueCache[e];if(!o||4!==o.length)return o=[t,s,i,r],this._valueCache[e]=o,!0;let n=!1;return o[0]!==t&&(o[0]=t,n=!0),o[1]!==s&&(o[1]=s,n=!0),o[2]!==i&&(o[2]=i,n=!0),o[3]!==r&&(o[3]=r,n=!0),n}setInt(e,t){let s=this._valueCache[e];(void 0===s||s!==t)&&this.engine.setInt(this._uniforms[e],t)&&(this._valueCache[e]=t)}setInt2(e,t,s){this._cacheFloat2(e,t,s)&&!this.engine.setInt2(this._uniforms[e],t,s)&&(this._valueCache[e]=null)}setInt3(e,t,s,i){this._cacheFloat3(e,t,s,i)&&!this.engine.setInt3(this._uniforms[e],t,s,i)&&(this._valueCache[e]=null)}setInt4(e,t,s,i,r){this._cacheFloat4(e,t,s,i,r)&&!this.engine.setInt4(this._uniforms[e],t,s,i,r)&&(this._valueCache[e]=null)}setIntArray(e,t){this._valueCache[e]=null,this.engine.setIntArray(this._uniforms[e],t)}setIntArray2(e,t){this._valueCache[e]=null,this.engine.setIntArray2(this._uniforms[e],t)}setIntArray3(e,t){this._valueCache[e]=null,this.engine.setIntArray3(this._uniforms[e],t)}setIntArray4(e,t){this._valueCache[e]=null,this.engine.setIntArray4(this._uniforms[e],t)}setUInt(e,t){let s=this._valueCache[e];(void 0===s||s!==t)&&this.engine.setUInt(this._uniforms[e],t)&&(this._valueCache[e]=t)}setUInt2(e,t,s){this._cacheFloat2(e,t,s)&&!this.engine.setUInt2(this._uniforms[e],t,s)&&(this._valueCache[e]=null)}setUInt3(e,t,s,i){this._cacheFloat3(e,t,s,i)&&!this.engine.setUInt3(this._uniforms[e],t,s,i)&&(this._valueCache[e]=null)}setUInt4(e,t,s,i,r){this._cacheFloat4(e,t,s,i,r)&&!this.engine.setUInt4(this._uniforms[e],t,s,i,r)&&(this._valueCache[e]=null)}setUIntArray(e,t){this._valueCache[e]=null,this.engine.setUIntArray(this._uniforms[e],t)}setUIntArray2(e,t){this._valueCache[e]=null,this.engine.setUIntArray2(this._uniforms[e],t)}setUIntArray3(e,t){this._valueCache[e]=null,this.engine.setUIntArray3(this._uniforms[e],t)}setUIntArray4(e,t){this._valueCache[e]=null,this.engine.setUIntArray4(this._uniforms[e],t)}setArray(e,t){this._valueCache[e]=null,this.engine.setArray(this._uniforms[e],t)}setArray2(e,t){this._valueCache[e]=null,this.engine.setArray2(this._uniforms[e],t)}setArray3(e,t){this._valueCache[e]=null,this.engine.setArray3(this._uniforms[e],t)}setArray4(e,t){this._valueCache[e]=null,this.engine.setArray4(this._uniforms[e],t)}setMatrices(e,t){t&&(this._valueCache[e]=null,this.engine.setMatrices(this._uniforms[e],t))}setMatrix(e,t){this._cacheMatrix(e,t)&&!this.engine.setMatrices(this._uniforms[e],t.asArray())&&(this._valueCache[e]=null)}setMatrix3x3(e,t){this._valueCache[e]=null,this.engine.setMatrix3x3(this._uniforms[e],t)}setMatrix2x2(e,t){this._valueCache[e]=null,this.engine.setMatrix2x2(this._uniforms[e],t)}setFloat(e,t){let s=this._valueCache[e];(void 0===s||s!==t)&&this.engine.setFloat(this._uniforms[e],t)&&(this._valueCache[e]=t)}setVector2(e,t){this._cacheFloat2(e,t.x,t.y)&&!this.engine.setFloat2(this._uniforms[e],t.x,t.y)&&(this._valueCache[e]=null)}setFloat2(e,t,s){this._cacheFloat2(e,t,s)&&!this.engine.setFloat2(this._uniforms[e],t,s)&&(this._valueCache[e]=null)}setVector3(e,t){this._cacheFloat3(e,t.x,t.y,t.z)&&!this.engine.setFloat3(this._uniforms[e],t.x,t.y,t.z)&&(this._valueCache[e]=null)}setFloat3(e,t,s,i){this._cacheFloat3(e,t,s,i)&&!this.engine.setFloat3(this._uniforms[e],t,s,i)&&(this._valueCache[e]=null)}setVector4(e,t){this._cacheFloat4(e,t.x,t.y,t.z,t.w)&&!this.engine.setFloat4(this._uniforms[e],t.x,t.y,t.z,t.w)&&(this._valueCache[e]=null)}setQuaternion(e,t){this._cacheFloat4(e,t.x,t.y,t.z,t.w)&&!this.engine.setFloat4(this._uniforms[e],t.x,t.y,t.z,t.w)&&(this._valueCache[e]=null)}setFloat4(e,t,s,i,r){this._cacheFloat4(e,t,s,i,r)&&!this.engine.setFloat4(this._uniforms[e],t,s,i,r)&&(this._valueCache[e]=null)}setColor3(e,t){this._cacheFloat3(e,t.r,t.g,t.b)&&!this.engine.setFloat3(this._uniforms[e],t.r,t.g,t.b)&&(this._valueCache[e]=null)}setColor4(e,t,s){this._cacheFloat4(e,t.r,t.g,t.b,s)&&!this.engine.setFloat4(this._uniforms[e],t.r,t.g,t.b,s)&&(this._valueCache[e]=null)}setDirectColor4(e,t){this._cacheFloat4(e,t.r,t.g,t.b,t.a)&&!this.engine.setFloat4(this._uniforms[e],t.r,t.g,t.b,t.a)&&(this._valueCache[e]=null)}_getVertexShaderCode(){return this.vertexShader?this.engine._getShaderSource(this.vertexShader):null}_getFragmentShaderCode(){return this.fragmentShader?this.engine._getShaderSource(this.fragmentShader):null}}},92731:function(e,t,s){s.d(t,{Y:()=>c});var i=s(69254),r=s(88609),o=s(23448),n=s(57423),a=s(38005),l=s(46363),u=s(81234),h=s(90131);class c extends a.m{get refractionTexture(){return this.subSurface.refractionTexture}set refractionTexture(e){this.subSurface.refractionTexture=e,e?this.subSurface.isRefractionEnabled=!0:this.subSurface.linkRefractionWithTransparency||(this.subSurface.isRefractionEnabled=!1)}get indexOfRefraction(){return this.subSurface.indexOfRefraction}set indexOfRefraction(e){this.subSurface.indexOfRefraction=e}get invertRefractionY(){return this.subSurface.invertRefractionY}set invertRefractionY(e){this.subSurface.invertRefractionY=e}get linkRefractionWithTransparency(){return this.subSurface.linkRefractionWithTransparency}set linkRefractionWithTransparency(e){this.subSurface.linkRefractionWithTransparency=e,e&&(this.subSurface.isRefractionEnabled=!0)}get usePhysicalLightFalloff(){return this._lightFalloff===a.m.LIGHTFALLOFF_PHYSICAL}set usePhysicalLightFalloff(e){e!==this.usePhysicalLightFalloff&&(this._markAllSubMeshesAsTexturesDirty(),e?this._lightFalloff=a.m.LIGHTFALLOFF_PHYSICAL:this._lightFalloff=a.m.LIGHTFALLOFF_STANDARD)}get useGLTFLightFalloff(){return this._lightFalloff===a.m.LIGHTFALLOFF_GLTF}set useGLTFLightFalloff(e){e!==this.useGLTFLightFalloff&&(this._markAllSubMeshesAsTexturesDirty(),e?this._lightFalloff=a.m.LIGHTFALLOFF_GLTF:this._lightFalloff=a.m.LIGHTFALLOFF_STANDARD)}get imageProcessingConfiguration(){return this._imageProcessingConfiguration}set imageProcessingConfiguration(e){this._attachImageProcessingConfiguration(e),this._markAllSubMeshesAsImageProcessingDirty()}get cameraColorCurvesEnabled(){return this.imageProcessingConfiguration.colorCurvesEnabled}set cameraColorCurvesEnabled(e){this.imageProcessingConfiguration.colorCurvesEnabled=e}get cameraColorGradingEnabled(){return this.imageProcessingConfiguration.colorGradingEnabled}set cameraColorGradingEnabled(e){this.imageProcessingConfiguration.colorGradingEnabled=e}get cameraToneMappingEnabled(){return this._imageProcessingConfiguration.toneMappingEnabled}set cameraToneMappingEnabled(e){this._imageProcessingConfiguration.toneMappingEnabled=e}get cameraExposure(){return this._imageProcessingConfiguration.exposure}set cameraExposure(e){this._imageProcessingConfiguration.exposure=e}get cameraContrast(){return this._imageProcessingConfiguration.contrast}set cameraContrast(e){this._imageProcessingConfiguration.contrast=e}get cameraColorGradingTexture(){return this._imageProcessingConfiguration.colorGradingTexture}set cameraColorGradingTexture(e){this._imageProcessingConfiguration.colorGradingTexture=e}get cameraColorCurves(){return this._imageProcessingConfiguration.colorCurves}set cameraColorCurves(e){this._imageProcessingConfiguration.colorCurves=e}constructor(e,t,s=!1){super(e,t,s),this.directIntensity=1,this.emissiveIntensity=1,this.environmentIntensity=1,this.specularIntensity=1,this.disableBumpMap=!1,this.ambientTextureStrength=1,this.ambientTextureImpactOnAnalyticalLights=c.DEFAULT_AO_ON_ANALYTICAL_LIGHTS,this.metallicF0Factor=1,this.metallicReflectanceColor=n.Wo.White(),this.useOnlyMetallicFromMetallicReflectanceTexture=!1,this.ambientColor=new n.Wo(0,0,0),this.albedoColor=new n.Wo(1,1,1),this.baseWeight=1,this.reflectivityColor=new n.Wo(1,1,1),this.reflectionColor=new n.Wo(1,1,1),this.emissiveColor=new n.Wo(0,0,0),this.microSurface=1,this.useLightmapAsShadowmap=!1,this.useAlphaFromAlbedoTexture=!1,this.forceAlphaTest=!1,this.alphaCutOff=.4,this.useSpecularOverAlpha=!0,this.useMicroSurfaceFromReflectivityMapAlpha=!1,this.useRoughnessFromMetallicTextureAlpha=!0,this.useRoughnessFromMetallicTextureGreen=!1,this.useMetallnessFromMetallicTextureBlue=!1,this.useAmbientOcclusionFromMetallicTextureRed=!1,this.useAmbientInGrayScale=!1,this.useAutoMicroSurfaceFromReflectivityMap=!1,this.useRadianceOverAlpha=!0,this.useObjectSpaceNormalMap=!1,this.useParallax=!1,this.useParallaxOcclusion=!1,this.parallaxScaleBias=.05,this.disableLighting=!1,this.forceIrradianceInFragment=!1,this.maxSimultaneousLights=4,this.invertNormalMapX=!1,this.invertNormalMapY=!1,this.twoSidedLighting=!1,this.useAlphaFresnel=!1,this.useLinearAlphaFresnel=!1,this.environmentBRDFTexture=null,this.forceNormalForward=!1,this.enableSpecularAntiAliasing=!1,this.useHorizonOcclusion=!0,this.useRadianceOcclusion=!0,this.unlit=!1,this.applyDecalMapAfterDetailMap=!1,this._environmentBRDFTexture=(0,o.$)(this.getScene())}getClassName(){return"PBRMaterial"}clone(e,t=!0,s=""){let i=h.p.Clone(()=>new c(e,this.getScene()),this,{cloneTexturesOnlyOnce:t});return i.id=e,i.name=e,this.stencil.copyTo(i.stencil),this._clonePlugins(i,s),i}serialize(){let e=super.serialize();return e.customType="BABYLON.PBRMaterial",e}static Parse(e,t,s){let i=h.p.Parse(()=>new c(e.name,t),e,t,s);return e.stencil&&i.stencil.parse(e.stencil,t,s),u.F._ParsePlugins(e,i,t,s),e.clearCoat&&i.clearCoat.parse(e.clearCoat,t,s),e.anisotropy&&i.anisotropy.parse(e.anisotropy,t,s),e.brdf&&i.brdf.parse(e.brdf,t,s),e.sheen&&i.sheen.parse(e.sheen,t,s),e.subSurface&&i.subSurface.parse(e.subSurface,t,s),e.iridescence&&i.iridescence.parse(e.iridescence,t,s),i}}c.PBRMATERIAL_OPAQUE=a.m.PBRMATERIAL_OPAQUE,c.PBRMATERIAL_ALPHATEST=a.m.PBRMATERIAL_ALPHATEST,c.PBRMATERIAL_ALPHABLEND=a.m.PBRMATERIAL_ALPHABLEND,c.PBRMATERIAL_ALPHATESTANDBLEND=a.m.PBRMATERIAL_ALPHATESTANDBLEND,c.DEFAULT_AO_ON_ANALYTICAL_LIGHTS=a.m.DEFAULT_AO_ON_ANALYTICAL_LIGHTS,(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"directIntensity",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"emissiveIntensity",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"environmentIntensity",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"specularIntensity",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"disableBumpMap",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"albedoTexture",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"baseWeightTexture",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"baseDiffuseRoughnessTexture",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"ambientTexture",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"ambientTextureStrength",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"ambientTextureImpactOnAnalyticalLights",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesAndMiscDirty")],c.prototype,"opacityTexture",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"reflectionTexture",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"emissiveTexture",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"reflectivityTexture",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"metallicTexture",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"metallic",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"roughness",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"metallicF0Factor",void 0),(0,i.gn)([(0,r.n9)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"metallicReflectanceColor",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useOnlyMetallicFromMetallicReflectanceTexture",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"metallicReflectanceTexture",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"reflectanceTexture",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"microSurfaceTexture",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"bumpTexture",void 0),(0,i.gn)([(0,r.oU)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty",null)],c.prototype,"lightmapTexture",void 0),(0,i.gn)([(0,r.n9)("ambient"),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"ambientColor",void 0),(0,i.gn)([(0,r.n9)("albedo"),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"albedoColor",void 0),(0,i.gn)([(0,r.qC)("baseWeight"),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"baseWeight",void 0),(0,i.gn)([(0,r.qC)("baseDiffuseRoughness"),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"baseDiffuseRoughness",void 0),(0,i.gn)([(0,r.n9)("reflectivity"),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"reflectivityColor",void 0),(0,i.gn)([(0,r.n9)("reflection"),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"reflectionColor",void 0),(0,i.gn)([(0,r.n9)("emissive"),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"emissiveColor",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"microSurface",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useLightmapAsShadowmap",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesAndMiscDirty")],c.prototype,"useAlphaFromAlbedoTexture",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesAndMiscDirty")],c.prototype,"forceAlphaTest",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesAndMiscDirty")],c.prototype,"alphaCutOff",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useSpecularOverAlpha",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useMicroSurfaceFromReflectivityMapAlpha",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useRoughnessFromMetallicTextureAlpha",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useRoughnessFromMetallicTextureGreen",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useMetallnessFromMetallicTextureBlue",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useAmbientOcclusionFromMetallicTextureRed",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useAmbientInGrayScale",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useAutoMicroSurfaceFromReflectivityMap",void 0),(0,i.gn)([(0,r.qC)()],c.prototype,"usePhysicalLightFalloff",null),(0,i.gn)([(0,r.qC)()],c.prototype,"useGLTFLightFalloff",null),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useRadianceOverAlpha",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useObjectSpaceNormalMap",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useParallax",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useParallaxOcclusion",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"parallaxScaleBias",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsLightsDirty")],c.prototype,"disableLighting",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"forceIrradianceInFragment",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsLightsDirty")],c.prototype,"maxSimultaneousLights",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"invertNormalMapX",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"invertNormalMapY",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"twoSidedLighting",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useAlphaFresnel",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useLinearAlphaFresnel",void 0),(0,i.gn)([(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"environmentBRDFTexture",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"forceNormalForward",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"enableSpecularAntiAliasing",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useHorizonOcclusion",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsTexturesDirty")],c.prototype,"useRadianceOcclusion",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsMiscDirty")],c.prototype,"unlit",void 0),(0,i.gn)([(0,r.qC)(),(0,r.wz)("_markAllSubMeshesAsMiscDirty")],c.prototype,"applyDecalMapAfterDetailMap",void 0),(0,l.H7)("BABYLON.PBRMaterial",c)}}]);