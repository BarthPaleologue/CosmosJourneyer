/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

"use strict";(globalThis.webpackChunkcosmos_journeyer=globalThis.webpackChunkcosmos_journeyer||[]).push([["5983"],{56877:function(e,t,s){s.d(t,{A8:()=>l,Gb:()=>a,LE:()=>h,an:()=>i,o_:()=>r});var n=s(53864);s(25146);let i={};function a(e,t,s=""){return s+(t?t+"\n":"")+e}function r(e,t,s,a,r,h,l){let u=l||i.loadFile;if(u)return u(e,t,s,a,r,h);throw(0,n.S)("FileTools")}function h(e,t,s,n){if(e){t?e.IS_NDC_HALF_ZRANGE="":delete e.IS_NDC_HALF_ZRANGE,s?e.USE_REVERSE_DEPTHBUFFER="":delete e.USE_REVERSE_DEPTHBUFFER,n?e.USE_EXACT_SRGB_CONVERSIONS="":delete e.USE_EXACT_SRGB_CONVERSIONS;return}{let e="";return t&&(e+="#define IS_NDC_HALF_ZRANGE"),s&&(e&&(e+="\n"),e+="#define USE_REVERSE_DEPTHBUFFER"),n&&(e&&(e+="\n"),e+="#define USE_EXACT_SRGB_CONVERSIONS"),e}}function l(e,t,s=!1,n){switch(e){case 3:{let e=(t instanceof ArrayBuffer,new Int8Array(t));return n&&e.set(new Int8Array(n)),e}case 0:{let e=(t instanceof ArrayBuffer,new Uint8Array(t));return n&&e.set(new Uint8Array(n)),e}case 4:{let e=new Int16Array(t instanceof ArrayBuffer?t:s?t/2:t);return n&&e.set(new Int16Array(n)),e}case 5:case 8:case 9:case 10:case 2:{let e=new Uint16Array(t instanceof ArrayBuffer?t:s?t/2:t);return n&&e.set(new Uint16Array(n)),e}case 6:{let e=new Int32Array(t instanceof ArrayBuffer?t:s?t/4:t);return n&&e.set(new Int32Array(n)),e}case 7:case 11:case 12:case 13:case 14:case 15:{let e=new Uint32Array(t instanceof ArrayBuffer?t:s?t/4:t);return n&&e.set(new Uint32Array(n)),e}case 1:{let e=new Float32Array(t instanceof ArrayBuffer?t:s?t/4:t);return n&&e.set(new Float32Array(n)),e}}let i=(t instanceof ArrayBuffer,new Uint8Array(t));return n&&i.set(new Uint8Array(n)),i}},65098:function(e,t,s){s.d(t,{l:()=>i});var n=s(85791);class i{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}i.Instances=[],i.OnEnginesDisposedObservable=new n.y$,i._LastCreatedScene=null,i.UseFallbackTexture=!0,i.FallbackTexture=""},88431:function(e,t,s){s.d(t,{y:()=>n});class n{constructor(){this._valueCache={},this.vertexCompilationError=null,this.fragmentCompilationError=null,this.programLinkError=null,this.programValidationError=null,this._isDisposed=!1}get isAsync(){return this.isParallelCompiled}get isReady(){return!!this.program&&(!this.isParallelCompiled||this.engine._isRenderingStateCompiled(this))}_handlesSpectorRebuildCallback(e){e&&this.program&&e(this.program)}setEngine(e){this.engine=e}_fillEffectInformation(e,t,s,n,i,a,r,h){let l,u=this.engine;if(u.supportsUniformBuffers)for(let s in t)e.bindUniformBlock(s,t[s]);for(this.engine.getUniforms(this,s).forEach((e,t)=>{n[s[t]]=e}),this._uniforms=n,l=0;l<i.length;l++)null==e.getUniform(i[l])&&(i.splice(l,1),l--);for(let e of(i.forEach((e,t)=>{a[e]=t}),u.getAttributes(this,r)))h.push(e)}dispose(){this._uniforms={},this._isDisposed=!0}_cacheMatrix(e,t){let s=this._valueCache[e],n=t.updateFlag;return(void 0===s||s!==n)&&(this._valueCache[e]=n,!0)}_cacheFloat2(e,t,s){let n=this._valueCache[e];if(!n||2!==n.length)return n=[t,s],this._valueCache[e]=n,!0;let i=!1;return n[0]!==t&&(n[0]=t,i=!0),n[1]!==s&&(n[1]=s,i=!0),i}_cacheFloat3(e,t,s,n){let i=this._valueCache[e];if(!i||3!==i.length)return i=[t,s,n],this._valueCache[e]=i,!0;let a=!1;return i[0]!==t&&(i[0]=t,a=!0),i[1]!==s&&(i[1]=s,a=!0),i[2]!==n&&(i[2]=n,a=!0),a}_cacheFloat4(e,t,s,n,i){let a=this._valueCache[e];if(!a||4!==a.length)return a=[t,s,n,i],this._valueCache[e]=a,!0;let r=!1;return a[0]!==t&&(a[0]=t,r=!0),a[1]!==s&&(a[1]=s,r=!0),a[2]!==n&&(a[2]=n,r=!0),a[3]!==i&&(a[3]=i,r=!0),r}setInt(e,t){let s=this._valueCache[e];(void 0===s||s!==t)&&this.engine.setInt(this._uniforms[e],t)&&(this._valueCache[e]=t)}setInt2(e,t,s){this._cacheFloat2(e,t,s)&&!this.engine.setInt2(this._uniforms[e],t,s)&&(this._valueCache[e]=null)}setInt3(e,t,s,n){this._cacheFloat3(e,t,s,n)&&!this.engine.setInt3(this._uniforms[e],t,s,n)&&(this._valueCache[e]=null)}setInt4(e,t,s,n,i){this._cacheFloat4(e,t,s,n,i)&&!this.engine.setInt4(this._uniforms[e],t,s,n,i)&&(this._valueCache[e]=null)}setIntArray(e,t){this._valueCache[e]=null,this.engine.setIntArray(this._uniforms[e],t)}setIntArray2(e,t){this._valueCache[e]=null,this.engine.setIntArray2(this._uniforms[e],t)}setIntArray3(e,t){this._valueCache[e]=null,this.engine.setIntArray3(this._uniforms[e],t)}setIntArray4(e,t){this._valueCache[e]=null,this.engine.setIntArray4(this._uniforms[e],t)}setUInt(e,t){let s=this._valueCache[e];(void 0===s||s!==t)&&this.engine.setUInt(this._uniforms[e],t)&&(this._valueCache[e]=t)}setUInt2(e,t,s){this._cacheFloat2(e,t,s)&&!this.engine.setUInt2(this._uniforms[e],t,s)&&(this._valueCache[e]=null)}setUInt3(e,t,s,n){this._cacheFloat3(e,t,s,n)&&!this.engine.setUInt3(this._uniforms[e],t,s,n)&&(this._valueCache[e]=null)}setUInt4(e,t,s,n,i){this._cacheFloat4(e,t,s,n,i)&&!this.engine.setUInt4(this._uniforms[e],t,s,n,i)&&(this._valueCache[e]=null)}setUIntArray(e,t){this._valueCache[e]=null,this.engine.setUIntArray(this._uniforms[e],t)}setUIntArray2(e,t){this._valueCache[e]=null,this.engine.setUIntArray2(this._uniforms[e],t)}setUIntArray3(e,t){this._valueCache[e]=null,this.engine.setUIntArray3(this._uniforms[e],t)}setUIntArray4(e,t){this._valueCache[e]=null,this.engine.setUIntArray4(this._uniforms[e],t)}setArray(e,t){this._valueCache[e]=null,this.engine.setArray(this._uniforms[e],t)}setArray2(e,t){this._valueCache[e]=null,this.engine.setArray2(this._uniforms[e],t)}setArray3(e,t){this._valueCache[e]=null,this.engine.setArray3(this._uniforms[e],t)}setArray4(e,t){this._valueCache[e]=null,this.engine.setArray4(this._uniforms[e],t)}setMatrices(e,t){t&&(this._valueCache[e]=null,this.engine.setMatrices(this._uniforms[e],t))}setMatrix(e,t){this._cacheMatrix(e,t)&&!this.engine.setMatrices(this._uniforms[e],t.asArray())&&(this._valueCache[e]=null)}setMatrix3x3(e,t){this._valueCache[e]=null,this.engine.setMatrix3x3(this._uniforms[e],t)}setMatrix2x2(e,t){this._valueCache[e]=null,this.engine.setMatrix2x2(this._uniforms[e],t)}setFloat(e,t){let s=this._valueCache[e];(void 0===s||s!==t)&&this.engine.setFloat(this._uniforms[e],t)&&(this._valueCache[e]=t)}setVector2(e,t){this._cacheFloat2(e,t.x,t.y)&&!this.engine.setFloat2(this._uniforms[e],t.x,t.y)&&(this._valueCache[e]=null)}setFloat2(e,t,s){this._cacheFloat2(e,t,s)&&!this.engine.setFloat2(this._uniforms[e],t,s)&&(this._valueCache[e]=null)}setVector3(e,t){this._cacheFloat3(e,t.x,t.y,t.z)&&!this.engine.setFloat3(this._uniforms[e],t.x,t.y,t.z)&&(this._valueCache[e]=null)}setFloat3(e,t,s,n){this._cacheFloat3(e,t,s,n)&&!this.engine.setFloat3(this._uniforms[e],t,s,n)&&(this._valueCache[e]=null)}setVector4(e,t){this._cacheFloat4(e,t.x,t.y,t.z,t.w)&&!this.engine.setFloat4(this._uniforms[e],t.x,t.y,t.z,t.w)&&(this._valueCache[e]=null)}setQuaternion(e,t){this._cacheFloat4(e,t.x,t.y,t.z,t.w)&&!this.engine.setFloat4(this._uniforms[e],t.x,t.y,t.z,t.w)&&(this._valueCache[e]=null)}setFloat4(e,t,s,n,i){this._cacheFloat4(e,t,s,n,i)&&!this.engine.setFloat4(this._uniforms[e],t,s,n,i)&&(this._valueCache[e]=null)}setColor3(e,t){this._cacheFloat3(e,t.r,t.g,t.b)&&!this.engine.setFloat3(this._uniforms[e],t.r,t.g,t.b)&&(this._valueCache[e]=null)}setColor4(e,t,s){this._cacheFloat4(e,t.r,t.g,t.b,s)&&!this.engine.setFloat4(this._uniforms[e],t.r,t.g,t.b,s)&&(this._valueCache[e]=null)}setDirectColor4(e,t){this._cacheFloat4(e,t.r,t.g,t.b,t.a)&&!this.engine.setFloat4(this._uniforms[e],t.r,t.g,t.b,t.a)&&(this._valueCache[e]=null)}_getVertexShaderCode(){return this.vertexShader?this.engine._getShaderSource(this.vertexShader):null}_getFragmentShaderCode(){return this.fragmentShader?this.engine._getShaderSource(this.fragmentShader):null}}}}]);