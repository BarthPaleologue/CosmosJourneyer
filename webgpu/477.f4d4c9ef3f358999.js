"use strict";(globalThis.webpackChunkcosmos_journeyer=globalThis.webpackChunkcosmos_journeyer||[]).push([["477"],{11412:function(t,e,i){i.r(e),i.d(e,{FlowGraphDeterminantBlock:()=>c,FlowGraphInvertMatrixBlock:()=>h,FlowGraphMatrixComposeBlock:()=>d,FlowGraphMatrixDecomposeBlock:()=>x,FlowGraphMatrixMultiplicationBlock:()=>p,FlowGraphTransposeBlock:()=>u});var a=i(31700),s=i(82753),r=i(61834),o=i(46363),n=i(70661),l=i(16778);class u extends n.p{constructor(t){super((0,s._M)(t?.matrixType||"Matrix"),(0,s._M)(t?.matrixType||"Matrix"),t=>t.transpose?t.transpose():r.y3.Transpose(t),"FlowGraphTransposeBlock",t)}}(0,o.H7)("FlowGraphTransposeBlock",u);class c extends n.p{constructor(t){super((0,s._M)(t?.matrixType||"Matrix"),s.ab,t=>t.determinant(),"FlowGraphDeterminantBlock",t)}}(0,o.H7)("FlowGraphDeterminantBlock",c);class h extends n.p{constructor(t){super((0,s._M)(t?.matrixType||"Matrix"),(0,s._M)(t?.matrixType||"Matrix"),t=>t.inverse?t.inverse():r.y3.Invert(t),"FlowGraphInvertMatrixBlock",t)}}(0,o.H7)("FlowGraphInvertMatrixBlock",h);class p extends l.V{constructor(t){super((0,s._M)(t?.matrixType||"Matrix"),(0,s._M)(t?.matrixType||"Matrix"),(0,s._M)(t?.matrixType||"Matrix"),(t,e)=>e.multiply(t),"FlowGraphMatrixMultiplicationBlock",t)}}(0,o.H7)("FlowGraphMatrixMultiplicationBlock",p);class x extends a.A{constructor(t){super(t),this.input=this.registerDataInput("input",s.WT),this.position=this.registerDataOutput("position",s.FO),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",s.N3),this.scaling=this.registerDataOutput("scaling",s.FO),this.isValid=this.registerDataOutput("isValid",s.PE,!1)}_updateOutputs(t){let e=t._getExecutionVariable(this,"executionId",-1),i=t._getExecutionVariable(this,"cachedPosition",null),a=t._getExecutionVariable(this,"cachedRotation",null),s=t._getExecutionVariable(this,"cachedScaling",null);if(e===t.executionId&&i&&a&&s)this.position.setValue(i,t),this.rotationQuaternion.setValue(a,t),this.scaling.setValue(s,t);else{let e=this.input.getValue(t),o=i||new r.P,n=a||new r._f,l=s||new r.P,u=Math.round(1e4*e.m[3])/1e4,c=Math.round(1e4*e.m[7])/1e4,h=Math.round(1e4*e.m[11])/1e4,p=Math.round(1e4*e.m[15])/1e4;if(0!==u||0!==c||0!==h||1!==p){this.isValid.setValue(!1,t),this.position.setValue(r.P.Zero(),t),this.rotationQuaternion.setValue(r._f.Identity(),t),this.scaling.setValue(r.P.One(),t);return}let x=e.decompose(l,n,o);this.isValid.setValue(x,t),this.position.setValue(o,t),this.rotationQuaternion.setValue(n,t),this.scaling.setValue(l,t),t._setExecutionVariable(this,"cachedPosition",o),t._setExecutionVariable(this,"cachedRotation",n),t._setExecutionVariable(this,"cachedScaling",l),t._setExecutionVariable(this,"executionId",t.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,o.H7)("FlowGraphMatrixDecompose",x);class d extends a.A{constructor(t){super(t),this.position=this.registerDataInput("position",s.FO),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",s.N3),this.scaling=this.registerDataInput("scaling",s.FO),this.value=this.registerDataOutput("value",s.WT)}_updateOutputs(t){let e=t._getExecutionVariable(this,"executionId",-1),i=t._getExecutionVariable(this,"cachedMatrix",null);if(e===t.executionId&&i)this.value.setValue(i,t);else{let e=r.y3.Compose(this.scaling.getValue(t),this.rotationQuaternion.getValue(t),this.position.getValue(t));this.value.setValue(e,t),t._setExecutionVariable(this,"cachedMatrix",e),t._setExecutionVariable(this,"executionId",t.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,o.H7)("FlowGraphMatrixCompose",d)},16778:function(t,e,i){i.d(e,{V:()=>s});var a=i(73318);class s extends a.D{constructor(t,e,i,a,s,r){super(i,r),this._operation=a,this._className=s,this.a=this.registerDataInput("a",t),this.b=this.registerDataInput("b",e)}_doOperation(t){let e=this.a.getValue(t),i=this.b.getValue(t);return this._operation(e,i)}getClassName(){return this._className}}},70661:function(t,e,i){i.d(e,{p:()=>s});var a=i(73318);class s extends a.D{constructor(t,e,i,a,s){super(e,s),this._operation=i,this._className=a,this.a=this.registerDataInput("a",t)}_doOperation(t){return this._operation(this.a.getValue(t))}getClassName(){return this._className}}},73318:function(t,e,i){i.d(e,{D:()=>n});var a=i(31700),s=i(82753);let r="cachedOperationValue",o="cachedExecutionId";class n extends a.A{constructor(t,e){super(e),this.value=this.registerDataOutput("value",t),this.isValid=this.registerDataOutput("isValid",s.PE)}_updateOutputs(t){let e=t._getExecutionVariable(this,o,-1),i=t._getExecutionVariable(this,r,null);if(null!=i&&e===t.executionId)this.isValid.setValue(!0,t),this.value.setValue(i,t);else try{let e=this._doOperation(t);if(null==e)return void this.isValid.setValue(!1,t);t._setExecutionVariable(this,r,e),t._setExecutionVariable(this,o,t.executionId),this.value.setValue(e,t),this.isValid.setValue(!0,t)}catch(e){this.isValid.setValue(!1,t)}}}}}]);