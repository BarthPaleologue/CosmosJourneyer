
//  This file is part of Cosmos Journeyer
//
//  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
//
//  This program is free software: you can redistribute it and/or modify
//  it under the terms of the GNU Affero General Public License as published by
//  the Free Software Foundation, either version 3 of the License, or
//  (at your option) any later version.
//
//  This program is distributed in the hope that it will be useful,
//  but WITHOUT ANY WARRANTY; without even the implied warranty of
//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//  GNU Affero General Public License for more details.
//
//  You should have received a copy of the GNU Affero General Public License
//  along with this program.  If not, see <https://www.gnu.org/licenses/>.
        
(()=>{"use strict";var e,t,r,a,n,i,o={30190:(e,t,r)=>{r.d(t,{w:()=>n});var a=r(67290);const n={UNIVERSE_SEED:Math.PI,POWER_PLAY_SEED:77,EARTH_RADIUS:1e6,EARTH_MASS:5972e21,MOON_MASS:7348e19,JUPITER_MASS:1898e24,LIGHT_YEAR:946728e10,VERTEX_RESOLUTION:64,MIN_DISTANCE_BETWEEN_VERTICES:1.5,CLOUD_LAYER_HEIGHT:7e3,EARTH_ATMOSPHERE_THICKNESS:1e5,OCEAN_DEPTH:7e3,TIME_MULTIPLIER:1,CHUNK_RENDERING_DISTANCE_MULTIPLIER:2,ENABLE_VOLUMETRIC_CLOUDS:!1,SEED_HALF_RANGE:1e4,FLOATING_ORIGIN_THRESHOLD:500,HUMAN_BUBBLE_RADIUS_LY:100,PLAYER_JUMP_RANGE_LY:15,VISIBLE_NEIGHBORHOOD_MAX_RADIUS_LY:20,CREDIT_SYMBOL:"₽",STAR_SECTOR_SIZE:20,INDIVIDUAL_AVERAGE_DAILY_INTAKE:2250,HYDROPONIC_TO_CONVENTIONAL_RATIO:3.5,C:299792458,G:66743e-15,AU:15e10,CELSIUS_TO_KELVIN:273.15,BAR_TO_PASCAL:1e5,EARTH_SEA_LEVEL_PRESSURE:101325,SOLAR_MASS:1.989e30,SOLAR_RADIUS:69634e4,G_EARTH:9.81,FOV:a.S0.ToRadians(60),LANDING_PAD_ASPECT_RATIO:1.618,MAIN_FONT:"Nasalization",SAVES_KEY:"saves",MAX_AUTO_SAVES:5,SHARED_POSITION_SAVE_UUID:"sharedPositionSave",TUTORIAL_SAVE_UUID:"tutorialSave"}},94223:(e,t,r)=>{r.a(e,(async(e,t)=>{try{var a=r(36296),n=r(30190),i=e([a]);function o(e){const t=e.nbVerticesPerSide,r=t-1,i=new Float32Array(t*t*3),o=new Uint16Array(r*r*2*3),s=new Float32Array(i.length),c=e.planetDiameter/2**e.depth,f=c/r<n.w.MIN_DISTANCE_BETWEEN_VERTICES?16:0,_=c*c,d=Math.floor(_*f*2);let b=new Float32Array(16*d),p=new Float32Array(16*d);const E=new a.Rz;E.continent_base_height=e.terrainSettings.continent_base_height,E.continents_fragmentation=e.terrainSettings.continents_fragmentation,E.continents_frequency=e.terrainSettings.continents_frequency,E.max_mountain_height=e.terrainSettings.max_mountain_height,E.mountains_frequency=e.terrainSettings.mountains_frequency,E.bumps_frequency=e.terrainSettings.bumps_frequency,E.max_bump_height=e.terrainSettings.max_bump_height;const S=new a.$I(e.planetDiameter,e.depth,e.direction,e.position[0],e.position[1],e.position[2],e.seed,e.nbVerticesPerSide,E),u=(0,a.$d)(S,i,o,s,b,p,f);b=b.subarray(0,16*u.nb_instances_created),p=p.subarray(0,16*u.nb_instances_created),self.postMessage({positions:i,indices:o,normals:s,instancesMatrixBuffer:b,alignedInstancesMatrixBuffer:p,averageHeight:u.average_height},{transfer:[i.buffer,o.buffer,s.buffer,b.buffer,p.buffer]}),S.free()}a=(i.then?(await i)():i)[0],self.onmessage=e=>{o(e.data)},t()}catch(s){t(s)}}))}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={id:e,loaded:!1,exports:{}};return o[e](r,r.exports,c),r.loaded=!0,r.exports}c.m=o,c.x=()=>{var e=c.O(void 0,[371],(()=>c(94223)));return c.O(e)},e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},c.a=(n,i,o)=>{var s;o&&((s=[]).d=-1);var c,f,_,d=new Set,b=n.exports,p=new Promise(((e,t)=>{_=t,f=e}));p[t]=b,p[e]=e=>(s&&e(s),d.forEach(e),p.catch((e=>{}))),n.exports=p,i((n=>{var i;c=(n=>n.map((n=>{if(null!==n&&"object"==typeof n){if(n[e])return n;if(n.then){var i=[];i.d=0,n.then((e=>{o[t]=e,a(i)}),(e=>{o[r]=e,a(i)}));var o={};return o[e]=e=>e(i),o}}var s={};return s[e]=e=>{},s[t]=n,s})))(n);var o=()=>c.map((e=>{if(e[r])throw e[r];return e[t]})),f=new Promise((t=>{(i=()=>t(o)).r=0;var r=e=>e!==s&&!d.has(e)&&(d.add(e),e&&!e.d&&(i.r++,e.push(i)));c.map((t=>t[e](r)))}));return i.r?f:o()}),(e=>(e?_(p[r]=e):f(b),a(s)))),s&&s.d<0&&(s.d=0)},n=[],c.O=(e,t,r,a)=>{if(!t){var i=1/0;for(_=0;_<n.length;_++){for(var[t,r,a]=n[_],o=!0,s=0;s<t.length;s++)(!1&a||i>=a)&&Object.keys(c.O).every((e=>c.O[e](t[s])))?t.splice(s--,1):(o=!1,a<i&&(i=a));if(o){n.splice(_--,1);var f=r();void 0!==f&&(e=f)}}return e}a=a||0;for(var _=n.length;_>0&&n[_-1][2]>a;_--)n[_]=n[_-1];n[_]=[t,r,a]},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,r)=>(c.f[r](e,t),t)),[])),c.u=e=>e+"."+{1:"79d2b58e1884741425af",59:"4f5cfaf7ee978afea322",77:"2d97116743bb660f3dc6",132:"bf98b7f6076b692ca550",162:"437cc3cdccafcc6f9c1b",299:"83cdec81ed31d7f607f9",301:"d809f5d2174a812cd7be",306:"bc05486d7816bb3b61e2",332:"1be6fae35f4836ae9fdb",340:"bf7601c012c62e8e8daa",350:"a54055db07b37f9a038e",357:"2eb912bf5a3139cb6028",371:"4a015f07a58b89d06b12",442:"48c31c2d49e4cde146e2",509:"3f8be42b06eb835d7e1a",518:"26b5d85e618fd5af919a",577:"3f6b2ad79afc2d783e27",670:"20c313cee51c06e7fffb",676:"0661b6c02dd2c13a62f9",711:"2416a1e64056e13e9764",751:"90ede36fefbd59457780",772:"6e085ed17cb6a15c85d4",802:"408bdc6c1b91df438f47",807:"c0849d93daee45809e6d",896:"b7e4daf7997f8ae0245e",918:"35d75c287cc3ee0f1554",991:"ae000410aa9faf30ed1f"}[e]+".js",c.miniCssF=e=>{},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.v=(e,t,r,a)=>{var n=fetch(c.p+""+r+".module.wasm"),i=()=>n.then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,a))).then((t=>Object.assign(e,t.instance.exports)));return n.then((t=>"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(t,a).then((t=>Object.assign(e,t.instance.exports)),(e=>{if("application/wasm"!==t.headers.get("Content-Type"))return console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e),i();throw e})):i()))},(()=>{var e;c.g.importScripts&&(e=c.g.location+"");var t=c.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=r[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),c.p=e})(),(()=>{var e={223:1};c.f.i=(t,r)=>{e[t]||importScripts(c.p+c.u(t))};var t=self.webpackChunkcosmos_journeyer=self.webpackChunkcosmos_journeyer||[],r=t.push.bind(t);t.push=t=>{var[a,n,i]=t;for(var o in n)c.o(n,o)&&(c.m[o]=n[o]);for(i&&i(c);a.length;)e[a.pop()]=1;r(t)}})(),i=c.x,c.x=()=>c.e(371).then(i),c.x()})();