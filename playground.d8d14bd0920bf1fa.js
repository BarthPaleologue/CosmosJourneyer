/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

(()=>{"use strict";var e={14280:function(e,t,n){n.d(t,{Iu:()=>i,QB:()=>p,Sf:()=>u,Sl:()=>h,U1:()=>c,cs:()=>f,fx:()=>y,gM:()=>d,jw:()=>s,nA:()=>l,tW:()=>m});var r=n(84081),a=n(61834),o=n(42933);function i(e,t){e.setAbsolutePosition(e.getAbsolutePosition().add(t)),e.computeWorldMatrix(!0)}function c(e,t,n){e.rotate(t,n,r.T.WORLD)}function s(e){if(null===e.rotationQuaternion)throw Error("Null quaternion for ".concat(e.name));return e.rotationQuaternion}function u(e,t){e.rotationQuaternion=t,e.computeWorldMatrix(!0)}function l(e,t){if(!t.equalsWithEpsilon(e.up,1e-7)){var n=e.up;c(e,a.P.Cross(t,n),-Math.acos(a.P.Dot(t,n)))}}function f(e){return e.getDirection(o.F.FORWARD)}function d(e){return e.getDirection(o.F.UP)}function p(e){return b(e).negate()}function b(e){return e.getDirection(o.F.LEFT)}function h(e,t){c(e,f(e),t)}function m(e,t){c(e,b(e),t)}function y(e,t){c(e,d(e),t)}},18722:function(e,t,n){n.a(e,async function(e,t){try{n(15738),n(19295),n(85472);var r,a=n(69524),o=n(96775),i=n(80929),c=n(4281),s=document.getElementById("renderer");s.width=window.innerWidth,s.height=window.innerHeight;var u=new o.a(s),l=new a.Engine(s,!0);l.useReverseDepthBuffer=!0,l.loadingScreen=u,l.displayLoadingUI();var f=new URLSearchParams(window.location.search),d=null!=(r=f.get("scene"))?r:"",p=new c.j().get(d),b=new i.c;b.addProgressCallback(function(e,t){u.setProgress(e,t),u.loadingUIText="Loading ".concat(d," (").concat(t,"/").concat(e,")")}),b.startTask();var h=await p(l,b);if(window.scene=h,b.completeTask(),null!==f.get("debug")){var m=document.createElement("div");document.body.appendChild(m),m.id="inspectorLayer",await h.debugLayer.show({globalRoot:m})}if(null!==f.get("physicsViewer")){var y=new a.PhysicsViewer(h);h.onBeforeRenderObservable.add(function(){var e=!0,t=!1,n=void 0;try{for(var r,a=h.meshes[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value.physicsBody;o&&y.showBody(o)}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}})}var v=f.get("freeze"),g=Number(v);if(null!==v&&!isNaN(g)){var w=0;h.onAfterRenderObservable.add(function(){if(++w>=g){l.stopRenderLoop(),s.dataset.frozen="1";return}})}h.onAfterRenderObservable.addOnce(function(){s.dataset.ready="1"}),h.executeWhenReady(function(){l.loadingScreen.hideLoadingUI(),l.runRenderLoop(function(){h.render()})}),window.addEventListener("resize",function(){s.width=window.innerWidth,s.height=window.innerHeight,l.resize(!0)}),document.addEventListener("keypress",function(e){"p"===e.key&&null!==h.activeCamera&&a.Tools.CreateScreenshot(l,h.activeCamera,{precision:1})}),window.scene=h,t()}catch(e){t(e)}},1)},24660:function(e,t,n){n.d(t,{pl:()=>a}),n(16891);var r=n(61834);function a(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=function(e,t){var n=-1,r=t[0];if(void 0===r)throw Error("no bodieees !");var a=!0,o=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value,l=e.subtract(u.getTransform().getAbsolutePosition()).length();(-1===n||l<n)&&(r=u,n=l)}}catch(e){o=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return r}(t.getTransform().getAbsolutePosition(),n.getStellarObjects());if(o===t)e.getTransform().setAbsolutePosition(t.getTransform().getAbsolutePosition().add(new r.P(0,.2,1).scaleInPlace(t.getBoundingRadius()*a)));else{var i=t.getTransform().getAbsolutePosition().subtract(o.getTransform().getAbsolutePosition()),c=i.length();i.scaleInPlace(1/c);var s=o.getTransform().getAbsolutePosition().add(i.scale(c-a*t.getBoundingRadius()));e.getTransform().setAbsolutePosition(s)}n.translateEverythingNow(e.getTransform().getAbsolutePosition().negate()),e.getTransform().setAbsolutePosition(r.P.Zero()),e.getTransform().lookAt(t.getTransform().getAbsolutePosition())}n(14280)},33219:function(e,t,n){n.d(t,{XP:()=>i,b7:()=>o,bY:()=>c});var r=n(96509),a=n(48353);function o(e){return Math.pow(e/r.ah,.78)*r.uR}function i(e,t){return 2*Math.PI*Math.sqrt(e/t)}function c(e,t,n){var r,o=(r=(0,a.P1)(100),e<=0?0:1/(1/r+2044761436301033e-19*Math.log(101325/e))),i=(0,a.P1)(0);return!(e<.05)&&!(o<i)&&!(t>o)&&!(n<i)}},4281:function(e,t,n){n.d(t,{j:()=>nn});var r=n(69524),a=n(57947),o=n(55104),i=n(77054);function c(e,t){var n,c=new r.Scene(e);c.useRightHandedSystem=!0;var s=new URLSearchParams(window.location.search),u=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,30,r.Vector3.Zero(),c);u.attachControl(),u.lowerRadiusLimit=.5,u.wheelPrecision*=100,u.minZ=.01;var l=c.enableDepthRenderer(null,!1,!0),f=(0,a.c)("juliaSet",Number(null!=(n=s.get("seed"))?n:1e5*Math.random()),"Julia Set",[]),d=new i.W(f,c);d.getTransform().scalingDeterminant=1e-5;var p=new o.v(d.getTransform(),d.getBoundingRadius(),f.accentColor,c,[]);return c.cameras.forEach(function(e){return e.attachPostProcess(p)}),c.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(p)}),c.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p.update(t)}),c.onBeforeCameraRenderObservable.add(function(e){l.getDepthMap().activeCamera=e}),Promise.resolve(c)}var s=n(25178),u=n(20678);function l(e,t){var n,a=new r.Scene(e);a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),c=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5,r.Vector3.Zero(),a);c.attachControl(),c.lowerRadiusLimit=.5,c.wheelPrecision*=100,c.minZ=.01;var l=a.enableDepthRenderer(null,!1,!0),f=(0,s.i)("mandelbox",Number(null!=(n=o.get("seed"))?n:1e5*Math.random()),"Mandelbox",[]),d=new i.W(f,a);d.getTransform().scalingDeterminant=1e-5;var p=new u.m(d.getTransform(),d.getBoundingRadius(),f,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(p)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(p)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){l.getDepthMap().activeCamera=e}),Promise.resolve(a)}var f=n(76106),d=n(75122);function p(e,t){var n,a=new r.Scene(e);a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),c=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,30,r.Vector3.Zero(),a);c.attachControl(),c.lowerRadiusLimit=.5,c.wheelPrecision*=100,c.minZ=.01;var s=a.enableDepthRenderer(null,!1,!0),u=(0,f.i)("mandelbulb",Number(null!=(n=o.get("seed"))?n:1e5*Math.random()),"Mandelbulb",[]),l=new i.W(u,a);l.getTransform().scalingDeterminant=1e-5;var p=new d.C(l.getTransform(),l.getBoundingRadius(),u,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(p)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(p)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){s.getDepthMap().activeCamera=e}),Promise.resolve(a)}var b=n(97343),h=n(59209);function m(e,t){var n,a=new r.Scene(e);a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),c=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5,r.Vector3.Zero(),a);c.attachControl(),c.lowerRadiusLimit=.5,c.wheelPrecision*=100,c.minZ=.01;var s=a.enableDepthRenderer(null,!1,!0),u=(0,b.$)("mengerSponge",Number(null!=(n=o.get("seed"))?n:1e5*Math.random()),"Menger Sponge",[]),l=new i.W(u,a);l.getTransform().scalingDeterminant=1e-5;var f=new h.x(l.getTransform(),l.getBoundingRadius(),u,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(f)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(f)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;f.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){s.getDepthMap().activeCamera=e}),Promise.resolve(a)}var y=n(51056),v=n(48757);function g(e,t){var n,a=new r.Scene(e);a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),c=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5,r.Vector3.Zero(),a);c.attachControl(),c.lowerRadiusLimit=.5,c.wheelPrecision*=100,c.minZ=.01;var s=a.enableDepthRenderer(null,!1,!0),u=(0,y.q)("sierpinski",Number(null!=(n=o.get("seed"))?n:1e5*Math.random()),"Sierpinski Pyramid",[]),l=new i.W(u,a);l.getTransform().scalingDeterminant=1e-5;var f=new v.U(l.getTransform(),l.getBoundingRadius(),u,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(f)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(f)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;f.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){s.getDepthMap().activeCamera=e}),Promise.resolve(a)}var w=n(70621),P=n(98201),T=n(93019),R=n(82866);n(10425);var S=n(61834),A=n(24919),x=n(72392);function E(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function C(e,t){var n;return(n=function(e){var t,n,r,a,o,i,c=arguments;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:if(t=c.length>1&&void 0!==c[1]?c[1]:S.P.Zero(),n=c.length>2?c[2]:void 0,a=A.a.bind,o=[void 0,!0],null==n)return[3,1];return i=n,[3,3];case 1:return[4,(0,x.Z)()];case 2:i=s.sent(),s.label=3;case 3:return r=new(a.apply(A.a,o.concat([i]))),e.enablePhysics(t,r),[2,r]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){E(o,r,a,i,c,"next",e)}function c(e){E(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}function I(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function O(e,t){var n;return(n=function(){var n,a,o,i,c,s,u;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(l){switch(l.label){case 0:return(n=new r.Scene(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return l.sent(),(o=(a=new P.Q(n)).getActiveCamera()).attachControl(),n.enableDepthRenderer(o,!1,!0),[4,(0,w.Pr)(n,t)];case 2:return i=l.sent(),new r.DirectionalLight("sun",new r.Vector3(1,-1,0),n).intensity=.7,new r.HemisphericLight("hemi",r.Vector3.Up(),n).intensity=.4,a.getTransform().position.z=-75e3,a.getTransform().position.y=1500,a.speed*=500,o.maxZ*=500,c=r.MeshBuilder.CreateSphere("sphere",{diameter:1e4},n),new r.PhysicsAggregate(c,r.PhysicsShapeType.SPHERE,{mass:0},n),R.c.BATCH_SIZE=1e4,s=new T.K(42,c,6e4,127500,n),(u=r.MeshBuilder.CreateTorus("torus",{diameter:17e4,thickness:1e5,tessellation:32},n)).visibility=.1,u.parent=c,u.scaling.y=2e-4,n.onBeforeRenderObservable.add(function(){a.update(e.getDeltaTime()/1e3),s.update(a.getTransform().getAbsolutePosition(),i,e.getDeltaTime()/1e3)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){I(o,r,a,i,c,"next",e)}function c(e){I(o,r,a,i,c,"throw",e)}i(void 0)})})()}var k=n(76468),_=n(6999),D=n(30017);function L(e,t){var n=new k.x(e);n.useRightHandedSystem=!0;var a=new P.Q(n),o=a.getActiveCamera();a.speed=6e6,o.maxZ*=6e6,a.getTransform().setAbsolutePosition(new r.Vector3(0,1,-2).scaleInPlace(6e6)),a.getTransform().lookAt(r.Vector3.Zero()),o.attachControl(),n.enableDepthRenderer(null,!1,!0);var i=new r.PointLight("light1",new r.Vector3(6e7,0,0),n),c=r.MeshBuilder.CreateSphere("sphere",{diameter:12e6,segments:64},n),s=new _.r(6e6,1e5),u=new D.C(c,6e6,s,[i],n);return o.attachPostProcess(u),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;a.update(e);var t=a.getTransform().position.clone();a.getTransform().position=r.Vector3.Zero(),c.position.subtractInPlace(t)}),Promise.resolve(n)}var M=n(88113),j=n(78626),N=n(84787),B=n(95959),V=n(54755),U=n(71631),Z=n(43161),G=n(76473);function H(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function W(e,t){var n;return(n=function(){var n,a,o,i,c,s,u,l;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(f){switch(f.label){case 0:return(n=new k.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return f.sent(),[4,(0,B.v)(n,t)];case 2:return a=f.sent(),o=new V.cV,(i=U.O.CreateDefault(n,a,o)).getTransform().position.copyFromFloats((0,j.randRange)(-50,50,Math.random,0),(0,j.randRange)(30,50,Math.random,0),(0,j.randRange)(-50,50,Math.random,0)),i.getTransform().rotationQuaternion=r.Quaternion.Random().normalize(),(c=new P.Q(n)).getTransform().position.copyFromFloats(0,10,-50),c.speed*=10,(s=c.getActiveCamera()).minZ=.1,s.attachControl(),new N.X(42,Z.g.SMALL,a,n),(u=r.MeshBuilder.CreateBox("ground",{width:100,height:1,depth:100},n)).position.y=-2,u.position.x=75,(l=new r.PhysicsAggregate(u,r.PhysicsShapeType.BOX,{mass:0},n)).shape.filterMembershipMask=G.k.ENVIRONMENT,l.shape.filterCollideMask=G.k.DYNAMIC_OBJECTS,new M.e("hemi",S.P.Up(),n).intensity=.7,i.engageSurfaceLanding(u),n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;i.update(t),c.update(t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){H(o,r,a,i,c,"next",e)}function c(e){H(o,r,a,i,c,"throw",e)}i(void 0)})})()}var F=n(57845),q=n(78681),z=n(52653);function Y(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function Q(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Y(o,r,a,i,c,"next",e)}function c(e){Y(o,r,a,i,c,"throw",e)}i(void 0)})}}function X(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function K(e,t){return Q(function(){var n,a,o,i,c,s,u,l,f;return X(this,function(d){switch(d.label){case 0:return(a=new k.x(e)).useRightHandedSystem=!0,[4,C(a,new S.P(0,-9.81,0))];case 1:return d.sent(),null==(n=e.getRenderingCanvas())||n.addEventListener("click",function(){return Q(function(){var t;return X(this,function(n){switch(n.label){case 0:return[4,null==(t=e.getRenderingCanvas())?void 0:t.requestPointerLock()];case 1:return n.sent(),[2]}})})()}),[4,(0,F.l)(a,t)];case 2:var p,b;if(o=d.sent(),(i=new r.DirectionalLight("dir01",new S.P(1,-2,-1),a)).position=new S.P(5,5,5).scaleInPlace(10),new r.HemisphericLight("hemi",new S.P(0,1,0),a).intensity=.5,(c=new r.ShadowGenerator(1024,i)).useBlurExponentialShadowMap=!0,p=s=o.default.instantiateHierarchy(null),null!=(b=r.AbstractMesh)&&"undefined"!=typeof Symbol&&b[Symbol.hasInstance]?!b[Symbol.hasInstance](p):!(p instanceof b))throw Error("Character object is null");return(u=new q.J(s,a)).getTransform().position.y=40,null!==new URLSearchParams(window.location.search).get("thirdPerson")&&u.setThirdPersonCameraActive(),u.getActiveCamera().attachControl(),z.V.setEnabled(!0),c.addShadowCaster(u.character),l=r.MeshBuilder.CreateIcoSphere("ground",{radius:40},a),new r.PhysicsAggregate(l,r.PhysicsShapeType.MESH,{mass:0},a),(f=new r.PBRMetallicRoughnessMaterial("groundMaterial",a)).baseColor=new r.Color3(.5,.5,.5),l.material=f,l.receiveShadows=!0,u.setClosestWalkableObject({getTransform:function(){return l}}),a.onBeforeRenderObservable.add(function(){if(u.getActiveCamera()!==a.activeCamera){null==(t=a.activeCamera)||t.detachControl();var t,n=u.getActiveCamera();n.attachControl(),a.activeCamera=n}var r=e.getDeltaTime()/1e3;u.update(r)}),[2,a]}})})()}var $=n(50137),J=n(72115),ee=n(14373);function et(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function en(e,t){var n;return(n=function(){var n,a,o,i,c,s;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(u){switch(u.label){case 0:return(n=new r.Scene(e)).useRightHandedSystem=!0,[4,(0,J.j)(n,t)];case 1:return a=u.sent(),n.environmentTexture=a.environment.milkyWay,(i=(o=new P.Q(n)).getActiveCamera()).attachControl(),n.enableDepthRenderer(),new r.HemisphericLight("light1",new r.Vector3(0,1,0),n).intensity=.7,o.speed=s=(c=new ee.c((0,$.C)([]),n)).getBoundingRadius(),i.maxZ*=s,o.getTransform().setAbsolutePosition(new r.Vector3(0,1,-2).scaleInPlace(s)),o.getTransform().lookAt(r.Vector3.Zero()),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e);var t=o.getTransform().position.clone();o.getTransform().position=r.Vector3.Zero(),c.getTransform().position.subtractInPlace(t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){et(o,r,a,i,c,"next",e)}function c(e){et(o,r,a,i,c,"throw",e)}i(void 0)})})()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ea(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function eo(e,t){var n;return(n=function(){var n,a,o,i,c,s,u,l,f,d,p,b,h,m,y,v,g,w,P,T,R,A,x,E,I;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(O){switch(O.label){case 0:return(n=new k.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return O.sent(),[4,(0,B.v)(n,t)];case 2:O.sent(),(a=new r.FreeCamera("camera",new S.P(0,1,-1).scale(15),n)).setTarget(S.P.Zero()),a.attachControl(),new r.PointLight("light",new S.P(0,100,-10),n),new M.e("hemisphericLight",new S.P(0,1,0),n).intensity=.5,o=0,i=!0,c=!1,s=void 0;try{for(u=n.meshes[Symbol.iterator]();!(i=(l=u.next()).done);i=!0)(f=l.value).isVisible=!0,null===f.parent&&(o++,d=f.getHierarchyBoundingVectors(),p=Math.max(d.max.x-d.min.x,d.max.y-d.min.y,d.max.z-d.min.z),f.scaling.scaleInPlace(1/p),f.position=new S.P(10+o%10-5,0,Math.floor(o/10)-5))}catch(e){c=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(c)throw s}}b=n.transformNodes.slice(),h=!0,m=!1,y=void 0;try{for(v=b[Symbol.iterator]();!(h=(g=v.next()).done);h=!0)g.value.instantiateHierarchy()}catch(e){m=!0,y=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw y}}w=!0,P=!1,T=void 0;try{for(R=n.textures.entries()[Symbol.iterator]();!(w=(A=R.next()).done);w=!0){var _;_=A.value,E=(x=function(e){if(Array.isArray(e))return e}(_)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}}(_,2)||function(e,t){if(e){if("string"==typeof e)return er(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(e,t)}}(_,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],I=x[1],function(e,t){var a=r.MeshBuilder.CreateGround("plane",{width:.9,height:.9},n),o=new r.StandardMaterial("material",n);o.emissiveTexture=e,o.disableLighting=!0,o.specularColor.scaleInPlace(0),a.position=t,a.material=o}(I,new S.P(E%10-5,0,Math.floor(E/10)-5))}}catch(e){P=!0,T=e}finally{try{w||null==R.return||R.return()}finally{if(P)throw T}}return[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){ea(o,r,a,i,c,"next",e)}function c(e){ea(o,r,a,i,c,"throw",e)}i(void 0)})})()}function ei(e,t){var n=new k.x(e),a=new r.FreeCamera("camera1",new r.Vector3(0,5,-10),n);return a.setTarget(r.Vector3.Zero()),a.attachControl(),new r.HemisphericLight("light1",new r.Vector3(0,1,0),n).intensity=.7,r.MeshBuilder.CreateSphere("sphere",{diameter:2,segments:32},n).position.y=1,r.MeshBuilder.CreateGround("ground",{width:6,height:6},n),Promise.resolve(n)}var ec=n(4761),es=n(60480),eu=n(11508);function el(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function ef(e,t){var n;return(n=function(){var n,a,o,i,c,s,u,l,f,d,p;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(b){switch(b.label){case 0:return(n=new k.x(e)).useRightHandedSystem=!0,n.defaultCursor="crosshair",[4,C(n)];case 1:return b.sent(),[4,(0,B.v)(n,t)];case 2:return a=b.sent(),o=new V.cV,i=new ec.jH,(s=(c=es.y.CreateDefault(n,a,i,o)).getActiveCamera()).minZ=.1,s.attachControl(),n.activeCamera=s,eu.m.setEnabled(!0),new M.e("hemi",S.P.Up(),n).intensity=1,u=r.MeshBuilder.CreateBox("box",{size:50},n),l=new r.SolidParticleSystem("boxes",n,{updatable:!1}),f=function(e,t){return Math.random()*(t-e)+e},l.addShape(u,1e4,{positionFunction:function(e){e.position=new S.P(f(-1,1),f(-1,1),f(-1,1)).scaleInPlace(5e3)}}),d=l.buildMesh(),(p=new r.PBRMetallicRoughnessMaterial("material",n)).baseColor=new r.Color3(.5,.5,.5),p.metallic=0,p.roughness=.5,d.material=p,u.setEnabled(!1),n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;c.update(t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){el(o,r,a,i,c,"next",e)}function c(e){el(o,r,a,i,c,"throw",e)}i(void 0)})})()}var ed=n(69151),ep=n(54944),eb=n(25254),eh=n(52209),em=n(50312),ey=n(84490);function ev(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function eg(e,t){var n;return(n=function(){var n,a,o,i,c,s,u,l,f,d,p,b,h;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(m){switch(m.label){case 0:return(n=new r.Scene(e)).useRightHandedSystem=!0,n.clearColor.setAll(0),[4,(0,J.j)(n,t)];case 1:return a=m.sent(),[4,C(n)];case 2:if(m.sent(),o=10*G.Z.EARTH_RADIUS,c=(i=new P.Q(n)).getActiveCamera(),i.speed=o,c.maxZ*=o,i.getTransform().setAbsolutePosition(new r.Vector3(0,1,-2).scaleInPlace(o)),i.getTransform().lookAt(r.Vector3.Zero()),c.attachControl(),n.enableDepthRenderer(null,!1,!0),s=new r.PointLight("light1",new r.Vector3(7,5,-10).scaleInPlace(o),n),u=new URLSearchParams(window.location.search).get("seed"),l=(0,ed.L)("gasPlanet",null!==u?Number(u):1e3*Math.random(),"Gas Planet",[]),f=new ey._(function(){return new eb.h(n)}),d=new em.v(l,a,f,n),p=new eh.A(d.getTransform(),d.getBoundingRadius(),d.ringsUniforms,null,!1,[{getBoundingRadius:function(){return 0},getLight:function(){return s}}],n),c.attachPostProcess(p),b=new D.C(d.getTransform(),d.getBoundingRadius(),d.atmosphereUniforms,[s],n),c.attachPostProcess(b),!d.ringsUniforms)return[3,4];return h=new ep.e(d.getTransform(),d.ringsUniforms,l,[s],n),c.attachPostProcess(h),[4,new Promise(function(e){var t;(null==(t=d.ringsUniforms)?void 0:t.patternLut.type)==="procedural"&&d.ringsUniforms.patternLut.lut.getTexture().executeWhenReady(function(){e()})})];case 3:m.sent(),m.label=4;case 4:return n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;i.update(e),d.updateMaterial([s],e);var t=i.getTransform().position.clone();i.getTransform().position=r.Vector3.Zero(),d.getTransform().position.subtractInPlace(t),s.position.subtractInPlace(t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){ev(o,r,a,i,c,"next",e)}function c(e){ev(o,r,a,i,c,"throw",e)}i(void 0)})})()}var ew=n(54812),eP=n(49323),eT=n(32557),eR=n(91010),eS=n(96112);function eA(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function ex(e,t){var n;return(n=function(){var n,a,o,i,c,s,u,l,f,d;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(p){switch(p.label){case 0:return n=new k.x(e),[4,(0,J.j)(n,t)];case 1:return a=p.sent(),(o=new r.FreeCamera("camera1",new r.Vector3(0,5,-10),n)).setTarget(r.Vector3.Zero()),o.attachControl(),i=new r.PointLight("light1",new r.Vector3(200,800,100),n),r.MeshBuilder.CreateSphere("lightSphere",{diameter:.1,segments:8},n).position=i.position,(c=r.MeshBuilder.CreateGround("ground",{width:32,height:32,subdivisions:4},n)).setEnabled(!1),(s=(0,eP.f)(n,5)).isVisible=!1,(u=new eT.B(n,a.noises,!1)).setPlanet(c),s.material=u,l=(0,ew.seededSquirrelNoise)(0),f=0,d=function(){return l(f++)},new eS.N((0,eR.ZX)(r.Vector3.Zero(),32,256,d)).createInstances([{mesh:s,distance:0}]),n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;u.update([i],new r.Vector3(0,10,0),t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){eA(o,r,a,i,c,"next",e)}function c(e){eA(o,r,a,i,c,"throw",e)}i(void 0)})})()}var eE=n(94518),eC=n(84081),eI=n(97451);function eO(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function ek(e,t){var n;return(n=function(){var n,r,a,o,i;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(c){switch(c.label){case 0:return(n=new k.x(e)).useRightHandedSystem=!0,(a=(r=new P.Q(n)).getActiveCamera()).attachControl(),n.enableDepthRenderer(a,!1,!0),[4,(0,J.j)(n,t)];case 1:return o=c.sent(),new eE.O("sun",new S.P(1,-1,0),n).intensity=.7,i=new eI.$(eC.RD.Z,n,o.noises),n.onBeforeRenderObservable.add(function(){r.update(e.getDeltaTime()/1e3),i.update(e.getDeltaTime()/1e3)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){eO(o,r,a,i,c,"next",e)}function c(e){eO(o,r,a,i,c,"throw",e)}i(void 0)})})()}var e_=n(64832),eD=n(70541),eL=n(31872),eM=n(39745),ej=n(57420);function eN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eB=function(){var e;function t(e,n){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");eN(this,"_transform",void 0),eN(this,"model",void 0),eN(this,"type",void 0),eN(this,"boundingRadius",void 0),this._transform=e,this._transform.rotationQuaternion=S._f.Identity(),this.model=n,this.type=n.type;var r=this.getTransform().getHierarchyBoundingVectors();this.boundingRadius=r.max.subtract(r.min).length()/2}return e=[{key:"getTransform",value:function(){return this._transform}},{key:"getBoundingRadius",value:function(){return this.boundingRadius}},{key:"getTypeName",value:function(){return"Wrapped Orbital Object"}},{key:"dispose",value:function(){this.getTransform().dispose()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}(),eV=n(53020),eU=n(82090);function eZ(e,t){var n=new k.x(e);n.useRightHandedSystem=!0;var r=new P.Q(n),a=r.getActiveCamera();a.minZ=.1,a.attachControl(),new M.e("hemi",S.P.Up(),n).intensity=1;var o=new eB(e_.V.CreateSphere("sun",{diameter:1},n),{id:"sun",name:"Sun",orbit:{parentIds:[],argumentOfPeriapsis:0,semiMajorAxis:0,initialMeanAnomaly:0,longitudeOfAscendingNode:0,inclination:0,eccentricity:0,p:2},type:eL.o.CUSTOM,axialTilt:0,mass:1e12,siderealDaySeconds:0}),i=new eB(e_.V.CreateSphere("earth",{diameter:.5},n),{id:"earth",name:"Earth",orbit:{parentIds:[o.model.id],argumentOfPeriapsis:0,semiMajorAxis:10,initialMeanAnomaly:0,longitudeOfAscendingNode:1.7,inclination:eD.w1.ToRadians(23.5),eccentricity:.5,p:2},type:eL.o.CUSTOM,axialTilt:eD.w1.ToRadians(23.5),mass:1e11,siderealDaySeconds:0}),c=new eB(e_.V.CreateSphere("moon",{diameter:.2},n),{id:"moon",name:"Moon",orbit:{parentIds:[i.model.id],argumentOfPeriapsis:0,semiMajorAxis:3,initialMeanAnomaly:0,longitudeOfAscendingNode:0,inclination:i.model.orbit.inclination+i.model.axialTilt,eccentricity:.7,p:2},type:eL.o.CUSTOM,mass:1e10,axialTilt:0,siderealDaySeconds:0}),s=[o,i,c],u=new Map;u.set(i,[o]),u.set(c,[i]);var l=new eU.B(eV.Z);l.setOrbitalObjects(s,n),l.setVisibility(!0);var f=new ej.Y(eV.Z);f.setVisibility(!0),f.setOrbitalObjects(s,n);var d=S.y3.Identity(),p=S.y3.Identity(),b=0;return r.getTransform().setAbsolutePosition(new S.P(0,0,-10)),r.getTransform().lookAt(S.P.Zero()),n.onBeforeRenderObservable.add(function(){var t,n,a=e.getDeltaTime()/1e3;b+=a,r.update(a),S.y3.FromQuaternionToRef(null!=(n=null==(t=r.getTransform().rotationQuaternion)?void 0:t.clone().invertInPlace())?n:S._f.Identity(),p),r.getTransform().rotationQuaternion=S._f.Identity(),r.getTransform().computeWorldMatrix(!0),d.multiplyToRef(p,d),s.forEach(function(e){var t;(0,eM.PF)(e,null!=(t=u.get(e))?t:[],d,b),(0,eM.L$)(e,d,b)}),l.update(d)}),Promise.resolve(n)}var eG=n(21132);function eH(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function eW(e,t){var n;return(n=function(){var t,n,a,o,i,c,s,u,l,f;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(t=new k.x(e)).useRightHandedSystem=!0,t.clearColor.set(0,0,0,1),n=1e7,o=(a=new P.Q(t)).getActiveCamera(),a.speed=n,o.maxZ*=n,a.getTransform().setAbsolutePosition(new r.Vector3(0,5,-10).scaleInPlace(n)),a.getTransform().lookAt(r.Vector3.Zero()),o.attachControl(),t.enableDepthRenderer(),(i=new r.PointLight("light1",new r.Vector3(-1,.5,-2).scaleInPlace(10*n),t)).intensity=.7,c=r.MeshBuilder.CreateSphere("sphere",{diameter:2*n,segments:32},t),s=new ey._(function(){return new eb.h(t)}),u={innerRadius:1.7*n,outerRadius:3.5*n,type:"procedural",seed:0,frequency:10,albedo:{r:120/255,g:112/255,b:104/255}},l=eG.fv.NewProcedural(u,s,0,t),[4,new Promise(function(e){"procedural"===l.patternLut.type&&l.patternLut.lut.getTexture().executeWhenReady(function(){e()})})];case 1:return d.sent(),f=new ep.e(c,l,{name:"Sphere",radius:+n},[i],t),o.attachPostProcess(f),t.onBeforeRenderObservable.add(function(){var e=t.getEngine().getDeltaTime()/1e3;a.update(e);var n=a.getTransform().position.clone();a.getTransform().position=r.Vector3.Zero(),c.position.subtractInPlace(n),i.position.subtractInPlace(n)}),[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){eH(o,r,a,i,c,"next",e)}function c(e){eH(o,r,a,i,c,"throw",e)}i(void 0)})})()}var eF=n(48464),eq=n(37032),ez=n(76103),eY=n(92099),eQ=n(68215),eX=n(59265),eK=n(32075);function e$(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function eJ(e,t){var n;return(n=function(){var t,n,a,o,i;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(c){switch(c.label){case 0:return t=new k.x(e),new r.FreeCamera("camera",r.Vector3.Zero(),t).attachControl(),[4,(0,eK.L)()];case 1:return c.sent(),n=new eY.Z((0,ez.D)()),a=new V.cV,(o=new eX.W(n,a)).htmlRoot.style.position="absolute",document.body.appendChild(o.htmlRoot),[4,eF.p.CreateAsync(new eq.u(eq.u.SAVES_KEY),new eq.u(eq.u.BACKUP_SAVE_KEY),n)];case 2:if((i=c.sent()).success)return[3,4];return[4,(0,eQ.UX)("Could not load saves",a)];case 3:case 5:return c.sent(),[2,t];case 4:return[4,o.populateCmdrList(n,i.value)]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){e$(o,r,a,i,c,"next",e)}function c(e){e$(o,r,a,i,c,"throw",e)}i(void 0)})})()}var e0=n(96509);function e1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function e2(e){return{id:"jupiter",name:"Jupiter",type:eL.o.GAS_PLANET,radius:69911e3,mass:1898e24,axialTilt:eD.w1.ToRadians(3.13),siderealDaySeconds:35730,orbit:{parentIds:function(e){if(Array.isArray(e))return e1(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return e1(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e1(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),semiMajorAxis:7785472e5,eccentricity:.0934,inclination:eD.w1.ToRadians(1.85),longitudeOfAscendingNode:eD.w1.ToRadians(49.558),argumentOfPeriapsis:eD.w1.ToRadians(286.502),initialMeanAnomaly:0,p:2},atmosphere:{pressure:e0.z2,greenHouseEffectFactor:.7},colorPalette:{type:"textured",textureId:"jupiter"},rings:null,seed:0}}function e3(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function e5(e,t){var n;return(n=function(){var n,a,o,i,c,s,u,l,f;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(n=new r.Scene(e)).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),[4,(0,J.j)(n,t)];case 1:return a=d.sent(),[4,C(n)];case 2:return d.sent(),i=(o=new P.Q(n)).getActiveCamera(),o.speed=66e6,i.maxZ*=66e6,o.getTransform().setAbsolutePosition(new r.Vector3(0,1,-2).scaleInPlace(66e6)),o.getTransform().lookAt(r.Vector3.Zero()),i.attachControl(),n.enableDepthRenderer(null,!1,!0),(c=new r.PointLight("light1",new r.Vector3(7,5,-10).scaleInPlace(66e6),n)).falloffType=r.Light.FALLOFF_STANDARD,G.Z.EARTH_RADIUS=6371e3,s=e2([]),u=new ey._(function(){return new eb.h(n)}),l=new em.v(s,a,u,n),f=new D.C(l.getTransform(),l.getBoundingRadius(),l.atmosphereUniforms,[c],n),i.attachPostProcess(f),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e),l.getTransform().rotate(r.Axis.Y,.1*e),l.updateMaterial([c],e);var t=o.getTransform().position.clone();o.getTransform().position=r.Vector3.Zero(),l.getTransform().position.subtractInPlace(t),c.position.subtractInPlace(t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){e3(o,r,a,i,c,"next",e)}function c(e){e3(o,r,a,i,c,"throw",e)}i(void 0)})})()}function e4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function e6(e){return{id:"saturn",name:"Saturn",type:eL.o.GAS_PLANET,radius:58232e3,mass:5683e23,axialTilt:eD.w1.ToRadians(26.73),siderealDaySeconds:38361.6,orbit:{parentIds:function(e){if(Array.isArray(e))return e4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return e4(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e4(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),semiMajorAxis:143344937e4,eccentricity:.0565,inclination:eD.w1.ToRadians(2.49),longitudeOfAscendingNode:eD.w1.ToRadians(113.715),argumentOfPeriapsis:eD.w1.ToRadians(336.092),initialMeanAnomaly:0,p:2},atmosphere:{pressure:e0.z2,greenHouseEffectFactor:.5},colorPalette:{type:"textured",textureId:"saturn"},rings:{innerRadius:74658e3,outerRadius:136775e3,type:"textured",textureId:"saturn"},seed:0}}function e7(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function e9(e,t){var n;return(n=function(){var n,a,o,i,c,s,u,l,f,d,p,b,h;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(m){switch(m.label){case 0:return(n=new r.Scene(e)).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),[4,C(n)];case 1:return m.sent(),[4,(0,B.v)(n,t)];case 2:return a=m.sent(),i=(o=new P.Q(n)).getActiveCamera(),o.speed=96e6,i.maxZ*=96e6,o.getTransform().setAbsolutePosition(new r.Vector3(0,2,-2).scaleInPlace(96e6)),o.getTransform().lookAt(r.Vector3.Zero()),i.attachControl(),n.enableDepthRenderer(null,!1,!0),(c=new r.TransformNode("sun",n)).position=new r.Vector3(7,5.5,-10).scaleInPlace(96e6),(s=new r.PointLight("light1",r.Vector3.Zero(),n)).falloffType=r.Light.FALLOFF_STANDARD,s.parent=c,G.Z.EARTH_RADIUS=6371e3,u=e6([]),l=new ey._(function(){return new eb.h(n)}),f=new em.v(u,a.textures,l,n),d=null,null!==u.rings&&(d=new T.K(0,f.getTransform(),u.rings.innerRadius,u.rings.outerRadius,n)),p=new eh.A(f.getTransform(),f.getBoundingRadius(),f.ringsUniforms,null,!1,[{getBoundingRadius:function(){return 0},getLight:function(){return s}}],n),i.attachPostProcess(p),b=new D.C(f.getTransform(),f.getBoundingRadius(),f.atmosphereUniforms,[s],n),i.attachPostProcess(b),null!==f.ringsUniforms&&(h=new ep.e(f.getTransform(),f.ringsUniforms,f.model,[s],n),i.attachPostProcess(h)),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e),f.updateMaterial([s],e);var t=o.getTransform().position.clone();o.getTransform().position=r.Vector3.Zero(),f.getTransform().position.subtractInPlace(t),s.position.subtractInPlace(t),null==d||d.update(i.globalPosition,a.objects.asteroids,e)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){e7(o,r,a,i,c,"next",e)}function c(e){e7(o,r,a,i,c,"throw",e)}i(void 0)})})()}var e8=n(57423),te=n(48353);function tt(){return{id:"sun",name:"Sun",type:eL.o.STAR,radius:695508e3,mass:1989e27,blackBodyTemperature:5778,axialTilt:eD.w1.ToRadians(7.25),siderealDaySeconds:2217888,orbit:{parentIds:[],semiMajorAxis:0,eccentricity:0,p:2,inclination:0,longitudeOfAscendingNode:0,argumentOfPeriapsis:0,initialMeanAnomaly:0},rings:null,seed:0}}var tn=n(47779),tr=n(33778),ta=n(13833),to=n(45825),ti=n(52482),tc=n(84981);function ts(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function tu(e,t){var n;return(n=function(){var n,a,o,i,c,s,u,l,f,d,p,b,h,m,y,v;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(g){switch(g.label){case 0:return(n=new tr.E(e)).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),[4,C(n)];case 1:return g.sent(),[4,(0,eK.L)()];case 2:return g.sent(),[4,(0,B.v)(n,t)];case 3:return a=g.sent(),i=(o=new P.Q(n)).getActiveCamera(),o.speed=66e6,i.maxZ*=66e6,[4,n.setActiveControls(o)];case 4:var w,T,R,S,A,x,E,I,O,k;return g.sent(),n.enableDepthRenderer(null,!1,!0),c=new to.z(G.Z.VERTEX_RESOLUTION),s=new tc.F,[4,ti.z.CreateAsync((w=tt(),T={id:"mercury",name:"Mercury",type:eL.o.TELLURIC_PLANET,radius:2439700,mass:3301e20,axialTilt:eD.w1.ToRadians(.034),siderealDaySeconds:5067014.4,waterAmount:0,temperature:{min:437,max:437},orbit:{parentIds:[w.id],semiMajorAxis:(0,te.Ub)(.38),eccentricity:.2056,p:2,inclination:eD.w1.ToRadians(7),longitudeOfAscendingNode:eD.w1.ToRadians(48.331),argumentOfPeriapsis:eD.w1.ToRadians(29.124),initialMeanAnomaly:0},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:0,continent_base_height:0,mountains_frequency:0},atmosphere:null,rings:null,clouds:null,ocean:null,seed:0},R={id:"venus",name:"Venus",type:eL.o.TELLURIC_PLANET,radius:6051800,mass:48e19,axialTilt:eD.w1.ToRadians(177.36),siderealDaySeconds:0x14064f0,waterAmount:0,temperature:{min:719,max:763},orbit:{parentIds:[w.id],semiMajorAxis:1082095e5,eccentricity:.0067,inclination:eD.w1.ToRadians(3.39),longitudeOfAscendingNode:eD.w1.ToRadians(76.68),argumentOfPeriapsis:eD.w1.ToRadians(54.88),initialMeanAnomaly:0,p:2},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:2e4,continent_base_height:0,mountains_frequency:5},rings:null,atmosphere:{pressure:(0,te.Mf)(93),greenHouseEffectFactor:.99},clouds:{layerRadius:6061800,smoothness:.7,specularPower:2,frequency:4,detailFrequency:12,coverage:0,sharpness:2.5,color:new e8.Wo(.8,.8,.1),worleySpeed:5e-4,detailSpeed:.003},ocean:null,seed:0},S={id:"earth",name:"Earth",type:eL.o.TELLURIC_PLANET,radius:6371e3,mass:5972e21,axialTilt:eD.w1.ToRadians(23.44),siderealDaySeconds:86400,waterAmount:1,temperature:{min:(0,te.P1)(-50),max:(0,te.P1)(50)},orbit:{parentIds:[w.id],semiMajorAxis:14959787e4,eccentricity:.0167,inclination:eD.w1.ToRadians(0),longitudeOfAscendingNode:eD.w1.ToRadians(0),argumentOfPeriapsis:eD.w1.ToRadians(114.20783),initialMeanAnomaly:0,p:2},terrainSettings:{continents_frequency:1,continents_fragmentation:.65,bumps_frequency:30,max_bump_height:1500,max_mountain_height:1e4,continent_base_height:19e3,mountains_frequency:360},rings:null,atmosphere:{pressure:(0,te.Mf)(1),greenHouseEffectFactor:.5},clouds:{layerRadius:6401e3,smoothness:.7,specularPower:2,frequency:4,detailFrequency:12,coverage:.5,sharpness:2.5,color:new e8.Wo(.8,.8,.8),worleySpeed:5e-4,detailSpeed:.003},ocean:{depth:1e4},seed:0},A={id:"moon",name:"Moon",type:eL.o.TELLURIC_SATELLITE,radius:1737100,mass:7342e19,axialTilt:eD.w1.ToRadians(6.68),siderealDaySeconds:2360620.8,waterAmount:0,temperature:{min:100,max:100},orbit:{parentIds:[S.id],semiMajorAxis:3844e5,eccentricity:.0549,inclination:eD.w1.ToRadians(5.145),longitudeOfAscendingNode:eD.w1.ToRadians(125.08),argumentOfPeriapsis:eD.w1.ToRadians(318.15),initialMeanAnomaly:0,p:2},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:0,continent_base_height:0,mountains_frequency:0},atmosphere:null,clouds:null,ocean:null,seed:0},x={id:"mars",name:"Mars",type:eL.o.TELLURIC_PLANET,radius:3389500,mass:64171e19,axialTilt:eD.w1.ToRadians(25.19),siderealDaySeconds:88732.79999999999,waterAmount:0,temperature:{min:(0,te.P1)(-140),max:(0,te.P1)(20)},orbit:{parentIds:[w.id],semiMajorAxis:2279392e5,eccentricity:.0934,inclination:eD.w1.ToRadians(1.85),longitudeOfAscendingNode:eD.w1.ToRadians(49.558),argumentOfPeriapsis:eD.w1.ToRadians(286.502),initialMeanAnomaly:0,p:2},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:0,continent_base_height:0,mountains_frequency:0},atmosphere:{pressure:(0,te.Mf)(.006),greenHouseEffectFactor:.1},rings:null,clouds:null,ocean:null,seed:0},E=e2([w.id]),I=e6([w.id]),O={id:"uranus",name:"Uranus",type:eL.o.GAS_PLANET,radius:25362e3,mass:8681e22,axialTilt:eD.w1.ToRadians(97.77),siderealDaySeconds:3600*17.24,orbit:{parentIds:[w.id],semiMajorAxis:287246327e4,eccentricity:.0565,inclination:eD.w1.ToRadians(.77),longitudeOfAscendingNode:eD.w1.ToRadians(74.229),argumentOfPeriapsis:eD.w1.ToRadians(96.541),initialMeanAnomaly:0,p:2},colorPalette:{type:"textured",textureId:"uranus"},atmosphere:{pressure:(0,te.Mf)(.1),greenHouseEffectFactor:.5},rings:{innerRadius:50724e3,outerRadius:62e6,type:"textured",textureId:"uranus"},seed:0},k={id:"neptune",name:"Neptune",type:eL.o.GAS_PLANET,radius:24622e3,mass:1024e23,axialTilt:eD.w1.ToRadians(28.32),siderealDaySeconds:57996,orbit:{parentIds:[w.id],semiMajorAxis:449506e7,eccentricity:.0086,inclination:eD.w1.ToRadians(1.77),longitudeOfAscendingNode:eD.w1.ToRadians(131.72169),argumentOfPeriapsis:eD.w1.ToRadians(265.646853),initialMeanAnomaly:0,p:2},colorPalette:{type:"textured",textureId:"neptune"},atmosphere:{pressure:(0,te.Mf)(.1),greenHouseEffectFactor:.7},rings:null,seed:0},{name:"Sol",coordinates:{starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},stellarObjects:[w],planets:[T,R,S,x,E,I,O,k],satellites:[A],anomalies:[],orbitalFacilities:[]}),s,a,n)];case 5:(u=g.sent()).initPositions(2,c),l=u.getStellarObjects()[0],o.getTransform().position=l.getTransform().position.add(new r.Vector3(0,1,-2).scaleInPlace(7*l.getBoundingRadius())),o.getTransform().lookAt(l.getTransform().position),(f=new tn.O(a.textures,n)).addCelestialBodies(u.getCelestialBodies(),u.getStellarObjects(),[u.starFieldBox.mesh]),d=new ta.V,p=!0,b=!1,h=void 0;try{for(m=u.getCelestialBodies()[Symbol.iterator]();!(p=(y=m.next()).done);p=!0)v=y.value,d.addObject(v)}catch(e){b=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(b)throw h}}return n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e),c.update(a),f.update(e),u.update(e,c),d.update(i)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){ts(o,r,a,i,c,"next",e)}function c(e){ts(o,r,a,i,c,"throw",e)}i(void 0)})})()}var tl=n(65681),tf=n(82659),td=n(58451),tp=n(47608);function tb(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function th(e,t){var n;return(n=function(){var n,a,o,i,c,s,u,l,f;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(n=new r.Scene(e)).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),[4,C(n)];case 1:return d.sent(),[4,(0,J.j)(n,t)];case 2:var p;return a=d.sent(),i=(o=new P.Q(n)).getActiveCamera(),o.speed=9e8,i.maxZ*=9e8,n.enableDepthRenderer(i,!1,!0),o.getTransform().setAbsolutePosition(new r.Vector3(0,2,-2).scaleInPlace(9e8)),o.getTransform().lookAt(r.Vector3.Zero()),(null!=(p=r.FreeCamera)&&"undefined"!=typeof Symbol&&p[Symbol.hasInstance]?!!p[Symbol.hasInstance](i):i instanceof p)&&i.setTarget(new r.Vector3(.001,0,.1)),i.attachControl(),c=new td.S(a.environment.milkyWay,n),s=tt(),u=new tp.U(s,a,n),l=new tf.X(u.mesh,u.volumetricLightUniforms,[c.mesh],n),i.attachPostProcess(l),f=new tl.i(u.getTransform(),u.getBoundingRadius(),u.getLight().diffuse,n),i.attachPostProcess(f),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e),u.updateMaterial(e);var t=o.getTransform().position.clone();o.getTransform().position=r.Vector3.Zero(),u.getTransform().position.subtractInPlace(t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tb(o,r,a,i,c,"next",e)}function c(e){tb(o,r,a,i,c,"throw",e)}i(void 0)})})()}var tm=n(47599),ty=n(19346);function tv(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function tg(e,t){var n;return(n=function(){var n,r,a,o,i,c,s,u,l,f,d;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(p){switch(p.label){case 0:return(n=new k.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return p.sent(),[4,(0,B.v)(n,t)];case 2:return r=p.sent(),(a=new P.Q(n)).speed=2e3,(o=a.getActiveCamera()).maxZ=1e5*G.Z.EARTH_RADIUS,o.attachControl(),i=e0.AU,a.getTransform().setAbsolutePosition(new S.P(0,2,-3).normalize().scaleInPlace(4e4)),a.getTransform().lookAt(S.P.Zero()),c={starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},s=new eY.Z((0,ez.D)()).getSystemGalacticPosition(c),u=tt(),(l=new tp.U(u,r.textures,n)).getTransform().position=new S.P(7,2,5).normalize().scaleInPlace(i),(f=(0,tm.z)("station",Math.random()*G.Z.SEED_HALF_RANGE,c,s,[u])).orbit.semiMajorAxis=i,d=new ty.f(f,new Map([[u,i]]),r,n),n.onBeforePhysicsObservable.add(function(){var t=e.getDeltaTime()/1e3;a.update(t);var n=o.globalPosition;d.update([l],n,t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tv(o,r,a,i,c,"next",e)}function c(e){tv(o,r,a,i,c,"throw",e)}i(void 0)})})()}var tw=n(46060),tP=n(70620),tT=n(80012);function tR(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function tS(e,t){var n;return(n=function(){var n,r,a,o,i,c,s,u,l,f,d,p,b;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(h){switch(h.label){case 0:return(n=new k.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return h.sent(),[4,(0,eK.L)()];case 2:return h.sent(),[4,(0,B.v)(n,t)];case 3:if(r=h.sent(),a=new V.cV,o=new ec.jH,i=new eY.Z((0,ez.D)()),void 0===(s=(c=tP.J.Default(i)).serializedSpaceships.shift()))throw Error("No spaceship found in player data");if(u=U.O.Deserialize(s,c.spareSpaceshipComponents,n,r,a),c.instancedSpaceships.push(u),(l=new es.y(u,n,a,o).thirdPersonCamera).attachControl(),n.activeCamera=l,f=i.fallbackSystem,d=new tw.t,p=new tT.L(c,d,i,a),void 0===(b=f.orbitalFacilities[0]))throw Error("No station found in system model");return p.setStation(b,[],c),p.setVisibility(!0),window.player=c,[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tR(o,r,a,i,c,"next",e)}function c(e){tR(o,r,a,i,c,"throw",e)}i(void 0)})})()}var tA=n(87158),tx=n(31760),tE=n(70618),tC=n(9852);function tI(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function tO(e,t){var n;return(n=function(){var t,n,r,a,o,i,c;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return[4,(0,eK.L)()];case 1:if(s.sent(),t=new eY.Z((0,ez.D)()),n=tP.J.Default(t),r=new tA.O(t),a=new V.cV,(o=new tE.s(n,e,r,t,a)).setCurrentStarSystem(t.fallbackSystem.coordinates),null!==(i=new URLSearchParams(window.location.search).get("systemCoordinates"))){if(null===(c=(0,tC.o)(decodeURIComponent(i))))throw Error("Invalid system coordinates json provided in URL parameters.");o.focusOnSystem(tx.f.parse(c),!0)}return[2,o.scene]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tI(o,r,a,i,c,"next",e)}function c(e){tI(o,r,a,i,c,"throw",e)}i(void 0)})})()}var tk=n(79405),t_=n(76929),tD=n(67810),tL=n(6478),tM=n(74667),tj=n(67313),tN=n(24660);function tB(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function tV(e,t){var n;return(n=function(){var n,r,a,o,i,c,s,u,l;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(f){switch(f.label){case 0:return[4,(0,eK.L)()];case 1:var d,p,b,h,m,y,v;return f.sent(),n=new eY.Z((d={starSectorX:0,starSectorY:1,starSectorZ:0,localX:0,localY:0,localZ:0},(p=(0,t_.dD)("star0",420,"Weierstrass",[])).blackBodyTemperature=5778,(b=(0,tD.$)("hecate",253,"H\xe9cate",[p])).temperature.min=(0,te.P1)(-40),b.temperature.max=(0,te.P1)(30),b.orbit.semiMajorAxis=21e3*b.radius,h=(0,tm.z)("hecate->station",0,d,S.P.Zero(),[b]),(m=(0,tL.u)("hecate->manaleth",23,"Manaleth",[b])).orbit.inclination=eD.w1.ToRadians(45),m.orbit.semiMajorAxis=(0,tk.at)(m.siderealDaySeconds,b.mass),null!==(y=(0,tD.$)("ares",.3725,"Ares",[p])).clouds&&(y.clouds.coverage=1),null!==y.atmosphere&&(y.atmosphere.pressure=.5*e0.z2),y.orbit.semiMajorAxis=25100*b.radius,(v=(0,ed.L)("andromaque",.28711440474126226,"Andromaque",[p])).orbit.semiMajorAxis=25300*b.radius,v.orbit.eccentricity=.8,{name:"Alpha Testis",coordinates:d,stellarObjects:[p],planets:[b,y,v],satellites:[m],anomalies:[],orbitalFacilities:[h]})),r=tP.J.Default(n),a=new tw.t,o=new V.cV,i=new ec.jH,(c=new tr.E(e)).useRightHandedSystem=!0,[4,C(c)];case 2:return s=f.sent(),[4,(0,B.v)(c,t)];case 3:return u=f.sent(),[4,(l=new tM.p(c,r,e,s,a,n,o,i,u)).resetPlayer()];case 4:return f.sent(),[4,l.switchToSpaceshipControls()];case 5:return f.sent(),[4,l.loadStarSystem(n.fallbackSystem)];case 6:return f.sent(),l.initStarSystem(),(0,tN.pl)(l.getSpaceshipControls(),l.getStarSystem().getStellarObjects()[0],l.getStarSystem()),c.onBeforeRenderObservable.add(function(){var e=c.getEngine().getDeltaTime()/1e3;(0,tj.BX)(e)}),[2,l.scene]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){tB(o,r,a,i,c,"next",e)}function c(e){tB(o,r,a,i,c,"throw",e)}i(void 0)})})()}var tU=n(43011),tZ=n(14280),tG=n(17769),tH=n(2059);function tW(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function tF(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){tW(o,r,a,i,c,"next",e)}function c(e){tW(o,r,a,i,c,"throw",e)}i(void 0)})}}function tq(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function tz(e,t){return tF(function(){var n,r,a,o,i,c,s;return tq(this,function(u){switch(u.label){case 0:return(n=new k.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return u.sent(),[4,(0,J.j)(n,t)];case 2:return r=u.sent(),(a=new P.Q(n)).speed=2e6,(o=a.getActiveCamera()).attachControl(),n.activeCamera=o,n.enableDepthRenderer(o,!1,!0),new td.S(r.environment.milkyWay,n),i=(0,tU.s)("blackHole",42,"Black Hole Demo",[]),(c=new tG.s(i,r.environment.milkyWay,n)).getTransform().position=new S.P(0,-.2,1).scaleInPlace(20*c.getRadius()),s=new tH.z(c.getTransform(),c.blackHoleUniforms,n),o.attachPostProcess(s),o.maxZ=1e12,a.getTransform().lookAt(c.getTransform().position),n.onBeforePhysicsObservable.add(function(){var t=e.getDeltaTime()/1e3,n=a.update(t);(0,tZ.Iu)(a.getTransform(),n.negate()),(0,tZ.Iu)(c.getTransform(),n.negate()),s.update(t)}),document.addEventListener("click",function(){return tF(function(){var e;return tq(this,function(t){switch(t.label){case 0:if(null!==document.pointerLockElement)return[3,2];return[4,null==(e=a.getActiveCamera().getEngine().getRenderingCanvas())?void 0:e.requestPointerLock()];case 1:t.sent(),t.label=2;case 2:return[2]}})})()}),[2,n]}})})()}var tY=n(73529),tQ=n(16890),tX=n(62632),tK=n(44356);function t$(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function tJ(e,t){var n;return(n=function(){var n,a,o,i,c,s,u,l,f;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(n=new k.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return d.sent(),[4,(0,J.j)(n,t)];case 2:return a=d.sent(),(o=new P.Q(n)).speed=2e3,(i=o.getActiveCamera()).attachControl(),n.activeCamera=i,n.enableDepthRenderer(i,!1,!0),c=(0,tY.L)("neutronStar",456,"Neutron Star Demo",[]),(s=new tX.R(c,a,n)).getTransform().position=new S.P(0,0,1).scaleInPlace(2e6*s.getRadius()),u=new tf.X(s.mesh,s.volumetricLightUniforms,[],n),i.attachPostProcess(u),l=new tQ.J(s.getTransform(),s.getRadius(),s.model.dipoleTilt,n),i.attachPostProcess(l),f=new tl.i(s.getTransform(),s.getRadius(),(0,tK.y)(c.blackBodyTemperature),n),i.attachPostProcess(f),i.maxZ=1e12,o.getTransform().lookAt(s.getTransform().position),n.onBeforePhysicsObservable.add(function(){var t=e.getDeltaTime()/1e3,n=o.update(t);s.getTransform().rotate(r.Axis.Y,2*Math.PI*t/c.siderealDaySeconds),(0,tZ.Iu)(o.getTransform(),n.negate()),(0,tZ.Iu)(s.getTransform(),n.negate()),l.update(t)}),[2,n]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){t$(o,r,a,i,c,"next",e)}function c(e){t$(o,r,a,i,c,"throw",e)}i(void 0)})})()}var t0=n(19577),t1=n(86950),t2=n(24432),t3=n(16050),t5=n(31328);function t4(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function t6(e,t){var n;return(n=function(){var t,n,a,o;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:return t=new k.x(e),(n=new r.FreeCamera("camera1",new r.Vector3(0,5,-10),t)).setTarget(r.Vector3.Zero()),n.attachControl(),[4,(0,eK.L)()];case 1:switch(i.sent(),a=new t0.b(new V.cV),document.body.appendChild(a.root),null!=(o=new URLSearchParams(window.location.search).get("tutorial"))?o:"flight"){case"flight":return[3,2];case"fuelScoop":return[3,4];case"stationLanding":return[3,6];case"starMap":return[3,8]}return[3,10];case 2:return[4,a.setTutorial(new t1.d)];case 3:case 5:case 7:case 9:return i.sent(),[3,10];case 4:return[4,a.setTutorial(new t2.L)];case 6:return[4,a.setTutorial(new t5.b)];case 8:return[4,a.setTutorial(new t3.D)];case 10:return[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){t4(o,r,a,i,c,"next",e)}function c(e){t4(o,r,a,i,c,"throw",e)}i(void 0)})})()}var t7=n(71351);function t9(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function t8(e,t){var n;return(n=function(){var t,n,a,o,i;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(c){switch(c.label){case 0:return(t=new k.x(e)).useRightHandedSystem=!0,a=(n=new P.Q(t)).getActiveCamera(),[4,C(t)];case 1:return c.sent(),(o=r.MeshBuilder.CreateBox("Anchor",{size:10},t)).position.z=200,(i=new t7.u(t)).setThrottle(1),i.getTransform().parent=o,t.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;i.update(t),n.update(t),o.position.z+=2e3*t,n.getTransform().position.z+=2e3*t;var r=a.globalPosition;o.position.subtractInPlace(r),n.getTransform().position.subtractInPlace(r)}),[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){t9(o,r,a,i,c,"next",e)}function c(e){t9(o,r,a,i,c,"throw",e)}i(void 0)})})()}function ne(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function nt(e,t){var n;return(n=function(){var t,n,c,l,p;function m(n){t.cameras.forEach(function(e){return e.attachPostProcess(n)}),t.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(n)}),t.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;n.update(t)})}return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(g){switch(g.label){case 0:var w,P,T,R,A,x,E,C,I,O;return((t=new k.x(e)).useRightHandedSystem=!0,n=new URLSearchParams(window.location.search),(c=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5,S.P.Zero(),t)).attachControl(),c.lowerRadiusLimit=.5,c.wheelPrecision*=100,c.minZ=.01,l=t.enableDepthRenderer(null,!1,!0),"mandelbulb"===(p=n.get("fractal")))?(w=(0,f.i)("mandelbulb",1e5*Math.random(),"XR Anomaly",[]),(P=new i.W(w,t)).getTransform().scalingDeterminant=1/4e5,m(new d.C(P.getTransform(),P.getBoundingRadius(),w,t,[])),P.getTransform()):"julia"===p?(T=(0,a.c)("julia",1e5*Math.random(),"XR Anomaly",[]),(R=new i.W(T,t)).getTransform().scalingDeterminant=1/4e5,m(new o.v(R.getTransform(),R.getBoundingRadius(),T.accentColor,t,[])),R.getTransform()):"mandelbox"===p?(A=(0,s.i)("mandelbox",1e5*Math.random(),"XR Anomaly",[]),(x=new i.W(A,t)).getTransform().scalingDeterminant=1e-5,m(new u.m(x.getTransform(),x.getBoundingRadius(),A,t,[])),x.getTransform()):"pyramid"===p?(E=(0,y.q)("sierpinski",1e5*Math.random(),"XR Anomaly",[]),(C=new i.W(E,t)).getTransform().scalingDeterminant=1e-5,m(new v.U(C.getTransform(),C.getBoundingRadius(),E,t,[])),C.getTransform()):(I=(0,b.$)("menger",1e5*Math.random(),"XR Anomaly",[]),(O=new i.W(I,t)).getTransform().scalingDeterminant=1e-5,m(new h.x(O.getTransform(),O.getBoundingRadius(),I,t,[])),O.getTransform()),[4,t.createDefaultXRExperienceAsync()];case 1:return g.sent().baseExperience.camera.setTransformationFromNonVRCamera(c,!0),t.onBeforeCameraRenderObservable.add(function(e){l.getDepthMap().activeCamera=e}),[2,t]}})},function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){ne(o,r,a,i,c,"next",e)}function c(e){ne(o,r,a,i,c,"throw",e)}i(void 0)})})()}var nn=function(){var e;function t(){var e;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");e=new Map([["orbitalDemo",eZ],["tunnel",ek],["automaticLanding",W],["debugAssets",eo],["spaceStation",tg],["spaceStationUI",tS],["xr",nt],["flightDemo",ef],["neutronStar",tJ],["character",K],["starMap",tO],["tutorial",t6],["asteroidField",O],["starSystemView",tV],["rings",eW],["sierpinski",g],["mandelbox",l],["mandelbulb",p],["juliaSet",c],["mengerSponge",m],["atmosphericScattering",L],["darkKnight",en],["blackHole",tz],["gasPlanet",eg],["jupiter",e5],["saturn",e9],["sol",tu],["grass",ex],["warpTunnel",t8],["saveLoadingPanelContent",eJ],["sun",th]]),"map"in this?Object.defineProperty(this,"map",{value:e,enumerable:!0,configurable:!0,writable:!0}):this.map=e}return e=[{key:"register",value:function(e,t){this.map.set(e,t)}},{key:"get",value:function(e){var t;return null!=(t=this.map.get(e))?t:ei}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()},4761:function(e,t,n){n.d(t,{bM:()=>o,eU:()=>i,jH:()=>c});var r,a,o=((r={})[r.CHARLOTTE=0]="CHARLOTTE",r),i=((a={})[a.INITIATING_PLANETARY_LANDING=0]="INITIATING_PLANETARY_LANDING",a[a.LANDING_REQUEST_GRANTED=1]="LANDING_REQUEST_GRANTED",a[a.LANDING_COMPLETE=2]="LANDING_COMPLETE",a[a.MISSION_COMPLETE=3]="MISSION_COMPLETE",a[a.NEW_DISCOVERY=4]="NEW_DISCOVERY",a[a.CANNOT_ENGAGE_WARP_DRIVE=5]="CANNOT_ENGAGE_WARP_DRIVE",a[a.WARP_DRIVE_EMERGENCY_SHUT_DOWN=6]="WARP_DRIVE_EMERGENCY_SHUT_DOWN",a[a.WARP_DRIVE_DISENGAGED=7]="WARP_DRIVE_DISENGAGED",a[a.ENGAGING_WARP_DRIVE=8]="ENGAGING_WARP_DRIVE",a[a.FUEL_SCOOPING=9]="FUEL_SCOOPING",a[a.FUEL_SCOOPING_COMPLETE=10]="FUEL_SCOOPING_COMPLETE",a),c=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"sayNow",value:function(){}},{key:"enqueueSay",value:function(){}},{key:"update",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()},48353:function(e,t,n){n.d(t,{Kz:()=>i,Mf:()=>u,P1:()=>c,Ub:()=>s,XX:()=>o,fT:()=>a});var r=n(96509);function a(e){return e/r.JR}function o(e){return e*r.JR}function i(e){return e/r.C}function c(e){return e+273.15}function s(e){return e*r.AU}function u(e){return 1e5*e}},53020:function(e,t,n){n.d(t,{Z:()=>u,n:()=>l});var r=n(4046),a=n(57423),o=n(39596),i=n(6562);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(e,t,n,i){return(0,o.NK)(e,{points:s(t),updatable:!1},{color:new a.Wo(n.r,n.g,n.b),width:5,colorMode:r.VL.COLOR_MODE_SET,sizeAttenuation:!0},i)},l=function(e,t,n,r){var o=new a.HE(n.r,n.g,n.b,1),c=t.map(function(){return o});return(0,i.nL)(e,{points:s(t),colors:c,updatable:!1},r)}},54755:function(e,t,n){n.d(t,{k6:()=>o,cV:()=>i});var r,a=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"play",value:function(){}},{key:"setVolume",value:function(){}},{key:"setMaskFactor",value:function(){}},{key:"getMask",value:function(){return 0}},{key:"dispose",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}(),o=((r={})[r.CLICK=0]="CLICK",r[r.HOVER=1]="HOVER",r[r.SUCCESS=2]="SUCCESS",r[r.ERROR=3]="ERROR",r[r.WARNING=4]="WARNING",r[r.INFO=5]="INFO",r[r.ENABLE_ORBIT_DISPLAY=6]="ENABLE_ORBIT_DISPLAY",r[r.DISABLE_ORBIT_DISPLAY=7]="DISABLE_ORBIT_DISPLAY",r[r.TARGET_LOCK=8]="TARGET_LOCK",r[r.TARGET_UNLOCK=9]="TARGET_UNLOCK",r[r.ITINERARY_COMPUTED=10]="ITINERARY_COMPUTED",r[r.OPEN_PAUSE_MENU=11]="OPEN_PAUSE_MENU",r[r.ENABLE_WARP_DRIVE=12]="ENABLE_WARP_DRIVE",r[r.DISABLE_WARP_DRIVE=13]="DISABLE_WARP_DRIVE",r[r.ACCELERATING_WARP_DRIVE=14]="ACCELERATING_WARP_DRIVE",r[r.DECELERATING_WARP_DRIVE=15]="DECELERATING_WARP_DRIVE",r[r.HYPER_SPACE=16]="HYPER_SPACE",r[r.THRUSTER=17]="THRUSTER",r),i=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"playNow",value:function(){}},{key:"enqueuePlay",value:function(){}},{key:"createInstance",value:function(){return new a}},{key:"freeInstance",value:function(){}},{key:"setInstanceMask",value:function(){}},{key:"update",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()},69427:function(e,t,n){n.d(t,{o:()=>r});function r(e){try{return window.btoa(encodeURIComponent(e))}catch(e){return null}}},70104:function(e,t,n){n.d(t,{vG:()=>d});var r=n(85737),a=n(16585),o=n(76473),i=(0,a.c)(o.Z.POWER_PLAY_SEED),c=0,s=(0,r.makeNoise3D)(function(){return i(c++)}),u=(0,a.c)(o.Z.POWER_PLAY_SEED+598),l=0,f=(0,r.makeNoise3D)(function(){return u(l++)});function d(e){var t,n;return{materialistSpiritualist:(t=e.x,.5*s(.2*t,.2*e.y,.2*e.z)+.5),capitalistCommunist:(n=e.x,.5*f(.2*n,.2*e.y,.2*e.z)+.5)}}},81469:function(e,t,n){n.d(t,{V:()=>a,n:()=>o});var r=n(26980),a=r.z.object({type:r.z.literal("discoveryScanner"),size:r.z.number(),quality:r.z.number()});function o(e){return{relativeRange:e.size+e.quality/10}}},91010:function(e,t,n){n.d(t,{P8:()=>a,Wl:()=>i,ZX:()=>o});var r=n(61834);function a(e,t){for(var n=Math.floor(e.length/16),r=Math.floor(n/t),a=new Float32Array(16*r),o=0;o<r;o++){var i=16*Math.floor(Math.random()*n);a.set(e.subarray(i,i+16),16*o)}return a}function o(e,t,n,a){for(var o=new Float32Array(n*n*16),i=t/n,c=0,s=0;s<n;s++)for(var u=0;u<n;u++){var l=a()*i,f=a()*i,d=e.x+s*i-t/2+l,p=e.z+u*i-t/2+f,b=.7+.6*a();r.y3.Compose(new r.P(b,b,b),r._f.RotationAxis(r.P.Up(),2*a()*Math.PI),new r.P(d,0,p)).copyToArray(o,16*c),c+=1}return o}function i(e,t,n,a){if(void 0===e[0]||void 0===e[1]||void 0===e[2]||void 0===e[3]||void 0===e[4]||void 0===e[5]||void 0===e[6]||void 0===e[7]||void 0===e[8]||void 0===e[9]||void 0===e[10]||void 0===e[11]||void 0===e[12]||void 0===e[13]||void 0===e[14]||void 0===e[15])throw Error("Matrix is not defined");t.set(e[12],e[13],e[14]);var o=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);a.set(o,o,o);var i=r.y3.Identity();i.setRowFromFloats(0,e[0]/o,e[1]/o,e[2]/o,0),i.setRowFromFloats(1,e[4]/o,e[5]/o,e[6]/o,0),i.setRowFromFloats(2,e[8]/o,e[9]/o,e[10]/o,0),i.setRowFromFloats(3,0,0,0,1),n.copyFrom(r._f.FromRotationMatrix(i))}},91307:function(e,t,n){function r(e,t){var n=[];if(e.children.forEach(function(e,r){if("x"!==r&&"y"!==r){var a,o,i=e.name;i=i.replace("key:",""),i=null!=(o=null==t||null==(a=t.get(i))?void 0:a.toUpperCase())?o:i,n.push([r,i])}}),void 0===n[0]||void 0===n[1]||void 0===n[2]||void 0===n[3])throw Error("DPadComposite keys are undefined");return[n[2],n[0],n[3],n[1]]}function a(e,t){var n=[];return e.children.forEach(function(e,r){var a,o,i=e.name;i=i.replace("key:",""),i=null!=(o=null==t||null==(a=t.get(i))?void 0:a.toUpperCase())?o:i,n.push([r,i])}),n}function o(e,t){return e.action.bindings.map(function(e){var n,r,a,o;return n=e.control,o=(o=n.name).replace("key:",""),o=null!=(a=null==t||null==(r=t.get(o))?void 0:r.toUpperCase())?a:o})}n.d(t,{C9:()=>a,cs:()=>r,gW:()=>o})},91822:function(e,t,n){n.d(t,{Z:()=>r});function r(e,t,n){return(0x466f45d*e^0x127409f*t^0x4f9ffb7*n)%1e9}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,(()=>{var e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},o=n=>n.map(n=>{if(null!==n&&"object"==typeof n){if(n[e])return n;if(n.then){var o=[];o.d=0,n.then(e=>{i[t]=e,a(o)},e=>{i[r]=e,a(o)});var i={};return i[e]=e=>e(o),i}}var c={};return c[e]=function(){},c[t]=n,c});n.a=(n,i,c)=>{c&&((s=[]).d=-1);var s,u,l,f,d=new Set,p=n.exports,b=new Promise((e,t)=>{f=t,l=e});b[t]=p,b[e]=e=>{s&&e(s),d.forEach(e),b.catch(function(){})},n.exports=b,i(n=>{u=o(n);var a,i=()=>u.map(e=>{if(e[r])throw e[r];return e[t]}),c=new Promise(t=>{(a=()=>t(i)).r=0;var n=e=>e!==s&&!d.has(e)&&(d.add(e),e&&!e.d&&(a.r++,e.push(a)));u.map(t=>t[e](n))});return a.r?c:i()},e=>(e?f(b[r]=e):l(p),a(s))),s&&s.d<0&&(s.d=0)}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.k=e=>""+e+".css",n.u=e=>""+e+"."+({1009:"4e09f2eb6fb572e7",1108:"00fe7425e8dfa7de",1246:"a6d8767a6ddf1d6c",1413:"c91e9f77aa843175",1420:"ca81dd390692d997",1523:"d452cee24142d238",1619:"cedaa2bd44b3b853",1667:"f165f5c1f8d21272",1670:"5bb47da53daa6519",1730:"6f3b433e2b9413b2",178:"04b5c4f07b354096",1801:"fa674c3ff688a69b",1806:"ece43cee92dba8ed",188:"565063ee0612af57",1935:"b48077fb07edbbbe",1952:"f3927659c9d3a9fb",1953:"097da047255cecd4",1966:"feebb9a8c1e1ccec",1968:"b98704fa70c3d48c",2029:"f72c675b7f77adf6",2070:"9574178ac62600b9",2219:"2c3f420ec8a7f627",2400:"2cec4bd956fac0e4",2508:"e735353dd2f7121a",2524:"59e480ff430393f7",2751:"3547cdd721fdb4e7",276:"20463a0f6b54768c",2770:"fa3dfda4da92b40e",2814:"92a9ea152015ca79",2834:"d5d3d60e73b8b6b2",2851:"82f306a3dc3e531f",287:"0921cdd649d45e62",2886:"ba81cdcee8da8d67",29:"d05953d40e6c6bdd",2907:"21dccbfda50f02f1",2927:"1cbf6925f559598d",2951:"fe0d062f14355e20",2979:"bedada3d8734d327",3034:"56aacf35db44363a",3145:"ef866cba8c543650",3332:"3f06ec03e72e5e06",34:"a3fa484be544439e",3536:"5b7d8d76c9e35c12",3674:"d80141f33fb3d9a8",3722:"ced176c80adeaf11",3742:"16c2bac33b1752f5",3745:"cf54c8eab2e4b2bf",3798:"bef4813d59f74f9d",3833:"06ab04ec1666faa5",3845:"d27dabaf9a64c1fe",395:"c345047896c9a2a0",4003:"98afa796a3b45df9",4129:"0bfd3a3e2d044e3b",4164:"8864c3f24a2d80be",4280:"92b42bdca365ff81",4296:"d025fb75a4e0be15",4309:"6c2a6a517e8542fc",4441:"18fd7745b7fae304",4549:"065f54f53200d271",4556:"be6fd477d7e1d5b8",4584:"233beaeaca4507ec",4636:"619990781b1fa2c8",4658:"5215752f114ab92f",4751:"b96ee6f2953f8158",477:"f4d4c9ef3f358999",4774:"fff0cb2f4591e4d0",4820:"3b7f21bdb09f53b5",4823:"5a15113e9aced178",5010:"d74c8613c8db8943",5038:"db4923baee4bdba9",5185:"23b74d5de79b65f4",5221:"18e9d185b1d01f07",5381:"b2be4284de0d1cce",5551:"c2abb4cdb2d8a5bc",5603:"258b8561a6464435",5630:"42bfe7c514e6e1ff",5652:"4308bd36c3d07b44",571:"a95f759b48263f06",579:"42fa556d70e592ed",5815:"5ac8ff84307b750d",5915:"314a98d3154a8173",5960:"3d758248c1eff04a",5988:"e6a7e155e4277968",5989:"5e039e22c64b3c75",5997:"cd981479dddfed58",600:"f8794fd343eb042c",6150:"09fbe177dd9e55a2",6240:"4c4ab50553285ee6",6248:"ed24a4a08993849a",6253:"98bd5534c6f2547d",6264:"14baeb4f12c1a6bd",6342:"f2776df4a469b38a",6378:"f0d7c4209dde3fc3",65:"30e1a03fd2992306",6500:"a7d72979fd2f6892",6550:"b8f7074cf83e5b4b",6551:"33fef526a71c11bc",66:"3dfdcd75e7aeea66",6645:"101350041eaf8c0e",67:"34bf38ec8f16371a",6903:"5bcc3b98827507b5",7044:"c29afde9765c10c2",7081:"f54bab8775979f7c",712:"9cc0f3aef7661a43",7122:"9b2a9c0b4d7719cf",7126:"ccaf29bfbf3aac92",713:"e51b368f0e2eb3cf",7141:"36798d8f72c2e56e",7143:"2ec7bcabc113582c",7291:"3eab4a3a855b9bf0",7311:"8bed6f2771abb6b3",7590:"02186071a278da7b",761:"92fb5c010539fa69",7809:"3aaec01bfa7b82d4",7843:"04e51aecba961339",7874:"fe0133e2443eb483",7903:"7a40885624204d09",7927:"8bc67d46817ebf12",7971:"affb0e13f60e979c",8097:"20f9610fc35097ce",8197:"f804e1d75f2a08f4",8204:"30b0c2aa4b89d82e",8210:"b8b5372c25f2ddc7",8314:"2c4a8ca3c207cc43",8321:"93eff49fd1c17cf3",833:"a968828739cec5a4",8497:"6d96d201a74d5ffd",8561:"badeebfde897a73b",8631:"ff5652adfa8e6ded",8632:"ac33ba04fb1c3888",8661:"1b45ba22d96561a9",8775:"ede08a2083b775ed",8854:"95057da7267ee458",8953:"c32f83dbd9a61dff",8975:"8f869395af72ed17",8978:"388f04717647405b",9068:"4c1df3aa9074ee9d",9075:"5fd8ae1fd8118631",9123:"9b62bda9b2bf6bbc",9190:"57be96b2ea48c611",9249:"4acc99b99a61d136",9256:"3745335b0d834476",9276:"c31f9160fcec626c",9385:"eeba2f32ece0dd7b",9474:"b5ca8e84c57f37b7",9616:"e42351c8ee1d64fb",9646:"bff583100e5a5b5c",974:"d475d90651a484f7",9749:"0117bee4d54a979b",975:"07939f26ed1e9130",9824:"188c489e64174b2d",9828:"06179aceb5726924",9870:"e00f89104b331c8a",9999:"34242539546a7587"})[e]+".js",n.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="cosmos-journeyer:";n.l=function(r,a,o,i){if(e[r])return void e[r].push(a);if(void 0!==o)for(var c,s,u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var f=u[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+o){c=f;break}}c||(s=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.setAttribute("data-webpack",t+o),c.src=r),e[r]=[a];var d=function(t,n){c.onerror=c.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],c.parentNode&&c.parentNode.removeChild(c),a&&a.forEach(function(e){return e(n)}),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=d.bind(null,c.onerror),c.onload=d.bind(null,c.onload),s&&document.head.appendChild(c)}})(),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];n.O=(t,r,a,o)=>{if(r){o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[r,a,o];return}for(var c=1/0,i=0;i<e.length;i++){for(var[r,a,o]=e[i],s=!0,u=0;u<r.length;u++)(!1&o||c>=o)&&Object.keys(n.O).every(e=>n.O[e](r[u]))?r.splice(u--,1):(s=!1,o<c&&(c=o));if(s){e.splice(i--,1);var l=a();void 0!==l&&(t=l)}}return t}})(),n.rv=()=>"1.3.13",(()=>{n.g.importScripts&&(e=n.g.location+"");var e,t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=r[a--].src}if(!e)throw Error("Automatic publicPath is not supported in this browser");n.p=e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")})(),(()=>{var e={21:0},t="cosmos-journeyer",r=(t,n)=>{e[n]=0},a="data-webpack-loading",o=function(e,r,o,i,c){var s,u,l="chunk-"+e;if(!i){for(var f=document.getElementsByTagName("link"),d=0;d<f.length;d++){var p=f[d],b=p.getAttribute("href")||p.href;if(b&&!b.startsWith(n.p)&&(b=n.p+(b.startsWith("/")?b.slice(1):b)),"stylesheet"==p.rel&&(b&&b.startsWith(r)||p.getAttribute("data-webpack")==t+":"+l)){s=p;break}}if(!o)return s}s||(u=!0,s=document.createElement("link"),n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+":"+l),c&&s.setAttribute("fetchpriority",c),s.setAttribute(a,1),s.rel="stylesheet",s.href=r);var h=function(e,t){if(s.onerror=s.onload=null,s.removeAttribute(a),clearTimeout(m),t&&"load"!=t.type&&s.parentNode.removeChild(s),o(t),e)return e(t)};if(s.getAttribute(a)){var m=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload)}else h(void 0,{type:"load",target:s});return i&&i.getAttribute("fetchpriority")&&s.setAttribute("fetchpriority",i.getAttribute("fetchpriority")),i?document.head.insertBefore(s,i):u&&document.head.appendChild(s),s};r(n.m,0,"21"),n.f.css=function(t,a,i){var c=n.o(e,t)?e[t]:void 0;if(0!==c)if(c)a.push(c[2]);else if(21==t){var s=new Promise(function(n,r){c=e[t]=[n,r]});a.push(c[2]=s);var u=n.p+n.k(t),l=Error();o(t,u,function(a){if(n.o(e,t)&&(0!==(c=e[t])&&(e[t]=void 0),c))if("load"!==a.type){var o=a&&a.type,i=a&&a.target&&a.target.src;l.message="Loading css chunk "+t+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,c[1](l)}else r(n.m,t),c[0]()},void 0,i)}else e[t]=0}})(),(()=>{n.b=document.baseURI||self.location.href;var e={8308:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=o);var i=n.p+n.u(t),c=Error();n.l(i,function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,a[1](c)}},"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[i,c,s]=r,u=0;if(i.some(t=>0!==e[t])){for(a in c)n.o(c,a)&&(n.m[a]=c[a]);if(s)var l=s(n)}for(t&&t(r);u<i.length;u++)o=i[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(l)},r=globalThis.webpackChunkcosmos_journeyer=globalThis.webpackChunkcosmos_journeyer||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.ruid="bundler=rspack@1.3.13";var r=n.O(void 0,["9050","7384","907","4359","5134","4874","1633","52","3112","7227","482","3759","3821","3829","9248","5725","4400","4055","3826","7650","8550","21"],function(){return n(18722)});r=n.O(r)})();